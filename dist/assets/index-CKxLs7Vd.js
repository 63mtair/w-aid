(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();var $f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bh={exports:{}},Ol={},wh={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var si=Symbol.for("react.element"),Uf=Symbol.for("react.portal"),Zf=Symbol.for("react.fragment"),Hf=Symbol.for("react.strict_mode"),Vf=Symbol.for("react.profiler"),Wf=Symbol.for("react.provider"),qf=Symbol.for("react.context"),Gf=Symbol.for("react.forward_ref"),Kf=Symbol.for("react.suspense"),Qf=Symbol.for("react.memo"),Yf=Symbol.for("react.lazy"),lm=Symbol.iterator;function Xf(t){return t===null||typeof t!="object"?null:(t=lm&&t[lm]||t["@@iterator"],typeof t=="function"?t:null)}var _h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kh=Object.assign,Sh={};function Jr(t,s,r){this.props=t,this.context=s,this.refs=Sh,this.updater=r||_h}Jr.prototype.isReactComponent={};Jr.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};Jr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ch(){}Ch.prototype=Jr.prototype;function rd(t,s,r){this.props=t,this.context=s,this.refs=Sh,this.updater=r||_h}var ad=rd.prototype=new Ch;ad.constructor=rd;kh(ad,Jr.prototype);ad.isPureReactComponent=!0;var om=Array.isArray,Ph=Object.prototype.hasOwnProperty,id={current:null},Lh={key:!0,ref:!0,__self:!0,__source:!0};function Th(t,s,r){var i,o={},c=null,u=null;if(s!=null)for(i in s.ref!==void 0&&(u=s.ref),s.key!==void 0&&(c=""+s.key),s)Ph.call(s,i)&&!Lh.hasOwnProperty(i)&&(o[i]=s[i]);var h=arguments.length-2;if(h===1)o.children=r;else if(1<h){for(var x=Array(h),j=0;j<h;j++)x[j]=arguments[j+2];o.children=x}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)o[i]===void 0&&(o[i]=h[i]);return{$$typeof:si,type:t,key:c,ref:u,props:o,_owner:id.current}}function Jf(t,s){return{$$typeof:si,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function ld(t){return typeof t=="object"&&t!==null&&t.$$typeof===si}function eg(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var cm=/\/+/g;function Co(t,s){return typeof t=="object"&&t!==null&&t.key!=null?eg(""+t.key):s.toString(36)}function Vi(t,s,r,i,o){var c=typeof t;(c==="undefined"||c==="boolean")&&(t=null);var u=!1;if(t===null)u=!0;else switch(c){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case si:case Uf:u=!0}}if(u)return u=t,o=o(u),t=i===""?"."+Co(u,0):i,om(o)?(r="",t!=null&&(r=t.replace(cm,"$&/")+"/"),Vi(o,s,r,"",function(j){return j})):o!=null&&(ld(o)&&(o=Jf(o,r+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(cm,"$&/")+"/")+t)),s.push(o)),1;if(u=0,i=i===""?".":i+":",om(t))for(var h=0;h<t.length;h++){c=t[h];var x=i+Co(c,h);u+=Vi(c,s,r,x,o)}else if(x=Xf(t),typeof x=="function")for(t=x.call(t),h=0;!(c=t.next()).done;)c=c.value,x=i+Co(c,h++),u+=Vi(c,s,r,x,o);else if(c==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return u}function Pi(t,s,r){if(t==null)return t;var i=[],o=0;return Vi(t,i,"","",function(c){return s.call(r,c,o++)}),i}function tg(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var Vt={current:null},Wi={transition:null},sg={ReactCurrentDispatcher:Vt,ReactCurrentBatchConfig:Wi,ReactCurrentOwner:id};function Ih(){throw Error("act(...) is not supported in production builds of React.")}Oe.Children={map:Pi,forEach:function(t,s,r){Pi(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return Pi(t,function(){s++}),s},toArray:function(t){return Pi(t,function(s){return s})||[]},only:function(t){if(!ld(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Oe.Component=Jr;Oe.Fragment=Zf;Oe.Profiler=Vf;Oe.PureComponent=rd;Oe.StrictMode=Hf;Oe.Suspense=Kf;Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sg;Oe.act=Ih;Oe.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=kh({},t.props),o=t.key,c=t.ref,u=t._owner;if(s!=null){if(s.ref!==void 0&&(c=s.ref,u=id.current),s.key!==void 0&&(o=""+s.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(x in s)Ph.call(s,x)&&!Lh.hasOwnProperty(x)&&(i[x]=s[x]===void 0&&h!==void 0?h[x]:s[x])}var x=arguments.length-2;if(x===1)i.children=r;else if(1<x){h=Array(x);for(var j=0;j<x;j++)h[j]=arguments[j+2];i.children=h}return{$$typeof:si,type:t.type,key:o,ref:c,props:i,_owner:u}};Oe.createContext=function(t){return t={$$typeof:qf,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Wf,_context:t},t.Consumer=t};Oe.createElement=Th;Oe.createFactory=function(t){var s=Th.bind(null,t);return s.type=t,s};Oe.createRef=function(){return{current:null}};Oe.forwardRef=function(t){return{$$typeof:Gf,render:t}};Oe.isValidElement=ld;Oe.lazy=function(t){return{$$typeof:Yf,_payload:{_status:-1,_result:t},_init:tg}};Oe.memo=function(t,s){return{$$typeof:Qf,type:t,compare:s===void 0?null:s}};Oe.startTransition=function(t){var s=Wi.transition;Wi.transition={};try{t()}finally{Wi.transition=s}};Oe.unstable_act=Ih;Oe.useCallback=function(t,s){return Vt.current.useCallback(t,s)};Oe.useContext=function(t){return Vt.current.useContext(t)};Oe.useDebugValue=function(){};Oe.useDeferredValue=function(t){return Vt.current.useDeferredValue(t)};Oe.useEffect=function(t,s){return Vt.current.useEffect(t,s)};Oe.useId=function(){return Vt.current.useId()};Oe.useImperativeHandle=function(t,s,r){return Vt.current.useImperativeHandle(t,s,r)};Oe.useInsertionEffect=function(t,s){return Vt.current.useInsertionEffect(t,s)};Oe.useLayoutEffect=function(t,s){return Vt.current.useLayoutEffect(t,s)};Oe.useMemo=function(t,s){return Vt.current.useMemo(t,s)};Oe.useReducer=function(t,s,r){return Vt.current.useReducer(t,s,r)};Oe.useRef=function(t){return Vt.current.useRef(t)};Oe.useState=function(t){return Vt.current.useState(t)};Oe.useSyncExternalStore=function(t,s,r){return Vt.current.useSyncExternalStore(t,s,r)};Oe.useTransition=function(){return Vt.current.useTransition()};Oe.version="18.3.1";wh.exports=Oe;var E=wh.exports;const tn=Nh(E);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ng=E,rg=Symbol.for("react.element"),ag=Symbol.for("react.fragment"),ig=Object.prototype.hasOwnProperty,lg=ng.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,og={key:!0,ref:!0,__self:!0,__source:!0};function Eh(t,s,r){var i,o={},c=null,u=null;r!==void 0&&(c=""+r),s.key!==void 0&&(c=""+s.key),s.ref!==void 0&&(u=s.ref);for(i in s)ig.call(s,i)&&!og.hasOwnProperty(i)&&(o[i]=s[i]);if(t&&t.defaultProps)for(i in s=t.defaultProps,s)o[i]===void 0&&(o[i]=s[i]);return{$$typeof:rg,type:t,key:c,ref:u,props:o,_owner:lg.current}}Ol.Fragment=ag;Ol.jsx=Eh;Ol.jsxs=Eh;bh.exports=Ol;var e=bh.exports,zh={exports:{}},os={},Mh={exports:{}},Ah={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s($,F){var q=$.length;$.push(F);e:for(;0<q;){var se=q-1>>>1,D=$[se];if(0<o(D,F))$[se]=F,$[q]=D,q=se;else break e}}function r($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var F=$[0],q=$.pop();if(q!==F){$[0]=q;e:for(var se=0,D=$.length,me=D>>>1;se<me;){var oe=2*(se+1)-1,B=$[oe],ce=oe+1,U=$[ce];if(0>o(B,q))ce<D&&0>o(U,B)?($[se]=U,$[ce]=q,se=ce):($[se]=B,$[oe]=q,se=oe);else if(ce<D&&0>o(U,q))$[se]=U,$[ce]=q,se=ce;else break e}}return F}function o($,F){var q=$.sortIndex-F.sortIndex;return q!==0?q:$.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var x=[],j=[],w=1,T=null,S=3,N=!1,P=!1,g=!1,M=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k($){for(var F=r(j);F!==null;){if(F.callback===null)i(j);else if(F.startTime<=$)i(j),F.sortIndex=F.expirationTime,s(x,F);else break;F=r(j)}}function C($){if(g=!1,k($),!P)if(r(x)!==null)P=!0,G(R);else{var F=r(j);F!==null&&ie(C,F.startTime-$)}}function R($,F){P=!1,g&&(g=!1,v(I),I=-1),N=!0;var q=S;try{for(k(F),T=r(x);T!==null&&(!(T.expirationTime>F)||$&&!Q());){var se=T.callback;if(typeof se=="function"){T.callback=null,S=T.priorityLevel;var D=se(T.expirationTime<=F);F=t.unstable_now(),typeof D=="function"?T.callback=D:T===r(x)&&i(x),k(F)}else i(x);T=r(x)}if(T!==null)var me=!0;else{var oe=r(j);oe!==null&&ie(C,oe.startTime-F),me=!1}return me}finally{T=null,S=q,N=!1}}var O=!1,p=null,I=-1,W=5,z=-1;function Q(){return!(t.unstable_now()-z<W)}function de(){if(p!==null){var $=t.unstable_now();z=$;var F=!0;try{F=p(!0,$)}finally{F?je():(O=!1,p=null)}}else O=!1}var je;if(typeof y=="function")je=function(){y(de)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,_=Y.port2;Y.port1.onmessage=de,je=function(){_.postMessage(null)}}else je=function(){M(de,0)};function G($){p=$,O||(O=!0,je())}function ie($,F){I=M(function(){$(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){P||N||(P=!0,G(R))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_getFirstCallbackNode=function(){return r(x)},t.unstable_next=function($){switch(S){case 1:case 2:case 3:var F=3;break;default:F=S}var q=S;S=F;try{return $()}finally{S=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,F){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var q=S;S=$;try{return F()}finally{S=q}},t.unstable_scheduleCallback=function($,F,q){var se=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?se+q:se):q=se,$){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=q+D,$={id:w++,callback:F,priorityLevel:$,startTime:q,expirationTime:D,sortIndex:-1},q>se?($.sortIndex=q,s(j,$),r(x)===null&&$===r(j)&&(g?(v(I),I=-1):g=!0,ie(C,q-se))):($.sortIndex=D,s(x,$),P||N||(P=!0,G(R))),$},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function($){var F=S;return function(){var q=S;S=F;try{return $.apply(this,arguments)}finally{S=q}}}})(Ah);Mh.exports=Ah;var cg=Mh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dg=E,as=cg;function ue(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Oh=new Set,Da={};function rr(t,s){Fr(t,s),Fr(t+"Capture",s)}function Fr(t,s){for(Da[t]=s,t=0;t<s.length;t++)Oh.add(s[t])}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nc=Object.prototype.hasOwnProperty,ug=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dm={},um={};function mg(t){return nc.call(um,t)?!0:nc.call(dm,t)?!1:ug.test(t)?um[t]=!0:(dm[t]=!0,!1)}function hg(t,s,r,i){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xg(t,s,r,i){if(s===null||typeof s>"u"||hg(t,s,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Wt(t,s,r,i,o,c,u){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=c,this.removeEmptyString=u}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){It[t]=new Wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];It[s]=new Wt(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){It[t]=new Wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){It[t]=new Wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){It[t]=new Wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){It[t]=new Wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){It[t]=new Wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){It[t]=new Wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){It[t]=new Wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var od=/[\-:]([a-z])/g;function cd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(od,cd);It[s]=new Wt(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(od,cd);It[s]=new Wt(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(od,cd);It[s]=new Wt(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){It[t]=new Wt(t,1,!1,t.toLowerCase(),null,!1,!1)});It.xlinkHref=new Wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){It[t]=new Wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function dd(t,s,r,i){var o=It.hasOwnProperty(s)?It[s]:null;(o!==null?o.type!==0:i||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(xg(s,r,o,i)&&(r=null),i||o===null?mg(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):o.mustUseProperty?t[o.propertyName]=r===null?o.type===3?!1:"":r:(s=o.attributeName,i=o.attributeNamespace,r===null?t.removeAttribute(s):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,i?t.setAttributeNS(i,s,r):t.setAttribute(s,r))))}var ln=dg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Li=Symbol.for("react.element"),Nr=Symbol.for("react.portal"),br=Symbol.for("react.fragment"),ud=Symbol.for("react.strict_mode"),rc=Symbol.for("react.profiler"),Bh=Symbol.for("react.provider"),Rh=Symbol.for("react.context"),md=Symbol.for("react.forward_ref"),ac=Symbol.for("react.suspense"),ic=Symbol.for("react.suspense_list"),hd=Symbol.for("react.memo"),un=Symbol.for("react.lazy"),Dh=Symbol.for("react.offscreen"),mm=Symbol.iterator;function pa(t){return t===null||typeof t!="object"?null:(t=mm&&t[mm]||t["@@iterator"],typeof t=="function"?t:null)}var nt=Object.assign,Po;function _a(t){if(Po===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Po=s&&s[1]||""}return`
`+Po+t}var Lo=!1;function To(t,s){if(!t||Lo)return"";Lo=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(j){var i=j}Reflect.construct(t,[],s)}else{try{s.call()}catch(j){i=j}t.call(s.prototype)}else{try{throw Error()}catch(j){i=j}t()}}catch(j){if(j&&i&&typeof j.stack=="string"){for(var o=j.stack.split(`
`),c=i.stack.split(`
`),u=o.length-1,h=c.length-1;1<=u&&0<=h&&o[u]!==c[h];)h--;for(;1<=u&&0<=h;u--,h--)if(o[u]!==c[h]){if(u!==1||h!==1)do if(u--,h--,0>h||o[u]!==c[h]){var x=`
`+o[u].replace(" at new "," at ");return t.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",t.displayName)),x}while(1<=u&&0<=h);break}}}finally{Lo=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?_a(t):""}function pg(t){switch(t.tag){case 5:return _a(t.type);case 16:return _a("Lazy");case 13:return _a("Suspense");case 19:return _a("SuspenseList");case 0:case 2:case 15:return t=To(t.type,!1),t;case 11:return t=To(t.type.render,!1),t;case 1:return t=To(t.type,!0),t;default:return""}}function lc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case br:return"Fragment";case Nr:return"Portal";case rc:return"Profiler";case ud:return"StrictMode";case ac:return"Suspense";case ic:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Rh:return(t.displayName||"Context")+".Consumer";case Bh:return(t._context.displayName||"Context")+".Provider";case md:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case hd:return s=t.displayName||null,s!==null?s:lc(t.type)||"Memo";case un:s=t._payload,t=t._init;try{return lc(t(s))}catch{}}return null}function fg(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lc(s);case 8:return s===ud?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Cn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fh(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function gg(t){var s=Fh(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),i=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,c=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return o.call(this)},set:function(u){i=""+u,c.call(this,u)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(u){i=""+u},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Ti(t){t._valueTracker||(t._valueTracker=gg(t))}function $h(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),i="";return t&&(i=Fh(t)?t.checked?"true":"false":t.value),t=i,t!==r?(s.setValue(t),!0):!1}function il(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function oc(t,s){var r=s.checked;return nt({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function hm(t,s){var r=s.defaultValue==null?"":s.defaultValue,i=s.checked!=null?s.checked:s.defaultChecked;r=Cn(s.value!=null?s.value:r),t._wrapperState={initialChecked:i,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Uh(t,s){s=s.checked,s!=null&&dd(t,"checked",s,!1)}function cc(t,s){Uh(t,s);var r=Cn(s.value),i=s.type;if(r!=null)i==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?dc(t,s.type,r):s.hasOwnProperty("defaultValue")&&dc(t,s.type,Cn(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function xm(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var i=s.type;if(!(i!=="submit"&&i!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function dc(t,s,r){(s!=="number"||il(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ka=Array.isArray;function zr(t,s,r,i){if(t=t.options,s){s={};for(var o=0;o<r.length;o++)s["$"+r[o]]=!0;for(r=0;r<t.length;r++)o=s.hasOwnProperty("$"+t[r].value),t[r].selected!==o&&(t[r].selected=o),o&&i&&(t[r].defaultSelected=!0)}else{for(r=""+Cn(r),s=null,o=0;o<t.length;o++){if(t[o].value===r){t[o].selected=!0,i&&(t[o].defaultSelected=!0);return}s!==null||t[o].disabled||(s=t[o])}s!==null&&(s.selected=!0)}}function uc(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(ue(91));return nt({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pm(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(ue(92));if(ka(r)){if(1<r.length)throw Error(ue(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:Cn(r)}}function Zh(t,s){var r=Cn(s.value),i=Cn(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),i!=null&&(t.defaultValue=""+i)}function fm(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function Hh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mc(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?Hh(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ii,Vh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,i,o){MSApp.execUnsafeLocalFunction(function(){return t(s,r,i,o)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Ii=Ii||document.createElement("div"),Ii.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Ii.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Fa(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var Ta={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vg=["Webkit","ms","Moz","O"];Object.keys(Ta).forEach(function(t){vg.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Ta[s]=Ta[t]})});function Wh(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||Ta.hasOwnProperty(t)&&Ta[t]?(""+s).trim():s+"px"}function qh(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var i=r.indexOf("--")===0,o=Wh(r,s[r],i);r==="float"&&(r="cssFloat"),i?t.setProperty(r,o):t[r]=o}}var yg=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hc(t,s){if(s){if(yg[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(ue(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(ue(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(ue(61))}if(s.style!=null&&typeof s.style!="object")throw Error(ue(62))}}function xc(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pc=null;function xd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fc=null,Mr=null,Ar=null;function gm(t){if(t=ai(t)){if(typeof fc!="function")throw Error(ue(280));var s=t.stateNode;s&&(s=$l(s),fc(t.stateNode,t.type,s))}}function Gh(t){Mr?Ar?Ar.push(t):Ar=[t]:Mr=t}function Kh(){if(Mr){var t=Mr,s=Ar;if(Ar=Mr=null,gm(t),s)for(t=0;t<s.length;t++)gm(s[t])}}function Qh(t,s){return t(s)}function Yh(){}var Io=!1;function Xh(t,s,r){if(Io)return t(s,r);Io=!0;try{return Qh(t,s,r)}finally{Io=!1,(Mr!==null||Ar!==null)&&(Yh(),Kh())}}function $a(t,s){var r=t.stateNode;if(r===null)return null;var i=$l(r);if(i===null)return null;r=i[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ue(231,s,typeof r));return r}var gc=!1;if(sn)try{var fa={};Object.defineProperty(fa,"passive",{get:function(){gc=!0}}),window.addEventListener("test",fa,fa),window.removeEventListener("test",fa,fa)}catch{gc=!1}function jg(t,s,r,i,o,c,u,h,x){var j=Array.prototype.slice.call(arguments,3);try{s.apply(r,j)}catch(w){this.onError(w)}}var Ia=!1,ll=null,ol=!1,vc=null,Ng={onError:function(t){Ia=!0,ll=t}};function bg(t,s,r,i,o,c,u,h,x){Ia=!1,ll=null,jg.apply(Ng,arguments)}function wg(t,s,r,i,o,c,u,h,x){if(bg.apply(this,arguments),Ia){if(Ia){var j=ll;Ia=!1,ll=null}else throw Error(ue(198));ol||(ol=!0,vc=j)}}function ar(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function Jh(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function vm(t){if(ar(t)!==t)throw Error(ue(188))}function _g(t){var s=t.alternate;if(!s){if(s=ar(t),s===null)throw Error(ue(188));return s!==t?null:t}for(var r=t,i=s;;){var o=r.return;if(o===null)break;var c=o.alternate;if(c===null){if(i=o.return,i!==null){r=i;continue}break}if(o.child===c.child){for(c=o.child;c;){if(c===r)return vm(o),t;if(c===i)return vm(o),s;c=c.sibling}throw Error(ue(188))}if(r.return!==i.return)r=o,i=c;else{for(var u=!1,h=o.child;h;){if(h===r){u=!0,r=o,i=c;break}if(h===i){u=!0,i=o,r=c;break}h=h.sibling}if(!u){for(h=c.child;h;){if(h===r){u=!0,r=c,i=o;break}if(h===i){u=!0,i=c,r=o;break}h=h.sibling}if(!u)throw Error(ue(189))}}if(r.alternate!==i)throw Error(ue(190))}if(r.tag!==3)throw Error(ue(188));return r.stateNode.current===r?t:s}function ex(t){return t=_g(t),t!==null?tx(t):null}function tx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=tx(t);if(s!==null)return s;t=t.sibling}return null}var sx=as.unstable_scheduleCallback,ym=as.unstable_cancelCallback,kg=as.unstable_shouldYield,Sg=as.unstable_requestPaint,lt=as.unstable_now,Cg=as.unstable_getCurrentPriorityLevel,pd=as.unstable_ImmediatePriority,nx=as.unstable_UserBlockingPriority,cl=as.unstable_NormalPriority,Pg=as.unstable_LowPriority,rx=as.unstable_IdlePriority,Bl=null,Zs=null;function Lg(t){if(Zs&&typeof Zs.onCommitFiberRoot=="function")try{Zs.onCommitFiberRoot(Bl,t,void 0,(t.current.flags&128)===128)}catch{}}var Ts=Math.clz32?Math.clz32:Eg,Tg=Math.log,Ig=Math.LN2;function Eg(t){return t>>>=0,t===0?32:31-(Tg(t)/Ig|0)|0}var Ei=64,zi=4194304;function Sa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dl(t,s){var r=t.pendingLanes;if(r===0)return 0;var i=0,o=t.suspendedLanes,c=t.pingedLanes,u=r&268435455;if(u!==0){var h=u&~o;h!==0?i=Sa(h):(c&=u,c!==0&&(i=Sa(c)))}else u=r&~o,u!==0?i=Sa(u):c!==0&&(i=Sa(c));if(i===0)return 0;if(s!==0&&s!==i&&!(s&o)&&(o=i&-i,c=s&-s,o>=c||o===16&&(c&4194240)!==0))return s;if(i&4&&(i|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=i;0<s;)r=31-Ts(s),o=1<<r,i|=t[r],s&=~o;return i}function zg(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mg(t,s){for(var r=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,c=t.pendingLanes;0<c;){var u=31-Ts(c),h=1<<u,x=o[u];x===-1?(!(h&r)||h&i)&&(o[u]=zg(h,s)):x<=s&&(t.expiredLanes|=h),c&=~h}}function yc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ax(){var t=Ei;return Ei<<=1,!(Ei&4194240)&&(Ei=64),t}function Eo(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function ni(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Ts(s),t[s]=r}function Ag(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<r;){var o=31-Ts(r),c=1<<o;s[o]=0,i[o]=-1,t[o]=-1,r&=~c}}function fd(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var i=31-Ts(r),o=1<<i;o&s|t[i]&s&&(t[i]|=s),r&=~o}}var Ue=0;function ix(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var lx,gd,ox,cx,dx,jc=!1,Mi=[],gn=null,vn=null,yn=null,Ua=new Map,Za=new Map,hn=[],Og="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jm(t,s){switch(t){case"focusin":case"focusout":gn=null;break;case"dragenter":case"dragleave":vn=null;break;case"mouseover":case"mouseout":yn=null;break;case"pointerover":case"pointerout":Ua.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Za.delete(s.pointerId)}}function ga(t,s,r,i,o,c){return t===null||t.nativeEvent!==c?(t={blockedOn:s,domEventName:r,eventSystemFlags:i,nativeEvent:c,targetContainers:[o]},s!==null&&(s=ai(s),s!==null&&gd(s)),t):(t.eventSystemFlags|=i,s=t.targetContainers,o!==null&&s.indexOf(o)===-1&&s.push(o),t)}function Bg(t,s,r,i,o){switch(s){case"focusin":return gn=ga(gn,t,s,r,i,o),!0;case"dragenter":return vn=ga(vn,t,s,r,i,o),!0;case"mouseover":return yn=ga(yn,t,s,r,i,o),!0;case"pointerover":var c=o.pointerId;return Ua.set(c,ga(Ua.get(c)||null,t,s,r,i,o)),!0;case"gotpointercapture":return c=o.pointerId,Za.set(c,ga(Za.get(c)||null,t,s,r,i,o)),!0}return!1}function ux(t){var s=Vn(t.target);if(s!==null){var r=ar(s);if(r!==null){if(s=r.tag,s===13){if(s=Jh(r),s!==null){t.blockedOn=s,dx(t.priority,function(){ox(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qi(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=Nc(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var i=new r.constructor(r.type,r);pc=i,r.target.dispatchEvent(i),pc=null}else return s=ai(r),s!==null&&gd(s),t.blockedOn=r,!1;s.shift()}return!0}function Nm(t,s,r){qi(t)&&r.delete(s)}function Rg(){jc=!1,gn!==null&&qi(gn)&&(gn=null),vn!==null&&qi(vn)&&(vn=null),yn!==null&&qi(yn)&&(yn=null),Ua.forEach(Nm),Za.forEach(Nm)}function va(t,s){t.blockedOn===s&&(t.blockedOn=null,jc||(jc=!0,as.unstable_scheduleCallback(as.unstable_NormalPriority,Rg)))}function Ha(t){function s(o){return va(o,t)}if(0<Mi.length){va(Mi[0],t);for(var r=1;r<Mi.length;r++){var i=Mi[r];i.blockedOn===t&&(i.blockedOn=null)}}for(gn!==null&&va(gn,t),vn!==null&&va(vn,t),yn!==null&&va(yn,t),Ua.forEach(s),Za.forEach(s),r=0;r<hn.length;r++)i=hn[r],i.blockedOn===t&&(i.blockedOn=null);for(;0<hn.length&&(r=hn[0],r.blockedOn===null);)ux(r),r.blockedOn===null&&hn.shift()}var Or=ln.ReactCurrentBatchConfig,ul=!0;function Dg(t,s,r,i){var o=Ue,c=Or.transition;Or.transition=null;try{Ue=1,vd(t,s,r,i)}finally{Ue=o,Or.transition=c}}function Fg(t,s,r,i){var o=Ue,c=Or.transition;Or.transition=null;try{Ue=4,vd(t,s,r,i)}finally{Ue=o,Or.transition=c}}function vd(t,s,r,i){if(ul){var o=Nc(t,s,r,i);if(o===null)Uo(t,s,i,ml,r),jm(t,i);else if(Bg(o,t,s,r,i))i.stopPropagation();else if(jm(t,i),s&4&&-1<Og.indexOf(t)){for(;o!==null;){var c=ai(o);if(c!==null&&lx(c),c=Nc(t,s,r,i),c===null&&Uo(t,s,i,ml,r),c===o)break;o=c}o!==null&&i.stopPropagation()}else Uo(t,s,i,null,r)}}var ml=null;function Nc(t,s,r,i){if(ml=null,t=xd(i),t=Vn(t),t!==null)if(s=ar(t),s===null)t=null;else if(r=s.tag,r===13){if(t=Jh(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return ml=t,null}function mx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cg()){case pd:return 1;case nx:return 4;case cl:case Pg:return 16;case rx:return 536870912;default:return 16}default:return 16}}var pn=null,yd=null,Gi=null;function hx(){if(Gi)return Gi;var t,s=yd,r=s.length,i,o="value"in pn?pn.value:pn.textContent,c=o.length;for(t=0;t<r&&s[t]===o[t];t++);var u=r-t;for(i=1;i<=u&&s[r-i]===o[c-i];i++);return Gi=o.slice(t,1<i?1-i:void 0)}function Ki(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Ai(){return!0}function bm(){return!1}function cs(t){function s(r,i,o,c,u){this._reactName=r,this._targetInst=o,this.type=i,this.nativeEvent=c,this.target=u,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(r=t[h],this[h]=r?r(c):c[h]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Ai:bm,this.isPropagationStopped=bm,this}return nt(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ai)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ai)},persist:function(){},isPersistent:Ai}),s}var ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jd=cs(ea),ri=nt({},ea,{view:0,detail:0}),$g=cs(ri),zo,Mo,ya,Rl=nt({},ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ya&&(ya&&t.type==="mousemove"?(zo=t.screenX-ya.screenX,Mo=t.screenY-ya.screenY):Mo=zo=0,ya=t),zo)},movementY:function(t){return"movementY"in t?t.movementY:Mo}}),wm=cs(Rl),Ug=nt({},Rl,{dataTransfer:0}),Zg=cs(Ug),Hg=nt({},ri,{relatedTarget:0}),Ao=cs(Hg),Vg=nt({},ea,{animationName:0,elapsedTime:0,pseudoElement:0}),Wg=cs(Vg),qg=nt({},ea,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Gg=cs(qg),Kg=nt({},ea,{data:0}),_m=cs(Kg),Qg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jg(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Xg[t])?!!s[t]:!1}function Nd(){return Jg}var ev=nt({},ri,{key:function(t){if(t.key){var s=Qg[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Ki(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nd,charCode:function(t){return t.type==="keypress"?Ki(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ki(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tv=cs(ev),sv=nt({},Rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),km=cs(sv),nv=nt({},ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nd}),rv=cs(nv),av=nt({},ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),iv=cs(av),lv=nt({},Rl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ov=cs(lv),cv=[9,13,27,32],bd=sn&&"CompositionEvent"in window,Ea=null;sn&&"documentMode"in document&&(Ea=document.documentMode);var dv=sn&&"TextEvent"in window&&!Ea,xx=sn&&(!bd||Ea&&8<Ea&&11>=Ea),Sm=" ",Cm=!1;function px(t,s){switch(t){case"keyup":return cv.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wr=!1;function uv(t,s){switch(t){case"compositionend":return fx(s);case"keypress":return s.which!==32?null:(Cm=!0,Sm);case"textInput":return t=s.data,t===Sm&&Cm?null:t;default:return null}}function mv(t,s){if(wr)return t==="compositionend"||!bd&&px(t,s)?(t=hx(),Gi=yd=pn=null,wr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return xx&&s.locale!=="ko"?null:s.data;default:return null}}var hv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pm(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!hv[t.type]:s==="textarea"}function gx(t,s,r,i){Gh(i),s=hl(s,"onChange"),0<s.length&&(r=new jd("onChange","change",null,r,i),t.push({event:r,listeners:s}))}var za=null,Va=null;function xv(t){Px(t,0)}function Dl(t){var s=Sr(t);if($h(s))return t}function pv(t,s){if(t==="change")return s}var vx=!1;if(sn){var Oo;if(sn){var Bo="oninput"in document;if(!Bo){var Lm=document.createElement("div");Lm.setAttribute("oninput","return;"),Bo=typeof Lm.oninput=="function"}Oo=Bo}else Oo=!1;vx=Oo&&(!document.documentMode||9<document.documentMode)}function Tm(){za&&(za.detachEvent("onpropertychange",yx),Va=za=null)}function yx(t){if(t.propertyName==="value"&&Dl(Va)){var s=[];gx(s,Va,t,xd(t)),Xh(xv,s)}}function fv(t,s,r){t==="focusin"?(Tm(),za=s,Va=r,za.attachEvent("onpropertychange",yx)):t==="focusout"&&Tm()}function gv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Dl(Va)}function vv(t,s){if(t==="click")return Dl(s)}function yv(t,s){if(t==="input"||t==="change")return Dl(s)}function jv(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var zs=typeof Object.is=="function"?Object.is:jv;function Wa(t,s){if(zs(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),i=Object.keys(s);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var o=r[i];if(!nc.call(s,o)||!zs(t[o],s[o]))return!1}return!0}function Im(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Em(t,s){var r=Im(t);t=0;for(var i;r;){if(r.nodeType===3){if(i=t+r.textContent.length,t<=s&&i>=s)return{node:r,offset:s-t};t=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Im(r)}}function jx(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?jx(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Nx(){for(var t=window,s=il();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=il(t.document)}return s}function wd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function Nv(t){var s=Nx(),r=t.focusedElem,i=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&jx(r.ownerDocument.documentElement,r)){if(i!==null&&wd(r)){if(s=i.start,t=i.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var o=r.textContent.length,c=Math.min(i.start,o);i=i.end===void 0?c:Math.min(i.end,o),!t.extend&&c>i&&(o=i,i=c,c=o),o=Em(r,c);var u=Em(r,i);o&&u&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==u.node||t.focusOffset!==u.offset)&&(s=s.createRange(),s.setStart(o.node,o.offset),t.removeAllRanges(),c>i?(t.addRange(s),t.extend(u.node,u.offset)):(s.setEnd(u.node,u.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bv=sn&&"documentMode"in document&&11>=document.documentMode,_r=null,bc=null,Ma=null,wc=!1;function zm(t,s,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;wc||_r==null||_r!==il(i)||(i=_r,"selectionStart"in i&&wd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ma&&Wa(Ma,i)||(Ma=i,i=hl(bc,"onSelect"),0<i.length&&(s=new jd("onSelect","select",null,s,r),t.push({event:s,listeners:i}),s.target=_r)))}function Oi(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var kr={animationend:Oi("Animation","AnimationEnd"),animationiteration:Oi("Animation","AnimationIteration"),animationstart:Oi("Animation","AnimationStart"),transitionend:Oi("Transition","TransitionEnd")},Ro={},bx={};sn&&(bx=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);function Fl(t){if(Ro[t])return Ro[t];if(!kr[t])return t;var s=kr[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in bx)return Ro[t]=s[r];return t}var wx=Fl("animationend"),_x=Fl("animationiteration"),kx=Fl("animationstart"),Sx=Fl("transitionend"),Cx=new Map,Mm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tn(t,s){Cx.set(t,s),rr(s,[t])}for(var Do=0;Do<Mm.length;Do++){var Fo=Mm[Do],wv=Fo.toLowerCase(),_v=Fo[0].toUpperCase()+Fo.slice(1);Tn(wv,"on"+_v)}Tn(wx,"onAnimationEnd");Tn(_x,"onAnimationIteration");Tn(kx,"onAnimationStart");Tn("dblclick","onDoubleClick");Tn("focusin","onFocus");Tn("focusout","onBlur");Tn(Sx,"onTransitionEnd");Fr("onMouseEnter",["mouseout","mouseover"]);Fr("onMouseLeave",["mouseout","mouseover"]);Fr("onPointerEnter",["pointerout","pointerover"]);Fr("onPointerLeave",["pointerout","pointerover"]);rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rr("onBeforeInput",["compositionend","keypress","textInput","paste"]);rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ca));function Am(t,s,r){var i=t.type||"unknown-event";t.currentTarget=r,wg(i,s,void 0,t),t.currentTarget=null}function Px(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var i=t[r],o=i.event;i=i.listeners;e:{var c=void 0;if(s)for(var u=i.length-1;0<=u;u--){var h=i[u],x=h.instance,j=h.currentTarget;if(h=h.listener,x!==c&&o.isPropagationStopped())break e;Am(o,h,j),c=x}else for(u=0;u<i.length;u++){if(h=i[u],x=h.instance,j=h.currentTarget,h=h.listener,x!==c&&o.isPropagationStopped())break e;Am(o,h,j),c=x}}}if(ol)throw t=vc,ol=!1,vc=null,t}function Ge(t,s){var r=s[Pc];r===void 0&&(r=s[Pc]=new Set);var i=t+"__bubble";r.has(i)||(Lx(s,t,2,!1),r.add(i))}function $o(t,s,r){var i=0;s&&(i|=4),Lx(r,t,i,s)}var Bi="_reactListening"+Math.random().toString(36).slice(2);function qa(t){if(!t[Bi]){t[Bi]=!0,Oh.forEach(function(r){r!=="selectionchange"&&(kv.has(r)||$o(r,!1,t),$o(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Bi]||(s[Bi]=!0,$o("selectionchange",!1,s))}}function Lx(t,s,r,i){switch(mx(s)){case 1:var o=Dg;break;case 4:o=Fg;break;default:o=vd}r=o.bind(null,s,r,t),o=void 0,!gc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(o=!0),i?o!==void 0?t.addEventListener(s,r,{capture:!0,passive:o}):t.addEventListener(s,r,!0):o!==void 0?t.addEventListener(s,r,{passive:o}):t.addEventListener(s,r,!1)}function Uo(t,s,r,i,o){var c=i;if(!(s&1)&&!(s&2)&&i!==null)e:for(;;){if(i===null)return;var u=i.tag;if(u===3||u===4){var h=i.stateNode.containerInfo;if(h===o||h.nodeType===8&&h.parentNode===o)break;if(u===4)for(u=i.return;u!==null;){var x=u.tag;if((x===3||x===4)&&(x=u.stateNode.containerInfo,x===o||x.nodeType===8&&x.parentNode===o))return;u=u.return}for(;h!==null;){if(u=Vn(h),u===null)return;if(x=u.tag,x===5||x===6){i=c=u;continue e}h=h.parentNode}}i=i.return}Xh(function(){var j=c,w=xd(r),T=[];e:{var S=Cx.get(t);if(S!==void 0){var N=jd,P=t;switch(t){case"keypress":if(Ki(r)===0)break e;case"keydown":case"keyup":N=tv;break;case"focusin":P="focus",N=Ao;break;case"focusout":P="blur",N=Ao;break;case"beforeblur":case"afterblur":N=Ao;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=wm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=Zg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=rv;break;case wx:case _x:case kx:N=Wg;break;case Sx:N=iv;break;case"scroll":N=$g;break;case"wheel":N=ov;break;case"copy":case"cut":case"paste":N=Gg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=km}var g=(s&4)!==0,M=!g&&t==="scroll",v=g?S!==null?S+"Capture":null:S;g=[];for(var y=j,k;y!==null;){k=y;var C=k.stateNode;if(k.tag===5&&C!==null&&(k=C,v!==null&&(C=$a(y,v),C!=null&&g.push(Ga(y,C,k)))),M)break;y=y.return}0<g.length&&(S=new N(S,P,null,r,w),T.push({event:S,listeners:g}))}}if(!(s&7)){e:{if(S=t==="mouseover"||t==="pointerover",N=t==="mouseout"||t==="pointerout",S&&r!==pc&&(P=r.relatedTarget||r.fromElement)&&(Vn(P)||P[nn]))break e;if((N||S)&&(S=w.window===w?w:(S=w.ownerDocument)?S.defaultView||S.parentWindow:window,N?(P=r.relatedTarget||r.toElement,N=j,P=P?Vn(P):null,P!==null&&(M=ar(P),P!==M||P.tag!==5&&P.tag!==6)&&(P=null)):(N=null,P=j),N!==P)){if(g=wm,C="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=km,C="onPointerLeave",v="onPointerEnter",y="pointer"),M=N==null?S:Sr(N),k=P==null?S:Sr(P),S=new g(C,y+"leave",N,r,w),S.target=M,S.relatedTarget=k,C=null,Vn(w)===j&&(g=new g(v,y+"enter",P,r,w),g.target=k,g.relatedTarget=M,C=g),M=C,N&&P)t:{for(g=N,v=P,y=0,k=g;k;k=gr(k))y++;for(k=0,C=v;C;C=gr(C))k++;for(;0<y-k;)g=gr(g),y--;for(;0<k-y;)v=gr(v),k--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break t;g=gr(g),v=gr(v)}g=null}else g=null;N!==null&&Om(T,S,N,g,!1),P!==null&&M!==null&&Om(T,M,P,g,!0)}}e:{if(S=j?Sr(j):window,N=S.nodeName&&S.nodeName.toLowerCase(),N==="select"||N==="input"&&S.type==="file")var R=pv;else if(Pm(S))if(vx)R=yv;else{R=gv;var O=fv}else(N=S.nodeName)&&N.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&(R=vv);if(R&&(R=R(t,j))){gx(T,R,r,w);break e}O&&O(t,S,j),t==="focusout"&&(O=S._wrapperState)&&O.controlled&&S.type==="number"&&dc(S,"number",S.value)}switch(O=j?Sr(j):window,t){case"focusin":(Pm(O)||O.contentEditable==="true")&&(_r=O,bc=j,Ma=null);break;case"focusout":Ma=bc=_r=null;break;case"mousedown":wc=!0;break;case"contextmenu":case"mouseup":case"dragend":wc=!1,zm(T,r,w);break;case"selectionchange":if(bv)break;case"keydown":case"keyup":zm(T,r,w)}var p;if(bd)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else wr?px(t,r)&&(I="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(xx&&r.locale!=="ko"&&(wr||I!=="onCompositionStart"?I==="onCompositionEnd"&&wr&&(p=hx()):(pn=w,yd="value"in pn?pn.value:pn.textContent,wr=!0)),O=hl(j,I),0<O.length&&(I=new _m(I,t,null,r,w),T.push({event:I,listeners:O}),p?I.data=p:(p=fx(r),p!==null&&(I.data=p)))),(p=dv?uv(t,r):mv(t,r))&&(j=hl(j,"onBeforeInput"),0<j.length&&(w=new _m("onBeforeInput","beforeinput",null,r,w),T.push({event:w,listeners:j}),w.data=p))}Px(T,s)})}function Ga(t,s,r){return{instance:t,listener:s,currentTarget:r}}function hl(t,s){for(var r=s+"Capture",i=[];t!==null;){var o=t,c=o.stateNode;o.tag===5&&c!==null&&(o=c,c=$a(t,r),c!=null&&i.unshift(Ga(t,c,o)),c=$a(t,s),c!=null&&i.push(Ga(t,c,o))),t=t.return}return i}function gr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Om(t,s,r,i,o){for(var c=s._reactName,u=[];r!==null&&r!==i;){var h=r,x=h.alternate,j=h.stateNode;if(x!==null&&x===i)break;h.tag===5&&j!==null&&(h=j,o?(x=$a(r,c),x!=null&&u.unshift(Ga(r,x,h))):o||(x=$a(r,c),x!=null&&u.push(Ga(r,x,h)))),r=r.return}u.length!==0&&t.push({event:s,listeners:u})}var Sv=/\r\n?/g,Cv=/\u0000|\uFFFD/g;function Bm(t){return(typeof t=="string"?t:""+t).replace(Sv,`
`).replace(Cv,"")}function Ri(t,s,r){if(s=Bm(s),Bm(t)!==s&&r)throw Error(ue(425))}function xl(){}var _c=null,kc=null;function Sc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Cc=typeof setTimeout=="function"?setTimeout:void 0,Pv=typeof clearTimeout=="function"?clearTimeout:void 0,Rm=typeof Promise=="function"?Promise:void 0,Lv=typeof queueMicrotask=="function"?queueMicrotask:typeof Rm<"u"?function(t){return Rm.resolve(null).then(t).catch(Tv)}:Cc;function Tv(t){setTimeout(function(){throw t})}function Zo(t,s){var r=s,i=0;do{var o=r.nextSibling;if(t.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(i===0){t.removeChild(o),Ha(s);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=o}while(r);Ha(s)}function jn(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Dm(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var ta=Math.random().toString(36).slice(2),Us="__reactFiber$"+ta,Ka="__reactProps$"+ta,nn="__reactContainer$"+ta,Pc="__reactEvents$"+ta,Iv="__reactListeners$"+ta,Ev="__reactHandles$"+ta;function Vn(t){var s=t[Us];if(s)return s;for(var r=t.parentNode;r;){if(s=r[nn]||r[Us]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=Dm(t);t!==null;){if(r=t[Us])return r;t=Dm(t)}return s}t=r,r=t.parentNode}return null}function ai(t){return t=t[Us]||t[nn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ue(33))}function $l(t){return t[Ka]||null}var Lc=[],Cr=-1;function In(t){return{current:t}}function Ke(t){0>Cr||(t.current=Lc[Cr],Lc[Cr]=null,Cr--)}function Ve(t,s){Cr++,Lc[Cr]=t.current,t.current=s}var Pn={},Ot=In(Pn),Qt=In(!1),Xn=Pn;function $r(t,s){var r=t.type.contextTypes;if(!r)return Pn;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===s)return i.__reactInternalMemoizedMaskedChildContext;var o={},c;for(c in r)o[c]=s[c];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),o}function Yt(t){return t=t.childContextTypes,t!=null}function pl(){Ke(Qt),Ke(Ot)}function Fm(t,s,r){if(Ot.current!==Pn)throw Error(ue(168));Ve(Ot,s),Ve(Qt,r)}function Tx(t,s,r){var i=t.stateNode;if(s=s.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var o in i)if(!(o in s))throw Error(ue(108,fg(t)||"Unknown",o));return nt({},r,i)}function fl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pn,Xn=Ot.current,Ve(Ot,t),Ve(Qt,Qt.current),!0}function $m(t,s,r){var i=t.stateNode;if(!i)throw Error(ue(169));r?(t=Tx(t,s,Xn),i.__reactInternalMemoizedMergedChildContext=t,Ke(Qt),Ke(Ot),Ve(Ot,t)):Ke(Qt),Ve(Qt,r)}var Ys=null,Ul=!1,Ho=!1;function Ix(t){Ys===null?Ys=[t]:Ys.push(t)}function zv(t){Ul=!0,Ix(t)}function En(){if(!Ho&&Ys!==null){Ho=!0;var t=0,s=Ue;try{var r=Ys;for(Ue=1;t<r.length;t++){var i=r[t];do i=i(!0);while(i!==null)}Ys=null,Ul=!1}catch(o){throw Ys!==null&&(Ys=Ys.slice(t+1)),sx(pd,En),o}finally{Ue=s,Ho=!1}}return null}var Pr=[],Lr=0,gl=null,vl=0,hs=[],xs=0,Jn=null,Xs=1,Js="";function $n(t,s){Pr[Lr++]=vl,Pr[Lr++]=gl,gl=t,vl=s}function Ex(t,s,r){hs[xs++]=Xs,hs[xs++]=Js,hs[xs++]=Jn,Jn=t;var i=Xs;t=Js;var o=32-Ts(i)-1;i&=~(1<<o),r+=1;var c=32-Ts(s)+o;if(30<c){var u=o-o%5;c=(i&(1<<u)-1).toString(32),i>>=u,o-=u,Xs=1<<32-Ts(s)+o|r<<o|i,Js=c+t}else Xs=1<<c|r<<o|i,Js=t}function _d(t){t.return!==null&&($n(t,1),Ex(t,1,0))}function kd(t){for(;t===gl;)gl=Pr[--Lr],Pr[Lr]=null,vl=Pr[--Lr],Pr[Lr]=null;for(;t===Jn;)Jn=hs[--xs],hs[xs]=null,Js=hs[--xs],hs[xs]=null,Xs=hs[--xs],hs[xs]=null}var rs=null,ns=null,Xe=!1,Ps=null;function zx(t,s){var r=fs(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function Um(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,rs=t,ns=jn(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,rs=t,ns=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=Jn!==null?{id:Xs,overflow:Js}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=fs(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,rs=t,ns=null,!0):!1;default:return!1}}function Tc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ic(t){if(Xe){var s=ns;if(s){var r=s;if(!Um(t,s)){if(Tc(t))throw Error(ue(418));s=jn(r.nextSibling);var i=rs;s&&Um(t,s)?zx(i,r):(t.flags=t.flags&-4097|2,Xe=!1,rs=t)}}else{if(Tc(t))throw Error(ue(418));t.flags=t.flags&-4097|2,Xe=!1,rs=t}}}function Zm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rs=t}function Di(t){if(t!==rs)return!1;if(!Xe)return Zm(t),Xe=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Sc(t.type,t.memoizedProps)),s&&(s=ns)){if(Tc(t))throw Mx(),Error(ue(418));for(;s;)zx(t,s),s=jn(s.nextSibling)}if(Zm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ue(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){ns=jn(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}ns=null}}else ns=rs?jn(t.stateNode.nextSibling):null;return!0}function Mx(){for(var t=ns;t;)t=jn(t.nextSibling)}function Ur(){ns=rs=null,Xe=!1}function Sd(t){Ps===null?Ps=[t]:Ps.push(t)}var Mv=ln.ReactCurrentBatchConfig;function ja(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ue(309));var i=r.stateNode}if(!i)throw Error(ue(147,t));var o=i,c=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===c?s.ref:(s=function(u){var h=o.refs;u===null?delete h[c]:h[c]=u},s._stringRef=c,s)}if(typeof t!="string")throw Error(ue(284));if(!r._owner)throw Error(ue(290,t))}return t}function Fi(t,s){throw t=Object.prototype.toString.call(s),Error(ue(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Hm(t){var s=t._init;return s(t._payload)}function Ax(t){function s(v,y){if(t){var k=v.deletions;k===null?(v.deletions=[y],v.flags|=16):k.push(y)}}function r(v,y){if(!t)return null;for(;y!==null;)s(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function o(v,y){return v=_n(v,y),v.index=0,v.sibling=null,v}function c(v,y,k){return v.index=k,t?(k=v.alternate,k!==null?(k=k.index,k<y?(v.flags|=2,y):k):(v.flags|=2,y)):(v.flags|=1048576,y)}function u(v){return t&&v.alternate===null&&(v.flags|=2),v}function h(v,y,k,C){return y===null||y.tag!==6?(y=Yo(k,v.mode,C),y.return=v,y):(y=o(y,k),y.return=v,y)}function x(v,y,k,C){var R=k.type;return R===br?w(v,y,k.props.children,C,k.key):y!==null&&(y.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===un&&Hm(R)===y.type)?(C=o(y,k.props),C.ref=ja(v,y,k),C.return=v,C):(C=sl(k.type,k.key,k.props,null,v.mode,C),C.ref=ja(v,y,k),C.return=v,C)}function j(v,y,k,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==k.containerInfo||y.stateNode.implementation!==k.implementation?(y=Xo(k,v.mode,C),y.return=v,y):(y=o(y,k.children||[]),y.return=v,y)}function w(v,y,k,C,R){return y===null||y.tag!==7?(y=Kn(k,v.mode,C,R),y.return=v,y):(y=o(y,k),y.return=v,y)}function T(v,y,k){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Yo(""+y,v.mode,k),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Li:return k=sl(y.type,y.key,y.props,null,v.mode,k),k.ref=ja(v,null,y),k.return=v,k;case Nr:return y=Xo(y,v.mode,k),y.return=v,y;case un:var C=y._init;return T(v,C(y._payload),k)}if(ka(y)||pa(y))return y=Kn(y,v.mode,k,null),y.return=v,y;Fi(v,y)}return null}function S(v,y,k,C){var R=y!==null?y.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return R!==null?null:h(v,y,""+k,C);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Li:return k.key===R?x(v,y,k,C):null;case Nr:return k.key===R?j(v,y,k,C):null;case un:return R=k._init,S(v,y,R(k._payload),C)}if(ka(k)||pa(k))return R!==null?null:w(v,y,k,C,null);Fi(v,k)}return null}function N(v,y,k,C,R){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(k)||null,h(y,v,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Li:return v=v.get(C.key===null?k:C.key)||null,x(y,v,C,R);case Nr:return v=v.get(C.key===null?k:C.key)||null,j(y,v,C,R);case un:var O=C._init;return N(v,y,k,O(C._payload),R)}if(ka(C)||pa(C))return v=v.get(k)||null,w(y,v,C,R,null);Fi(y,C)}return null}function P(v,y,k,C){for(var R=null,O=null,p=y,I=y=0,W=null;p!==null&&I<k.length;I++){p.index>I?(W=p,p=null):W=p.sibling;var z=S(v,p,k[I],C);if(z===null){p===null&&(p=W);break}t&&p&&z.alternate===null&&s(v,p),y=c(z,y,I),O===null?R=z:O.sibling=z,O=z,p=W}if(I===k.length)return r(v,p),Xe&&$n(v,I),R;if(p===null){for(;I<k.length;I++)p=T(v,k[I],C),p!==null&&(y=c(p,y,I),O===null?R=p:O.sibling=p,O=p);return Xe&&$n(v,I),R}for(p=i(v,p);I<k.length;I++)W=N(p,v,I,k[I],C),W!==null&&(t&&W.alternate!==null&&p.delete(W.key===null?I:W.key),y=c(W,y,I),O===null?R=W:O.sibling=W,O=W);return t&&p.forEach(function(Q){return s(v,Q)}),Xe&&$n(v,I),R}function g(v,y,k,C){var R=pa(k);if(typeof R!="function")throw Error(ue(150));if(k=R.call(k),k==null)throw Error(ue(151));for(var O=R=null,p=y,I=y=0,W=null,z=k.next();p!==null&&!z.done;I++,z=k.next()){p.index>I?(W=p,p=null):W=p.sibling;var Q=S(v,p,z.value,C);if(Q===null){p===null&&(p=W);break}t&&p&&Q.alternate===null&&s(v,p),y=c(Q,y,I),O===null?R=Q:O.sibling=Q,O=Q,p=W}if(z.done)return r(v,p),Xe&&$n(v,I),R;if(p===null){for(;!z.done;I++,z=k.next())z=T(v,z.value,C),z!==null&&(y=c(z,y,I),O===null?R=z:O.sibling=z,O=z);return Xe&&$n(v,I),R}for(p=i(v,p);!z.done;I++,z=k.next())z=N(p,v,I,z.value,C),z!==null&&(t&&z.alternate!==null&&p.delete(z.key===null?I:z.key),y=c(z,y,I),O===null?R=z:O.sibling=z,O=z);return t&&p.forEach(function(de){return s(v,de)}),Xe&&$n(v,I),R}function M(v,y,k,C){if(typeof k=="object"&&k!==null&&k.type===br&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Li:e:{for(var R=k.key,O=y;O!==null;){if(O.key===R){if(R=k.type,R===br){if(O.tag===7){r(v,O.sibling),y=o(O,k.props.children),y.return=v,v=y;break e}}else if(O.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===un&&Hm(R)===O.type){r(v,O.sibling),y=o(O,k.props),y.ref=ja(v,O,k),y.return=v,v=y;break e}r(v,O);break}else s(v,O);O=O.sibling}k.type===br?(y=Kn(k.props.children,v.mode,C,k.key),y.return=v,v=y):(C=sl(k.type,k.key,k.props,null,v.mode,C),C.ref=ja(v,y,k),C.return=v,v=C)}return u(v);case Nr:e:{for(O=k.key;y!==null;){if(y.key===O)if(y.tag===4&&y.stateNode.containerInfo===k.containerInfo&&y.stateNode.implementation===k.implementation){r(v,y.sibling),y=o(y,k.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else s(v,y);y=y.sibling}y=Xo(k,v.mode,C),y.return=v,v=y}return u(v);case un:return O=k._init,M(v,y,O(k._payload),C)}if(ka(k))return P(v,y,k,C);if(pa(k))return g(v,y,k,C);Fi(v,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,y!==null&&y.tag===6?(r(v,y.sibling),y=o(y,k),y.return=v,v=y):(r(v,y),y=Yo(k,v.mode,C),y.return=v,v=y),u(v)):r(v,y)}return M}var Zr=Ax(!0),Ox=Ax(!1),yl=In(null),jl=null,Tr=null,Cd=null;function Pd(){Cd=Tr=jl=null}function Ld(t){var s=yl.current;Ke(yl),t._currentValue=s}function Ec(t,s,r){for(;t!==null;){var i=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,i!==null&&(i.childLanes|=s)):i!==null&&(i.childLanes&s)!==s&&(i.childLanes|=s),t===r)break;t=t.return}}function Br(t,s){jl=t,Cd=Tr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(Kt=!0),t.firstContext=null)}function js(t){var s=t._currentValue;if(Cd!==t)if(t={context:t,memoizedValue:s,next:null},Tr===null){if(jl===null)throw Error(ue(308));Tr=t,jl.dependencies={lanes:0,firstContext:t}}else Tr=Tr.next=t;return s}var Wn=null;function Td(t){Wn===null?Wn=[t]:Wn.push(t)}function Bx(t,s,r,i){var o=s.interleaved;return o===null?(r.next=r,Td(s)):(r.next=o.next,o.next=r),s.interleaved=r,rn(t,i)}function rn(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var mn=!1;function Id(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rx(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function en(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Nn(t,s,r){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,De&2){var o=i.pending;return o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s,rn(t,r)}return o=i.interleaved,o===null?(s.next=s,Td(i)):(s.next=o.next,o.next=s),i.interleaved=s,rn(t,r)}function Qi(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var i=s.lanes;i&=t.pendingLanes,r|=i,s.lanes=r,fd(t,r)}}function Vm(t,s){var r=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var o=null,c=null;if(r=r.firstBaseUpdate,r!==null){do{var u={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};c===null?o=c=u:c=c.next=u,r=r.next}while(r!==null);c===null?o=c=s:c=c.next=s}else o=c=s;r={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:c,shared:i.shared,effects:i.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function Nl(t,s,r,i){var o=t.updateQueue;mn=!1;var c=o.firstBaseUpdate,u=o.lastBaseUpdate,h=o.shared.pending;if(h!==null){o.shared.pending=null;var x=h,j=x.next;x.next=null,u===null?c=j:u.next=j,u=x;var w=t.alternate;w!==null&&(w=w.updateQueue,h=w.lastBaseUpdate,h!==u&&(h===null?w.firstBaseUpdate=j:h.next=j,w.lastBaseUpdate=x))}if(c!==null){var T=o.baseState;u=0,w=j=x=null,h=c;do{var S=h.lane,N=h.eventTime;if((i&S)===S){w!==null&&(w=w.next={eventTime:N,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var P=t,g=h;switch(S=s,N=r,g.tag){case 1:if(P=g.payload,typeof P=="function"){T=P.call(N,T,S);break e}T=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=g.payload,S=typeof P=="function"?P.call(N,T,S):P,S==null)break e;T=nt({},T,S);break e;case 2:mn=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,S=o.effects,S===null?o.effects=[h]:S.push(h))}else N={eventTime:N,lane:S,tag:h.tag,payload:h.payload,callback:h.callback,next:null},w===null?(j=w=N,x=T):w=w.next=N,u|=S;if(h=h.next,h===null){if(h=o.shared.pending,h===null)break;S=h,h=S.next,S.next=null,o.lastBaseUpdate=S,o.shared.pending=null}}while(!0);if(w===null&&(x=T),o.baseState=x,o.firstBaseUpdate=j,o.lastBaseUpdate=w,s=o.shared.interleaved,s!==null){o=s;do u|=o.lane,o=o.next;while(o!==s)}else c===null&&(o.shared.lanes=0);tr|=u,t.lanes=u,t.memoizedState=T}}function Wm(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var i=t[s],o=i.callback;if(o!==null){if(i.callback=null,i=r,typeof o!="function")throw Error(ue(191,o));o.call(i)}}}var ii={},Hs=In(ii),Qa=In(ii),Ya=In(ii);function qn(t){if(t===ii)throw Error(ue(174));return t}function Ed(t,s){switch(Ve(Ya,s),Ve(Qa,t),Ve(Hs,ii),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:mc(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=mc(s,t)}Ke(Hs),Ve(Hs,s)}function Hr(){Ke(Hs),Ke(Qa),Ke(Ya)}function Dx(t){qn(Ya.current);var s=qn(Hs.current),r=mc(s,t.type);s!==r&&(Ve(Qa,t),Ve(Hs,r))}function zd(t){Qa.current===t&&(Ke(Hs),Ke(Qa))}var et=In(0);function bl(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Vo=[];function Md(){for(var t=0;t<Vo.length;t++)Vo[t]._workInProgressVersionPrimary=null;Vo.length=0}var Yi=ln.ReactCurrentDispatcher,Wo=ln.ReactCurrentBatchConfig,er=0,tt=null,ht=null,ft=null,wl=!1,Aa=!1,Xa=0,Av=0;function Et(){throw Error(ue(321))}function Ad(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!zs(t[r],s[r]))return!1;return!0}function Od(t,s,r,i,o,c){if(er=c,tt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Yi.current=t===null||t.memoizedState===null?Dv:Fv,t=r(i,o),Aa){c=0;do{if(Aa=!1,Xa=0,25<=c)throw Error(ue(301));c+=1,ft=ht=null,s.updateQueue=null,Yi.current=$v,t=r(i,o)}while(Aa)}if(Yi.current=_l,s=ht!==null&&ht.next!==null,er=0,ft=ht=tt=null,wl=!1,s)throw Error(ue(300));return t}function Bd(){var t=Xa!==0;return Xa=0,t}function Fs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?tt.memoizedState=ft=t:ft=ft.next=t,ft}function Ns(){if(ht===null){var t=tt.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var s=ft===null?tt.memoizedState:ft.next;if(s!==null)ft=s,ht=t;else{if(t===null)throw Error(ue(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},ft===null?tt.memoizedState=ft=t:ft=ft.next=t}return ft}function Ja(t,s){return typeof s=="function"?s(t):s}function qo(t){var s=Ns(),r=s.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=t;var i=ht,o=i.baseQueue,c=r.pending;if(c!==null){if(o!==null){var u=o.next;o.next=c.next,c.next=u}i.baseQueue=o=c,r.pending=null}if(o!==null){c=o.next,i=i.baseState;var h=u=null,x=null,j=c;do{var w=j.lane;if((er&w)===w)x!==null&&(x=x.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),i=j.hasEagerState?j.eagerState:t(i,j.action);else{var T={lane:w,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};x===null?(h=x=T,u=i):x=x.next=T,tt.lanes|=w,tr|=w}j=j.next}while(j!==null&&j!==c);x===null?u=i:x.next=h,zs(i,s.memoizedState)||(Kt=!0),s.memoizedState=i,s.baseState=u,s.baseQueue=x,r.lastRenderedState=i}if(t=r.interleaved,t!==null){o=t;do c=o.lane,tt.lanes|=c,tr|=c,o=o.next;while(o!==t)}else o===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function Go(t){var s=Ns(),r=s.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=t;var i=r.dispatch,o=r.pending,c=s.memoizedState;if(o!==null){r.pending=null;var u=o=o.next;do c=t(c,u.action),u=u.next;while(u!==o);zs(c,s.memoizedState)||(Kt=!0),s.memoizedState=c,s.baseQueue===null&&(s.baseState=c),r.lastRenderedState=c}return[c,i]}function Fx(){}function $x(t,s){var r=tt,i=Ns(),o=s(),c=!zs(i.memoizedState,o);if(c&&(i.memoizedState=o,Kt=!0),i=i.queue,Rd(Hx.bind(null,r,i,t),[t]),i.getSnapshot!==s||c||ft!==null&&ft.memoizedState.tag&1){if(r.flags|=2048,ei(9,Zx.bind(null,r,i,o,s),void 0,null),Nt===null)throw Error(ue(349));er&30||Ux(r,s,o)}return o}function Ux(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=tt.updateQueue,s===null?(s={lastEffect:null,stores:null},tt.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function Zx(t,s,r,i){s.value=r,s.getSnapshot=i,Vx(s)&&Wx(t)}function Hx(t,s,r){return r(function(){Vx(s)&&Wx(t)})}function Vx(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!zs(t,r)}catch{return!0}}function Wx(t){var s=rn(t,1);s!==null&&Is(s,t,1,-1)}function qm(t){var s=Fs();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:t},s.queue=t,t=t.dispatch=Rv.bind(null,tt,t),[s.memoizedState,t]}function ei(t,s,r,i){return t={tag:t,create:s,destroy:r,deps:i,next:null},s=tt.updateQueue,s===null?(s={lastEffect:null,stores:null},tt.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(i=r.next,r.next=t,t.next=i,s.lastEffect=t)),t}function qx(){return Ns().memoizedState}function Xi(t,s,r,i){var o=Fs();tt.flags|=t,o.memoizedState=ei(1|s,r,void 0,i===void 0?null:i)}function Zl(t,s,r,i){var o=Ns();i=i===void 0?null:i;var c=void 0;if(ht!==null){var u=ht.memoizedState;if(c=u.destroy,i!==null&&Ad(i,u.deps)){o.memoizedState=ei(s,r,c,i);return}}tt.flags|=t,o.memoizedState=ei(1|s,r,c,i)}function Gm(t,s){return Xi(8390656,8,t,s)}function Rd(t,s){return Zl(2048,8,t,s)}function Gx(t,s){return Zl(4,2,t,s)}function Kx(t,s){return Zl(4,4,t,s)}function Qx(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Yx(t,s,r){return r=r!=null?r.concat([t]):null,Zl(4,4,Qx.bind(null,s,t),r)}function Dd(){}function Xx(t,s){var r=Ns();s=s===void 0?null:s;var i=r.memoizedState;return i!==null&&s!==null&&Ad(s,i[1])?i[0]:(r.memoizedState=[t,s],t)}function Jx(t,s){var r=Ns();s=s===void 0?null:s;var i=r.memoizedState;return i!==null&&s!==null&&Ad(s,i[1])?i[0]:(t=t(),r.memoizedState=[t,s],t)}function ep(t,s,r){return er&21?(zs(r,s)||(r=ax(),tt.lanes|=r,tr|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,Kt=!0),t.memoizedState=r)}function Ov(t,s){var r=Ue;Ue=r!==0&&4>r?r:4,t(!0);var i=Wo.transition;Wo.transition={};try{t(!1),s()}finally{Ue=r,Wo.transition=i}}function tp(){return Ns().memoizedState}function Bv(t,s,r){var i=wn(t);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},sp(t))np(s,r);else if(r=Bx(t,s,r,i),r!==null){var o=Zt();Is(r,t,i,o),rp(r,s,i)}}function Rv(t,s,r){var i=wn(t),o={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(sp(t))np(s,o);else{var c=t.alternate;if(t.lanes===0&&(c===null||c.lanes===0)&&(c=s.lastRenderedReducer,c!==null))try{var u=s.lastRenderedState,h=c(u,r);if(o.hasEagerState=!0,o.eagerState=h,zs(h,u)){var x=s.interleaved;x===null?(o.next=o,Td(s)):(o.next=x.next,x.next=o),s.interleaved=o;return}}catch{}finally{}r=Bx(t,s,o,i),r!==null&&(o=Zt(),Is(r,t,i,o),rp(r,s,i))}}function sp(t){var s=t.alternate;return t===tt||s!==null&&s===tt}function np(t,s){Aa=wl=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function rp(t,s,r){if(r&4194240){var i=s.lanes;i&=t.pendingLanes,r|=i,s.lanes=r,fd(t,r)}}var _l={readContext:js,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},Dv={readContext:js,useCallback:function(t,s){return Fs().memoizedState=[t,s===void 0?null:s],t},useContext:js,useEffect:Gm,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,Xi(4194308,4,Qx.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Xi(4194308,4,t,s)},useInsertionEffect:function(t,s){return Xi(4,2,t,s)},useMemo:function(t,s){var r=Fs();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var i=Fs();return s=r!==void 0?r(s):s,i.memoizedState=i.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},i.queue=t,t=t.dispatch=Bv.bind(null,tt,t),[i.memoizedState,t]},useRef:function(t){var s=Fs();return t={current:t},s.memoizedState=t},useState:qm,useDebugValue:Dd,useDeferredValue:function(t){return Fs().memoizedState=t},useTransition:function(){var t=qm(!1),s=t[0];return t=Ov.bind(null,t[1]),Fs().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var i=tt,o=Fs();if(Xe){if(r===void 0)throw Error(ue(407));r=r()}else{if(r=s(),Nt===null)throw Error(ue(349));er&30||Ux(i,s,r)}o.memoizedState=r;var c={value:r,getSnapshot:s};return o.queue=c,Gm(Hx.bind(null,i,c,t),[t]),i.flags|=2048,ei(9,Zx.bind(null,i,c,r,s),void 0,null),r},useId:function(){var t=Fs(),s=Nt.identifierPrefix;if(Xe){var r=Js,i=Xs;r=(i&~(1<<32-Ts(i)-1)).toString(32)+r,s=":"+s+"R"+r,r=Xa++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=Av++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},Fv={readContext:js,useCallback:Xx,useContext:js,useEffect:Rd,useImperativeHandle:Yx,useInsertionEffect:Gx,useLayoutEffect:Kx,useMemo:Jx,useReducer:qo,useRef:qx,useState:function(){return qo(Ja)},useDebugValue:Dd,useDeferredValue:function(t){var s=Ns();return ep(s,ht.memoizedState,t)},useTransition:function(){var t=qo(Ja)[0],s=Ns().memoizedState;return[t,s]},useMutableSource:Fx,useSyncExternalStore:$x,useId:tp,unstable_isNewReconciler:!1},$v={readContext:js,useCallback:Xx,useContext:js,useEffect:Rd,useImperativeHandle:Yx,useInsertionEffect:Gx,useLayoutEffect:Kx,useMemo:Jx,useReducer:Go,useRef:qx,useState:function(){return Go(Ja)},useDebugValue:Dd,useDeferredValue:function(t){var s=Ns();return ht===null?s.memoizedState=t:ep(s,ht.memoizedState,t)},useTransition:function(){var t=Go(Ja)[0],s=Ns().memoizedState;return[t,s]},useMutableSource:Fx,useSyncExternalStore:$x,useId:tp,unstable_isNewReconciler:!1};function Ss(t,s){if(t&&t.defaultProps){s=nt({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function zc(t,s,r,i){s=t.memoizedState,r=r(i,s),r=r==null?s:nt({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Hl={isMounted:function(t){return(t=t._reactInternals)?ar(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var i=Zt(),o=wn(t),c=en(i,o);c.payload=s,r!=null&&(c.callback=r),s=Nn(t,c,o),s!==null&&(Is(s,t,o,i),Qi(s,t,o))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var i=Zt(),o=wn(t),c=en(i,o);c.tag=1,c.payload=s,r!=null&&(c.callback=r),s=Nn(t,c,o),s!==null&&(Is(s,t,o,i),Qi(s,t,o))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=Zt(),i=wn(t),o=en(r,i);o.tag=2,s!=null&&(o.callback=s),s=Nn(t,o,i),s!==null&&(Is(s,t,i,r),Qi(s,t,i))}};function Km(t,s,r,i,o,c,u){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,c,u):s.prototype&&s.prototype.isPureReactComponent?!Wa(r,i)||!Wa(o,c):!0}function ap(t,s,r){var i=!1,o=Pn,c=s.contextType;return typeof c=="object"&&c!==null?c=js(c):(o=Yt(s)?Xn:Ot.current,i=s.contextTypes,c=(i=i!=null)?$r(t,o):Pn),s=new s(r,c),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Hl,t.stateNode=s,s._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=c),s}function Qm(t,s,r,i){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,i),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,i),s.state!==t&&Hl.enqueueReplaceState(s,s.state,null)}function Mc(t,s,r,i){var o=t.stateNode;o.props=r,o.state=t.memoizedState,o.refs={},Id(t);var c=s.contextType;typeof c=="object"&&c!==null?o.context=js(c):(c=Yt(s)?Xn:Ot.current,o.context=$r(t,c)),o.state=t.memoizedState,c=s.getDerivedStateFromProps,typeof c=="function"&&(zc(t,s,c,r),o.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(s=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),s!==o.state&&Hl.enqueueReplaceState(o,o.state,null),Nl(t,r,o,i),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Vr(t,s){try{var r="",i=s;do r+=pg(i),i=i.return;while(i);var o=r}catch(c){o=`
Error generating stack: `+c.message+`
`+c.stack}return{value:t,source:s,stack:o,digest:null}}function Ko(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function Ac(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var Uv=typeof WeakMap=="function"?WeakMap:Map;function ip(t,s,r){r=en(-1,r),r.tag=3,r.payload={element:null};var i=s.value;return r.callback=function(){Sl||(Sl=!0,Vc=i),Ac(t,s)},r}function lp(t,s,r){r=en(-1,r),r.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var o=s.value;r.payload=function(){return i(o)},r.callback=function(){Ac(t,s)}}var c=t.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(r.callback=function(){Ac(t,s),typeof i!="function"&&(bn===null?bn=new Set([this]):bn.add(this));var u=s.stack;this.componentDidCatch(s.value,{componentStack:u!==null?u:""})}),r}function Ym(t,s,r){var i=t.pingCache;if(i===null){i=t.pingCache=new Uv;var o=new Set;i.set(s,o)}else o=i.get(s),o===void 0&&(o=new Set,i.set(s,o));o.has(r)||(o.add(r),t=sy.bind(null,t,s,r),s.then(t,t))}function Xm(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Jm(t,s,r,i,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=en(-1,1),s.tag=2,Nn(r,s,1))),r.lanes|=1),t)}var Zv=ln.ReactCurrentOwner,Kt=!1;function Ft(t,s,r,i){s.child=t===null?Ox(s,null,r,i):Zr(s,t.child,r,i)}function eh(t,s,r,i,o){r=r.render;var c=s.ref;return Br(s,o),i=Od(t,s,r,i,c,o),r=Bd(),t!==null&&!Kt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~o,an(t,s,o)):(Xe&&r&&_d(s),s.flags|=1,Ft(t,s,i,o),s.child)}function th(t,s,r,i,o){if(t===null){var c=r.type;return typeof c=="function"&&!qd(c)&&c.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=c,op(t,s,c,i,o)):(t=sl(r.type,null,i,s,s.mode,o),t.ref=s.ref,t.return=s,s.child=t)}if(c=t.child,!(t.lanes&o)){var u=c.memoizedProps;if(r=r.compare,r=r!==null?r:Wa,r(u,i)&&t.ref===s.ref)return an(t,s,o)}return s.flags|=1,t=_n(c,i),t.ref=s.ref,t.return=s,s.child=t}function op(t,s,r,i,o){if(t!==null){var c=t.memoizedProps;if(Wa(c,i)&&t.ref===s.ref)if(Kt=!1,s.pendingProps=i=c,(t.lanes&o)!==0)t.flags&131072&&(Kt=!0);else return s.lanes=t.lanes,an(t,s,o)}return Oc(t,s,r,i,o)}function cp(t,s,r){var i=s.pendingProps,o=i.children,c=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Er,es),es|=r;else{if(!(r&1073741824))return t=c!==null?c.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Ve(Er,es),es|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=c!==null?c.baseLanes:r,Ve(Er,es),es|=i}else c!==null?(i=c.baseLanes|r,s.memoizedState=null):i=r,Ve(Er,es),es|=i;return Ft(t,s,o,r),s.child}function dp(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function Oc(t,s,r,i,o){var c=Yt(r)?Xn:Ot.current;return c=$r(s,c),Br(s,o),r=Od(t,s,r,i,c,o),i=Bd(),t!==null&&!Kt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~o,an(t,s,o)):(Xe&&i&&_d(s),s.flags|=1,Ft(t,s,r,o),s.child)}function sh(t,s,r,i,o){if(Yt(r)){var c=!0;fl(s)}else c=!1;if(Br(s,o),s.stateNode===null)Ji(t,s),ap(s,r,i),Mc(s,r,i,o),i=!0;else if(t===null){var u=s.stateNode,h=s.memoizedProps;u.props=h;var x=u.context,j=r.contextType;typeof j=="object"&&j!==null?j=js(j):(j=Yt(r)?Xn:Ot.current,j=$r(s,j));var w=r.getDerivedStateFromProps,T=typeof w=="function"||typeof u.getSnapshotBeforeUpdate=="function";T||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==i||x!==j)&&Qm(s,u,i,j),mn=!1;var S=s.memoizedState;u.state=S,Nl(s,i,u,o),x=s.memoizedState,h!==i||S!==x||Qt.current||mn?(typeof w=="function"&&(zc(s,r,w,i),x=s.memoizedState),(h=mn||Km(s,r,h,i,S,x,j))?(T||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(s.flags|=4194308)):(typeof u.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=i,s.memoizedState=x),u.props=i,u.state=x,u.context=j,i=h):(typeof u.componentDidMount=="function"&&(s.flags|=4194308),i=!1)}else{u=s.stateNode,Rx(t,s),h=s.memoizedProps,j=s.type===s.elementType?h:Ss(s.type,h),u.props=j,T=s.pendingProps,S=u.context,x=r.contextType,typeof x=="object"&&x!==null?x=js(x):(x=Yt(r)?Xn:Ot.current,x=$r(s,x));var N=r.getDerivedStateFromProps;(w=typeof N=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==T||S!==x)&&Qm(s,u,i,x),mn=!1,S=s.memoizedState,u.state=S,Nl(s,i,u,o);var P=s.memoizedState;h!==T||S!==P||Qt.current||mn?(typeof N=="function"&&(zc(s,r,N,i),P=s.memoizedState),(j=mn||Km(s,r,j,i,S,P,x)||!1)?(w||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(i,P,x),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(i,P,x)),typeof u.componentDidUpdate=="function"&&(s.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===t.memoizedProps&&S===t.memoizedState||(s.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&S===t.memoizedState||(s.flags|=1024),s.memoizedProps=i,s.memoizedState=P),u.props=i,u.state=P,u.context=x,i=j):(typeof u.componentDidUpdate!="function"||h===t.memoizedProps&&S===t.memoizedState||(s.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&S===t.memoizedState||(s.flags|=1024),i=!1)}return Bc(t,s,r,i,c,o)}function Bc(t,s,r,i,o,c){dp(t,s);var u=(s.flags&128)!==0;if(!i&&!u)return o&&$m(s,r,!1),an(t,s,c);i=s.stateNode,Zv.current=s;var h=u&&typeof r.getDerivedStateFromError!="function"?null:i.render();return s.flags|=1,t!==null&&u?(s.child=Zr(s,t.child,null,c),s.child=Zr(s,null,h,c)):Ft(t,s,h,c),s.memoizedState=i.state,o&&$m(s,r,!0),s.child}function up(t){var s=t.stateNode;s.pendingContext?Fm(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Fm(t,s.context,!1),Ed(t,s.containerInfo)}function nh(t,s,r,i,o){return Ur(),Sd(o),s.flags|=256,Ft(t,s,r,i),s.child}var Rc={dehydrated:null,treeContext:null,retryLane:0};function Dc(t){return{baseLanes:t,cachePool:null,transitions:null}}function mp(t,s,r){var i=s.pendingProps,o=et.current,c=!1,u=(s.flags&128)!==0,h;if((h=u)||(h=t!==null&&t.memoizedState===null?!1:(o&2)!==0),h?(c=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),Ve(et,o&1),t===null)return Ic(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(u=i.children,t=i.fallback,c?(i=s.mode,c=s.child,u={mode:"hidden",children:u},!(i&1)&&c!==null?(c.childLanes=0,c.pendingProps=u):c=ql(u,i,0,null),t=Kn(t,i,r,null),c.return=s,t.return=s,c.sibling=t,s.child=c,s.child.memoizedState=Dc(r),s.memoizedState=Rc,t):Fd(s,u));if(o=t.memoizedState,o!==null&&(h=o.dehydrated,h!==null))return Hv(t,s,u,i,h,o,r);if(c){c=i.fallback,u=s.mode,o=t.child,h=o.sibling;var x={mode:"hidden",children:i.children};return!(u&1)&&s.child!==o?(i=s.child,i.childLanes=0,i.pendingProps=x,s.deletions=null):(i=_n(o,x),i.subtreeFlags=o.subtreeFlags&14680064),h!==null?c=_n(h,c):(c=Kn(c,u,r,null),c.flags|=2),c.return=s,i.return=s,i.sibling=c,s.child=i,i=c,c=s.child,u=t.child.memoizedState,u=u===null?Dc(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},c.memoizedState=u,c.childLanes=t.childLanes&~r,s.memoizedState=Rc,i}return c=t.child,t=c.sibling,i=_n(c,{mode:"visible",children:i.children}),!(s.mode&1)&&(i.lanes=r),i.return=s,i.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=i,s.memoizedState=null,i}function Fd(t,s){return s=ql({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function $i(t,s,r,i){return i!==null&&Sd(i),Zr(s,t.child,null,r),t=Fd(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Hv(t,s,r,i,o,c,u){if(r)return s.flags&256?(s.flags&=-257,i=Ko(Error(ue(422))),$i(t,s,u,i)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(c=i.fallback,o=s.mode,i=ql({mode:"visible",children:i.children},o,0,null),c=Kn(c,o,u,null),c.flags|=2,i.return=s,c.return=s,i.sibling=c,s.child=i,s.mode&1&&Zr(s,t.child,null,u),s.child.memoizedState=Dc(u),s.memoizedState=Rc,c);if(!(s.mode&1))return $i(t,s,u,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var h=i.dgst;return i=h,c=Error(ue(419)),i=Ko(c,i,void 0),$i(t,s,u,i)}if(h=(u&t.childLanes)!==0,Kt||h){if(i=Nt,i!==null){switch(u&-u){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|u)?0:o,o!==0&&o!==c.retryLane&&(c.retryLane=o,rn(t,o),Is(i,t,o,-1))}return Wd(),i=Ko(Error(ue(421))),$i(t,s,u,i)}return o.data==="$?"?(s.flags|=128,s.child=t.child,s=ny.bind(null,t),o._reactRetry=s,null):(t=c.treeContext,ns=jn(o.nextSibling),rs=s,Xe=!0,Ps=null,t!==null&&(hs[xs++]=Xs,hs[xs++]=Js,hs[xs++]=Jn,Xs=t.id,Js=t.overflow,Jn=s),s=Fd(s,i.children),s.flags|=4096,s)}function rh(t,s,r){t.lanes|=s;var i=t.alternate;i!==null&&(i.lanes|=s),Ec(t.return,s,r)}function Qo(t,s,r,i,o){var c=t.memoizedState;c===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:o}:(c.isBackwards=s,c.rendering=null,c.renderingStartTime=0,c.last=i,c.tail=r,c.tailMode=o)}function hp(t,s,r){var i=s.pendingProps,o=i.revealOrder,c=i.tail;if(Ft(t,s,i.children,r),i=et.current,i&2)i=i&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rh(t,r,s);else if(t.tag===19)rh(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ve(et,i),!(s.mode&1))s.memoizedState=null;else switch(o){case"forwards":for(r=s.child,o=null;r!==null;)t=r.alternate,t!==null&&bl(t)===null&&(o=r),r=r.sibling;r=o,r===null?(o=s.child,s.child=null):(o=r.sibling,r.sibling=null),Qo(s,!1,o,r,c);break;case"backwards":for(r=null,o=s.child,s.child=null;o!==null;){if(t=o.alternate,t!==null&&bl(t)===null){s.child=o;break}t=o.sibling,o.sibling=r,r=o,o=t}Qo(s,!0,r,null,c);break;case"together":Qo(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ji(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function an(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),tr|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(ue(153));if(s.child!==null){for(t=s.child,r=_n(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=_n(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function Vv(t,s,r){switch(s.tag){case 3:up(s),Ur();break;case 5:Dx(s);break;case 1:Yt(s.type)&&fl(s);break;case 4:Ed(s,s.stateNode.containerInfo);break;case 10:var i=s.type._context,o=s.memoizedProps.value;Ve(yl,i._currentValue),i._currentValue=o;break;case 13:if(i=s.memoizedState,i!==null)return i.dehydrated!==null?(Ve(et,et.current&1),s.flags|=128,null):r&s.child.childLanes?mp(t,s,r):(Ve(et,et.current&1),t=an(t,s,r),t!==null?t.sibling:null);Ve(et,et.current&1);break;case 19:if(i=(r&s.childLanes)!==0,t.flags&128){if(i)return hp(t,s,r);s.flags|=128}if(o=s.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ve(et,et.current),i)break;return null;case 22:case 23:return s.lanes=0,cp(t,s,r)}return an(t,s,r)}var xp,Fc,pp,fp;xp=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Fc=function(){};pp=function(t,s,r,i){var o=t.memoizedProps;if(o!==i){t=s.stateNode,qn(Hs.current);var c=null;switch(r){case"input":o=oc(t,o),i=oc(t,i),c=[];break;case"select":o=nt({},o,{value:void 0}),i=nt({},i,{value:void 0}),c=[];break;case"textarea":o=uc(t,o),i=uc(t,i),c=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=xl)}hc(r,i);var u;r=null;for(j in o)if(!i.hasOwnProperty(j)&&o.hasOwnProperty(j)&&o[j]!=null)if(j==="style"){var h=o[j];for(u in h)h.hasOwnProperty(u)&&(r||(r={}),r[u]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(Da.hasOwnProperty(j)?c||(c=[]):(c=c||[]).push(j,null));for(j in i){var x=i[j];if(h=o!=null?o[j]:void 0,i.hasOwnProperty(j)&&x!==h&&(x!=null||h!=null))if(j==="style")if(h){for(u in h)!h.hasOwnProperty(u)||x&&x.hasOwnProperty(u)||(r||(r={}),r[u]="");for(u in x)x.hasOwnProperty(u)&&h[u]!==x[u]&&(r||(r={}),r[u]=x[u])}else r||(c||(c=[]),c.push(j,r)),r=x;else j==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,h=h?h.__html:void 0,x!=null&&h!==x&&(c=c||[]).push(j,x)):j==="children"?typeof x!="string"&&typeof x!="number"||(c=c||[]).push(j,""+x):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(Da.hasOwnProperty(j)?(x!=null&&j==="onScroll"&&Ge("scroll",t),c||h===x||(c=[])):(c=c||[]).push(j,x))}r&&(c=c||[]).push("style",r);var j=c;(s.updateQueue=j)&&(s.flags|=4)}};fp=function(t,s,r,i){r!==i&&(s.flags|=4)};function Na(t,s){if(!Xe)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function zt(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,i=0;if(s)for(var o=t.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)r|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=i,t.childLanes=r,s}function Wv(t,s,r){var i=s.pendingProps;switch(kd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(s),null;case 1:return Yt(s.type)&&pl(),zt(s),null;case 3:return i=s.stateNode,Hr(),Ke(Qt),Ke(Ot),Md(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Di(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Ps!==null&&(Gc(Ps),Ps=null))),Fc(t,s),zt(s),null;case 5:zd(s);var o=qn(Ya.current);if(r=s.type,t!==null&&s.stateNode!=null)pp(t,s,r,i,o),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!i){if(s.stateNode===null)throw Error(ue(166));return zt(s),null}if(t=qn(Hs.current),Di(s)){i=s.stateNode,r=s.type;var c=s.memoizedProps;switch(i[Us]=s,i[Ka]=c,t=(s.mode&1)!==0,r){case"dialog":Ge("cancel",i),Ge("close",i);break;case"iframe":case"object":case"embed":Ge("load",i);break;case"video":case"audio":for(o=0;o<Ca.length;o++)Ge(Ca[o],i);break;case"source":Ge("error",i);break;case"img":case"image":case"link":Ge("error",i),Ge("load",i);break;case"details":Ge("toggle",i);break;case"input":hm(i,c),Ge("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!c.multiple},Ge("invalid",i);break;case"textarea":pm(i,c),Ge("invalid",i)}hc(r,c),o=null;for(var u in c)if(c.hasOwnProperty(u)){var h=c[u];u==="children"?typeof h=="string"?i.textContent!==h&&(c.suppressHydrationWarning!==!0&&Ri(i.textContent,h,t),o=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(c.suppressHydrationWarning!==!0&&Ri(i.textContent,h,t),o=["children",""+h]):Da.hasOwnProperty(u)&&h!=null&&u==="onScroll"&&Ge("scroll",i)}switch(r){case"input":Ti(i),xm(i,c,!0);break;case"textarea":Ti(i),fm(i);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(i.onclick=xl)}i=o,s.updateQueue=i,i!==null&&(s.flags|=4)}else{u=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Hh(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=u.createElement(r,{is:i.is}):(t=u.createElement(r),r==="select"&&(u=t,i.multiple?u.multiple=!0:i.size&&(u.size=i.size))):t=u.createElementNS(t,r),t[Us]=s,t[Ka]=i,xp(t,s,!1,!1),s.stateNode=t;e:{switch(u=xc(r,i),r){case"dialog":Ge("cancel",t),Ge("close",t),o=i;break;case"iframe":case"object":case"embed":Ge("load",t),o=i;break;case"video":case"audio":for(o=0;o<Ca.length;o++)Ge(Ca[o],t);o=i;break;case"source":Ge("error",t),o=i;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),o=i;break;case"details":Ge("toggle",t),o=i;break;case"input":hm(t,i),o=oc(t,i),Ge("invalid",t);break;case"option":o=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},o=nt({},i,{value:void 0}),Ge("invalid",t);break;case"textarea":pm(t,i),o=uc(t,i),Ge("invalid",t);break;default:o=i}hc(r,o),h=o;for(c in h)if(h.hasOwnProperty(c)){var x=h[c];c==="style"?qh(t,x):c==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&Vh(t,x)):c==="children"?typeof x=="string"?(r!=="textarea"||x!=="")&&Fa(t,x):typeof x=="number"&&Fa(t,""+x):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Da.hasOwnProperty(c)?x!=null&&c==="onScroll"&&Ge("scroll",t):x!=null&&dd(t,c,x,u))}switch(r){case"input":Ti(t),xm(t,i,!1);break;case"textarea":Ti(t),fm(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Cn(i.value));break;case"select":t.multiple=!!i.multiple,c=i.value,c!=null?zr(t,!!i.multiple,c,!1):i.defaultValue!=null&&zr(t,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=xl)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return zt(s),null;case 6:if(t&&s.stateNode!=null)fp(t,s,t.memoizedProps,i);else{if(typeof i!="string"&&s.stateNode===null)throw Error(ue(166));if(r=qn(Ya.current),qn(Hs.current),Di(s)){if(i=s.stateNode,r=s.memoizedProps,i[Us]=s,(c=i.nodeValue!==r)&&(t=rs,t!==null))switch(t.tag){case 3:Ri(i.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ri(i.nodeValue,r,(t.mode&1)!==0)}c&&(s.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Us]=s,s.stateNode=i}return zt(s),null;case 13:if(Ke(et),i=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Xe&&ns!==null&&s.mode&1&&!(s.flags&128))Mx(),Ur(),s.flags|=98560,c=!1;else if(c=Di(s),i!==null&&i.dehydrated!==null){if(t===null){if(!c)throw Error(ue(318));if(c=s.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(ue(317));c[Us]=s}else Ur(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;zt(s),c=!1}else Ps!==null&&(Gc(Ps),Ps=null),c=!0;if(!c)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(s.child.flags|=8192,s.mode&1&&(t===null||et.current&1?xt===0&&(xt=3):Wd())),s.updateQueue!==null&&(s.flags|=4),zt(s),null);case 4:return Hr(),Fc(t,s),t===null&&qa(s.stateNode.containerInfo),zt(s),null;case 10:return Ld(s.type._context),zt(s),null;case 17:return Yt(s.type)&&pl(),zt(s),null;case 19:if(Ke(et),c=s.memoizedState,c===null)return zt(s),null;if(i=(s.flags&128)!==0,u=c.rendering,u===null)if(i)Na(c,!1);else{if(xt!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(u=bl(t),u!==null){for(s.flags|=128,Na(c,!1),i=u.updateQueue,i!==null&&(s.updateQueue=i,s.flags|=4),s.subtreeFlags=0,i=r,r=s.child;r!==null;)c=r,t=i,c.flags&=14680066,u=c.alternate,u===null?(c.childLanes=0,c.lanes=t,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=u.childLanes,c.lanes=u.lanes,c.child=u.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=u.memoizedProps,c.memoizedState=u.memoizedState,c.updateQueue=u.updateQueue,c.type=u.type,t=u.dependencies,c.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ve(et,et.current&1|2),s.child}t=t.sibling}c.tail!==null&&lt()>Wr&&(s.flags|=128,i=!0,Na(c,!1),s.lanes=4194304)}else{if(!i)if(t=bl(u),t!==null){if(s.flags|=128,i=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),Na(c,!0),c.tail===null&&c.tailMode==="hidden"&&!u.alternate&&!Xe)return zt(s),null}else 2*lt()-c.renderingStartTime>Wr&&r!==1073741824&&(s.flags|=128,i=!0,Na(c,!1),s.lanes=4194304);c.isBackwards?(u.sibling=s.child,s.child=u):(r=c.last,r!==null?r.sibling=u:s.child=u,c.last=u)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=lt(),s.sibling=null,r=et.current,Ve(et,i?r&1|2:r&1),s):(zt(s),null);case 22:case 23:return Vd(),i=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(s.flags|=8192),i&&s.mode&1?es&1073741824&&(zt(s),s.subtreeFlags&6&&(s.flags|=8192)):zt(s),null;case 24:return null;case 25:return null}throw Error(ue(156,s.tag))}function qv(t,s){switch(kd(s),s.tag){case 1:return Yt(s.type)&&pl(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Hr(),Ke(Qt),Ke(Ot),Md(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return zd(s),null;case 13:if(Ke(et),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(ue(340));Ur()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Ke(et),null;case 4:return Hr(),null;case 10:return Ld(s.type._context),null;case 22:case 23:return Vd(),null;case 24:return null;default:return null}}var Ui=!1,Mt=!1,Gv=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Ir(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){rt(t,s,i)}else r.current=null}function $c(t,s,r){try{r()}catch(i){rt(t,s,i)}}var ah=!1;function Kv(t,s){if(_c=ul,t=Nx(),wd(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var o=i.anchorOffset,c=i.focusNode;i=i.focusOffset;try{r.nodeType,c.nodeType}catch{r=null;break e}var u=0,h=-1,x=-1,j=0,w=0,T=t,S=null;t:for(;;){for(var N;T!==r||o!==0&&T.nodeType!==3||(h=u+o),T!==c||i!==0&&T.nodeType!==3||(x=u+i),T.nodeType===3&&(u+=T.nodeValue.length),(N=T.firstChild)!==null;)S=T,T=N;for(;;){if(T===t)break t;if(S===r&&++j===o&&(h=u),S===c&&++w===i&&(x=u),(N=T.nextSibling)!==null)break;T=S,S=T.parentNode}T=N}r=h===-1||x===-1?null:{start:h,end:x}}else r=null}r=r||{start:0,end:0}}else r=null;for(kc={focusedElem:t,selectionRange:r},ul=!1,ve=s;ve!==null;)if(s=ve,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,ve=t;else for(;ve!==null;){s=ve;try{var P=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var g=P.memoizedProps,M=P.memoizedState,v=s.stateNode,y=v.getSnapshotBeforeUpdate(s.elementType===s.type?g:Ss(s.type,g),M);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var k=s.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ue(163))}}catch(C){rt(s,s.return,C)}if(t=s.sibling,t!==null){t.return=s.return,ve=t;break}ve=s.return}return P=ah,ah=!1,P}function Oa(t,s,r){var i=s.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&t)===t){var c=o.destroy;o.destroy=void 0,c!==void 0&&$c(s,r,c)}o=o.next}while(o!==i)}}function Vl(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.create;r.destroy=i()}r=r.next}while(r!==s)}}function Uc(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function gp(t){var s=t.alternate;s!==null&&(t.alternate=null,gp(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[Us],delete s[Ka],delete s[Pc],delete s[Iv],delete s[Ev])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vp(t){return t.tag===5||t.tag===3||t.tag===4}function ih(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zc(t,s,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=xl));else if(i!==4&&(t=t.child,t!==null))for(Zc(t,s,r),t=t.sibling;t!==null;)Zc(t,s,r),t=t.sibling}function Hc(t,s,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Hc(t,s,r),t=t.sibling;t!==null;)Hc(t,s,r),t=t.sibling}var kt=null,Cs=!1;function dn(t,s,r){for(r=r.child;r!==null;)yp(t,s,r),r=r.sibling}function yp(t,s,r){if(Zs&&typeof Zs.onCommitFiberUnmount=="function")try{Zs.onCommitFiberUnmount(Bl,r)}catch{}switch(r.tag){case 5:Mt||Ir(r,s);case 6:var i=kt,o=Cs;kt=null,dn(t,s,r),kt=i,Cs=o,kt!==null&&(Cs?(t=kt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):kt.removeChild(r.stateNode));break;case 18:kt!==null&&(Cs?(t=kt,r=r.stateNode,t.nodeType===8?Zo(t.parentNode,r):t.nodeType===1&&Zo(t,r),Ha(t)):Zo(kt,r.stateNode));break;case 4:i=kt,o=Cs,kt=r.stateNode.containerInfo,Cs=!0,dn(t,s,r),kt=i,Cs=o;break;case 0:case 11:case 14:case 15:if(!Mt&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var c=o,u=c.destroy;c=c.tag,u!==void 0&&(c&2||c&4)&&$c(r,s,u),o=o.next}while(o!==i)}dn(t,s,r);break;case 1:if(!Mt&&(Ir(r,s),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(h){rt(r,s,h)}dn(t,s,r);break;case 21:dn(t,s,r);break;case 22:r.mode&1?(Mt=(i=Mt)||r.memoizedState!==null,dn(t,s,r),Mt=i):dn(t,s,r);break;default:dn(t,s,r)}}function lh(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Gv),s.forEach(function(i){var o=ry.bind(null,t,i);r.has(i)||(r.add(i),i.then(o,o))})}}function _s(t,s){var r=s.deletions;if(r!==null)for(var i=0;i<r.length;i++){var o=r[i];try{var c=t,u=s,h=u;e:for(;h!==null;){switch(h.tag){case 5:kt=h.stateNode,Cs=!1;break e;case 3:kt=h.stateNode.containerInfo,Cs=!0;break e;case 4:kt=h.stateNode.containerInfo,Cs=!0;break e}h=h.return}if(kt===null)throw Error(ue(160));yp(c,u,o),kt=null,Cs=!1;var x=o.alternate;x!==null&&(x.return=null),o.return=null}catch(j){rt(o,s,j)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)jp(s,t),s=s.sibling}function jp(t,s){var r=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_s(s,t),Ds(t),i&4){try{Oa(3,t,t.return),Vl(3,t)}catch(g){rt(t,t.return,g)}try{Oa(5,t,t.return)}catch(g){rt(t,t.return,g)}}break;case 1:_s(s,t),Ds(t),i&512&&r!==null&&Ir(r,r.return);break;case 5:if(_s(s,t),Ds(t),i&512&&r!==null&&Ir(r,r.return),t.flags&32){var o=t.stateNode;try{Fa(o,"")}catch(g){rt(t,t.return,g)}}if(i&4&&(o=t.stateNode,o!=null)){var c=t.memoizedProps,u=r!==null?r.memoizedProps:c,h=t.type,x=t.updateQueue;if(t.updateQueue=null,x!==null)try{h==="input"&&c.type==="radio"&&c.name!=null&&Uh(o,c),xc(h,u);var j=xc(h,c);for(u=0;u<x.length;u+=2){var w=x[u],T=x[u+1];w==="style"?qh(o,T):w==="dangerouslySetInnerHTML"?Vh(o,T):w==="children"?Fa(o,T):dd(o,w,T,j)}switch(h){case"input":cc(o,c);break;case"textarea":Zh(o,c);break;case"select":var S=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!c.multiple;var N=c.value;N!=null?zr(o,!!c.multiple,N,!1):S!==!!c.multiple&&(c.defaultValue!=null?zr(o,!!c.multiple,c.defaultValue,!0):zr(o,!!c.multiple,c.multiple?[]:"",!1))}o[Ka]=c}catch(g){rt(t,t.return,g)}}break;case 6:if(_s(s,t),Ds(t),i&4){if(t.stateNode===null)throw Error(ue(162));o=t.stateNode,c=t.memoizedProps;try{o.nodeValue=c}catch(g){rt(t,t.return,g)}}break;case 3:if(_s(s,t),Ds(t),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Ha(s.containerInfo)}catch(g){rt(t,t.return,g)}break;case 4:_s(s,t),Ds(t);break;case 13:_s(s,t),Ds(t),o=t.child,o.flags&8192&&(c=o.memoizedState!==null,o.stateNode.isHidden=c,!c||o.alternate!==null&&o.alternate.memoizedState!==null||(Zd=lt())),i&4&&lh(t);break;case 22:if(w=r!==null&&r.memoizedState!==null,t.mode&1?(Mt=(j=Mt)||w,_s(s,t),Mt=j):_s(s,t),Ds(t),i&8192){if(j=t.memoizedState!==null,(t.stateNode.isHidden=j)&&!w&&t.mode&1)for(ve=t,w=t.child;w!==null;){for(T=ve=w;ve!==null;){switch(S=ve,N=S.child,S.tag){case 0:case 11:case 14:case 15:Oa(4,S,S.return);break;case 1:Ir(S,S.return);var P=S.stateNode;if(typeof P.componentWillUnmount=="function"){i=S,r=S.return;try{s=i,P.props=s.memoizedProps,P.state=s.memoizedState,P.componentWillUnmount()}catch(g){rt(i,r,g)}}break;case 5:Ir(S,S.return);break;case 22:if(S.memoizedState!==null){ch(T);continue}}N!==null?(N.return=S,ve=N):ch(T)}w=w.sibling}e:for(w=null,T=t;;){if(T.tag===5){if(w===null){w=T;try{o=T.stateNode,j?(c=o.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(h=T.stateNode,x=T.memoizedProps.style,u=x!=null&&x.hasOwnProperty("display")?x.display:null,h.style.display=Wh("display",u))}catch(g){rt(t,t.return,g)}}}else if(T.tag===6){if(w===null)try{T.stateNode.nodeValue=j?"":T.memoizedProps}catch(g){rt(t,t.return,g)}}else if((T.tag!==22&&T.tag!==23||T.memoizedState===null||T===t)&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===t)break e;for(;T.sibling===null;){if(T.return===null||T.return===t)break e;w===T&&(w=null),T=T.return}w===T&&(w=null),T.sibling.return=T.return,T=T.sibling}}break;case 19:_s(s,t),Ds(t),i&4&&lh(t);break;case 21:break;default:_s(s,t),Ds(t)}}function Ds(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(vp(r)){var i=r;break e}r=r.return}throw Error(ue(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(Fa(o,""),i.flags&=-33);var c=ih(t);Hc(t,c,o);break;case 3:case 4:var u=i.stateNode.containerInfo,h=ih(t);Zc(t,h,u);break;default:throw Error(ue(161))}}catch(x){rt(t,t.return,x)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Qv(t,s,r){ve=t,Np(t)}function Np(t,s,r){for(var i=(t.mode&1)!==0;ve!==null;){var o=ve,c=o.child;if(o.tag===22&&i){var u=o.memoizedState!==null||Ui;if(!u){var h=o.alternate,x=h!==null&&h.memoizedState!==null||Mt;h=Ui;var j=Mt;if(Ui=u,(Mt=x)&&!j)for(ve=o;ve!==null;)u=ve,x=u.child,u.tag===22&&u.memoizedState!==null?dh(o):x!==null?(x.return=u,ve=x):dh(o);for(;c!==null;)ve=c,Np(c),c=c.sibling;ve=o,Ui=h,Mt=j}oh(t)}else o.subtreeFlags&8772&&c!==null?(c.return=o,ve=c):oh(t)}}function oh(t){for(;ve!==null;){var s=ve;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Mt||Vl(5,s);break;case 1:var i=s.stateNode;if(s.flags&4&&!Mt)if(r===null)i.componentDidMount();else{var o=s.elementType===s.type?r.memoizedProps:Ss(s.type,r.memoizedProps);i.componentDidUpdate(o,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var c=s.updateQueue;c!==null&&Wm(s,c,i);break;case 3:var u=s.updateQueue;if(u!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}Wm(s,u,r)}break;case 5:var h=s.stateNode;if(r===null&&s.flags&4){r=h;var x=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&r.focus();break;case"img":x.src&&(r.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var j=s.alternate;if(j!==null){var w=j.memoizedState;if(w!==null){var T=w.dehydrated;T!==null&&Ha(T)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ue(163))}Mt||s.flags&512&&Uc(s)}catch(S){rt(s,s.return,S)}}if(s===t){ve=null;break}if(r=s.sibling,r!==null){r.return=s.return,ve=r;break}ve=s.return}}function ch(t){for(;ve!==null;){var s=ve;if(s===t){ve=null;break}var r=s.sibling;if(r!==null){r.return=s.return,ve=r;break}ve=s.return}}function dh(t){for(;ve!==null;){var s=ve;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{Vl(4,s)}catch(x){rt(s,r,x)}break;case 1:var i=s.stateNode;if(typeof i.componentDidMount=="function"){var o=s.return;try{i.componentDidMount()}catch(x){rt(s,o,x)}}var c=s.return;try{Uc(s)}catch(x){rt(s,c,x)}break;case 5:var u=s.return;try{Uc(s)}catch(x){rt(s,u,x)}}}catch(x){rt(s,s.return,x)}if(s===t){ve=null;break}var h=s.sibling;if(h!==null){h.return=s.return,ve=h;break}ve=s.return}}var Yv=Math.ceil,kl=ln.ReactCurrentDispatcher,$d=ln.ReactCurrentOwner,ys=ln.ReactCurrentBatchConfig,De=0,Nt=null,mt=null,Pt=0,es=0,Er=In(0),xt=0,ti=null,tr=0,Wl=0,Ud=0,Ba=null,Gt=null,Zd=0,Wr=1/0,Qs=null,Sl=!1,Vc=null,bn=null,Zi=!1,fn=null,Cl=0,Ra=0,Wc=null,el=-1,tl=0;function Zt(){return De&6?lt():el!==-1?el:el=lt()}function wn(t){return t.mode&1?De&2&&Pt!==0?Pt&-Pt:Mv.transition!==null?(tl===0&&(tl=ax()),tl):(t=Ue,t!==0||(t=window.event,t=t===void 0?16:mx(t.type)),t):1}function Is(t,s,r,i){if(50<Ra)throw Ra=0,Wc=null,Error(ue(185));ni(t,r,i),(!(De&2)||t!==Nt)&&(t===Nt&&(!(De&2)&&(Wl|=r),xt===4&&xn(t,Pt)),Xt(t,i),r===1&&De===0&&!(s.mode&1)&&(Wr=lt()+500,Ul&&En()))}function Xt(t,s){var r=t.callbackNode;Mg(t,s);var i=dl(t,t===Nt?Pt:0);if(i===0)r!==null&&ym(r),t.callbackNode=null,t.callbackPriority=0;else if(s=i&-i,t.callbackPriority!==s){if(r!=null&&ym(r),s===1)t.tag===0?zv(uh.bind(null,t)):Ix(uh.bind(null,t)),Lv(function(){!(De&6)&&En()}),r=null;else{switch(ix(i)){case 1:r=pd;break;case 4:r=nx;break;case 16:r=cl;break;case 536870912:r=rx;break;default:r=cl}r=Lp(r,bp.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function bp(t,s){if(el=-1,tl=0,De&6)throw Error(ue(327));var r=t.callbackNode;if(Rr()&&t.callbackNode!==r)return null;var i=dl(t,t===Nt?Pt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||s)s=Pl(t,i);else{s=i;var o=De;De|=2;var c=_p();(Nt!==t||Pt!==s)&&(Qs=null,Wr=lt()+500,Gn(t,s));do try{ey();break}catch(h){wp(t,h)}while(!0);Pd(),kl.current=c,De=o,mt!==null?s=0:(Nt=null,Pt=0,s=xt)}if(s!==0){if(s===2&&(o=yc(t),o!==0&&(i=o,s=qc(t,o))),s===1)throw r=ti,Gn(t,0),xn(t,i),Xt(t,lt()),r;if(s===6)xn(t,i);else{if(o=t.current.alternate,!(i&30)&&!Xv(o)&&(s=Pl(t,i),s===2&&(c=yc(t),c!==0&&(i=c,s=qc(t,c))),s===1))throw r=ti,Gn(t,0),xn(t,i),Xt(t,lt()),r;switch(t.finishedWork=o,t.finishedLanes=i,s){case 0:case 1:throw Error(ue(345));case 2:Un(t,Gt,Qs);break;case 3:if(xn(t,i),(i&130023424)===i&&(s=Zd+500-lt(),10<s)){if(dl(t,0)!==0)break;if(o=t.suspendedLanes,(o&i)!==i){Zt(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Cc(Un.bind(null,t,Gt,Qs),s);break}Un(t,Gt,Qs);break;case 4:if(xn(t,i),(i&4194240)===i)break;for(s=t.eventTimes,o=-1;0<i;){var u=31-Ts(i);c=1<<u,u=s[u],u>o&&(o=u),i&=~c}if(i=o,i=lt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Yv(i/1960))-i,10<i){t.timeoutHandle=Cc(Un.bind(null,t,Gt,Qs),i);break}Un(t,Gt,Qs);break;case 5:Un(t,Gt,Qs);break;default:throw Error(ue(329))}}}return Xt(t,lt()),t.callbackNode===r?bp.bind(null,t):null}function qc(t,s){var r=Ba;return t.current.memoizedState.isDehydrated&&(Gn(t,s).flags|=256),t=Pl(t,s),t!==2&&(s=Gt,Gt=r,s!==null&&Gc(s)),t}function Gc(t){Gt===null?Gt=t:Gt.push.apply(Gt,t)}function Xv(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var o=r[i],c=o.getSnapshot;o=o.value;try{if(!zs(c(),o))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function xn(t,s){for(s&=~Ud,s&=~Wl,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-Ts(s),i=1<<r;t[r]=-1,s&=~i}}function uh(t){if(De&6)throw Error(ue(327));Rr();var s=dl(t,0);if(!(s&1))return Xt(t,lt()),null;var r=Pl(t,s);if(t.tag!==0&&r===2){var i=yc(t);i!==0&&(s=i,r=qc(t,i))}if(r===1)throw r=ti,Gn(t,0),xn(t,s),Xt(t,lt()),r;if(r===6)throw Error(ue(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Un(t,Gt,Qs),Xt(t,lt()),null}function Hd(t,s){var r=De;De|=1;try{return t(s)}finally{De=r,De===0&&(Wr=lt()+500,Ul&&En())}}function sr(t){fn!==null&&fn.tag===0&&!(De&6)&&Rr();var s=De;De|=1;var r=ys.transition,i=Ue;try{if(ys.transition=null,Ue=1,t)return t()}finally{Ue=i,ys.transition=r,De=s,!(De&6)&&En()}}function Vd(){es=Er.current,Ke(Er)}function Gn(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Pv(r)),mt!==null)for(r=mt.return;r!==null;){var i=r;switch(kd(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&pl();break;case 3:Hr(),Ke(Qt),Ke(Ot),Md();break;case 5:zd(i);break;case 4:Hr();break;case 13:Ke(et);break;case 19:Ke(et);break;case 10:Ld(i.type._context);break;case 22:case 23:Vd()}r=r.return}if(Nt=t,mt=t=_n(t.current,null),Pt=es=s,xt=0,ti=null,Ud=Wl=tr=0,Gt=Ba=null,Wn!==null){for(s=0;s<Wn.length;s++)if(r=Wn[s],i=r.interleaved,i!==null){r.interleaved=null;var o=i.next,c=r.pending;if(c!==null){var u=c.next;c.next=o,i.next=u}r.pending=i}Wn=null}return t}function wp(t,s){do{var r=mt;try{if(Pd(),Yi.current=_l,wl){for(var i=tt.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}wl=!1}if(er=0,ft=ht=tt=null,Aa=!1,Xa=0,$d.current=null,r===null||r.return===null){xt=1,ti=s,mt=null;break}e:{var c=t,u=r.return,h=r,x=s;if(s=Pt,h.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var j=x,w=h,T=w.tag;if(!(w.mode&1)&&(T===0||T===11||T===15)){var S=w.alternate;S?(w.updateQueue=S.updateQueue,w.memoizedState=S.memoizedState,w.lanes=S.lanes):(w.updateQueue=null,w.memoizedState=null)}var N=Xm(u);if(N!==null){N.flags&=-257,Jm(N,u,h,c,s),N.mode&1&&Ym(c,j,s),s=N,x=j;var P=s.updateQueue;if(P===null){var g=new Set;g.add(x),s.updateQueue=g}else P.add(x);break e}else{if(!(s&1)){Ym(c,j,s),Wd();break e}x=Error(ue(426))}}else if(Xe&&h.mode&1){var M=Xm(u);if(M!==null){!(M.flags&65536)&&(M.flags|=256),Jm(M,u,h,c,s),Sd(Vr(x,h));break e}}c=x=Vr(x,h),xt!==4&&(xt=2),Ba===null?Ba=[c]:Ba.push(c),c=u;do{switch(c.tag){case 3:c.flags|=65536,s&=-s,c.lanes|=s;var v=ip(c,x,s);Vm(c,v);break e;case 1:h=x;var y=c.type,k=c.stateNode;if(!(c.flags&128)&&(typeof y.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(bn===null||!bn.has(k)))){c.flags|=65536,s&=-s,c.lanes|=s;var C=lp(c,h,s);Vm(c,C);break e}}c=c.return}while(c!==null)}Sp(r)}catch(R){s=R,mt===r&&r!==null&&(mt=r=r.return);continue}break}while(!0)}function _p(){var t=kl.current;return kl.current=_l,t===null?_l:t}function Wd(){(xt===0||xt===3||xt===2)&&(xt=4),Nt===null||!(tr&268435455)&&!(Wl&268435455)||xn(Nt,Pt)}function Pl(t,s){var r=De;De|=2;var i=_p();(Nt!==t||Pt!==s)&&(Qs=null,Gn(t,s));do try{Jv();break}catch(o){wp(t,o)}while(!0);if(Pd(),De=r,kl.current=i,mt!==null)throw Error(ue(261));return Nt=null,Pt=0,xt}function Jv(){for(;mt!==null;)kp(mt)}function ey(){for(;mt!==null&&!kg();)kp(mt)}function kp(t){var s=Pp(t.alternate,t,es);t.memoizedProps=t.pendingProps,s===null?Sp(t):mt=s,$d.current=null}function Sp(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=qv(r,s),r!==null){r.flags&=32767,mt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xt=6,mt=null;return}}else if(r=Wv(r,s,es),r!==null){mt=r;return}if(s=s.sibling,s!==null){mt=s;return}mt=s=t}while(s!==null);xt===0&&(xt=5)}function Un(t,s,r){var i=Ue,o=ys.transition;try{ys.transition=null,Ue=1,ty(t,s,r,i)}finally{ys.transition=o,Ue=i}return null}function ty(t,s,r,i){do Rr();while(fn!==null);if(De&6)throw Error(ue(327));r=t.finishedWork;var o=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ue(177));t.callbackNode=null,t.callbackPriority=0;var c=r.lanes|r.childLanes;if(Ag(t,c),t===Nt&&(mt=Nt=null,Pt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Zi||(Zi=!0,Lp(cl,function(){return Rr(),null})),c=(r.flags&15990)!==0,r.subtreeFlags&15990||c){c=ys.transition,ys.transition=null;var u=Ue;Ue=1;var h=De;De|=4,$d.current=null,Kv(t,r),jp(r,t),Nv(kc),ul=!!_c,kc=_c=null,t.current=r,Qv(r),Sg(),De=h,Ue=u,ys.transition=c}else t.current=r;if(Zi&&(Zi=!1,fn=t,Cl=o),c=t.pendingLanes,c===0&&(bn=null),Lg(r.stateNode),Xt(t,lt()),s!==null)for(i=t.onRecoverableError,r=0;r<s.length;r++)o=s[r],i(o.value,{componentStack:o.stack,digest:o.digest});if(Sl)throw Sl=!1,t=Vc,Vc=null,t;return Cl&1&&t.tag!==0&&Rr(),c=t.pendingLanes,c&1?t===Wc?Ra++:(Ra=0,Wc=t):Ra=0,En(),null}function Rr(){if(fn!==null){var t=ix(Cl),s=ys.transition,r=Ue;try{if(ys.transition=null,Ue=16>t?16:t,fn===null)var i=!1;else{if(t=fn,fn=null,Cl=0,De&6)throw Error(ue(331));var o=De;for(De|=4,ve=t.current;ve!==null;){var c=ve,u=c.child;if(ve.flags&16){var h=c.deletions;if(h!==null){for(var x=0;x<h.length;x++){var j=h[x];for(ve=j;ve!==null;){var w=ve;switch(w.tag){case 0:case 11:case 15:Oa(8,w,c)}var T=w.child;if(T!==null)T.return=w,ve=T;else for(;ve!==null;){w=ve;var S=w.sibling,N=w.return;if(gp(w),w===j){ve=null;break}if(S!==null){S.return=N,ve=S;break}ve=N}}}var P=c.alternate;if(P!==null){var g=P.child;if(g!==null){P.child=null;do{var M=g.sibling;g.sibling=null,g=M}while(g!==null)}}ve=c}}if(c.subtreeFlags&2064&&u!==null)u.return=c,ve=u;else e:for(;ve!==null;){if(c=ve,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Oa(9,c,c.return)}var v=c.sibling;if(v!==null){v.return=c.return,ve=v;break e}ve=c.return}}var y=t.current;for(ve=y;ve!==null;){u=ve;var k=u.child;if(u.subtreeFlags&2064&&k!==null)k.return=u,ve=k;else e:for(u=y;ve!==null;){if(h=ve,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Vl(9,h)}}catch(R){rt(h,h.return,R)}if(h===u){ve=null;break e}var C=h.sibling;if(C!==null){C.return=h.return,ve=C;break e}ve=h.return}}if(De=o,En(),Zs&&typeof Zs.onPostCommitFiberRoot=="function")try{Zs.onPostCommitFiberRoot(Bl,t)}catch{}i=!0}return i}finally{Ue=r,ys.transition=s}}return!1}function mh(t,s,r){s=Vr(r,s),s=ip(t,s,1),t=Nn(t,s,1),s=Zt(),t!==null&&(ni(t,1,s),Xt(t,s))}function rt(t,s,r){if(t.tag===3)mh(t,t,r);else for(;s!==null;){if(s.tag===3){mh(s,t,r);break}else if(s.tag===1){var i=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(bn===null||!bn.has(i))){t=Vr(r,t),t=lp(s,t,1),s=Nn(s,t,1),t=Zt(),s!==null&&(ni(s,1,t),Xt(s,t));break}}s=s.return}}function sy(t,s,r){var i=t.pingCache;i!==null&&i.delete(s),s=Zt(),t.pingedLanes|=t.suspendedLanes&r,Nt===t&&(Pt&r)===r&&(xt===4||xt===3&&(Pt&130023424)===Pt&&500>lt()-Zd?Gn(t,0):Ud|=r),Xt(t,s)}function Cp(t,s){s===0&&(t.mode&1?(s=zi,zi<<=1,!(zi&130023424)&&(zi=4194304)):s=1);var r=Zt();t=rn(t,s),t!==null&&(ni(t,s,r),Xt(t,r))}function ny(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),Cp(t,r)}function ry(t,s){var r=0;switch(t.tag){case 13:var i=t.stateNode,o=t.memoizedState;o!==null&&(r=o.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ue(314))}i!==null&&i.delete(s),Cp(t,r)}var Pp;Pp=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||Qt.current)Kt=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return Kt=!1,Vv(t,s,r);Kt=!!(t.flags&131072)}else Kt=!1,Xe&&s.flags&1048576&&Ex(s,vl,s.index);switch(s.lanes=0,s.tag){case 2:var i=s.type;Ji(t,s),t=s.pendingProps;var o=$r(s,Ot.current);Br(s,r),o=Od(null,s,i,t,o,r);var c=Bd();return s.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Yt(i)?(c=!0,fl(s)):c=!1,s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Id(s),o.updater=Hl,s.stateNode=o,o._reactInternals=s,Mc(s,i,t,r),s=Bc(null,s,i,!0,c,r)):(s.tag=0,Xe&&c&&_d(s),Ft(null,s,o,r),s=s.child),s;case 16:i=s.elementType;e:{switch(Ji(t,s),t=s.pendingProps,o=i._init,i=o(i._payload),s.type=i,o=s.tag=iy(i),t=Ss(i,t),o){case 0:s=Oc(null,s,i,t,r);break e;case 1:s=sh(null,s,i,t,r);break e;case 11:s=eh(null,s,i,t,r);break e;case 14:s=th(null,s,i,Ss(i.type,t),r);break e}throw Error(ue(306,i,""))}return s;case 0:return i=s.type,o=s.pendingProps,o=s.elementType===i?o:Ss(i,o),Oc(t,s,i,o,r);case 1:return i=s.type,o=s.pendingProps,o=s.elementType===i?o:Ss(i,o),sh(t,s,i,o,r);case 3:e:{if(up(s),t===null)throw Error(ue(387));i=s.pendingProps,c=s.memoizedState,o=c.element,Rx(t,s),Nl(s,i,null,r);var u=s.memoizedState;if(i=u.element,c.isDehydrated)if(c={element:i,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},s.updateQueue.baseState=c,s.memoizedState=c,s.flags&256){o=Vr(Error(ue(423)),s),s=nh(t,s,i,r,o);break e}else if(i!==o){o=Vr(Error(ue(424)),s),s=nh(t,s,i,r,o);break e}else for(ns=jn(s.stateNode.containerInfo.firstChild),rs=s,Xe=!0,Ps=null,r=Ox(s,null,i,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ur(),i===o){s=an(t,s,r);break e}Ft(t,s,i,r)}s=s.child}return s;case 5:return Dx(s),t===null&&Ic(s),i=s.type,o=s.pendingProps,c=t!==null?t.memoizedProps:null,u=o.children,Sc(i,o)?u=null:c!==null&&Sc(i,c)&&(s.flags|=32),dp(t,s),Ft(t,s,u,r),s.child;case 6:return t===null&&Ic(s),null;case 13:return mp(t,s,r);case 4:return Ed(s,s.stateNode.containerInfo),i=s.pendingProps,t===null?s.child=Zr(s,null,i,r):Ft(t,s,i,r),s.child;case 11:return i=s.type,o=s.pendingProps,o=s.elementType===i?o:Ss(i,o),eh(t,s,i,o,r);case 7:return Ft(t,s,s.pendingProps,r),s.child;case 8:return Ft(t,s,s.pendingProps.children,r),s.child;case 12:return Ft(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(i=s.type._context,o=s.pendingProps,c=s.memoizedProps,u=o.value,Ve(yl,i._currentValue),i._currentValue=u,c!==null)if(zs(c.value,u)){if(c.children===o.children&&!Qt.current){s=an(t,s,r);break e}}else for(c=s.child,c!==null&&(c.return=s);c!==null;){var h=c.dependencies;if(h!==null){u=c.child;for(var x=h.firstContext;x!==null;){if(x.context===i){if(c.tag===1){x=en(-1,r&-r),x.tag=2;var j=c.updateQueue;if(j!==null){j=j.shared;var w=j.pending;w===null?x.next=x:(x.next=w.next,w.next=x),j.pending=x}}c.lanes|=r,x=c.alternate,x!==null&&(x.lanes|=r),Ec(c.return,r,s),h.lanes|=r;break}x=x.next}}else if(c.tag===10)u=c.type===s.type?null:c.child;else if(c.tag===18){if(u=c.return,u===null)throw Error(ue(341));u.lanes|=r,h=u.alternate,h!==null&&(h.lanes|=r),Ec(u,r,s),u=c.sibling}else u=c.child;if(u!==null)u.return=c;else for(u=c;u!==null;){if(u===s){u=null;break}if(c=u.sibling,c!==null){c.return=u.return,u=c;break}u=u.return}c=u}Ft(t,s,o.children,r),s=s.child}return s;case 9:return o=s.type,i=s.pendingProps.children,Br(s,r),o=js(o),i=i(o),s.flags|=1,Ft(t,s,i,r),s.child;case 14:return i=s.type,o=Ss(i,s.pendingProps),o=Ss(i.type,o),th(t,s,i,o,r);case 15:return op(t,s,s.type,s.pendingProps,r);case 17:return i=s.type,o=s.pendingProps,o=s.elementType===i?o:Ss(i,o),Ji(t,s),s.tag=1,Yt(i)?(t=!0,fl(s)):t=!1,Br(s,r),ap(s,i,o),Mc(s,i,o,r),Bc(null,s,i,!0,t,r);case 19:return hp(t,s,r);case 22:return cp(t,s,r)}throw Error(ue(156,s.tag))};function Lp(t,s){return sx(t,s)}function ay(t,s,r,i){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fs(t,s,r,i){return new ay(t,s,r,i)}function qd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function iy(t){if(typeof t=="function")return qd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===md)return 11;if(t===hd)return 14}return 2}function _n(t,s){var r=t.alternate;return r===null?(r=fs(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function sl(t,s,r,i,o,c){var u=2;if(i=t,typeof t=="function")qd(t)&&(u=1);else if(typeof t=="string")u=5;else e:switch(t){case br:return Kn(r.children,o,c,s);case ud:u=8,o|=8;break;case rc:return t=fs(12,r,s,o|2),t.elementType=rc,t.lanes=c,t;case ac:return t=fs(13,r,s,o),t.elementType=ac,t.lanes=c,t;case ic:return t=fs(19,r,s,o),t.elementType=ic,t.lanes=c,t;case Dh:return ql(r,o,c,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Bh:u=10;break e;case Rh:u=9;break e;case md:u=11;break e;case hd:u=14;break e;case un:u=16,i=null;break e}throw Error(ue(130,t==null?t:typeof t,""))}return s=fs(u,r,s,o),s.elementType=t,s.type=i,s.lanes=c,s}function Kn(t,s,r,i){return t=fs(7,t,i,s),t.lanes=r,t}function ql(t,s,r,i){return t=fs(22,t,i,s),t.elementType=Dh,t.lanes=r,t.stateNode={isHidden:!1},t}function Yo(t,s,r){return t=fs(6,t,null,s),t.lanes=r,t}function Xo(t,s,r){return s=fs(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function ly(t,s,r,i,o){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Eo(0),this.expirationTimes=Eo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eo(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Gd(t,s,r,i,o,c,u,h,x){return t=new ly(t,s,r,h,x),s===1?(s=1,c===!0&&(s|=8)):s=0,c=fs(3,null,null,s),t.current=c,c.stateNode=t,c.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Id(c),t}function oy(t,s,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nr,key:i==null?null:""+i,children:t,containerInfo:s,implementation:r}}function Tp(t){if(!t)return Pn;t=t._reactInternals;e:{if(ar(t)!==t||t.tag!==1)throw Error(ue(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Yt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(ue(171))}if(t.tag===1){var r=t.type;if(Yt(r))return Tx(t,r,s)}return s}function Ip(t,s,r,i,o,c,u,h,x){return t=Gd(r,i,!0,t,o,c,u,h,x),t.context=Tp(null),r=t.current,i=Zt(),o=wn(r),c=en(i,o),c.callback=s??null,Nn(r,c,o),t.current.lanes=o,ni(t,o,i),Xt(t,i),t}function Gl(t,s,r,i){var o=s.current,c=Zt(),u=wn(o);return r=Tp(r),s.context===null?s.context=r:s.pendingContext=r,s=en(c,u),s.payload={element:t},i=i===void 0?null:i,i!==null&&(s.callback=i),t=Nn(o,s,u),t!==null&&(Is(t,o,u,c),Qi(t,o,u)),u}function Ll(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hh(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function Kd(t,s){hh(t,s),(t=t.alternate)&&hh(t,s)}function cy(){return null}var Ep=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qd(t){this._internalRoot=t}Kl.prototype.render=Qd.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(ue(409));Gl(t,s,null,null)};Kl.prototype.unmount=Qd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;sr(function(){Gl(null,t,null,null)}),s[nn]=null}};function Kl(t){this._internalRoot=t}Kl.prototype.unstable_scheduleHydration=function(t){if(t){var s=cx();t={blockedOn:null,target:t,priority:s};for(var r=0;r<hn.length&&s!==0&&s<hn[r].priority;r++);hn.splice(r,0,t),r===0&&ux(t)}};function Yd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ql(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xh(){}function dy(t,s,r,i,o){if(o){if(typeof i=="function"){var c=i;i=function(){var j=Ll(u);c.call(j)}}var u=Ip(s,i,t,0,null,!1,!1,"",xh);return t._reactRootContainer=u,t[nn]=u.current,qa(t.nodeType===8?t.parentNode:t),sr(),u}for(;o=t.lastChild;)t.removeChild(o);if(typeof i=="function"){var h=i;i=function(){var j=Ll(x);h.call(j)}}var x=Gd(t,0,!1,null,null,!1,!1,"",xh);return t._reactRootContainer=x,t[nn]=x.current,qa(t.nodeType===8?t.parentNode:t),sr(function(){Gl(s,x,r,i)}),x}function Yl(t,s,r,i,o){var c=r._reactRootContainer;if(c){var u=c;if(typeof o=="function"){var h=o;o=function(){var x=Ll(u);h.call(x)}}Gl(s,u,t,o)}else u=dy(r,s,t,o,i);return Ll(u)}lx=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=Sa(s.pendingLanes);r!==0&&(fd(s,r|1),Xt(s,lt()),!(De&6)&&(Wr=lt()+500,En()))}break;case 13:sr(function(){var i=rn(t,1);if(i!==null){var o=Zt();Is(i,t,1,o)}}),Kd(t,1)}};gd=function(t){if(t.tag===13){var s=rn(t,134217728);if(s!==null){var r=Zt();Is(s,t,134217728,r)}Kd(t,134217728)}};ox=function(t){if(t.tag===13){var s=wn(t),r=rn(t,s);if(r!==null){var i=Zt();Is(r,t,s,i)}Kd(t,s)}};cx=function(){return Ue};dx=function(t,s){var r=Ue;try{return Ue=t,s()}finally{Ue=r}};fc=function(t,s,r){switch(s){case"input":if(cc(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var i=r[s];if(i!==t&&i.form===t.form){var o=$l(i);if(!o)throw Error(ue(90));$h(i),cc(i,o)}}}break;case"textarea":Zh(t,r);break;case"select":s=r.value,s!=null&&zr(t,!!r.multiple,s,!1)}};Qh=Hd;Yh=sr;var uy={usingClientEntryPoint:!1,Events:[ai,Sr,$l,Gh,Kh,Hd]},ba={findFiberByHostInstance:Vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},my={bundleType:ba.bundleType,version:ba.version,rendererPackageName:ba.rendererPackageName,rendererConfig:ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ex(t),t===null?null:t.stateNode},findFiberByHostInstance:ba.findFiberByHostInstance||cy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hi.isDisabled&&Hi.supportsFiber)try{Bl=Hi.inject(my),Zs=Hi}catch{}}os.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uy;os.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yd(s))throw Error(ue(200));return oy(t,s,null,r)};os.createRoot=function(t,s){if(!Yd(t))throw Error(ue(299));var r=!1,i="",o=Ep;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),s=Gd(t,1,!1,null,null,r,!1,i,o),t[nn]=s.current,qa(t.nodeType===8?t.parentNode:t),new Qd(s)};os.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(ue(188)):(t=Object.keys(t).join(","),Error(ue(268,t)));return t=ex(s),t=t===null?null:t.stateNode,t};os.flushSync=function(t){return sr(t)};os.hydrate=function(t,s,r){if(!Ql(s))throw Error(ue(200));return Yl(null,t,s,!0,r)};os.hydrateRoot=function(t,s,r){if(!Yd(t))throw Error(ue(405));var i=r!=null&&r.hydratedSources||null,o=!1,c="",u=Ep;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),s=Ip(s,null,t,1,r??null,o,!1,c,u),t[nn]=s.current,qa(t),i)for(t=0;t<i.length;t++)r=i[t],o=r._getVersion,o=o(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,o]:s.mutableSourceEagerHydrationData.push(r,o);return new Kl(s)};os.render=function(t,s,r){if(!Ql(s))throw Error(ue(200));return Yl(null,t,s,!1,r)};os.unmountComponentAtNode=function(t){if(!Ql(t))throw Error(ue(40));return t._reactRootContainer?(sr(function(){Yl(null,null,t,!1,function(){t._reactRootContainer=null,t[nn]=null})}),!0):!1};os.unstable_batchedUpdates=Hd;os.unstable_renderSubtreeIntoContainer=function(t,s,r,i){if(!Ql(r))throw Error(ue(200));if(t==null||t._reactInternals===void 0)throw Error(ue(38));return Yl(t,s,r,!1,i)};os.version="18.3.1-next-f1338f8080-20240426";function zp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zp)}catch(t){console.error(t)}}zp(),zh.exports=os;var Mp=zh.exports,Ap,ph=Mp;Ap=ph.createRoot,ph.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ye=(t,s)=>{const r=E.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:u,className:h="",children:x,...j},w)=>E.createElement("svg",{ref:w,...hy,width:o,height:o,stroke:i,strokeWidth:u?Number(c)*24/Number(o):c,className:["lucide",`lucide-${xy(t)}`,h].join(" "),...j},[...s.map(([T,S])=>E.createElement(T,S)),...Array.isArray(x)?x:[x]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=ye("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=ye("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=ye("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=ye("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=ye("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=ye("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=ye("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=ye("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=ye("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=ye("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=ye("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=ye("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=ye("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=ye("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=ye("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=ye("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=ye("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=ye("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=ye("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=ye("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=ye("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=ye("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=ye("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=ye("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=ye("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=ye("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=ye("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=ye("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=ye("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=ye("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=ye("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=ye("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=ye("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=ye("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=ye("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=ye("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=ye("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=ye("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=ye("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=ye("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=ye("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=ye("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=ye("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=ye("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=ye("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=ye("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=ye("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);class Cy{constructor(){this.errors=[],this.maxErrors=100,this.loadFromStorage(),window.addEventListener("error",s=>{this.logError(new Error(s.message),"Global",{file:s.filename,line:s.lineno,column:s.colno})}),window.addEventListener("unhandledrejection",s=>{this.logError(new Error(s.reason),"Promise",{reason:s.reason})})}logError(s,r,i){const o={id:Date.now().toString(),timestamp:new Date().toISOString(),level:"error",message:s.message,component:r,stack:s.stack,userAgent:navigator.userAgent,url:window.location.href,...i};this.errors.unshift(o),this.errors.length>this.maxErrors&&(this.errors=this.errors.slice(0,this.maxErrors)),console.error("🔴 خطأ في التطبيق:",{component:r,message:s.message,stack:s.stack,timestamp:o.timestamp}),this.saveToStorage()}logWarning(s,r,i){const o={id:Date.now().toString(),timestamp:new Date().toISOString(),level:"warning",message:s,component:r,userAgent:navigator.userAgent,url:window.location.href,...i};this.errors.unshift(o),this.errors.length>this.maxErrors&&(this.errors=this.errors.slice(0,this.maxErrors)),console.warn("🟡 تحذير في التطبيق:",{component:r,message:s,timestamp:o.timestamp}),this.saveToStorage()}logInfo(s,r,i){const o={id:Date.now().toString(),timestamp:new Date().toISOString(),level:"info",message:s,component:r,userAgent:navigator.userAgent,url:window.location.href,...i};this.errors.unshift(o),this.errors.length>this.maxErrors&&(this.errors=this.errors.slice(0,this.maxErrors)),console.info("🔵 معلومات التطبيق:",{component:r,message:s,timestamp:o.timestamp}),this.saveToStorage()}getErrors(){return this.errors}getErrorsByLevel(s){return this.errors.filter(r=>r.level===s)}getErrorsByComponent(s){return this.errors.filter(r=>r.component===s)}clearErrors(){this.errors=[],localStorage.removeItem("app_errors"),console.log("🧹 تم مسح جميع الأخطاء")}saveToStorage(){try{localStorage.setItem("app_errors",JSON.stringify(this.errors))}catch(s){console.error("فشل في حفظ الأخطاء في localStorage:",s)}}loadFromStorage(){try{const s=localStorage.getItem("app_errors");s&&(this.errors=JSON.parse(s))}catch(s){console.error("فشل في تحميل الأخطاء من localStorage:",s)}}}const yr=new Cy,Bt=()=>{const t=E.useCallback((c,u,h)=>{yr.logError(c,u,h)},[]),s=E.useCallback((c,u,h)=>{yr.logWarning(c,u,h)},[]),r=E.useCallback((c,u,h)=>{yr.logInfo(c,u,h)},[]),i=E.useCallback(()=>yr.getErrors(),[]),o=E.useCallback(()=>{yr.clearErrors()},[]);return{logError:t,logWarning:s,logInfo:r,getErrors:i,clearErrors:o}};class Hn extends E.Component{constructor(s){super(s),this.handleReload=()=>{window.location.reload()},this.handleReset=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0,copied:!1})},this.copyErrorDetails=()=>{var i,o,c;const r={message:(i=this.state.error)==null?void 0:i.message,stack:(o=this.state.error)==null?void 0:o.stack,componentStack:(c=this.state.errorInfo)==null?void 0:c.componentStack,timestamp:new Date().toISOString(),url:window.location.href,userAgent:navigator.userAgent};navigator.clipboard.writeText(JSON.stringify(r,null,2)).then(()=>{this.setState({copied:!0}),setTimeout(()=>this.setState({copied:!1}),2e3)}).catch(u=>console.error("فشل في نسخ تفاصيل الخطأ:",u))},this.state={hasError:!1,copied:!1}}static getDerivedStateFromError(s){return{hasError:!0,error:s,copied:!1}}componentDidCatch(s,r){this.setState({errorInfo:r}),yr.logError(s,this.props.componentName||"ErrorBoundary",{componentStack:r.componentStack,errorBoundary:!0})}render(){var s;return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",dir:"rtl",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-2xl w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"bg-red-100 p-4 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:e.jsx(ge,{className:"w-10 h-10 text-red-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"حدث خطأ غير متوقع"}),e.jsx("p",{className:"text-gray-600",children:"نعتذر، حدث خطأ في التطبيق. يرجى المحاولة مرة أخرى."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center",children:[e.jsx(gy,{className:"w-4 h-4 ml-2"}),"تفاصيل الخطأ"]}),e.jsx("button",{onClick:this.copyErrorDetails,className:"flex items-center space-x-2 space-x-reverse text-sm text-blue-600 hover:text-blue-700 transition-colors",children:this.state.copied?e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"w-4 h-4 ml-1"}),e.jsx("span",{children:"تم النسخ"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Kc,{className:"w-4 h-4 ml-1"}),e.jsx("span",{children:"نسخ التفاصيل"})]})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"الرسالة:"}),e.jsx("p",{className:"text-red-600 mt-1",children:(s=this.state.error)==null?void 0:s.message})]}),this.props.componentName&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"المكون:"}),e.jsx("p",{className:"text-gray-600 mt-1",children:new Date().toLocaleString("en-US")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"الوقت:"}),e.jsx("p",{className:"text-gray-600 mt-1",children:new Date().toLocaleString("ar-SA")})]})]}),!1]}),e.jsxs("div",{className:"flex space-x-4 space-x-reverse",children:[e.jsxs("button",{onClick:this.handleReset,className:"flex-1 bg-blue-600 text-white py-3 px-4 rounded-xl font-medium hover:bg-blue-700 transition-colors flex items-center justify-center",children:[e.jsx(jt,{className:"w-4 h-4 ml-2"}),"المحاولة مرة أخرى"]}),e.jsx("button",{onClick:this.handleReload,className:"flex-1 bg-gray-600 text-white py-3 px-4 rounded-xl font-medium hover:bg-gray-700 transition-colors",children:"إعادة تحميل الصفحة"})]}),e.jsx("div",{className:"mt-6 text-center text-sm text-gray-500",children:e.jsx("p",{children:"إذا استمر الخطأ، يرجى التواصل مع فريق الدعم الفني"})})]})}):this.props.children}}const $p=E.createContext(void 0),li=()=>{const t=E.useContext($p);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Py=({children:t})=>{const[s,r]=E.useState(null),u={loggedInUser:s,login:h=>{const x={...h,lastLogin:new Date().toISOString()};r(x)},logout:()=>{r(null)},updateUser:h=>{s&&r({...s,...h})}};return e.jsx($p.Provider,{value:u,children:t})},_t=[];for(let t=0;t<256;++t)_t.push((t+256).toString(16).slice(1));function Ly(t,s=0){return(_t[t[s+0]]+_t[t[s+1]]+_t[t[s+2]]+_t[t[s+3]]+"-"+_t[t[s+4]]+_t[t[s+5]]+"-"+_t[t[s+6]]+_t[t[s+7]]+"-"+_t[t[s+8]]+_t[t[s+9]]+"-"+_t[t[s+10]]+_t[t[s+11]]+_t[t[s+12]]+_t[t[s+13]]+_t[t[s+14]]+_t[t[s+15]]).toLowerCase()}let tc;const Ty=new Uint8Array(16);function Iy(){if(!tc){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");tc=crypto.getRandomValues.bind(crypto)}return tc(Ty)}const Ey=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),yh={randomUUID:Ey};function le(t,s,r){var o;if(yh.randomUUID&&!s&&!t)return yh.randomUUID();t=t||{};const i=t.random??((o=t.rng)==null?void 0:o.call(t))??Iy();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,Ly(i)}const kn=le(),Kr=le(),Xd=le(),Up=le(),zl=le(),Zp=le(),zy=le(),oi=le(),Hp=le(),Vp=le(),Wp=le(),My=le(),qp=le(),Gp=le(),Kp=le(),Qp=le(),Yp=le(),Qc=le(),Pa=le(),Yc=le(),Xc=le(),Xp=le(),Jp=le(),al=le(),e0=le(),t0=le(),jr=le(),s0=le(),Ay=le(),Oy=le(),By=le(),Ry=le(),Dy=le(),Ls=le(),Qr=le(),Yr=le(),Jc=le(),Ml=le(),ed=le(),td=le(),Jd=le(),eu=le(),n0=le(),r0=le(),a0=le(),Fy=le(),$y=le(),Uy=le(),i0=le(),Zy=le(),Hy=le(),Vy=le(),Wy=le(),qy=le(),Gy=le(),Ky=le(),Qy=le(),l0=le(),o0=le(),c0=le(),Yy=le(),Ht=[{id:kn,name:"جمعية الهلال الأحمر الفلسطيني - غزة",type:"طعام - ملابس",location:"خان يونس - الكتيبة",contactPerson:"أحمد أبو سالم",phone:"0501234567",email:"info@redcrescent-gaza.org",beneficiariesCount:342,packagesCount:87,completionRate:92,status:"active",createdAt:"2024-01-15",packagesAvailable:189,templatesCount:6,isPopular:!0},{id:Kr,name:"مؤسسة أطباء بلا حدود - غزة",type:"أدوية - معدات طبية",location:"غزة - الشجاعية",contactPerson:"د. فاطمة الغزاوي",phone:"0559876543",email:"gaza@msf.org",beneficiariesCount:156,packagesCount:23,completionRate:75,status:"pending",createdAt:"2024-02-01",packagesAvailable:95,templatesCount:4,isPopular:!0},{id:Xd,name:"جمعية الإغاثة الإسلامية - فلسطين",type:"مواد غذائية",location:"خان يونس - بني سهيلا",contactPerson:"خالد أبو يوسف",phone:"0567891234",email:"palestine@islamic-relief.org",beneficiariesCount:89,packagesCount:45,completionRate:88,status:"active",createdAt:"2024-01-20",packagesAvailable:156,templatesCount:7,isPopular:!1},{id:oi,name:"الأونروا",type:"منظمة دولية",location:"غزة - مكتب رئيسي",contactPerson:"د. أحمد المدير",phone:"+970591111111",email:"gaza@unrwa.org",beneficiariesCount:0,packagesCount:0,completionRate:0,status:"active",createdAt:"2024-01-01",packagesAvailable:1021,templatesCount:8,isPopular:!0},{id:Hp,name:"برنامج الغذاء العالمي",type:"منظمة دولية",location:"غزة - مكتب إقليمي",contactPerson:"سارة المنسقة",phone:"+970592222222",email:"gaza@wfp.org",beneficiariesCount:0,packagesCount:0,completionRate:0,status:"active",createdAt:"2024-01-05",packagesAvailable:234,templatesCount:5,isPopular:!0},{id:Vp,name:"الهلال الأحمر الفلسطيني",type:"منظمة محلية",location:"غزة - المقر الرئيسي",contactPerson:"محمد المدير",phone:"+970593333333",email:"info@palestinianredcrescent.org",beneficiariesCount:0,packagesCount:0,completionRate:0,status:"active",createdAt:"2024-01-10",packagesAvailable:189,templatesCount:6,isPopular:!0},{id:Wp,name:"منظمة الصحة العالمية",type:"منظمة دولية",location:"غزة - مكتب صحي",contactPerson:"د. فاطمة الطبيبة",phone:"+970594444444",email:"gaza@who.int",beneficiariesCount:0,packagesCount:0,completionRate:0,status:"active",createdAt:"2024-01-15",packagesAvailable:95,templatesCount:4,isPopular:!0},{id:My,name:"اليونيسف",type:"منظمة دولية",location:"غزة - مكتب الأطفال",contactPerson:"نور المنسقة",phone:"+970595555555",email:"gaza@unicef.org",beneficiariesCount:0,packagesCount:0,completionRate:0,status:"active",createdAt:"2024-01-20",packagesAvailable:156,templatesCount:7,isPopular:!1},{id:le(),name:"CRS",type:"منظمة دولية",location:"غزة - مكتب رئيسي",contactPerson:"جون سميث",phone:"+970591234567",email:"info@crs.org",beneficiariesCount:0,packagesCount:0,completionRate:0,status:"active",createdAt:"2024-01-25",packagesAvailable:500,templatesCount:3,isPopular:!0},{id:Up,name:"CRS - الخدمات الكاثوليكية للإغاثة",type:"منظمة دولية",location:"غزة - مكتب رئيسي",contactPerson:"جون سميث",phone:"+970591234567",email:"info@crs-gaza.org",beneficiariesCount:45,packagesCount:12,completionRate:87,status:"active",createdAt:"2024-01-25",packagesAvailable:500,templatesCount:3,isPopular:!0}],ks=[{id:le(),name:"طرد الطوارئ السريع",type:"emergency",organization_id:"internal",description:"طرد طوارئ سريع من مخزون المنصة الداخلي",contents:[{id:le(),name:"مياه شرب",quantity:6,unit:"زجاجة",weight:9},{id:le(),name:"خبز",quantity:2,unit:"رغيف",weight:.5},{id:le(),name:"تونة معلبة",quantity:4,unit:"علبة",weight:.8},{id:le(),name:"بسكويت",quantity:3,unit:"علبة",weight:.6}],status:"active",createdAt:"2024-01-05",usageCount:89,totalWeight:10.9,estimatedCost:25},{id:le(),name:"طرد النظافة الأساسي",type:"hygiene",organization_id:"internal",description:"طرد نظافة شخصية من المخزون الداخلي",contents:[{id:le(),name:"صابون",quantity:4,unit:"قطعة",weight:.4},{id:le(),name:"شامبو",quantity:2,unit:"زجاجة",weight:.6},{id:le(),name:"معجون أسنان",quantity:2,unit:"أنبوب",weight:.2},{id:le(),name:"فرشاة أسنان",quantity:4,unit:"قطعة",weight:.1}],status:"active",createdAt:"2024-01-03",usageCount:156,totalWeight:1.3,estimatedCost:15},{id:le(),name:"طرد رمضان كريم 2024",type:"food",organization_id:oi,description:"طرد غذائي شامل لشهر رمضان المبارك",contents:[{id:le(),name:"أرز بسمتي",quantity:5,unit:"كيلو",weight:5},{id:le(),name:"زيت زيتون",quantity:1,unit:"لتر",weight:1},{id:le(),name:"سكر أبيض",quantity:2,unit:"كيلو",weight:2},{id:le(),name:"طحين",quantity:3,unit:"كيلو",weight:3},{id:le(),name:"عدس أحمر",quantity:1,unit:"كيلو",weight:1},{id:le(),name:"تونة معلبة",quantity:6,unit:"علبة",weight:1.2},{id:le(),name:"معجون طماطم",quantity:3,unit:"علبة",weight:.6},{id:le(),name:"حليب مجفف",quantity:2,unit:"علبة",weight:.8}],status:"active",createdAt:"2024-01-10",usageCount:247,totalWeight:14.6,estimatedCost:50},{id:le(),name:"طرد الشتاء الدافئ",type:"clothing",organization_id:Vp,description:"طرد ملابس شتوية للعائلات",contents:[{id:le(),name:"بطانية صوف",quantity:2,unit:"قطعة",weight:3},{id:le(),name:"جاكيت شتوي للكبار",quantity:2,unit:"قطعة",weight:1.5},{id:le(),name:"جاكيت شتوي للأطفال",quantity:3,unit:"قطعة",weight:.8},{id:le(),name:"جوارب صوفية",quantity:6,unit:"زوج",weight:.3},{id:le(),name:"قبعة صوفية",quantity:4,unit:"قطعة",weight:.2},{id:le(),name:"قفازات",quantity:4,unit:"زوج",weight:.1}],status:"active",createdAt:"2024-01-08",usageCount:156,totalWeight:5.9,estimatedCost:75},{id:le(),name:"طرد الإسعافات الأولية",type:"medical",organization_id:Wp,description:"طرد طبي للإسعافات الأولية",contents:[{id:le(),name:"ضمادات طبية",quantity:10,unit:"قطعة",weight:.5},{id:le(),name:"مطهر جروح",quantity:2,unit:"زجاجة",weight:.4},{id:le(),name:"مسكنات",quantity:2,unit:"علبة",weight:.2},{id:le(),name:"خافض حرارة",quantity:1,unit:"علبة",weight:.1},{id:le(),name:"شاش طبي",quantity:5,unit:"لفة",weight:.3}],status:"draft",createdAt:"2024-01-12",usageCount:0,totalWeight:1.5,estimatedCost:30}],Fn=[{id:l0,name:"حملة رمضان 2025 - الهلال الأحمر",organizationId:kn,description:"توزيع طرود غذائية شاملة لشهر رمضان المبارك على العائلات المحتاجة في قطاع غزة",createdAt:"2024-12-01",createdBy:"أحمد محمد الإدمن",status:"active"},{id:o0,name:"حملة الشتاء الدافئ - أطباء بلا حدود",organizationId:Kr,description:"توزيع ملابس شتوية وبطانيات للعائلات النازحة في شمال غزة",createdAt:"2024-11-15",createdBy:"فاطمة أحمد المشرفة",status:"completed"},{id:c0,name:"طرود الطوارئ الطبية - الإغاثة الإسلامية",organizationId:Xd,description:"توزيع أدوية أساسية ومستلزمات طبية للمرضى المزمنين",createdAt:"2024-12-10",createdBy:"خالد أبو يوسف",status:"active"},{id:Yy,name:"مساعدات عاجلة - الأونروا",organizationId:oi,description:"توزيع مساعدات غذائية وطبية عاجلة للمتضررين من القصف الأخير",createdAt:"2024-12-15",createdBy:"د. أحمد المدير",status:"active"}],Sn=[{id:zl,name:"عائلة آل أبو عامر",headOfFamily:"محمد أبو عامر",headOfFamilyId:Ls,familyMembers:[Ls,Qr,Yr,Jc],totalChildren:2,totalMedicalCases:3,averageAge:32,phone:"0591234567",membersCount:4,packagesDistributed:45,completionRate:93,location:"خان يونس - الكتيبة",createdAt:"2024-01-10",supportingOrganizationId:oi},{id:Zp,name:"عائلة آل النجار",headOfFamily:"أحمد النجار",headOfFamilyId:Ml,familyMembers:[Ml,ed],totalChildren:0,totalMedicalCases:1,averageAge:35,phone:"0592345678",membersCount:2,packagesDistributed:11,completionRate:85,location:"خان يونس - القرارة",createdAt:"2024-02-05",supportingOrganizationId:Hp},{id:zy,name:"عائلة آل البرغوثي",headOfFamily:"يوسف البرغوثي",headOfFamilyId:td,familyMembers:[td],totalChildren:0,totalMedicalCases:0,averageAge:32,phone:"0593456789",membersCount:1,packagesDistributed:1,completionRate:100,location:"خان يونس - الفخاري",createdAt:"2024-01-25",supportingOrganizationId:Up}],Se=[{id:Ls,name:"محمد خالد أبو عامر",fullName:"محمد خالد عبدالله أبو عامر",nationalId:"900123456",dateOfBirth:"1985-03-15",gender:"male",phone:"0591234567",address:"خان يونس - الكتيبة - شارع الشهداء",detailedAddress:{governorate:"خان يونس",city:"خان يونس",district:"الكتيبة",street:"شارع الشهداء",additionalInfo:"بجانب مسجد الكتيبة الكبير"},location:{lat:31.3469,lng:34.3029},organizationId:kn,profession:"عامل بناء",maritalStatus:"married",economicLevel:"poor",membersCount:6,isHeadOfFamily:!0,spouseId:Qr,childrenIds:[Yr,Jc],parentId:null,medicalConditions:["ضغط الدم","السكري"],additionalDocuments:[{name:"إثبات سكن",url:"https://example.com/residence1.pdf",type:"residence_proof"},{name:"شهادة دخل",url:"https://example.com/income1.pdf",type:"income_certificate"}],identityStatus:"verified",identityImageUrl:"https://example.com/id1.jpg",status:"active",eligibilityStatus:"eligible",lastReceived:"2024-12-20",totalPackages:5,notes:"مستفيد منتظم، يحتاج مساعدة شهرية",createdAt:"2024-01-15",updatedAt:"2024-12-20",createdBy:"admin",updatedBy:"admin"},{id:Qr,name:"فاطمة أحمد أبو عامر",fullName:"فاطمة أحمد محمد أبو عامر",nationalId:"900234567",dateOfBirth:"1978-07-22",gender:"female",phone:"0592345678",address:"خان يونس - الكتيبة - شارع الشهداء",detailedAddress:{governorate:"خان يونس",city:"خان يونس",district:"الكتيبة",street:"شارع الشهداء",additionalInfo:"بجانب مسجد الكتيبة الكبير"},location:{lat:31.32,lng:34.35},organizationId:kn,isHeadOfFamily:!1,spouseId:Ls,childrenIds:[],parentId:null,medicalConditions:["أنيميا"],profession:"ربة منزل",maritalStatus:"married",economicLevel:"poor",membersCount:0,additionalDocuments:[{name:"عقد زواج",url:"https://example.com/marriage_cert2.pdf",type:"marriage_certificate"},{name:"إثبات سكن",url:"https://example.com/residence2.pdf",type:"residence_proof"}],identityStatus:"verified",status:"active",eligibilityStatus:"eligible",lastReceived:"2024-12-17",totalPackages:3,notes:"زوجة رب الأسرة محمد أبو عامر",createdAt:"2024-02-01",updatedAt:"2024-12-17",createdBy:"org_admin",updatedBy:"admin"},{id:Yr,name:"خالد محمد أبو عامر",fullName:"خالد محمد عبدالله أبو عامر",nationalId:"900345678",dateOfBirth:"2005-11-10",gender:"male",phone:"0593456789",address:"خان يونس - الكتيبة - شارع الشهداء",detailedAddress:{governorate:"خان يونس",city:"خان يونس",district:"الكتيبة",street:"شارع الشهداء",additionalInfo:"بجانب مسجد الكتيبة الكبير"},location:{lat:31.3469,lng:34.3029},familyId:zl,relationToFamily:"ابن",isHeadOfFamily:!1,spouseId:null,childrenIds:[],parentId:Ls,medicalConditions:[],profession:"طالب جامعي",maritalStatus:"single",economicLevel:"poor",membersCount:0,additionalDocuments:[{name:"شهادة طالب",url:"https://example.com/student_cert3.pdf",type:"student_certificate"}],identityStatus:"verified",status:"active",eligibilityStatus:"eligible",lastReceived:"2024-12-21",totalPackages:2,notes:"ابن محمد أبو عامر - طالب جامعي",createdAt:"2024-01-10",updatedAt:"2024-12-21",createdBy:"admin",updatedBy:"admin"},{id:Jc,name:"سارة محمد أبو عامر",fullName:"سارة محمد عبدالله أبو عامر",nationalId:"900456789",dateOfBirth:"2008-05-18",gender:"female",phone:"0594567890",address:"خان يونس - الكتيبة - شارع الشهداء",detailedAddress:{governorate:"خان يونس",city:"خان يونس",district:"الكتيبة",street:"شارع الشهداء",additionalInfo:"بجانب مسجد الكتيبة الكبير"},location:{lat:31.3469,lng:34.3029},familyId:zl,relationToFamily:"ابنة",isHeadOfFamily:!1,spouseId:null,childrenIds:[],parentId:Ls,medicalConditions:["ربو"],profession:"طالبة ثانوية",maritalStatus:"single",economicLevel:"poor",membersCount:0,additionalDocuments:[{name:"شهادة طالبة",url:"https://example.com/student_cert4.pdf",type:"student_certificate"}],identityStatus:"verified",status:"active",eligibilityStatus:"eligible",lastReceived:"2024-12-18",totalPackages:1,notes:"ابنة محمد أبو عامر - طالبة ثانوية",createdAt:"2024-01-12",updatedAt:"2024-12-18",createdBy:"admin",updatedBy:"admin"},{id:Ml,name:"أحمد عبدالله النجار",fullName:"أحمد عبدالله سليم النجار",nationalId:"900567890",dateOfBirth:"1982-09-30",gender:"male",phone:"0595678901",address:"خان يونس - القرارة - شارع فلسطين",detailedAddress:{governorate:"خان يونس",city:"القرارة",district:"القرارة الشرقية",street:"شارع فلسطين",additionalInfo:"بجانب مسجد القرارة الكبير"},location:{lat:31.3,lng:34.36},organizationId:Kr,isHeadOfFamily:!0,spouseId:ed,childrenIds:[],parentId:null,medicalConditions:["إعاقة حركية"],profession:"سائق تاكسي",maritalStatus:"married",economicLevel:"poor",membersCount:5,additionalDocuments:[{name:"تقرير طبي",url:"https://example.com/medical5.pdf",type:"medical_report"},{name:"إثبات سكن",url:"https://example.com/residence5.pdf",type:"residence_proof"}],identityStatus:"verified",status:"active",eligibilityStatus:"eligible",lastReceived:"2024-12-19",totalPackages:8,notes:"من ذوي الاحتياجات الخاصة",createdAt:"2024-01-08",updatedAt:"2024-12-19",createdBy:"org_admin",updatedBy:"org_admin"},{id:ed,name:"نورا إبراهيم النجار",fullName:"نورا إبراهيم عبدالرحمن النجار",nationalId:"900678901",dateOfBirth:"1988-12-05",gender:"female",phone:"0596789012",address:"خان يونس - القرارة - شارع فلسطين",detailedAddress:{governorate:"خان يونس",city:"القرارة",district:"القرارة الشرقية",street:"شارع فلسطين",additionalInfo:"بجانب مسجد القرارة الكبير"},location:{lat:31.3,lng:34.36},organizationId:Kr,isHeadOfFamily:!1,spouseId:Ml,childrenIds:[],parentId:null,medicalConditions:[],profession:"خياطة",maritalStatus:"married",economicLevel:"poor",membersCount:0,additionalDocuments:[{name:"عقد زواج",url:"https://example.com/marriage6.pdf",type:"marriage_certificate"}],identityStatus:"verified",status:"active",eligibilityStatus:"eligible",lastReceived:"2024-12-19",totalPackages:3,notes:"زوجة أحمد النجار - تعمل في الخياطة",createdAt:"2024-03-01",updatedAt:"2024-12-19",createdBy:"org_admin",updatedBy:"org_admin"},{id:td,name:"يوسف حسن البرغوثي",fullName:"يوسف حسن محمد البرغوثي",nationalId:"900789012",dateOfBirth:"1992-08-12",gender:"male",phone:"0597890123",address:"خان يونس - الفخاري - شارع الأقصى",detailedAddress:{governorate:"خان يونس",city:"الفخاري",district:"الفخاري الشرقية",street:"شارع الأقصى",additionalInfo:"منطقة الحدود الشرقية"},location:{lat:31.295,lng:34.37},organizationId:kn,isHeadOfFamily:!0,spouseId:null,childrenIds:[],parentId:null,medicalConditions:[],profession:"عاطل عن العمل",maritalStatus:"single",economicLevel:"very_poor",membersCount:1,additionalDocuments:[{name:"إثبات سكن",url:"https://example.com/residence7.pdf",type:"residence_proof"},{name:"شهادة عدم عمل",url:"https://example.com/unemployment7.pdf",type:"unemployment_certificate"}],identityStatus:"pending",status:"pending",eligibilityStatus:"under_review",lastReceived:"2024-11-30",totalPackages:1,notes:"مستفيد جديد - أعزب - تم رفع صورة الهوية للمراجعة",createdAt:"2024-12-01",updatedAt:"2024-12-01",createdBy:"org_admin",updatedBy:"org_admin"}],is=[{id:Jd,name:"طرد مواد غذائية أساسية",type:"مواد غذائية",description:"أرز، سكر، زيت، معلبات، تمر",value:50,funder:"الأونروا",organizationId:kn,beneficiaryId:Ls,status:"delivered",createdAt:"2024-12-20",deliveredAt:"2024-12-20",expiryDate:"2024-12-30"},{id:eu,name:"طرد ملابس شتوية",type:"ملابس",description:"معاطف، بطانيات، ملابس داخلية",value:75,funder:"الهلال الأحمر الفلسطيني",organizationId:kn,beneficiaryId:Qr,status:"in_delivery",createdAt:"2024-12-19"},{id:n0,name:"طرد أدوية أساسية",type:"أدوية",description:"مسكنات، أدوية ضغط، فيتامينات",value:30,funder:"منظمة الصحة العالمية",organizationId:Kr,beneficiaryId:Yr,status:"pending",createdAt:"2024-12-18",expiryDate:"2025-06-18"}],d0=[{id:r0,name:"محمد علي أبو عامر",phone:"0591234567",email:"mohammed@courier.com",status:"active",rating:4.8,completedTasks:156,currentLocation:{lat:31.3469,lng:34.3029},isHumanitarianApproved:!0},{id:a0,name:"أحمد خالد الفرا",phone:"0592345678",email:"ahmed@courier.com",status:"busy",rating:4.6,completedTasks:89,currentLocation:{lat:31.32,lng:34.35},isHumanitarianApproved:!0},{id:Fy,name:"سالم محمد النجار",phone:"0593456789",email:"salem@courier.com",status:"offline",rating:4.9,completedTasks:234,currentLocation:{lat:31.31,lng:34.38},isHumanitarianApproved:!0}],at=[{id:$y,packageId:Jd,beneficiaryId:Ls,courierId:r0,batchId:l0,status:"delivered",createdAt:"2024-12-20",scheduledAt:"2024-12-20",deliveredAt:"2024-12-20",deliveryLocation:{lat:31.5017,lng:34.4668},notes:"تم التسليم بنجاح للمستفيد",courierNotes:"المستفيد كان متواجداً في المنزل، تم التسليم مباشرة",deliveryProofImageUrl:"https://example.com/delivery_proof1.jpg",digitalSignatureImageUrl:"https://example.com/signature1.jpg"},{id:Uy,packageId:eu,beneficiaryId:Qr,courierId:a0,batchId:o0,status:"in_progress",createdAt:"2024-12-19",scheduledAt:"2024-12-21",estimatedArrivalTime:"2024-12-21T14:30:00",remainingDistance:2.5,notes:"في الطريق للتسليم"},{id:i0,packageId:n0,beneficiaryId:Yr,batchId:c0,status:"pending",createdAt:"2024-12-18",notes:"في انتظار تعيين مندوب"}],tu=[{id:Zy,type:"delayed",title:"طرود متأخرة في قطاع غزة",description:"23 طرد في منطقة الشجاعية لم يتم تسليمها",relatedId:eu,relatedType:"package",priority:"critical",isRead:!1,createdAt:"2024-12-21"},{id:Hy,type:"failed",title:"فشل في التسليم",description:"5 طرود تحتاج تحديث عنوان",relatedId:i0,relatedType:"task",priority:"high",isRead:!1,createdAt:"2024-12-20"},{id:Vy,type:"expired",title:"طرود قاربت على الانتهاء",description:"12 طرد تنتهي صلاحيتها خلال 3 أيام",relatedId:Jd,relatedType:"package",priority:"medium",isRead:!0,createdAt:"2024-12-19"}],Xy=[{id:Wy,action:"تم تسليم طرد مواد غذائية",user:"محمد علي أبو عامر",role:"مندوب",timestamp:"2024-12-21T10:30:00",type:"deliver",beneficiaryId:Ls,details:"تم التسليم بنجاح مع توثيق بالصورة"},{id:qy,action:"تحديث بيانات المستفيد",user:"فاطمة أحمد المشرفة",role:"مشرف",timestamp:"2024-12-20T14:15:00",type:"update",beneficiaryId:Ls,details:"تم تحديث رقم الهاتف والعنوان"},{id:Gy,action:"التحقق من الهوية",user:"أحمد محمد الإدمن",role:"مدير",timestamp:"2024-12-19T09:45:00",type:"verify",beneficiaryId:Ls,details:"تم قبول وثائق الهوية والموافقة"},{id:Ky,action:"إضافة مستفيد جديد",user:"سارة المنسقة",role:"منسق",timestamp:"2024-12-18T11:20:00",type:"create",beneficiaryId:Qr,details:"تم تسجيل المستفيد في النظام"},{id:Qy,action:"فشل في التسليم",user:"خالد المندوب",role:"مندوب",timestamp:"2024-12-17T16:30:00",type:"deliver",beneficiaryId:Yr,details:"العنوان غير صحيح، يحتاج تحديث"}],Jy=[{id:qp,name:"قراءة جميع البيانات",description:"عرض جميع البيانات في النظام",category:"read"},{id:Gp,name:"تعديل جميع البيانات",description:"تعديل أي بيانات في النظام",category:"write"},{id:Kp,name:"حذف البيانات",description:"حذف البيانات من النظام",category:"delete"},{id:Qp,name:"إدارة المستخدمين",description:"إضافة وتعديل المستخدمين",category:"manage"},{id:Yp,name:"إدارة الأدوار",description:"إنشاء وتعديل الأدوار",category:"manage"},{id:Qc,name:"عرض التقارير",description:"الوصول للتقارير والإحصائيات",category:"read"},{id:Pa,name:"عرض المستفيدين",description:"عرض قائمة المستفيدين",category:"read"},{id:Yc,name:"إدارة المستفيدين",description:"إضافة وتعديل المستفيدين",category:"write"},{id:Xc,name:"عرض الطلبات",description:"عرض طلبات المساعدة",category:"read"},{id:Xp,name:"موافقة الطلبات",description:"الموافقة على طلبات المساعدة",category:"approve"},{id:Jp,name:"رفض الطلبات",description:"رفض طلبات المساعدة",category:"approve"},{id:al,name:"عرض التسليمات",description:"عرض حالة التسليمات",category:"read"},{id:e0,name:"تحديث حالة التسليم",description:"تحديث حالة تسليم الطرود",category:"write"}],u0=[{id:t0,name:"مدير النظام",description:"صلاحيات كاملة على جميع أجزاء النظام",permissions:[qp,Gp,Kp,Qp,Yp,Qc],userCount:2,isActive:!0,createdAt:"2024-01-01"},{id:jr,name:"مشرف المؤسسة",description:"إدارة المستفيدين والطلبات الخاصة بالمؤسسة",permissions:[Pa,Yc,Xc,Qc,al],userCount:8,isActive:!0,createdAt:"2024-01-05"},{id:s0,name:"مندوب التوزيع",description:"تحديث حالة التسليمات والتوزيع",permissions:[al,e0,Pa],userCount:15,isActive:!0,createdAt:"2024-01-10"},{id:Ay,name:"مراجع الطلبات",description:"مراجعة وموافقة طلبات المساعدة",permissions:[Xc,Xp,Jp,Pa],userCount:5,isActive:!0,createdAt:"2024-01-15"},{id:Oy,name:"مشرف العائلة",description:"إدارة أفراد العائلة والطرود الخاصة بها",permissions:[Pa,Yc,al],userCount:3,isActive:!0,createdAt:"2024-01-20"}],Al=[{id:By,name:"أحمد محمد الإدمن",email:"admin@humanitarian.ps",phone:"0501234567",roleId:t0,associatedId:null,associatedType:null,status:"active",lastLogin:"2024-12-21",createdAt:"2024-01-01"},{id:Ry,name:"فاطمة أحمد المشرفة",email:"supervisor@redcrescent-gaza.org",phone:"0559876543",roleId:jr,associatedId:kn,associatedType:"organization",status:"active",lastLogin:"2024-12-20",createdAt:"2024-01-05"},{id:Dy,name:"محمد علي المندوب",email:"courier@humanitarian.ps",phone:"0567891234",roleId:s0,associatedId:null,associatedType:null,status:"active",lastLogin:"2024-12-21",createdAt:"2024-01-10"},{id:le(),name:"د. فاطمة الغزاوي - أطباء بلا حدود",email:"supervisor@msf-gaza.org",phone:"0559876543",roleId:jr,associatedId:Kr,associatedType:"organization",status:"active",lastLogin:"2024-12-20",createdAt:"2024-01-05"},{id:le(),name:"خالد أبو يوسف - الإغاثة الإسلامية",email:"supervisor@islamic-relief.org",phone:"0567891234",roleId:jr,associatedId:Xd,associatedType:"organization",status:"active",lastLogin:"2024-12-19",createdAt:"2024-01-08"},{id:le(),name:"د. أحمد المدير - الأونروا",email:"supervisor@unrwa-gaza.org",phone:"0591111111",roleId:jr,associatedId:oi,associatedType:"organization",status:"active",lastLogin:"2024-12-21",createdAt:"2024-01-01"},{id:le(),name:"جون سميث - CRS",email:"supervisor@crs-gaza.org",phone:"0591234567",roleId:jr,associatedId:le(),associatedType:"organization",status:"active",lastLogin:"2024-12-20",createdAt:"2024-01-25"},{id:le(),name:"محمد أبو عامر - رب الأسرة",email:"family@abuamer.ps",phone:"0591234567",roleId:le(),associatedId:zl,associatedType:"family",status:"active",lastLogin:"2024-12-21",createdAt:"2024-01-10"},{id:le(),name:"سارة الفرا - مبادرة عائلية",email:"family@alfarra.ps",phone:"0592345678",roleId:le(),associatedId:Zp,associatedType:"family",status:"active",lastLogin:"2024-12-20",createdAt:"2024-02-05"}],wa=Se,ej=t=>Se.filter(s=>s.organizationId===t),tj=t=>Se.filter(s=>s.familyId===t),sj=()=>tu.filter(t=>t.priority==="critical"&&!t.isRead),m0=t=>at.filter(s=>s.batchId===t),La=t=>{const s=m0(t),r=s.length,i=s.filter(u=>u.status==="delivered").length,o=s.filter(u=>u.status==="failed").length,c=s.filter(u=>["pending","assigned","in_progress","rescheduled"].includes(u.status)).length;return{totalTasks:r,totalBeneficiaries:r,deliveredTasks:i,failedTasks:o,pendingTasks:c,deliveryRate:r>0?Math.round(i/r*100):0,failureRate:r>0?Math.round(o/r*100):0}},Xr=()=>{const t=Se.length,s=is.length,r=is.filter(c=>c.status==="delivered").length,i=at.filter(c=>["pending","assigned","in_progress"].includes(c.status)).length,o=sj().length;return{totalBeneficiaries:t,totalPackages:s,deliveredPackages:r,activeTasks:i,criticalAlerts:o,deliveryRate:s>0?Math.round(r/s*100):0}},nj=t=>{const s=Se.findIndex(i=>i.nationalId===t.nationalId),r=[];if(s!==-1){const i=Se[s];return i.name!==t.name&&(i.name=t.name,i.fullName=t.name,r.push("الاسم")),t.phone&&i.phone!==t.phone&&(i.phone=t.phone,r.push("رقم الهاتف")),i.updatedAt=new Date().toISOString(),i.updatedBy="import_system",{beneficiary:i,isNew:!1,updated:r}}else{const i={id:`imported-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:t.name,fullName:t.name,nationalId:t.nationalId,dateOfBirth:"1990-01-01",gender:"male",phone:t.phone||"",address:"غير محدد - مستورد من ملف",detailedAddress:{governorate:"غير محدد",city:"غير محدد",district:"غير محدد",street:"غير محدد",additionalInfo:"مستورد من ملف Excel/CSV"},location:{lat:31.3469,lng:34.3029},organizationId:void 0,familyId:void 0,relationToFamily:void 0,isHeadOfFamily:!1,spouseId:null,childrenIds:[],parentId:null,medicalConditions:[],profession:"غير محدد",maritalStatus:"single",economicLevel:"poor",membersCount:1,additionalDocuments:[],identityStatus:"pending",identityImageUrl:void 0,status:"active",eligibilityStatus:"under_review",lastReceived:new Date().toISOString().split("T")[0],totalPackages:0,notes:`مستورد من ملف Excel/CSV في ${new Date().toLocaleDateString("ar-SA")}${t.alternativePhone?` - هاتف بديل: ${t.alternativePhone}`:""}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"import_system",updatedBy:"import_system"};return Se.unshift(i),{beneficiary:i,isNew:!0,updated:[]}}},rj=()=>[["الاسم","رقم الهوية","رقم الهاتف","رقم الهاتف البديل"],...[["أحمد محمد الخالدي","900123456","0597123456","0598123456"],["فاطمة سالم النجار","900234567","0598234567",""],["محمد علي الغزاوي","900345678","0599345678","0597345678"],["سارة أحمد الفرا","900456789","0596456789",""],["خالد يوسف النجار","900567890","0595567890","0599567890"]]].map(i=>i.map(o=>`"${o}"`).join(",")).join(`
`),aj=t=>{const s=[];if((!t.name||typeof t.name!="string"||t.name.trim().length<2)&&s.push("الاسم مطلوب ويجب أن يكون أكثر من حرفين"),!t.nationalId||typeof t.nationalId!="string")s.push("رقم الهوية مطلوب");else{const r=t.nationalId.toString().trim();/^\d{9}$/.test(r)||s.push("رقم الهوية يجب أن يكون 9 أرقام بالضبط")}if(t.phone&&typeof t.phone=="string"){const r=t.phone.toString().trim();r&&!/^05\d{8}$/.test(r)&&s.push("رقم الهاتف يجب أن يبدأ بـ 05 ويتكون من 10 أرقام")}if(t.alternativePhone&&typeof t.alternativePhone=="string"){const r=t.alternativePhone.toString().trim();r&&!/^05\d{8}$/.test(r)&&s.push("رقم الهاتف البديل يجب أن يبدأ بـ 05 ويتكون من 10 أرقام")}return{isValid:s.length===0,errors:s}},h0=E.createContext(void 0),x0=()=>{const t=E.useContext(h0);if(t===void 0)throw new Error("useAlerts must be used within an AlertsProvider");return t},ij=({children:t})=>{const[s,r]=E.useState(tu),i=s.filter(w=>!w.isRead),o=s.filter(w=>w.priority==="critical"&&!w.isRead),j={alerts:s,unreadAlerts:i,criticalAlerts:o,addAlert:w=>{const T={...w,id:`alert-${Date.now()}`,createdAt:new Date().toISOString()};r(S=>[T,...S])},markAsRead:w=>{r(T=>T.map(S=>S.id===w?{...S,isRead:!0}:S))},removeAlert:w=>{r(T=>T.filter(S=>S.id!==w))},clearAllAlerts:()=>{r([])}};return e.jsx(h0.Provider,{value:j,children:t})};function lj({onLogin:t}){const[s,r]=E.useState(""),[i,o]=E.useState(!1),[c,u]=E.useState(!1),[h,x]=E.useState(""),j=[{email:"admin@humanitarian.ps",name:"أحمد محمد الإدمن",role:"مدير النظام",type:"admin",icon:Ye,color:"bg-blue-600"},{email:"supervisor@redcrescent-gaza.org",name:"فاطمة أحمد - الهلال الأحمر",role:"مشرف المؤسسة",type:"organization",icon:ot,color:"bg-green-600"},{email:"supervisor@crs-gaza.org",name:"جون سميث - CRS",role:"مشرف المؤسسة",type:"organization",icon:ot,color:"bg-purple-600"},{email:"family@abuamer.ps",name:"محمد أبو عامر",role:"مشرف العائلة",type:"family",icon:Te,color:"bg-orange-600"}],w=async S=>{const N=S||s;if(!N.trim()){x("يرجى إدخال البريد الإلكتروني");return}u(!0),x(""),await new Promise(g=>setTimeout(g,1e3));const P=Al.find(g=>g.email.toLowerCase()===N.toLowerCase());P?P.status==="active"?(P.lastLogin=new Date().toISOString(),t(P)):x("الحساب غير نشط أو موقوف"):x("البريد الإلكتروني غير مسجل في النظام"),u(!1)},T=S=>{if(S.associatedType==="organization"&&S.associatedId){const N=Ht.find(P=>P.id===S.associatedId);return N?` - ${N.name}`:""}if(S.associatedType==="family"&&S.associatedId){const N=Sn.find(P=>P.id===S.associatedId);return N?` - ${N.name}`:""}return""};return e.jsx("div",{className:"min-h-screen bg-gray-50/30 flex items-center justify-center p-4",dir:"rtl",children:e.jsx("div",{className:"bg-white rounded-2xl border border-gray-200 w-full max-w-4xl overflow-hidden",children:e.jsxs("div",{className:"grid lg:grid-cols-2",children:[e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(Ye,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"تسجيل الدخول"}),e.jsx("p",{className:"text-gray-600",children:"منصة المساعدات الإنسانية - غزة"})]}),h&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(ge,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-red-800 font-medium",children:h})]})}),e.jsxs("form",{onSubmit:S=>{S.preventDefault(),w()},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),e.jsxs("div",{className:"relative",children:[e.jsx(Il,{className:"w-4 h-4 absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"email",value:s,onChange:S=>r(S.target.value),className:"w-full pr-10 pl-3 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل البريد الإلكتروني",disabled:c})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"كلمة المرور"}),e.jsxs("div",{className:"relative",children:[e.jsx(Qn,{className:"w-4 h-4 absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:i?"text":"password",className:"w-full pr-10 pl-10 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل كلمة المرور",defaultValue:"123456",disabled:c}),e.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?e.jsx(Bp,{className:"w-4 h-4"}):e.jsx(vt,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"كلمة المرور الافتراضية: 123456"})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white ml-2"}),"جاري تسجيل الدخول..."]}):e.jsxs(e.Fragment,{children:[e.jsx(vh,{className:"w-4 h-4 ml-2"}),"تسجيل الدخول"]})})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-blue-800 font-medium text-sm",children:"نظام تجريبي"})]}),e.jsx("p",{className:"text-blue-700 text-sm mt-1",children:"هذا نظام تجريبي يستخدم بيانات وهمية. كلمة المرور لجميع الحسابات: 123456"})]})]}),e.jsxs("div",{className:"bg-gray-50 p-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"حسابات تجريبية سريعة"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"اختر حساب للدخول السريع وتجربة النظام"}),e.jsx("div",{className:"space-y-4",children:j.map(S=>{const N=S.icon;return e.jsx("button",{onClick:()=>w(S.email),disabled:c,className:`w-full p-4 rounded-lg text-right group disabled:opacity-50 disabled:cursor-not-allowed ${S.color} hover:opacity-90 transition-colors`,children:e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(N,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 text-white",children:[e.jsx("p",{className:"font-semibold",children:S.name}),e.jsx("p",{className:"text-sm opacity-90",children:S.role}),e.jsx("p",{className:"text-xs opacity-75 mt-1",children:S.email})]}),e.jsx(vh,{className:"w-4 h-4 text-white opacity-75"})]})},S.email)})}),e.jsxs("div",{className:"mt-6 bg-white/60 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3 text-sm",children:"المستخدمين المتاحين:"}),e.jsx("div",{className:"space-y-2 text-sm",children:Al.map(S=>{const N=T(S);return e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700 text-xs",children:S.email}),e.jsxs("span",{className:"text-gray-500 text-xs",children:[S.name.split(" - ")[0],N]})]},S.id)})})]})]})]})})})}function oj({onNavigateTo:t}){return e.jsxs("div",{className:"min-h-screen bg-gray-50/30",dir:"rtl",children:[e.jsx("header",{className:"bg-white border-b border-gray-200/60 sticky top-0 z-50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-between h-16",children:e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(Ye,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"منصة المساعدات"}),e.jsx("p",{className:"text-xs text-gray-600",children:"نظام إدارة التوزيع الإنساني"})]})]})})})}),e.jsx("section",{className:"relative py-20 overflow-hidden",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative",children:[e.jsxs("h2",{className:"text-3xl md:text-5xl font-bold text-gray-900 mb-6",children:["منصة غزة للمساعدات",e.jsx("span",{className:"text-blue-600 block",children:"الإنسانية المتكاملة"})]}),e.jsx("p",{className:"text-lg text-gray-600 mb-12 max-w-3xl mx-auto",children:"نظام شامل لإدارة وتوزيع المساعدات الإنسانية في قطاع غزة مع تتبع في الوقت الفعلي، إدارة المستفيدين، والمؤسسات والعائلات الفلسطينية"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-16",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(At,{className:"w-5 h-5 text-blue-600"})}),e.jsx("span",{className:"text-sm text-gray-600",children:"تتبع الموقع"})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-xl flex items-center justify-center",children:e.jsx(Ee,{className:"w-5 h-5 text-green-600"})}),e.jsx("span",{className:"text-sm text-gray-600",children:"إدارة الطرود"})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-50 rounded-xl flex items-center justify-center",children:e.jsx(St,{className:"w-5 h-5 text-orange-600"})}),e.jsx("span",{className:"text-sm text-gray-600",children:"التوزيع"})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-50 rounded-xl flex items-center justify-center",children:e.jsx(gt,{className:"w-5 h-5 text-purple-600"})}),e.jsx("span",{className:"text-sm text-gray-600",children:"التقارير"})]})]})]})}),e.jsx("section",{className:"py-16 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"اختر لوحة التحكم المناسبة"}),e.jsx("p",{className:"text-gray-600",children:"نظام متعدد المستويات لإدارة المساعدات بفعالية"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 hover:border-blue-300 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center mb-4",children:e.jsx(Ye,{className:"w-6 h-6 text-blue-600"})}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"لوحة الإدمن"}),e.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"التحكم الكامل في النظام، إدارة المستفيدين، المؤسسات، العائلات، المندوبين والتقارير الشاملة"}),e.jsxs("ul",{className:"space-y-2 mb-6",children:[e.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-600 rounded-full ml-2 flex-shrink-0"}),"خريطة تفاعلية مباشرة"]}),e.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-600 rounded-full ml-2 flex-shrink-0"}),"إدارة شاملة للمؤسسات والعائلات"]}),e.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-600 rounded-full ml-2 flex-shrink-0"}),"تقارير مفصلة وتنبيهات ذكية"]})]}),e.jsxs("button",{onClick:()=>t("admin"),className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",children:[e.jsx("span",{children:"دخول لوحة الإدمن"}),e.jsx(nl,{className:"w-4 h-4 mr-2"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 hover:border-green-300 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-xl flex items-center justify-center mb-4",children:e.jsx(ot,{className:"w-6 h-6 text-green-600"})}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"لوحة المؤسسات"}),e.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"إدارة مستفيدين وطرود المؤسسة، متابعة عملية التوزيع، والحصول على تقارير أداء مفصلة"}),e.jsxs("ul",{className:"space-y-2 mb-6",children:[e.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-600 rounded-full ml-2 flex-shrink-0"}),"إدارة المستفيدين والطرود"]}),e.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-600 rounded-full ml-2 flex-shrink-0"}),"متابعة المهام والمندوبين"]}),e.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-600 rounded-full ml-2 flex-shrink-0"}),"تقارير أداء المؤسسة"]})]}),e.jsxs("button",{onClick:()=>t("organizations"),className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",children:[e.jsx("span",{children:"دخول لوحة المؤسسات"}),e.jsx(nl,{className:"w-4 h-4 mr-2"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 hover:border-purple-300 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-50 rounded-xl flex items-center justify-center mb-4",children:e.jsx(Te,{className:"w-6 h-6 text-purple-600"})}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"لوحة العائلات"}),e.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"للعائلات والمبادرين الفرديين، إدارة مبسطة للمستفيدين ومتابعة التوزيع بواجهة سهلة الاستخدام"}),e.jsxs("ul",{className:"space-y-2 mb-6",children:[e.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-purple-600 rounded-full ml-2 flex-shrink-0"}),"إدارة مبسطة للمستفيدين"]}),e.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-purple-600 rounded-full ml-2 flex-shrink-0"}),"تحديد الطرود للعائلة"]}),e.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-purple-600 rounded-full ml-2 flex-shrink-0"}),"متابعة التوزيع والتنبيهات"]})]}),e.jsxs("button",{onClick:()=>t("families"),className:"w-full bg-purple-600 text-white py-3 px-4 rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center",children:[e.jsx("span",{children:"دخول لوحة العائلات"}),e.jsx(nl,{className:"w-4 h-4 mr-2"})]})]})]})]})}),e.jsx("section",{className:"py-16 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"مميزات النظام"}),e.jsx("p",{className:"text-gray-600",children:"حلول شاملة لإدارة المساعدات الإنسانية بكفاءة عالية"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center mb-4",children:e.jsx(At,{className:"w-5 h-5 text-blue-600"})}),e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"التتبع المباشر"}),e.jsx("p",{className:"text-sm text-gray-600",children:"خريطة تفاعلية لتتبع المستفيدين والمندوبين"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200",children:[e.jsx("div",{className:"w-10 h-10 bg-green-50 rounded-xl flex items-center justify-center mb-4",children:e.jsx(Ee,{className:"w-5 h-5 text-green-600"})}),e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"إدارة الطرود"}),e.jsx("p",{className:"text-sm text-gray-600",children:"نظام شامل لإدارة وتتبع جميع الطرود"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-50 rounded-xl flex items-center justify-center mb-4",children:e.jsx(ts,{className:"w-5 h-5 text-orange-600"})}),e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"التنبيهات الذكية"}),e.jsx("p",{className:"text-sm text-gray-600",children:"تنبيهات فورية للطلبات المتأخرة والمشاكل"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-50 rounded-xl flex items-center justify-center mb-4",children:e.jsx(gt,{className:"w-5 h-5 text-purple-600"})}),e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"التقارير التفصيلية"}),e.jsx("p",{className:"text-sm text-gray-600",children:"تقارير شاملة وإحصائيات مفصلة للأداء"})]})]})]})}),e.jsx("footer",{className:"bg-gray-800 text-white py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3 space-x-reverse mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(Ye,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-lg font-semibold",children:"منصة المساعدات الإنسانية"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"نظام متكامل لإدارة وتوزيع المساعدات الإنسانية بكفاءة وشفافية"})]})})]})}function cj({}){const[t,s]=E.useState("overview"),[r,i]=E.useState(""),[o,c]=E.useState(!1),[u,h]=E.useState("add-role"),[x,j]=E.useState(null),[w,T]=E.useState(u0),[S,N]=E.useState(Al),[P,g]=E.useState({name:"",description:"",permissions:[]}),[M,v]=E.useState({userId:"",roleId:""}),y=[{id:"overview",name:"نظرة عامة",icon:Ye},{id:"roles",name:"الأدوار",icon:Zn},{id:"users",name:"المستخدمين",icon:Te},{id:"permissions",name:"الصلاحيات",icon:Qn}],k=[{id:"read_all",name:"قراءة جميع البيانات",category:"عام"},{id:"write_all",name:"تعديل جميع البيانات",category:"عام"},{id:"delete_all",name:"حذف البيانات",category:"عام"},{id:"manage_users",name:"إدارة المستخدمين",category:"المستخدمين"},{id:"manage_roles",name:"إدارة الأدوار",category:"المستخدمين"},{id:"read_beneficiaries",name:"عرض المستفيدين",category:"المستفيدين"},{id:"write_beneficiaries",name:"إدارة المستفيدين",category:"المستفيدين"},{id:"read_requests",name:"عرض الطلبات",category:"الطلبات"},{id:"write_requests",name:"إدارة الطلبات",category:"الطلبات"},{id:"approve_requests",name:"موافقة الطلبات",category:"الطلبات"},{id:"reject_requests",name:"رفض الطلبات",category:"الطلبات"},{id:"read_deliveries",name:"عرض التسليمات",category:"التوزيع"},{id:"update_delivery_status",name:"تحديث حالة التسليم",category:"التوزيع"},{id:"view_reports",name:"عرض التقارير",category:"التقارير"},{id:"export_data",name:"تصدير البيانات",category:"التقارير"}],C=()=>{h("add-role"),j(null),g({name:"",description:"",permissions:[]}),c(!0)},R=D=>{h("edit-role"),j(D),g({name:D.name,description:D.description,permissions:D.permissions}),c(!0)},O=()=>{h("add-user"),j(null),c(!0)},p=D=>{h("assign-role"),j(D),v({userId:D.id,roleId:D.roleId}),c(!0)},I=()=>{if(!P.name.trim()){alert("اسم الدور مطلوب");return}if(x)T(D=>D.map(me=>me.id===x.id?{...me,name:P.name,description:P.description,permissions:P.permissions}:me)),alert("تم تحديث الدور بنجاح");else{const D={id:(w.length+1).toString(),name:P.name,description:P.description,permissions:P.permissions,userCount:0,isActive:!0,createdAt:new Date().toISOString()};T(me=>[...me,D]),alert("تم إنشاء الدور بنجاح")}c(!1),g({name:"",description:"",permissions:[]}),j(null)},W=()=>{if(!M.userId||!M.roleId){alert("يجب اختيار المستخدم والدور");return}const D=S.find(oe=>oe.id===M.userId),me=D==null?void 0:D.roleId;N(oe=>oe.map(B=>B.id===M.userId?{...B,roleId:M.roleId}:B)),T(oe=>oe.map(B=>B.id===me?{...B,userCount:Math.max(0,B.userCount-1)}:B.id===M.roleId?{...B,userCount:B.userCount+1}:B)),alert("تم تحديث دور المستخدم بنجاح"),c(!1),v({userId:"",roleId:""}),j(null)},z=D=>{if(confirm("هل أنت متأكد من حذف هذا الدور؟")){const me=S.filter(oe=>oe.roleId===D);if(me.length>0){alert(`لا يمكن حذف هذا الدور لأنه مُعيّن لـ ${me.length} مستخدم`);return}T(oe=>oe.filter(B=>B.id!==D)),alert("تم حذف الدور بنجاح")}},Q=D=>{N(me=>me.map(oe=>oe.id===D?{...oe,status:oe.status==="active"?"inactive":"active"}:oe)),alert("تم تحديث حالة المستخدم بنجاح")},de=D=>{alert(`سيتم فتح واجهة تعديل الصلاحيات الخاصة بـ ${D.name}`)},je=D=>{const me=w.find(oe=>oe.id===D);return me?Jy.filter(oe=>me.permissions.includes(oe.id)):[]},Y=D=>{const me=w.find(oe=>oe.id===D);return me?me.name:"غير محدد"},_=D=>{switch(D){case"مدير النظام":return"bg-red-100 text-red-800";case"مشرف المؤسسة":return"bg-blue-100 text-blue-800";case"مندوب التوزيع":return"bg-green-100 text-green-800";case"مراجع الطلبات":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},G=()=>k.reduce((me,oe)=>(me[oe.category]||(me[oe.category]=[]),me[oe.category].push(oe),me),{}),ie=w.filter(D=>{var me;return D.name.toLowerCase().includes(r.toLowerCase())||((me=D.description)==null?void 0:me.toLowerCase().includes(r.toLowerCase()))}),$=S.filter(D=>D.name.toLowerCase().includes(r.toLowerCase())||D.email.toLowerCase().includes(r.toLowerCase())||Y(D.roleId).toLowerCase().includes(r.toLowerCase())),F=S.filter(D=>D.status==="active").length,q=S.filter(D=>D.roleId==="1").length,se=G();return e.jsxs("div",{className:"min-h-screen bg-gray-50",dir:"rtl",children:[e.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-between h-16",children:e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(Ye,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"إدارة الصلاحيات"}),e.jsx("p",{className:"text-sm text-gray-600",children:"إدارة أدوار المستخدمين وصلاحياتهم في النظام"})]})]})})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex space-x-8 space-x-reverse",children:y.map(D=>{const me=D.icon,oe=t===D.id;return e.jsxs("button",{onClick:()=>s(D.id),className:`flex items-center space-x-2 space-x-reverse px-1 py-4 border-b-2 font-medium text-sm transition-colors ${oe?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(me,{className:"w-4 h-4 ml-2"}),e.jsx("span",{children:D.name})]},D.id)})})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t==="overview"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"إجمالي الأدوار"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:w.length})]}),e.jsx("div",{className:"bg-blue-100 p-4 rounded-2xl",children:e.jsx(Zn,{className:"w-8 h-8 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"إجمالي المستخدمين"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:S.length})]}),e.jsx("div",{className:"bg-green-100 p-4 rounded-2xl",children:e.jsx(Te,{className:"w-8 h-8 text-green-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"مستخدمين نشطين"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:F})]}),e.jsx("div",{className:"bg-orange-100 p-4 rounded-2xl",children:e.jsx(El,{className:"w-8 h-8 text-orange-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"مديرين"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:q})]}),e.jsx("div",{className:"bg-purple-100 p-4 rounded-2xl",children:e.jsx(Ye,{className:"w-8 h-8 text-purple-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"الأدوار في النظام"}),e.jsxs("button",{onClick:C,className:"bg-blue-600 text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx(Lt,{className:"w-4 h-4 ml-2"}),"إضافة دور جديد"]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:w.map(D=>{const me=je(D.id);return e.jsxs("div",{className:"border border-gray-200 rounded-xl p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(Zn,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:D.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[D.userCount," مستخدم"]})]})]}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsx("button",{onClick:()=>R(D),className:"text-gray-400 hover:text-gray-600 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(Jt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>z(D.id),className:"text-red-400 hover:text-red-600 p-2 rounded-lg hover:bg-red-100 transition-colors",children:e.jsx(nr,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:D.description}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["الصلاحيات (",me.length,")"]}),e.jsxs("div",{className:"space-y-1",children:[me.slice(0,3).map(oe=>e.jsxs("div",{className:"flex items-center text-xs text-gray-600",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full ml-2"}),oe.name]},oe.id)),me.length>3&&e.jsxs("div",{className:"text-xs text-blue-600 font-medium",children:["+ ",me.length-3," صلاحية أخرى"]})]})]})]},D.id)})})]})]}),t==="roles"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"إدارة الأدوار"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"إنشاء وتعديل أدوار المستخدمين"})]}),e.jsx("div",{className:"flex space-x-3 space-x-reverse",children:e.jsxs("button",{onClick:C,className:"bg-blue-600 text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx(Lt,{className:"w-4 h-4 ml-2"}),"إضافة دور جديد"]})})]}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Tt,{className:"w-5 h-5 absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"البحث في الأدوار...",value:r,onChange:D=>i(D.target.value),className:"w-full pr-12 pl-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("button",{className:"flex items-center space-x-2 space-x-reverse px-4 py-3 border border-gray-300 rounded-xl hover:bg-gray-50 transition-colors",children:[e.jsx(Ln,{className:"w-4 h-4 ml-2"}),e.jsx("span",{children:"فلترة"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ie.map((D,me)=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100 hover:shadow-xl transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(Zn,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:D.name}),e.jsxs("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${_(D.name)}`,children:[D.userCount," مستخدم"]})]})]}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsx("button",{onClick:()=>R(D),className:"text-blue-600 hover:text-blue-900 p-2 rounded-lg hover:bg-blue-50 transition-colors",children:e.jsx(Jt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>z(D.id),className:"text-red-600 hover:text-red-900 p-2 rounded-lg hover:bg-red-50 transition-colors",children:e.jsx(nr,{className:"w-4 h-4"})})]})]}),D.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:D.description}),e.jsxs("div",{children:[e.jsxs("h5",{className:"text-sm font-medium text-gray-900 mb-2",children:["الصلاحيات (",D.permissions.length,")"]}),e.jsxs("div",{className:"space-y-1",children:[D.permissions.slice(0,3).map(oe=>{const B=k.find(ce=>ce.id===oe);return B?e.jsxs("div",{className:"text-xs text-gray-600 flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full ml-2"}),B.name]},oe):null}),D.permissions.length>3&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+ ",D.permissions.length-3," صلاحية أخرى"]})]})]})]},D.id))})]}),t==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"إدارة المستخدمين"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"إدارة مستخدمي النظام وأدوارهم"})]}),e.jsx("div",{className:"flex space-x-3 space-x-reverse",children:e.jsxs("button",{onClick:O,className:"bg-blue-600 text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx(Ms,{className:"w-4 h-4 ml-2"}),"إضافة مستخدم"]})})]}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Tt,{className:"w-5 h-5 absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"البحث في المستخدمين...",value:r,onChange:D=>i(D.target.value),className:"w-full pr-12 pl-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("button",{className:"flex items-center space-x-2 space-x-reverse px-4 py-3 border border-gray-300 rounded-xl hover:bg-gray-50 transition-colors",children:[e.jsx(Ln,{className:"w-4 h-4 ml-2"}),e.jsx("span",{children:"فلترة"})]})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المستخدم"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"البريد الإلكتروني"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الدور"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"آخر دخول"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الحالة"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الإجراءات"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:$.map((D,me)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-xl ml-4",children:e.jsx(Te,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.name}),e.jsx("div",{className:"text-sm text-gray-500",children:D.phone})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${_(Y(D.roleId))}`,children:Y(D.roleId)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(D.lastLogin).toLocaleDateString("ar-SA")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${D.status==="active"?"bg-green-100 text-green-800":D.status==="inactive"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:D.status==="active"?"نشط":D.status==="inactive"?"غير نشط":"معلق"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsx("button",{onClick:()=>p(D),className:"text-purple-600 hover:text-purple-900 p-2 rounded-lg hover:bg-purple-50 transition-colors",title:"تعيين دور",children:e.jsx(Zn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Q(D.id),className:"text-orange-600 hover:text-orange-900 p-2 rounded-lg hover:bg-orange-50 transition-colors",title:D.status==="active"?"إيقاف":"تفعيل",children:D.status==="active"?e.jsx(Qn,{className:"w-4 h-4"}):e.jsx(Fp,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>de(D),className:"text-blue-600 hover:text-blue-900 p-2 rounded-lg hover:bg-blue-50 transition-colors",title:"تعديل الصلاحيات",children:e.jsx(gs,{className:"w-4 h-4"})})]})})]},D.id))})]})})})]}),t==="permissions"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"إدارة الصلاحيات"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"عرض وإدارة صلاحيات النظام"})]})}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:["عام","المستخدمين","المستفيدين","الطلبات","التوزيع","التقارير"].map(D=>{const me=k.filter(ce=>ce.category===D),B={عام:"blue",المستخدمين:"green",المستفيدين:"purple",الطلبات:"orange",التوزيع:"red",التقارير:"indigo"}[D]||"gray";return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[e.jsx("div",{className:`bg-${B}-100 p-2 rounded-lg`,children:e.jsx(Qn,{className:`w-5 h-5 text-${B}-600`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:D}),e.jsxs("p",{className:"text-sm text-gray-600",children:[me.length," صلاحية"]})]})]}),e.jsx("div",{className:"space-y-2",children:me.map(ce=>e.jsx("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:ce.name}),e.jsx("div",{className:"text-xs text-gray-500",children:ce.description})]})},ce.id))})]},D)})})]})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",dir:"rtl",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:u==="add-role"?"إضافة دور جديد":u==="edit-role"?"تعديل الدور":u==="add-user"?"إضافة مستخدم جديد":"تعيين دور"}),e.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:"✕"})]}),(u==="add-role"||u==="edit-role")&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم الدور"}),e.jsx("input",{type:"text",value:P.name,onChange:D=>g({...P,name:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل اسم الدور"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"وصف الدور"}),e.jsx("textarea",{value:P.description,onChange:D=>g({...P,description:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"أدخل وصف الدور"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الصلاحيات"}),e.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto border border-gray-200 rounded-lg p-4",children:Object.entries(se).map(([D,me])=>e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:D}),e.jsx("div",{className:"space-y-2 pr-4",children:me.map(oe=>e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"checkbox",id:oe.id,checked:P.permissions.includes(oe.id),onChange:B=>{B.target.checked?g({...P,permissions:[...P.permissions,oe.id]}):g({...P,permissions:P.permissions.filter(ce=>ce!==oe.id)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:oe.id,className:"text-sm text-gray-700",children:oe.name})]},oe.id))})]},D))})]}),e.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse pt-4",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-6 py-2 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-colors",children:"إلغاء"}),e.jsx("button",{onClick:I,className:"px-6 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors",children:u==="add-role"?"إضافة الدور":"حفظ التغييرات"})]})]}),u==="assign-role"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المستخدم"}),e.jsxs("select",{value:M.userId,onChange:D=>v({...M,userId:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"اختر المستخدم"}),S.map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الدور"}),e.jsxs("select",{value:M.roleId,onChange:D=>v({...M,roleId:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"اختر الدور"}),w.map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse pt-4",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-6 py-2 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-colors",children:"إلغاء"}),e.jsx("button",{onClick:W,className:"px-6 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors",children:"تعيين الدور"})]})]}),u==="add-user"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("div",{className:"bg-gray-100 rounded-xl p-8 mb-4",children:[e.jsx(Ms,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"نموذج إضافة مستخدم جديد"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"سيتم تطوير النموذج التفاعلي هنا"})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-center",children:[e.jsx("button",{onClick:()=>c(!1),className:"px-6 py-2 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition-colors",children:"إلغاء"}),e.jsx("button",{className:"px-6 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors",children:"إضافة المستخدم"})]})]})]})})]})}function H({children:t,onClick:s,variant:r="primary",size:i="md",icon:o,iconPosition:c="right",disabled:u=!1,loading:h=!1,className:x="",type:j="button"}){const w="inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",T={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-100 text-gray-700 hover:bg-gray-200 focus:ring-gray-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",warning:"bg-orange-600 text-white hover:bg-orange-700 focus:ring-orange-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"text-gray-600 hover:bg-gray-100 focus:ring-gray-500"},S={sm:"px-3 py-2 text-sm",md:"px-4 py-3 text-sm",lg:"px-6 py-4 text-base"},N=u||h?"opacity-50 cursor-not-allowed":"hover:transform hover:scale-105",P=`${w} ${T[r]} ${S[i]} ${N} ${x}`;return e.jsxs("button",{type:j,onClick:s,disabled:u||h,className:P,children:[h&&e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current ml-2"}),o&&c==="right"&&!h&&e.jsx(o,{className:"w-4 h-4 ml-2"}),t,o&&c==="left"&&!h&&e.jsx(o,{className:"w-4 h-4 mr-2"})]})}function V({children:t,className:s="",padding:r="md",hover:i=!1,onClick:o}){const c="bg-white border border-gray-200 rounded-xl transition-colors",u={none:"",sm:"p-4",md:"p-6",lg:"p-8"},h=i?"hover:border-gray-300 cursor-pointer":"",x=o?"cursor-pointer":"",j=`${c} ${u[r]} ${h} ${x} ${s}`;return e.jsx("div",{className:j,onClick:o,children:t})}function be({type:t="text",placeholder:s,value:r,onChange:i,icon:o,iconPosition:c="right",error:u,disabled:h=!1,required:x=!1,className:j="",rows:w=3,label:T}){const v=`w-full border rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent px-4 py-3 ${u?"border-red-300 bg-red-50 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"} ${h?"bg-gray-50 cursor-not-allowed opacity-60":""} ${o?c==="right"?"pr-12":"pl-12":""} ${j}`;return e.jsxs("div",{className:"w-full",children:[T&&e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[T,x&&e.jsx("span",{className:"text-red-500 mr-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[t==="textarea"?e.jsx("textarea",{value:r,onChange:i,placeholder:s,disabled:h,required:x,rows:w,className:v}):e.jsx("input",{type:t,value:r,onChange:i,placeholder:s,disabled:h,required:x,className:v}),o&&e.jsx("div",{className:`absolute top-1/2 transform -translate-y-1/2 ${c==="right"?"right-4":"left-4"}`,children:e.jsx(o,{className:"w-4 h-4 text-gray-400"})})]}),u&&e.jsxs("p",{className:"text-red-600 text-sm mt-1 flex items-center",children:[e.jsx("span",{className:"w-4 h-4 mr-1",children:"⚠️"}),u]})]})}function Ne({children:t,variant:s="neutral",size:r="md",className:i=""}){const o="inline-flex items-center rounded-full font-medium",c={success:"bg-green-100 text-green-800",warning:"bg-orange-100 text-orange-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800",neutral:"bg-gray-100 text-gray-800"},u={sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm"},h=`${o} ${c[s]} ${u[r]} ${i}`;return e.jsx("span",{className:h,children:t})}function ls({isOpen:t,onClose:s,title:r,children:i,size:o="md",className:c=""}){if(!t)return null;const u={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"},h=x=>{x.target===x.currentTarget&&s()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",dir:"rtl",onClick:h,children:e.jsxs("div",{className:`bg-white rounded-2xl w-full ${u[o]} max-h-[95vh] flex flex-col ${c}`,children:[r&&e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(Ct,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:i})]})})}function vs({title:t,value:s,icon:r,trend:i,color:o="blue",className:c=""}){const u={blue:"bg-blue-50 text-blue-600",green:"bg-green-50 text-green-600",orange:"bg-orange-50 text-orange-600",purple:"bg-purple-50 text-purple-600",red:"bg-red-50 text-red-600"},h={up:"text-green-600",down:"text-red-600"};return e.jsx("div",{className:`bg-white p-6 rounded-xl border border-gray-200 hover:border-gray-300 transition-colors ${c}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:t}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s}),i&&e.jsxs("p",{className:`text-sm mt-1 flex items-center ${h[i.direction]}`,children:[i.direction==="up"?e.jsx(ss,{className:"w-4 h-4 ml-1"}):e.jsx(ky,{className:"w-4 h-4 ml-1"}),i.value," ",i.label]})]}),e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${u[o]}`,children:e.jsx(r,{className:"w-6 h-6"})})]})})}function p0({isOpen:t,onClose:s,onConfirm:r,title:i,message:o,confirmButtonText:c="تأكيد",cancelButtonText:u="إلغاء",type:h="warning",confirmButtonVariant:x="primary"}){if(!t)return null;const j=()=>{switch(h){case"danger":return e.jsx(ge,{className:"w-12 h-12 text-red-600"});case"success":return e.jsx(ne,{className:"w-12 h-12 text-green-600"});case"warning":return e.jsx(ge,{className:"w-12 h-12 text-orange-600"});default:return e.jsx(ge,{className:"w-12 h-12 text-blue-600"})}},w=()=>{switch(h){case"danger":return"bg-red-50";case"success":return"bg-green-50";case"warning":return"bg-orange-50";default:return"bg-blue-50"}},T=S=>{S.target===S.currentTarget&&s()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",dir:"rtl",onClick:T,children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:i}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(Ct,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:`${w()} p-6 rounded-xl mb-6`,children:e.jsxs("div",{className:"text-center",children:[j(),e.jsx("p",{className:"text-gray-700 mt-4 leading-relaxed",children:o})]})}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[e.jsx(H,{variant:"secondary",onClick:s,className:"flex-1",children:u}),e.jsx(H,{variant:x,onClick:()=>{r(),s()},className:"flex-1",children:c})]})]})]})})}const dj=(t={})=>{const[s,r]=E.useState([]),[i,o]=E.useState(!1),[c,u]=E.useState(null),{logInfo:h,logError:x}=Bt();E.useEffect(()=>{(async()=>{try{o(!0),u(null),await new Promise(v=>setTimeout(v,300));let M=[...Se];t.organizationId&&(M=M.filter(v=>v.organizationId===t.organizationId)),t.familyId&&(M=M.filter(v=>v.familyId===t.familyId)),r(M),h(`تم تحميل ${M.length} مستفيد`,"useBeneficiaries")}catch(M){const v=M instanceof Error?M.message:"خطأ في تحميل المستفيدين";u(v),x(new Error(v),"useBeneficiaries")}finally{o(!1)}})()},[t.organizationId,t.familyId,h,x]);const j=E.useMemo(()=>{let g=[...s];if(t.searchTerm){const M=t.searchTerm.toLowerCase();g=g.filter(v=>v.name.toLowerCase().includes(M)||v.nationalId.includes(t.searchTerm)||v.phone.includes(t.searchTerm))}if(t.statusFilter&&t.statusFilter!=="all"&&(g=g.filter(M=>M.status===t.statusFilter)),t.identityStatusFilter&&t.identityStatusFilter!=="all"&&(g=g.filter(M=>M.identityStatus===t.identityStatusFilter)),t.advancedFilters){const M=t.advancedFilters;if(M.governorate&&(g=g.filter(v=>v.detailedAddress.governorate===M.governorate)),M.city&&(g=g.filter(v=>v.detailedAddress.city===M.city)),M.district&&(g=g.filter(v=>v.detailedAddress.district===M.district)),M.familyStatus)switch(M.familyStatus){case"head_of_family":g=g.filter(v=>v.isHeadOfFamily);break;case"spouse":g=g.filter(v=>v.spouseId&&!v.isHeadOfFamily);break;case"child":g=g.filter(v=>v.parentId);break;case"orphan_guardian":g=g.filter(v=>v.childrenIds&&v.childrenIds.length>0&&v.maritalStatus==="widowed");break;case"family_with_orphans":g=g.filter(v=>v.childrenIds&&v.childrenIds.length>0);break;case"elderly":g=g.filter(v=>new Date().getFullYear()-new Date(v.dateOfBirth).getFullYear()>=60);break;case"disabled":g=g.filter(v=>v.medicalConditions&&v.medicalConditions.length>0);break}if(M.familySize)switch(M.familySize){case"small":g=g.filter(v=>v.membersCount>=1&&v.membersCount<=3);break;case"medium":g=g.filter(v=>v.membersCount>=4&&v.membersCount<=7);break;case"large":g=g.filter(v=>v.membersCount>=8);break}if(M.ageGroup&&(g=g.filter(v=>{const y=new Date().getFullYear()-new Date(v.dateOfBirth).getFullYear();switch(M.ageGroup){case"child":return y<18;case"adult":return y>=18&&y<60;case"elderly":return y>=60;default:return!0}})),M.economicLevel&&(g=g.filter(v=>v.economicLevel===M.economicLevel)),M.profession&&(g=g.filter(v=>v.profession.toLowerCase().includes(M.profession.toLowerCase()))),M.healthStatus)switch(M.healthStatus){case"has_medical":g=g.filter(v=>v.medicalConditions&&v.medicalConditions.length>0);break;case"healthy":g=g.filter(v=>!v.medicalConditions||v.medicalConditions.length===0);break;default:M.healthStatus&&(g=g.filter(v=>v.medicalConditions&&v.medicalConditions.some(y=>y.toLowerCase().includes(M.healthStatus.toLowerCase()))))}M.medicalCondition&&(g=g.filter(v=>v.medicalConditions&&v.medicalConditions.some(y=>y.toLowerCase().includes(M.medicalCondition.toLowerCase()))))}return g},[s,t.searchTerm,t.statusFilter,t.identityStatusFilter,t.advancedFilters]),w=E.useMemo(()=>({total:s.length,verified:s.filter(g=>g.identityStatus==="verified").length,pending:s.filter(g=>g.identityStatus==="pending").length,rejected:s.filter(g=>g.identityStatus==="rejected").length,active:s.filter(g=>g.status==="active").length,suspended:s.filter(g=>g.status==="suspended").length}),[s]);return{beneficiaries:j,allBeneficiaries:s,loading:i,error:c,statistics:w,addBeneficiary:async g=>{try{o(!0);const M={id:`new-${Date.now()}`,name:g.name||"",fullName:g.fullName||"",nationalId:g.nationalId||"",dateOfBirth:g.dateOfBirth||"",gender:g.gender||"male",phone:g.phone||"",address:g.address||"",detailedAddress:g.detailedAddress||{governorate:"",city:"",district:"",street:"",additionalInfo:""},location:g.location||{lat:31.3469,lng:34.3029},organizationId:g.organizationId,familyId:g.familyId,relationToFamily:g.relationToFamily,profession:g.profession||"",maritalStatus:g.maritalStatus||"single",economicLevel:g.economicLevel||"poor",membersCount:g.membersCount||1,additionalDocuments:g.additionalDocuments||[],identityStatus:"pending",identityImageUrl:g.identityImageUrl,status:"active",eligibilityStatus:"under_review",lastReceived:new Date().toISOString().split("T")[0],totalPackages:0,notes:g.notes||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"admin",updatedBy:"admin"};return r(v=>[M,...v]),h(`تم إضافة مستفيد جديد: ${M.name}`,"useBeneficiaries"),M}catch(M){const v=M instanceof Error?M.message:"خطأ في إضافة المستفيد";throw u(v),x(new Error(v),"useBeneficiaries"),M}finally{o(!1)}},updateBeneficiary:async(g,M)=>{try{o(!0),r(v=>v.map(y=>y.id===g?{...y,...M,updatedAt:new Date().toISOString()}:y)),h(`تم تحديث المستفيد: ${g}`,"useBeneficiaries")}catch(v){const y=v instanceof Error?v.message:"خطأ في تحديث المستفيد";throw u(y),x(new Error(y),"useBeneficiaries"),v}finally{o(!1)}},deleteBeneficiary:async g=>{try{o(!0),r(M=>M.filter(v=>v.id!==g)),h(`تم حذف المستفيد: ${g}`,"useBeneficiaries")}catch(M){const v=M instanceof Error?M.message:"خطأ في حذف المستفيد";throw u(v),x(new Error(v),"useBeneficiaries"),M}finally{o(!1)}},refetch:()=>{r([...Se])}}};function su({beneficiary:t,onClose:s,onNavigateToIndividualSend:r,onEditBeneficiary:i,onApproveIdentity:o,onRequestReupload:c,onSuspendBeneficiary:u}){const{logInfo:h}=Bt(),[x,j]=E.useState(!1),[w,T]=E.useState(!1),[S,N]=E.useState(!1),[P,g]=E.useState(null),M=is.filter(p=>p.beneficiaryId===t.id),v=at.filter(p=>p.beneficiaryId===t.id),y=Xy.filter(p=>p.beneficiaryId===t.id),k=p=>{switch(p){case"view-documents":T(!0),h(`عرض المستندات للمستفيد: ${t.name}`,"BeneficiaryProfileModal");break;case"approve-identity":o&&o(t.id,t.name);break;case"request-reupload":c&&c(t.id,t.name);break;case"track-courier":h(`تتبع المندوب للمستفيد: ${t.name}`,"BeneficiaryProfileModal"),alert("سيتم فتح شاشة تتبع المندوب المسؤول عن هذا المستفيد");break;case"export-activity":h(`تصدير نشاط المستفيد: ${t.name}`,"BeneficiaryProfileModal");const I={beneficiary:t.name,nationalId:t.nationalId,activities:y,packages:M,tasks:v,exportDate:new Date().toISOString()},W=JSON.stringify(I,null,2),z=new Blob([W],{type:"application/json"}),Q=URL.createObjectURL(z),de=document.createElement("a");de.href=Q,de.download=`نشاط_${t.name}_${new Date().toISOString().split("T")[0]}.json`,de.click(),URL.revokeObjectURL(Q);break;case"suspend":confirm(`هل أنت متأكد من تعليق حساب ${t.name}؟`)&&(h(`تعليق حساب المستفيد: ${t.name}`,"BeneficiaryProfileModal"),alert("تم تعليق الحساب بنجاح"));break;default:h(`إجراء غير معروف: ${p}`,"BeneficiaryProfileModal")}},C=p=>{const I=M.find(W=>W.id===p);I&&(g(I),N(!0))},R=p=>{switch(p){case"single":return"أعزب";case"married":return"متزوج";case"divorced":return"مطلق";case"widowed":return"أرمل";default:return"غير محدد"}},O=p=>{switch(p){case"very_poor":return"فقير جداً";case"poor":return"فقير";case"moderate":return"متوسط";case"good":return"ميسور";default:return"غير محدد"}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",dir:"rtl",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-6xl max-h-[95vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(Gr,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.name}),e.jsx("p",{className:"text-gray-600",children:"ملف المستفيد الكامل"})]})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(Ct,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs(V,{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl mb-3",children:e.jsx(Ye,{className:"w-6 h-6 text-blue-600 mx-auto"})}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"حالة التوثيق"}),e.jsx(Ne,{variant:t.identityStatus==="verified"?"success":t.identityStatus==="pending"?"warning":"error",children:t.identityStatus==="verified"?"موثق":t.identityStatus==="pending"?"بانتظار التوثيق":"يحتاج إعادة رفع"})]}),e.jsxs(V,{className:"text-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-xl mb-3",children:e.jsx(ne,{className:"w-6 h-6 text-green-600 mx-auto"})}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"حالة الأهلية"}),e.jsx(Ne,{variant:t.eligibilityStatus==="eligible"?"success":t.eligibilityStatus==="under_review"?"warning":"error",children:t.eligibilityStatus==="eligible"?"مؤهل":t.eligibilityStatus==="under_review"?"تحت المراجعة":"غير مؤهل"})]}),e.jsxs(V,{className:"text-center",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-xl mb-3",children:e.jsx(Qe,{className:"w-6 h-6 text-purple-600 mx-auto"})}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"حالة الحساب"}),e.jsx(Ne,{variant:t.status==="active"?"success":t.status==="pending"?"warning":"error",children:t.status==="active"?"نشط":t.status==="pending"?"معلق":"موقوف"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(Gr,{className:"w-5 h-5 ml-2 text-blue-600"}),"المعلومات الشخصية"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"الاسم الكامل:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:t.fullName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"رقم الهوية:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:t.nationalId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"تاريخ الميلاد:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:new Date(t.dateOfBirth).toLocaleDateString("en-CA")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"الجنس:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:t.gender==="male"?"ذكر":"أنثى"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"رقم الهاتف:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:t.phone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"المهنة:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:t.profession})]})]})]}),e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(At,{className:"w-5 h-5 ml-2 text-green-600"}),"معلومات العنوان"]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"العنوان المختصر:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:t.address})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"المحافظة:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:t.detailedAddress.governorate})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"المدينة:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:t.detailedAddress.city})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"الحي:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:t.detailedAddress.district})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"الشارع:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:t.detailedAddress.street||"غير محدد"})]})]}),t.detailedAddress.additionalInfo&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"معلومات إضافية:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:t.detailedAddress.additionalInfo})]})]})]}),e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(yt,{className:"w-5 h-5 ml-2 text-purple-600"}),"المعلومات الاجتماعية والاقتصادية"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"الحالة الاجتماعية:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:R(t.maritalStatus)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"المستوى الاقتصادي:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:O(t.economicLevel)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"عدد أفراد الأسرة:"}),e.jsxs("p",{className:"font-medium text-gray-900 mt-1",children:[t.membersCount," فرد"]})]}),t.relationToFamily&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"صلة القرابة:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:t.relationToFamily})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[t.isHeadOfFamily&&e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(yt,{className:"w-5 h-5 ml-2 text-purple-600"}),"أفراد الأسرة"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Zn,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-blue-800",children:"رب الأسرة"}),e.jsx("p",{className:"text-sm text-blue-700",children:t.name}),e.jsxs("p",{className:"text-xs text-blue-600",children:["رقم الهوية: ",t.nationalId]})]}),e.jsx(Ne,{variant:"info",size:"sm",children:"أنا"})]}),t.medicalConditions.length>0&&e.jsxs("div",{className:"mt-3 bg-white p-2 rounded-lg",children:[e.jsx("p",{className:"text-xs text-blue-700 font-medium mb-1",children:"الحالات المرضية:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.medicalConditions.map((p,I)=>e.jsx(Ne,{variant:"warning",size:"sm",children:p},I))})]})]}),(()=>{const p=wa.find(I=>I.id===t.spouseId);return p?e.jsxs("div",{className:"bg-pink-50 p-4 rounded-xl border border-pink-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"w-8 h-8 bg-pink-100 rounded-lg flex items-center justify-center",children:e.jsx(yt,{className:"w-4 h-4 text-pink-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-pink-800",children:p.gender==="female"?"الزوجة":"الزوج"}),e.jsx("p",{className:"text-sm text-pink-700",children:p.name}),e.jsxs("p",{className:"text-xs text-pink-600",children:["رقم الهوية: ",p.nationalId]}),e.jsxs("p",{className:"text-xs text-pink-600",children:["الهاتف: ",p.phone]})]}),e.jsx(H,{variant:"secondary",size:"sm",icon:vt,onClick:()=>{alert(`عرض ملف ${p.name}`)},children:"عرض الملف"})]}),p.medicalConditions.length>0&&e.jsxs("div",{className:"mt-3 bg-white p-2 rounded-lg",children:[e.jsx("p",{className:"text-xs text-pink-700 font-medium mb-1",children:"الحالات المرضية:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:p.medicalConditions.map((I,W)=>e.jsx(Ne,{variant:"warning",size:"sm",children:I},W))})]})]}):e.jsx("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(yt,{className:"w-4 h-4 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-600",children:"لا توجد زوجة مسجلة"}),e.jsx("p",{className:"text-xs text-gray-500",children:"يمكن إضافة الزوجة لاحقاً"})]})]})})})(),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(Te,{className:"w-5 h-5 text-green-600"}),e.jsx("p",{className:"font-semibold text-green-800",children:"الأبناء غير المتزوجين"})]}),e.jsxs(Ne,{variant:"success",size:"sm",children:[t.childrenIds.length," ابن/ابنة"]})]}),t.childrenIds.length>0?e.jsx("div",{className:"space-y-3",children:t.childrenIds.map(p=>{const I=wa.find(z=>z.id===p);if(!I)return null;const W=new Date().getFullYear()-new Date(I.dateOfBirth).getFullYear();return e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(Te,{className:"w-3 h-3 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:I.name}),e.jsxs("p",{className:"text-xs text-gray-600",children:[I.gender==="male"?"ابن":"ابنة"," • ",W," سنة • ",I.profession]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["رقم الهوية: ",I.nationalId]})]})]}),e.jsx("div",{className:"flex space-x-2 space-x-reverse",children:e.jsx(H,{variant:"secondary",size:"sm",icon:vt,onClick:()=>{alert(`عرض ملف ${I.name}`)},children:"عرض"})})]}),I.medicalConditions.length>0&&e.jsxs("div",{className:"mt-2 bg-yellow-50 p-2 rounded-lg border border-yellow-200",children:[e.jsx("p",{className:"text-xs text-yellow-700 font-medium mb-1",children:"حالات مرضية:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:I.medicalConditions.map((z,Q)=>e.jsx(Ne,{variant:"warning",size:"sm",children:z},Q))})]})]},p)})}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(Te,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm text-gray-600",children:"لا يوجد أبناء مسجلين"}),e.jsx("p",{className:"text-xs text-gray-500",children:"يمكن إضافة الأبناء غير المتزوجين"})]})]}),(()=>{const p=wa.find(z=>z.id===t.spouseId),I=t.childrenIds.map(z=>wa.find(Q=>Q.id===z)).filter(Boolean),W=[...t.medicalConditions.map(z=>({member:t.name,condition:z})),...(p==null?void 0:p.medicalConditions.map(z=>({member:p.name,condition:z})))||[],...I.flatMap(z=>z.medicalConditions.map(Q=>({member:z.name,condition:Q})))];return W.length>0?e.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-3",children:[e.jsx(ge,{className:"w-5 h-5 text-red-600"}),e.jsx("p",{className:"font-semibold text-red-800",children:"ملخص الحالات المرضية في الأسرة"})]}),e.jsx("div",{className:"space-y-2",children:W.map((z,Q)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-red-700",children:[z.member,":"]}),e.jsx(Ne,{variant:"error",size:"sm",children:z.condition})]},Q))})]}):null})()]})]}),!t.isHeadOfFamily&&t.parentId&&e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(yt,{className:"w-5 h-5 ml-2 text-purple-600"}),"معلومات الأسرة"]}),(()=>{const p=wa.find(I=>I.id===t.parentId);return p?e.jsx("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-200",children:e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(Zn,{className:"w-4 h-4 text-purple-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-purple-800",children:"رب الأسرة"}),e.jsx("p",{className:"text-sm text-purple-700",children:p.name}),e.jsxs("p",{className:"text-xs text-purple-600",children:["رقم الهوية: ",p.nationalId]}),e.jsxs("p",{className:"text-xs text-purple-600",children:["الهاتف: ",p.phone]})]}),e.jsx(H,{variant:"secondary",size:"sm",icon:vt,onClick:()=>{alert(`عرض ملف رب الأسرة: ${p.name}`)},children:"عرض ملف الأب"})]})}):e.jsx("div",{className:"text-center py-4 text-gray-500",children:e.jsx("p",{className:"text-sm",children:"لا يمكن العثور على بيانات رب الأسرة"})})})()]}),e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(Es,{className:"w-5 h-5 ml-2 text-green-600"})," ","الهوية والوثائق"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"حالة توثيق الهوية:"}),e.jsx(Ne,{variant:t.identityStatus==="verified"?"success":t.identityStatus==="pending"?"warning":"error",children:t.identityStatus==="verified"?"موثق":t.identityStatus==="pending"?"بانتظار التوثيق":"يحتاج إعادة رفع"})]}),t.identityImageUrl?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(rl,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-700 font-medium",children:"تم رفع صورة الهوية"})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:[e.jsx("img",{src:t.identityImageUrl,alt:"صورة الهوية",className:"w-full h-32 object-cover rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>j(!0)}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse mt-3",children:[e.jsx(H,{variant:"primary",size:"sm",icon:vt,iconPosition:"right",onClick:()=>j(!0),className:"flex-1",children:"عرض الملف كامل"}),e.jsx(H,{variant:"secondary",size:"sm",icon:st,iconPosition:"right",onClick:()=>{const p=document.createElement("a");p.href=t.identityImageUrl,p.download=`هوية_${t.name}.jpg`,p.click()},children:"تحميل"})]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-red-600",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"لم يتم رفع صورة الهوية"})]})]}),t.additionalDocuments&&t.additionalDocuments.length>0&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-blue-700 font-medium text-sm",children:"المستندات الإضافية:"}),e.jsx(H,{variant:"secondary",size:"sm",icon:vt,iconPosition:"right",onClick:()=>k("view-documents"),children:"عرض المستندات"})]}),e.jsxs("div",{className:"space-y-2",children:[t.additionalDocuments.slice(0,3).map((p,I)=>e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-sm",children:[e.jsx(Ut,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-blue-700",children:p.name})]},I)),t.additionalDocuments.length>3&&e.jsxs("p",{className:"text-xs text-blue-600",children:["+ ",t.additionalDocuments.length-3," مستند آخر"]})]})]})]})]}),e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ee,{className:"w-5 h-5 ml-2 text-green-600"}),"سجل الطرود (",t.totalPackages,")"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-lg font-bold text-green-600",children:M.filter(p=>p.status==="delivered").length}),e.jsx("p",{className:"text-xs text-green-700",children:"تم التسليم"})]}),e.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-lg font-bold text-orange-600",children:M.filter(p=>p.status==="in_delivery").length}),e.jsx("p",{className:"text-xs text-orange-700",children:"قيد التوصيل"})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-lg font-bold text-blue-600",children:M.filter(p=>p.status==="pending").length}),e.jsx("p",{className:"text-xs text-blue-700",children:"في الانتظار"})]})]}),M.length>0?e.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[M.slice(0,5).map(p=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:p.type}),e.jsx("p",{className:"text-xs text-gray-600",children:new Date(p.createdAt).toLocaleDateString("en-CA")})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(Ne,{variant:p.status==="delivered"?"success":p.status==="in_delivery"?"warning":"info",size:"sm",children:p.status==="delivered"?"تم التسليم":p.status==="in_delivery"?"قيد التوصيل":"في الانتظار"}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>C(p.id),children:e.jsx(vt,{className:"w-3 h-3"})})]})]},p.id)),M.length>5&&e.jsxs("p",{className:"text-center text-xs text-gray-500 py-2",children:["+ ",M.length-5," طرد آخر"]})]}):e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(Ee,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"لا توجد طرود مسجلة"})]})]})]}),e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(Qe,{className:"w-5 h-5 ml-2 text-purple-600"}),"معلومات النظام"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"تاريخ التسجيل:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:new Date(t.createdAt).toLocaleDateString("en-CA")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"آخر تحديث:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:new Date(t.updatedAt).toLocaleDateString("en-CA")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"آخر استلام:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:new Date(t.lastReceived).toLocaleDateString("en-CA")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"تم الإنشاء بواسطة:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:t.createdBy})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx($e,{className:"w-5 h-5 ml-2 text-blue-600"}),"آخر الأنشطة"]}),y.length>0?e.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto",children:y.slice(0,5).map(p=>e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mt-0.5",children:e.jsx(Qe,{className:"w-3 h-3 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:p.action}),e.jsxs("p",{className:"text-xs text-gray-600",children:["بواسطة: ",p.user]}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(p.timestamp).toLocaleDateString("en-CA")})]})]},p.id))}):e.jsxs("div",{className:"text-center py-6 text-gray-500",children:[e.jsx(Qe,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"لا توجد أنشطة مسجلة"})]})]}),t.notes&&e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(Ut,{className:"w-5 h-5 ml-2 text-yellow-600"}),"الملاحظات"]}),e.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:t.notes})})]}),e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(Es,{className:"w-5 h-5 ml-2 text-green-500 fill-green-500"}),"إجراءات سريعة"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.identityStatus==="pending"&&o&&e.jsx(H,{variant:"success",size:"sm",icon:ne,iconPosition:"right",onClick:()=>k("approve-identity"),className:"w-full",children:"توثيق الهوية"}),(t.identityStatus==="pending"||t.identityStatus==="rejected")&&c&&e.jsx(H,{variant:"warning",size:"sm",icon:rl,iconPosition:"right",onClick:()=>k("request-reupload"),className:"w-full",children:"طلب إعادة رفع"}),i&&e.jsx(H,{variant:"secondary",size:"sm",icon:Jt,iconPosition:"right",onClick:()=>i(t),className:"w-full",children:"تعديل البيانات"}),r&&e.jsx(H,{variant:"primary",size:"sm",icon:Ee,iconPosition:"right",onClick:()=>r(t.id),className:"w-full",children:"إرسال طرد"}),e.jsx(H,{variant:"secondary",size:"sm",icon:St,iconPosition:"right",onClick:()=>k("track-courier"),className:"w-full",children:"تتبع المندوب"}),e.jsx(H,{variant:"secondary",size:"sm",icon:st,iconPosition:"right",onClick:()=>k("export-activity"),className:"w-full",children:"تصدير النشاط"})]})]})]})]}),t.notes&&e.jsxs(V,{className:"bg-yellow-50 border-yellow-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-3 flex items-center",children:[e.jsx(Ut,{className:"w-5 h-5 ml-2 text-yellow-600"}),"ملاحظات خاصة"]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:t.notes})]})]})]})}),x&&t.identityImageUrl&&e.jsx(ls,{isOpen:x,onClose:()=>j(!1),title:"عرض صورة الهوية كاملة",size:"lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["صورة هوية ",t.name]}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsx(H,{variant:"secondary",size:"sm",icon:st,iconPosition:"right",onClick:()=>{const p=document.createElement("a");p.href=t.identityImageUrl,p.download=`هوية_${t.name}_${t.nationalId}.jpg`,p.click()},children:"تحميل الصورة"}),e.jsx(H,{variant:"warning",size:"sm",onClick:()=>{setConfirmAction({type:"suspend",beneficiaryId:t.id,beneficiaryName:t.name}),setShowConfirmModal(!0)},children:"تعليق الحساب"})]})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsx("img",{src:t.identityImageUrl,alt:`صورة هوية ${t.name}`,className:"w-full max-h-96 object-contain rounded-lg"})}),e.jsx("div",{className:"mt-4 text-sm text-gray-600",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"اسم المستفيد:"}),e.jsx("p",{className:"text-gray-900",children:t.fullName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"رقم الهوية:"}),e.jsx("p",{className:"text-gray-900",children:t.nationalId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"حالة التوثيق:"}),e.jsx(Ne,{variant:t.identityStatus==="verified"?"success":t.identityStatus==="pending"?"warning":"error",size:"sm",className:"mt-1",children:t.identityStatus==="verified"?"موثق":t.identityStatus==="pending"?"بانتظار التوثيق":"يحتاج إعادة رفع"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"تاريخ الرفع:"}),e.jsx("p",{className:"text-gray-900",children:new Date(t.updatedAt).toLocaleDateString("en-CA")})]})]})})]}),t.identityStatus==="pending"&&e.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[o&&e.jsx(H,{variant:"success",icon:ne,iconPosition:"right",onClick:()=>{k("approve-identity"),j(!1)},className:"flex-1",children:"توثيق الهوية"}),c&&e.jsx(H,{variant:"warning",icon:rl,iconPosition:"right",onClick:()=>{k("request-reupload"),j(!1)},className:"flex-1",children:"طلب إعادة رفع"})]})]})})]})}function uj({beneficiary:t,onSave:s,onCancel:r}){const{logError:i,logInfo:o}=Bt(),[c,u]=E.useState({name:"",fullName:"",nationalId:"",dateOfBirth:"",gender:"male",phone:"",address:"",detailedAddress:{governorate:"",city:"",district:"",street:"",additionalInfo:""},profession:"",maritalStatus:"single",economicLevel:"poor",membersCount:1,notes:""}),[h,x]=E.useState({}),[j,w]=E.useState(!1),[T,S]=E.useState(null),N=!!t;E.useEffect(()=>{var p,I,W,z,Q;t&&u({name:t.name||"",fullName:t.fullName||"",nationalId:t.nationalId||"",dateOfBirth:t.dateOfBirth||"",gender:t.gender||"male",phone:t.phone||"",address:t.address||"",detailedAddress:{governorate:((p=t.detailedAddress)==null?void 0:p.governorate)||"",city:((I=t.detailedAddress)==null?void 0:I.city)||"",district:((W=t.detailedAddress)==null?void 0:W.district)||"",street:((z=t.detailedAddress)==null?void 0:z.street)||"",additionalInfo:((Q=t.detailedAddress)==null?void 0:Q.additionalInfo)||""},profession:t.profession||"",maritalStatus:t.maritalStatus||"single",economicLevel:t.economicLevel||"poor",membersCount:t.membersCount||1,notes:t.notes||""})},[t]);const P=["غزة","خان يونس","الوسطى","شمال غزة","رفح"],g=[{value:"single",label:"أعزب"},{value:"married",label:"متزوج"},{value:"divorced",label:"مطلق"},{value:"widowed",label:"أرمل"}],M=[{value:"very_poor",label:"فقير جداً"},{value:"poor",label:"فقير"},{value:"moderate",label:"متوسط"},{value:"good",label:"ميسور"}],v=(p,I)=>{u(W=>({...W,[p]:I})),h[p]&&x(W=>({...W,[p]:""}))},y=(p,I)=>{u(Q=>({...Q,detailedAddress:{...Q.detailedAddress,[p]:I}}));const W={...c.detailedAddress,[p]:I},z=[W.governorate,W.city,W.district].filter(Boolean).join(" - ");u(Q=>({...Q,address:z}))},k=()=>{const p={};return c.name.trim()||(p.name="الاسم مطلوب"),c.fullName.trim()||(p.fullName="الاسم الكامل مطلوب"),c.nationalId.trim()?/^\d{9}$/.test(c.nationalId)||(p.nationalId="رقم الهوية يجب أن يكون 9 أرقام"):p.nationalId="رقم الهوية مطلوب",c.dateOfBirth||(p.dateOfBirth="تاريخ الميلاد مطلوب"),c.phone.trim()?/^05\d{8}$/.test(c.phone)||(p.phone="رقم الهاتف يجب أن يبدأ بـ 05 ويتكون من 10 أرقام"):p.phone="رقم الهاتف مطلوب",c.detailedAddress.governorate||(p.governorate="المحافظة مطلوبة"),c.detailedAddress.city.trim()||(p.city="المدينة مطلوبة"),c.detailedAddress.district.trim()||(p.district="الحي مطلوب"),c.profession.trim()||(p.profession="المهنة مطلوبة"),c.membersCount<1&&(p.membersCount="عدد أفراد الأسرة يجب أن يكون 1 على الأقل"),x(p),Object.keys(p).length===0},C=async p=>{if(p.preventDefault(),!k()){i(new Error("فشل في التحقق من صحة البيانات"),"BeneficiaryForm");return}w(!0),S(null);try{const I={name:c.name.trim(),full_name:c.fullName.trim(),national_id:c.nationalId.trim(),date_of_birth:c.dateOfBirth,gender:c.gender,phone:c.phone.trim(),address:c.address.trim(),detailed_address:c.detailedAddress,location:{lat:31.3469,lng:34.3029},profession:c.profession.trim(),marital_status:c.maritalStatus,economic_level:c.economicLevel,members_count:c.membersCount,notes:c.notes.trim(),identity_status:"pending",status:"active",eligibility_status:"under_review",last_received:new Date().toISOString().split("T")[0],total_packages:0,created_by:"admin",updated_by:"admin"};await new Promise(W=>setTimeout(W,1e3)),o(N&&t?`محاكاة تحديث بيانات المستفيد: ${c.name}`:`محاكاة إضافة مستفيد جديد: ${c.name}`,"BeneficiaryForm"),s()}catch(I){const W=I instanceof Error?I.message:"خطأ غير معروف";S(W),i(new Error(W),"BeneficiaryForm")}finally{w(!1)}},R=j,O=T;return e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("form",{onSubmit:C,className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 p-4 rounded-xl w-fit mx-auto mb-4",children:e.jsx(Gr,{className:"w-6 h-6 text-blue-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:N?"تعديل بيانات المستفيد":"إضافة مستفيد جديد"}),e.jsx("p",{className:"text-gray-600 mt-2",children:N?"تحديث معلومات المستفيد في النظام":"إضافة مستفيد جديد إلى قاعدة البيانات"})]}),O&&e.jsxs(V,{className:"bg-red-50 border-red-200",padding:"sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(ge,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-medium text-red-800",children:"خطأ في حفظ البيانات:"})]}),e.jsx("p",{className:"text-red-700 mt-2 text-sm",children:O})]}),e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(Gr,{className:"w-4 h-4 ml-2 text-blue-600"}),"المعلومات الشخصية"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(be,{label:"الاسم الأول *",type:"text",value:c.name,onChange:p=>v("name",p.target.value),placeholder:"مثال: محمد",error:h.name,required:!0}),e.jsx(be,{label:"الاسم الكامل *",type:"text",value:c.fullName,onChange:p=>v("fullName",p.target.value),placeholder:"مثال: محمد أحمد عبدالله الغزاوي",error:h.fullName,required:!0}),e.jsx(be,{label:"رقم الهوية الوطنية *",type:"text",value:c.nationalId,onChange:p=>v("nationalId",p.target.value),placeholder:"مثال: 900123456",error:h.nationalId,required:!0}),e.jsx(be,{label:"تاريخ الميلاد *",type:"date",value:c.dateOfBirth,onChange:p=>v("dateOfBirth",p.target.value),error:h.dateOfBirth,required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الجنس *"}),e.jsxs("select",{value:c.gender,onChange:p=>v("gender",p.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"male",children:"ذكر"}),e.jsx("option",{value:"female",children:"أنثى"})]})]}),e.jsx(be,{label:"رقم الهاتف *",type:"tel",value:c.phone,onChange:p=>v("phone",p.target.value),placeholder:"مثال: 0591234567",error:h.phone,required:!0})]})]}),e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(At,{className:"w-4 h-4 ml-2 text-green-600"}),"معلومات العنوان"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المحافظة *"}),e.jsxs("select",{value:c.detailedAddress.governorate,onChange:p=>y("governorate",p.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"اختر المحافظة"}),P.map(p=>e.jsx("option",{value:p,children:p},p))]}),h.governorate&&e.jsxs("p",{className:"text-red-600 text-sm mt-1 flex items-center",children:[e.jsx(ge,{className:"w-4 h-4 ml-1"}),h.governorate]})]}),e.jsx(be,{label:"المدينة / المخيم *",type:"text",value:c.detailedAddress.city,onChange:p=>y("city",p.target.value),placeholder:"مثال: خان يونس",error:h.city,required:!0}),e.jsx(be,{label:"الحي / المنطقة *",type:"text",value:c.detailedAddress.district,onChange:p=>y("district",p.target.value),placeholder:"مثال: الكتيبة",error:h.district,required:!0}),e.jsx(be,{label:"الشارع",type:"text",value:c.detailedAddress.street,onChange:p=>y("street",p.target.value),placeholder:"مثال: شارع الشهداء"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(be,{label:"معلومات إضافية عن العنوان",type:"text",value:c.detailedAddress.additionalInfo,onChange:p=>y("additionalInfo",p.target.value),placeholder:"مثال: بجانب مسجد الكتيبة الكبير"})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(be,{label:"العنوان المختصر (يتم إنشاؤه تلقائياً)",type:"text",value:c.address,placeholder:"سيتم إنشاؤه تلقائياً من العنوان المفصل",disabled:!0})})]})]}),e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(yt,{className:"w-4 h-4 ml-2 text-purple-600"}),"المعلومات الاجتماعية والاقتصادية"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(be,{label:"المهنة *",type:"text",value:c.profession,onChange:p=>v("profession",p.target.value),placeholder:"مثال: عامل بناء",error:h.profession,required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحالة الاجتماعية *"}),e.jsx("select",{value:c.maritalStatus,onChange:p=>v("maritalStatus",p.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:g.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المستوى الاقتصادي *"}),e.jsx("select",{value:c.economicLevel,onChange:p=>v("economicLevel",p.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:M.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"عدد أفراد الأسرة *"}),e.jsx("input",{type:"number",value:c.membersCount,onChange:p=>v("membersCount",parseInt(p.target.value)||1),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",min:"1",max:"20"}),h.membersCount&&e.jsxs("p",{className:"text-red-600 text-sm mt-1 flex items-center",children:[e.jsx(ge,{className:"w-4 h-4 ml-1"}),h.membersCount]})]})]})]}),e.jsx(V,{className:"bg-gray-50",children:e.jsxs("div",{className:"flex space-x-4 space-x-reverse justify-end",children:[e.jsx(H,{variant:"secondary",icon:Ct,iconPosition:"right",onClick:r,disabled:R,children:"إلغاء"}),e.jsx(H,{variant:"primary",icon:R?void 0:ir,iconPosition:"right",type:"submit",disabled:R,loading:R,children:N?"حفظ التغييرات":"إضافة المستفيد"})]})}),e.jsx(V,{className:"bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[e.jsx(Ye,{className:"w-5 h-5 text-blue-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-3",children:"تعليمات مهمة"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-2",children:[e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"تأكد من صحة رقم الهوية الوطنية (9 أرقام)"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"رقم الهاتف يجب أن يبدأ بـ 05 ويتكون من 10 أرقام"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"العنوان المفصل مطلوب لضمان دقة التوصيل"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:'سيتم تعيين حالة "بانتظار التوثيق" للمستفيد الجديد'})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ge,{className:"w-4 h-4 text-orange-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"الأشخاص المتزوجين يجب أن يكونوا أرباب أسر منفصلة"})]})]})]})]})})]})})}function mj({beneficiaries:t,activeFilters:s,onClose:r}){const[i,o]=E.useState([{key:"name",label:"الاسم",description:"الاسم الأول للمستفيد",category:"basic",selected:!0},{key:"fullName",label:"الاسم الكامل",description:"الاسم الكامل للمستفيد",category:"basic",selected:!0},{key:"nationalId",label:"رقم الهوية",description:"رقم الهوية الوطنية",category:"basic",selected:!0},{key:"phone",label:"رقم الهاتف",description:"رقم الهاتف المحمول",category:"basic",selected:!0},{key:"dateOfBirth",label:"تاريخ الميلاد",description:"تاريخ ميلاد المستفيد",category:"basic",selected:!1},{key:"gender",label:"الجنس",description:"ذكر أو أنثى",category:"basic",selected:!1},{key:"governorate",label:"المحافظة",description:"المحافظة التي يقيم فيها",category:"address",selected:!0},{key:"city",label:"المدينة",description:"المدينة أو المخيم",category:"address",selected:!0},{key:"district",label:"الحي",description:"الحي أو المنطقة",category:"address",selected:!0},{key:"street",label:"الشارع",description:"اسم الشارع",category:"address",selected:!1},{key:"fullAddress",label:"العنوان الكامل",description:"العنوان المفصل كاملاً",category:"address",selected:!1},{key:"maritalStatus",label:"الحالة الاجتماعية",description:"أعزب، متزوج، مطلق، أرمل",category:"family",selected:!1},{key:"membersCount",label:"عدد أفراد الأسرة",description:"عدد الأفراد المعالين",category:"family",selected:!0},{key:"relationToFamily",label:"صلة القرابة",description:"العلاقة بالعائلة (إن وجدت)",category:"family",selected:!1},{key:"isHeadOfFamily",label:"رب الأسرة",description:"هل هو رب الأسرة أم لا",category:"family",selected:!1},{key:"childrenCount",label:"عدد الأطفال",description:"عدد الأطفال في الأسرة",category:"family",selected:!1},{key:"profession",label:"المهنة",description:"مهنة المستفيد",category:"economic",selected:!1},{key:"economicLevel",label:"المستوى الاقتصادي",description:"فقير جداً، فقير، متوسط، ميسور",category:"economic",selected:!1},{key:"medicalConditions",label:"الحالات المرضية",description:"قائمة الأمراض المزمنة",category:"health",selected:!1},{key:"hasDisability",label:"وجود إعاقة",description:"هل يعاني من إعاقة",category:"health",selected:!1},{key:"identityStatus",label:"حالة التوثيق",description:"موثق، بانتظار التوثيق، مرفوض",category:"system",selected:!0},{key:"status",label:"حالة الحساب",description:"نشط، معلق، موقوف",category:"system",selected:!0},{key:"eligibilityStatus",label:"حالة الأهلية",description:"مؤهل، تحت المراجعة، مرفوض",category:"system",selected:!1},{key:"totalPackages",label:"إجمالي الطرود",description:"عدد الطرود المستلمة",category:"system",selected:!1},{key:"lastReceived",label:"آخر استلام",description:"تاريخ آخر طرد مستلم",category:"system",selected:!0},{key:"createdAt",label:"تاريخ التسجيل",description:"تاريخ إضافة المستفيد للنظام",category:"system",selected:!1},{key:"notes",label:"الملاحظات",description:"ملاحظات خاصة بالمستفيد",category:"system",selected:!1}]),[c,u]=E.useState("json"),[h,x]=E.useState(!0),j=[{id:"basic",name:"المعلومات الأساسية",icon:Te,color:"blue"},{id:"address",name:"معلومات العنوان",icon:At,color:"green"},{id:"family",name:"المعلومات العائلية",icon:yt,color:"purple"},{id:"economic",name:"المعلومات الاقتصادية",icon:Op,color:"orange"},{id:"health",name:"المعلومات الصحية",icon:Qe,color:"red"},{id:"system",name:"معلومات النظام",icon:Ut,color:"gray"}],w=k=>{o(C=>C.map(R=>R.key===k?{...R,selected:!R.selected}:R))},T=k=>{const R=i.filter(O=>O.category===k).every(O=>O.selected);o(O=>O.map(p=>p.category===k?{...p,selected:!R}:p))},S=()=>{const k=i.every(C=>C.selected);o(C=>C.map(R=>({...R,selected:!k})))},N=()=>i.filter(k=>k.selected).length,P=k=>{const C=i.filter(O=>O.category===k);return`${C.filter(O=>O.selected).length}/${C.length}`},g=()=>{const k=i.filter(O=>O.selected);if(k.length===0){alert("يرجى اختيار حقل واحد على الأقل للتصدير");return}const C={metadata:{exportDate:new Date().toISOString(),totalBeneficiaries:t.length,exportedFields:k.length,format:c,activeFilters:s.length>0?s:null,includeStatistics:h},statistics:h?{total:t.length,verified:t.filter(O=>O.identityStatus==="verified").length,pending:t.filter(O=>O.identityStatus==="pending").length,rejected:t.filter(O=>O.identityStatus==="rejected").length,active:t.filter(O=>O.status==="active").length,suspended:t.filter(O=>O.status==="suspended").length,byGovernorate:M(),byEconomicLevel:v()}:null,beneficiaries:t.map((O,p)=>{const I={rowNumber:p+1};return k.forEach(W=>{var z,Q,de;switch(W.key){case"name":I.name=O.name;break;case"fullName":I.fullName=O.fullName;break;case"nationalId":I.nationalId=O.nationalId;break;case"phone":I.phone=O.phone;break;case"dateOfBirth":I.dateOfBirth=O.dateOfBirth;break;case"gender":I.gender=O.gender==="male"?"ذكر":"أنثى";break;case"governorate":I.governorate=O.detailedAddress.governorate;break;case"city":I.city=O.detailedAddress.city;break;case"district":I.district=O.detailedAddress.district;break;case"street":I.street=O.detailedAddress.street;break;case"fullAddress":I.fullAddress=`${O.detailedAddress.governorate} - ${O.detailedAddress.city} - ${O.detailedAddress.district} - ${O.detailedAddress.street}`;break;case"maritalStatus":const je={single:"أعزب",married:"متزوج",divorced:"مطلق",widowed:"أرمل"};I.maritalStatus=je[O.maritalStatus]||O.maritalStatus;break;case"membersCount":I.membersCount=O.membersCount;break;case"relationToFamily":I.relationToFamily=O.relationToFamily||"غير محدد";break;case"isHeadOfFamily":I.isHeadOfFamily=O.isHeadOfFamily?"نعم":"لا";break;case"childrenCount":I.childrenCount=((z=O.childrenIds)==null?void 0:z.length)||0;break;case"profession":I.profession=O.profession;break;case"economicLevel":const Y={very_poor:"فقير جداً",poor:"فقير",moderate:"متوسط",good:"ميسور"};I.economicLevel=Y[O.economicLevel]||O.economicLevel;break;case"medicalConditions":I.medicalConditions=((Q=O.medicalConditions)==null?void 0:Q.join(", "))||"لا توجد";break;case"hasDisability":I.hasDisability=((de=O.medicalConditions)==null?void 0:de.length)>0?"نعم":"لا";break;case"identityStatus":const _={verified:"موثق",pending:"بانتظار التوثيق",rejected:"مرفوض التوثيق"};I.identityStatus=_[O.identityStatus]||O.identityStatus;break;case"status":const G={active:"نشط",pending:"معلق",suspended:"موقوف"};I.status=G[O.status]||O.status;break;case"eligibilityStatus":const ie={eligible:"مؤهل",under_review:"تحت المراجعة",rejected:"مرفوض"};I.eligibilityStatus=ie[O.eligibilityStatus]||O.eligibilityStatus;break;case"totalPackages":I.totalPackages=O.totalPackages;break;case"lastReceived":I.lastReceived=O.lastReceived;break;case"createdAt":I.createdAt=new Date(O.createdAt).toLocaleDateString("ar-SA");break;case"notes":I.notes=O.notes||"لا توجد ملاحظات";break}}),I})},R=`قائمة_المستفيدين_${new Date().toISOString().split("T")[0]}`;if(c==="json"){const O=JSON.stringify(C,null,2),p=new Blob([O],{type:"application/json"}),I=URL.createObjectURL(p),W=document.createElement("a");W.href=I,W.download=`${R}.json`,W.click(),URL.revokeObjectURL(I)}else if(c==="csv"){const O=k.map(de=>de.key);let I=k.map(de=>de.label).join(",")+`
`;C.beneficiaries.forEach(de=>{const je=O.map(Y=>{const _=de[Y]||"";return`"${String(_).replace(/"/g,'""')}"`});I+=je.join(",")+`
`});const W=new Blob([I],{type:"text/csv;charset=utf-8;"}),z=URL.createObjectURL(W),Q=document.createElement("a");Q.href=z,Q.download=`${R}.csv`,Q.click(),URL.revokeObjectURL(z)}alert(`تم تصدير ${t.length} مستفيد بصيغة ${c.toUpperCase()} بنجاح!`),r()},M=()=>{const k={};return t.forEach(C=>{const R=C.detailedAddress.governorate;k[R]=(k[R]||0)+1}),k},v=()=>{const k={};return t.forEach(C=>{k[C.economicLevel]=(k[C.economicLevel]||0)+1}),k},y=k=>{const C=j.find(O=>O.id===k);return C?{blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600",red:"bg-red-100 text-red-600",gray:"bg-gray-100 text-gray-600"}[C.color]:"bg-gray-100 text-gray-600"};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-6 rounded-xl border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:e.jsx(st,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"تصدير قائمة المستفيدين"}),e.jsx("p",{className:"text-gray-600",children:"اختر الحقول والتنسيق المطلوب للتصدير"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-2",children:[e.jsx(Te,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:"عدد المستفيدين"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-2",children:[e.jsx(ne,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:"الحقول المحددة"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:N()})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-2",children:[e.jsx(Ut,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:"تنسيق التصدير"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:c.toUpperCase()})]})]}),s.length>0&&e.jsxs("div",{className:"mt-4 bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"الفلاتر المطبقة على التصدير:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(k=>e.jsxs(Ne,{variant:"info",size:"sm",children:[k.label,": ",k.value]},k.key))})]})]}),e.jsxs(V,{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"تنسيق التصدير"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx("div",{onClick:()=>u("json"),className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${c==="json"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ut,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),e.jsx("h5",{className:"font-medium text-gray-900",children:"JSON"}),e.jsx("p",{className:"text-sm text-gray-600",children:"ملف JSON مع جميع التفاصيل"})]})}),e.jsx("div",{onClick:()=>u("csv"),className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${c==="csv"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ut,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),e.jsx("h5",{className:"font-medium text-gray-900",children:"CSV"}),e.jsx("p",{className:"text-sm text-gray-600",children:"ملف CSV لفتحه في Excel"})]})}),e.jsx("div",{className:"p-4 rounded-lg border-2 border-gray-200 bg-gray-50 opacity-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ut,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("h5",{className:"font-medium text-gray-500",children:"Excel"}),e.jsx("p",{className:"text-sm text-gray-500",children:"قريباً"})]})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:k=>x(k.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"تضمين الإحصائيات في التصدير"})]})})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"اختيار الحقول للتصدير"}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsx(H,{variant:"secondary",size:"sm",onClick:S,children:i.every(k=>k.selected)?"إلغاء تحديد الكل":"تحديد الكل"}),e.jsxs(Ne,{variant:"info",children:[N()," حقل محدد"]})]})]}),e.jsx("div",{className:"space-y-6",children:j.map(k=>{const C=k.icon,R=i.filter(p=>p.category===k.id),O=R.every(p=>p.selected);return e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${y(k.id)}`,children:e.jsx(C,{className:"w-4 h-4"})}),e.jsx("h5",{className:"font-medium text-gray-900",children:k.name})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(Ne,{variant:"neutral",size:"sm",children:P(k.id)}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>T(k.id),children:O?"إلغاء تحديد الكل":"تحديد الكل"})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:R.map(p=>e.jsxs("label",{className:"flex items-start space-x-3 space-x-reverse p-3 bg-white rounded-lg border border-gray-200 hover:bg-gray-50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"checkbox",checked:p.selected,onChange:()=>w(p.key),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900 text-sm",children:p.label}),e.jsx("div",{className:"text-xs text-gray-600",children:p.description})]})]},p.key))})]},k.id)})})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-end pt-4 border-t border-gray-200",children:[e.jsx(H,{variant:"secondary",onClick:r,children:"إلغاء"}),e.jsxs(H,{variant:"primary",icon:st,iconPosition:"right",onClick:g,disabled:N()===0,children:["تصدير (",t.length," مستفيد)"]})]})]})}function hj({onNavigateToIndividualSend:t,onNavigateToTasks:s}){const{loggedInUser:r}=li(),[i,o]=E.useState(""),[c,u]=E.useState(!1),[h,x]=E.useState(!1),[j,w]=E.useState(null),[T,S]=E.useState("add"),[N,P]=E.useState(!1),[g,M]=E.useState(!1),[v,y]=E.useState(null),[k,C]=E.useState(!1),[R,O]=E.useState(!1),[p,I]=E.useState(1),[W]=E.useState(20),[z,Q]=E.useState([]),[de,je]=E.useState(!1),[Y,_]=E.useState({governorate:"",city:"",district:"",familyStatus:"",familySize:"",ageGroup:"",economicLevel:"",displacementStatus:"",profession:"",healthStatus:"",medicalCondition:""}),{beneficiaries:G,loading:ie,error:$,statistics:F,updateBeneficiary:q,refetch:se}=dj({organizationId:(r==null?void 0:r.associatedType)==="organization"?r.associatedId:void 0,familyId:(r==null?void 0:r.associatedType)==="family"?r.associatedId:void 0,searchTerm:i,advancedFilters:Y,identityStatusFilter:R?"verified":"all"}),D=[...new Set(Se.map(te=>te.detailedAddress.governorate))],me=[...new Set(Se.filter(te=>!Y.governorate||te.detailedAddress.governorate===Y.governorate).map(te=>te.detailedAddress.city))],oe=[...new Set(Se.filter(te=>(!Y.governorate||te.detailedAddress.governorate===Y.governorate)&&(!Y.city||te.detailedAddress.city===Y.city)).map(te=>te.detailedAddress.district))],B=(te,qe)=>{_(ct=>{const Rt={...ct,[te]:qe};return te==="governorate"?(Rt.city="",Rt.district=""):te==="city"&&(Rt.district=""),Rt})},ce=()=>{_({governorate:"",city:"",district:"",familyStatus:"",familySize:"",ageGroup:"",economicLevel:"",displacementStatus:"",profession:"",healthStatus:"",medicalCondition:""})},U=()=>{P(!N)},he=()=>Object.values(Y).filter(qe=>qe!=="").length+(R?1:0),Le=()=>{const te=[],qe={governorate:"المحافظة",city:"المدينة",district:"الحي",familyStatus:"الحالة العائلية",familySize:"حجم الأسرة",ageGroup:"الفئة العمرية",economicLevel:"المستوى الاقتصادي",displacementStatus:"حالة النزوح",profession:"المهنة",healthStatus:"الحالة الصحية",medicalCondition:"الحالة الطبية"};return Object.entries(Y).forEach(([ct,Rt])=>{Rt&&te.push({key:ct,label:qe[ct],value:b(ct,Rt)})}),R&&te.push({key:"verified_only",label:"الحسابات الموثقة فقط",value:"مفعل"}),te},b=(te,qe)=>{var Rt;return((Rt={familyStatus:{head_of_family:"رب أسرة",spouse:"زوج/زوجة",child:"ابن/ابنة",orphan_guardian:"معيل أيتام",family_with_orphans:"أسرة لديها أيتام",elderly:"كبير سن",disabled:"من ذوي الاحتياجات الخاصة"},familySize:{small:"صغيرة (1-3 أفراد)",medium:"متوسطة (4-7 أفراد)",large:"كبيرة (8+ أفراد)"},ageGroup:{child:"طفل (أقل من 18)",adult:"بالغ (18-60)",elderly:"كبير سن (60+)"},economicLevel:{very_poor:"فقير جداً",poor:"فقير",moderate:"متوسط",good:"ميسور"},displacementStatus:{displaced:"نازح",not_displaced:"غير نازح",returnee:"عائد لمنزله"},healthStatus:{has_medical:"لديه حالة مرضية",diabetes:"مرض السكري",hypertension:"ضغط الدم",disability:"إعاقة",chronic:"مرض مزمن",healthy:"سليم"}}[te])==null?void 0:Rt[qe])||qe},re=te=>{te==="verified_only"?O(!1):_(qe=>({...qe,[te]:""}))},Z=te=>{w(te),x(!0)},pe=te=>{w(te),S("edit"),u(!0)},Me=te=>{w(te),S("message"),u(!0)},Pe=te=>{confirm(`هل تريد الاتصال بالرقم ${te}؟`)&&window.open(`tel:${te}`)},Ze=te=>{y({type:"suspend",beneficiaryId:te.id,beneficiaryName:te.name}),M(!0)},X=async()=>{if(v)try{if(v.type==="suspend"){await q(v.beneficiaryId,{status:"suspended",updatedAt:new Date().toISOString(),updatedBy:"admin"});const te=Se.findIndex(qe=>qe.id===v.beneficiaryId);te!==-1&&(Se[te].status="suspended",Se[te].updatedAt=new Date().toISOString()),se()}}catch(te){console.error("خطأ في تنفيذ الإجراء:",te)}},xe=()=>v?v.type==="suspend"?{title:"تأكيد تعليق حساب المستفيد",message:`هل أنت متأكد من تعليق حساب المستفيد "${v.beneficiaryName}"؟

عند تعليق الحساب:
• سيتم إيقاف جميع الخدمات للمستفيد
• لن يتمكن من استلام طرود جديدة
• ستبقى بياناته محفوظة للمراجعة
• يمكن إعادة تفعيل الحساب لاحقاً

يمكن مراجعة الحساب وإعادة تفعيله في أي وقت.`,confirmText:"تعليق الحساب",variant:"warning"}:{title:"",message:"",confirmText:"",variant:"primary"}:{title:"",message:"",confirmText:"",variant:"primary"},ke=Math.ceil(G.length/W),Re=(p-1)*W,ee=Re+W,_e=G.slice(Re,ee);tn.useEffect(()=>{je(z.length>0)},[z]);const We=te=>{Q(qe=>qe.includes(te)?qe.filter(ct=>ct!==te):[...qe,te])},bt=()=>{z.length===_e.length?Q([]):Q(_e.map(te=>te.id))},lr=()=>{Q([])},Vs=()=>{G.filter(te=>z.includes(te.id)),C(!0)},zn=()=>{if(z.length===0){alert("يرجى تحديد مستفيدين أولاً");return}s?s(z):alert(`تم تحديد ${z.length} مستفيد لإرسالهم إلى صفحة المهام`)},Mn=()=>{z.length>0?Vs():C(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(V,{className:"bg-blue-50 border-blue-200",padding:"sm",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-blue-600",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:["البيانات الوهمية محملة (",G.length," مستفيد)"]})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[z.length>0&&e.jsxs(Ne,{variant:"info",className:"px-3 py-2",children:[z.length," مستفيد محدد"]}),e.jsx(H,{variant:"success",icon:st,iconPosition:"right",onClick:Mn,children:z.length>0?`تصدير المحدد (${z.length})`:"تصدير القائمة"}),e.jsx(H,{variant:"primary",icon:Lt,iconPosition:"right",onClick:()=>{S("add"),w(null),u(!0)},children:"إضافة مستفيد جديد"})]})}),de&&e.jsx(V,{className:"bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx(ne,{className:"w-5 h-5 text-blue-600"}),e.jsxs("span",{className:"font-medium text-blue-800",children:["تم تحديد ",z.length," مستفيد"]})]}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsxs(H,{variant:"primary",size:"sm",icon:Yn,iconPosition:"right",onClick:zn,children:["إرسال إلى المهام (",z.length,")"]}),e.jsxs(H,{variant:"success",size:"sm",icon:st,iconPosition:"right",onClick:Vs,children:["تصدير المحدد (",z.length,")"]}),e.jsx(H,{variant:"secondary",size:"sm",icon:Ct,onClick:lr,children:"إلغاء التحديد"})]})]})}),e.jsxs(V,{children:[e.jsxs("div",{className:"grid md:grid-cols-12 gap-4 items-end",children:[e.jsx("div",{className:"md:col-span-8",children:e.jsx(be,{placeholder:"البحث في المستفيدين (الاسم، رقم الهوية، الهاتف)...",value:i,onChange:te=>o(te.target.value),className:"flex-1"})}),e.jsx("div",{className:"md:col-span-4",children:e.jsxs(H,{variant:"secondary",icon:Ln,iconPosition:"right",onClick:U,className:"w-full",children:["فلترة متقدمة ",he()>0&&`(${he()})`]})})]}),N&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Ln,{className:"w-4 h-4 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"الفلاتر المتقدمة"})]}),e.jsx(H,{variant:"ghost",icon:Ct,onClick:U,className:"p-2"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(At,{className:"w-4 h-4 ml-2 text-green-600"}),"الفلاتر الجغرافية"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المحافظة"}),e.jsxs("select",{value:Y.governorate,onChange:te=>B("governorate",te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"",children:"جميع المحافظات"}),D.map(te=>e.jsx("option",{value:te,children:te},te))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المدينة"}),e.jsxs("select",{value:Y.city,onChange:te=>B("city",te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",disabled:!Y.governorate,children:[e.jsx("option",{value:"",children:Y.governorate?"جميع المدن":"اختر المحافظة أولاً"}),me.map(te=>e.jsx("option",{value:te,children:te},te))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحي"}),e.jsxs("select",{value:Y.district,onChange:te=>B("district",te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",disabled:!Y.city,children:[e.jsx("option",{value:"",children:Y.city?"جميع الأحياء":"اختر المدينة أولاً"}),oe.map(te=>e.jsx("option",{value:te,children:te},te))]})]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(Te,{className:"w-4 h-4 ml-2 text-purple-600"}),"الحالة العائلية والاجتماعية"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحالة العائلية"}),e.jsxs("select",{value:Y.familyStatus,onChange:te=>B("familyStatus",te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"",children:"جميع الحالات"}),e.jsx("option",{value:"head_of_family",children:"رب أسرة"}),e.jsx("option",{value:"spouse",children:"زوج/زوجة"}),e.jsx("option",{value:"child",children:"ابن/ابنة"}),e.jsx("option",{value:"orphan_guardian",children:"معيل أيتام"}),e.jsx("option",{value:"family_with_orphans",children:"أسرة لديها أيتام"}),e.jsx("option",{value:"elderly",children:"كبير سن"}),e.jsx("option",{value:"disabled",children:"من ذوي الاحتياجات الخاصة"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"حجم الأسرة"}),e.jsxs("select",{value:Y.familySize,onChange:te=>B("familySize",te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"",children:"جميع الأحجام"}),e.jsx("option",{value:"small",children:"صغيرة (1-3 أفراد)"}),e.jsx("option",{value:"medium",children:"متوسطة (4-7 أفراد)"}),e.jsx("option",{value:"large",children:"كبيرة (8+ أفراد)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الفئة العمرية"}),e.jsxs("select",{value:Y.ageGroup,onChange:te=>B("ageGroup",te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"",children:"جميع الأعمار"}),e.jsx("option",{value:"child",children:"طفل (أقل من 18)"}),e.jsx("option",{value:"adult",children:"بالغ (18-60)"}),e.jsx("option",{value:"elderly",children:"كبير سن (60+)"})]})]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(Op,{className:"w-4 h-4 ml-2 text-orange-600"}),"الحالة الاقتصادية والاجتماعية"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المستوى الاقتصادي"}),e.jsxs("select",{value:Y.economicLevel,onChange:te=>B("economicLevel",te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"",children:"جميع المستويات"}),e.jsx("option",{value:"very_poor",children:"فقير جداً"}),e.jsx("option",{value:"poor",children:"فقير"}),e.jsx("option",{value:"moderate",children:"متوسط"}),e.jsx("option",{value:"good",children:"ميسور"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"حالة النزوح"}),e.jsxs("select",{value:Y.displacementStatus,onChange:te=>B("displacementStatus",te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"",children:"جميع الحالات"}),e.jsx("option",{value:"displaced",children:"نازح"}),e.jsx("option",{value:"not_displaced",children:"غير نازح"}),e.jsx("option",{value:"returnee",children:"عائد لمنزله"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المهنة"}),e.jsx("input",{type:"text",placeholder:"مثال: عامل، طبيب، مدرس...",value:Y.profession,onChange:te=>B("profession",te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(yt,{className:"w-4 h-4 ml-2 text-red-600"}),"الحالة الصحية"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحالة الصحية"}),e.jsxs("select",{value:Y.healthStatus,onChange:te=>B("healthStatus",te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[e.jsx("option",{value:"",children:"جميع الحالات"}),e.jsx("option",{value:"has_medical",children:"لديه حالة مرضية"}),e.jsx("option",{value:"diabetes",children:"مرض السكري"}),e.jsx("option",{value:"hypertension",children:"ضغط الدم"}),e.jsx("option",{value:"disability",children:"إعاقة"}),e.jsx("option",{value:"chronic",children:"مرض مزمن"}),e.jsx("option",{value:"healthy",children:"سليم"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"حالة طبية محددة"}),e.jsx("input",{type:"text",placeholder:"مثال: سكري، ضغط، ربو...",value:Y.medicalCondition,onChange:te=>B("medicalCondition",te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]})]})]})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-center mt-6 pt-4 border-t border-gray-200",children:[e.jsx(H,{variant:R?"success":"secondary",icon:fh,iconPosition:"right",onClick:()=>O(!R),children:"الحسابات الموثقة فقط"}),e.jsx(H,{variant:"secondary",icon:jt,iconPosition:"right",onClick:ce,children:"مسح الفلاتر"}),e.jsx(H,{variant:"primary",icon:ne,iconPosition:"right",onClick:U,children:"إخفاء الفلاتر"})]})]})}),he()>0&&e.jsxs("div",{className:"mt-4 bg-blue-50 rounded-lg p-3 border border-blue-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"الفلاتر النشطة:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[Le().map(te=>e.jsxs(Ne,{variant:"info",size:"sm",className:"flex items-center space-x-1 space-x-reverse",children:[e.jsxs("span",{children:[te.label,": ",te.value]}),e.jsx("button",{onClick:()=>re(te.key),className:"text-blue-600 hover:text-blue-800 ml-1",children:e.jsx(Ct,{className:"w-3 h-3"})})]},te.key)),e.jsx(H,{variant:"ghost",size:"sm",icon:Ct,iconPosition:"right",onClick:ce,className:"text-xs",children:"مسح الكل"})]})]})]}),e.jsxs(V,{padding:"none",className:"overflow-hidden",children:[e.jsx("div",{className:"px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"قائمة المستفيدين"}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 space-x-reverse mb-3",children:[e.jsx("div",{className:"bg-blue-100 p-1.5 rounded-lg",children:e.jsx(ne,{className:"w-4 h-4 text-blue-600"})}),e.jsx("span",{className:"text-sm font-medium text-blue-700 bg-blue-100 px-3 py-1 rounded-full",children:"البيانات الوهمية"})]}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm inline-block",children:e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"المعروض حالياً"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[Re+1,"-",Math.min(ee,G.length)]})]}),e.jsx("div",{className:"w-px h-8 bg-gray-300"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"إجمالي المفلترين"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:G.length})]}),e.jsx("div",{className:"w-px h-8 bg-gray-300"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"إجمالي النظام"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Se.length})]})]})})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:z.length===_e.length&&_e.length>0,onChange:bt,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المستفيد"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"رقم الهوية"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الهاتف"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المنطقة"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الحالة"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"آخر استلام"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الإجراءات"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_e.length>0?_e.map((te,qe)=>{var ct,Rt;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:z.includes(te.id),onChange:()=>We(te.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsx("div",{className:"bg-gray-100 text-gray-600 w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold",children:Re+qe+1})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg ml-4",children:e.jsx(Te,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:te.name}),te.identityStatus==="verified"&&e.jsx(fh,{className:"w-4 h-4 text-green-600",title:"موثق"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:((ct=te.detailedAddress)==null?void 0:ct.city)||"غير محدد"})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.nationalId}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.phone}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((Rt=te.detailedAddress)==null?void 0:Rt.district)||"غير محدد"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx(Ne,{variant:te.identityStatus==="verified"?"success":te.identityStatus==="pending"?"warning":"error",size:"sm",children:te.identityStatus==="verified"?"موثق":te.identityStatus==="pending"?"بانتظار التوثيق":"مرفوض التوثيق"}),e.jsx(Ne,{variant:te.status==="active"?"success":te.status==="pending"?"warning":"error",size:"sm",children:te.status==="active"?"نشط":te.status==="pending"?"معلق":"متوقف"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:te.lastReceived?new Date(te.lastReceived).toLocaleDateString("en-CA"):"غير محدد"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsx("button",{onClick:()=>Z(te),className:"text-blue-600 hover:text-blue-900 p-2 rounded-lg hover:bg-blue-50 transition-colors",title:"عرض التفاصيل",children:e.jsx(vt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>pe(te),className:"text-green-600 hover:text-green-900 p-2 rounded-lg hover:bg-green-50 transition-colors",title:"تعديل",children:e.jsx(Jt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Me(te),className:"text-purple-600 hover:text-purple-900 p-2 rounded-lg hover:bg-purple-50 transition-colors",title:"إرسال رسالة",children:e.jsx($s,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Pe(te.phone),className:"text-orange-600 hover:text-orange-900 p-2 rounded-lg hover:bg-orange-50 transition-colors",title:"اتصال",children:e.jsx(qr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Ze(te),className:"text-red-600 hover:text-red-900 p-2 rounded-lg hover:bg-red-50 transition-colors",title:"تعليق الحساب",children:e.jsx(Sy,{className:"w-4 h-4"})})]})})]},te.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(Te,{className:"w-8 h-8 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"لا توجد بيانات مستفيدين"}),e.jsx("p",{className:"text-sm mt-2",children:i?"لا توجد نتائج للبحث":"لم يتم إضافة أي مستفيدين بعد"})]})})})})]})}),ke>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["عرض ",Re+1,"-",Math.min(ee,G.length)," من ",G.length," مستفيد"]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(H,{variant:"secondary",size:"sm",onClick:()=>I(te=>Math.max(1,te-1)),disabled:p===1,children:"السابق"}),e.jsx("div",{className:"flex space-x-1 space-x-reverse",children:Array.from({length:Math.min(5,ke)},(te,qe)=>{const ct=Math.max(1,Math.min(ke-4,p-2))+qe;return ct>ke?null:e.jsx("button",{onClick:()=>I(ct),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${p===ct?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:ct},ct)})}),e.jsx(H,{variant:"secondary",size:"sm",onClick:()=>I(te=>Math.min(ke,te+1)),disabled:p===ke,children:"التالي"})]})]})})]}),h&&j&&e.jsx(su,{beneficiary:j,onClose:()=>{x(!1),w(null)},onNavigateToIndividualSend:t,onEditBeneficiary:pe,onSuspendBeneficiary:(te,qe)=>{x(!1),alert(`تم تعليق حساب المستفيد: ${qe}`)}}),c&&e.jsx(ls,{isOpen:c,onClose:()=>u(!1),title:T==="add"?"إضافة مستفيد جديد":T==="edit"?"تعديل بيانات المستفيد":"إرسال رسالة",size:"lg",children:e.jsx("div",{className:"text-center py-12",children:T==="add"||T==="edit"?e.jsx(uj,{beneficiary:T==="edit"?j:null,onSave:()=>{se(),u(!1),w(null)},onCancel:()=>{u(!1),w(null)}}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-100 rounded-xl p-8 mb-4",children:[e.jsx($s,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"نموذج إرسال رسالة"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"سيتم تطوير نموذج الرسائل هنا"})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-center",children:[e.jsx(H,{variant:"secondary",onClick:()=>u(!1),children:"إلغاء"}),e.jsx(H,{variant:"primary",children:"إرسال الرسالة"})]})]})})}),e.jsx(p0,{isOpen:g,onClose:()=>{M(!1),y(null)},onConfirm:X,title:xe().title,message:xe().message,confirmButtonText:xe().confirmText,confirmButtonVariant:xe().variant,type:"warning"}),k&&e.jsx(ls,{isOpen:k,onClose:()=>C(!1),title:"تصدير قائمة المستفيدين",size:"lg",children:e.jsx(mj,{beneficiaries:z.length>0?G.filter(te=>z.includes(te.id)):G,activeFilters:Le(),onClose:()=>C(!1)})})]})}function xj({preselectedBeneficiaryIds:t=[],onNavigateBack:s}){const{logInfo:r,logError:i}=Bt(),[o,c]=E.useState(t),[u,h]=E.useState(""),[x,j]=E.useState(""),[w,T]=E.useState(""),[S,N]=E.useState(""),[P,g]=E.useState(""),[M,v]=E.useState(""),[y,k]=E.useState("normal"),[C,R]=E.useState(""),[O,p]=E.useState(""),[I,W]=E.useState(!1),[z,Q]=E.useState(!1),[de,je]=E.useState(null),[Y,_]=E.useState(!1),[G,ie]=E.useState(null),[$,F]=E.useState(null),q=Se,se=Ht,D=ks,me=q.filter(ee=>ee.name.toLowerCase().includes(S.toLowerCase())||ee.nationalId.includes(S)||ee.phone.includes(S)),oe=se.filter(ee=>ee.name.toLowerCase().includes(P.toLowerCase())||ee.type.toLowerCase().includes(P.toLowerCase())),B=Sn.filter(ee=>ee.name.toLowerCase().includes(M.toLowerCase())),ce=q.filter(ee=>o.includes(ee.id)),U=u==="internal"?{id:"internal",name:"الطرود الداخلية - المنصة",type:"داخلي"}:se.find(ee=>ee.id===u)||Sn.find(ee=>ee.id===u),he=D.find(ee=>ee.id===x),Le=u==="internal"?D.filter(ee=>ee.organization_id==="internal"):D.filter(ee=>ee.organization_id===u),b=ee=>{c(_e=>_e.includes(ee)?_e.filter(We=>We!==ee):[..._e,ee])},re=ee=>{c(_e=>_e.filter(We=>We!==ee))},Z=()=>{if(o.length===0){alert("يرجى تحديد مستفيدين أولاً");return}if(!u||!x&&!w){alert("يرجى اختيار المؤسسة والطرد (قالب أو كود)");return}W(!0)},pe=()=>{const ee=`TASK-${Date.now()}`,_e=he?he.name:`طرد برقم: ${w}`;r(`تم إنشاء ${o.length} مهمة جديدة`,"BulkTasksPage"),alert(`تم إنشاء المهام بنجاح!

رقم المهمة: ${ee}
عدد المستفيدين: ${o.length}
الطرد: ${_e}
المؤسسة: ${U==null?void 0:U.name}

سيتم إشعار المندوبين قريباً`),c([]),h(""),j(""),T(""),p(""),W(!1)},Me=ee=>{var We;const _e=(We=ee.target.files)==null?void 0:We[0];_e&&je(_e)},Pe=async()=>{if(!de){F({message:"يرجى اختيار ملف أولاً",type:"error"}),setTimeout(()=>F(null),3e3);return}_(!0),ie(null);try{await new Promise(bt=>setTimeout(bt,2e3));const ee=[{name:"أحمد محمد المستورد",nationalId:"900111111",phone:"0597111111",alternativePhone:"0598111111"},{name:"فاطمة سالم المستوردة",nationalId:"900222222",phone:"0597222222",alternativePhone:""},{name:"محمد علي المستورد",nationalId:"900333333",phone:"0597333333",alternativePhone:"0598333333"},{name:"سارة أحمد المستوردة",nationalId:"900444444",phone:"0597444444",alternativePhone:""},{name:"خالد يوسف المستورد",nationalId:"900555555",phone:"0597555555",alternativePhone:"0598555555"},{name:"مريم محمد المستوردة",nationalId:"900666666",phone:"0597666666",alternativePhone:""},{name:"يوسف أحمد المستورد",nationalId:"900777777",phone:"0597777777",alternativePhone:"0598777777"},{name:"نور سالم المستوردة",nationalId:"900888888",phone:"0597888888",alternativePhone:""}],_e={total:ee.length,imported:0,updated:0,errors:[],importedBeneficiaries:[]};ee.forEach((bt,lr)=>{var zn,Mn;const Vs=aj(bt);if(!Vs.isValid){_e.errors.push({row:lr+2,errors:Vs.errors});return}try{const te=nj({name:bt.name.trim(),nationalId:bt.nationalId.trim(),phone:(zn=bt.phone)==null?void 0:zn.trim(),alternativePhone:(Mn=bt.alternativePhone)==null?void 0:Mn.trim()});te.isNew?_e.imported++:te.updated.length>0&&_e.updated++,_e.importedBeneficiaries.push(te.beneficiary)}catch{_e.errors.push({row:lr+2,errors:["خطأ في معالجة البيانات"]})}}),ie(_e);const We=_e.importedBeneficiaries.map(bt=>bt.id);c(bt=>[...bt,...We]),F({message:`تم استيراد ${_e.imported} مستفيد جديد وتحديث ${_e.updated} مستفيد موجود`,type:"success"}),setTimeout(()=>F(null),5e3),r(`تم استيراد ${_e.imported+_e.updated} مستفيد من ملف: ${de.name}`,"BulkTasksPage")}catch(ee){F({message:"حدث خطأ في استيراد الملف",type:"error"}),setTimeout(()=>F(null),3e3),i(ee,"BulkTasksPage")}finally{_(!1)}},Ze=()=>{const ee=rj(),_e=new Blob([ee],{type:"text/csv;charset=utf-8;"}),We=document.createElement("a");We.href=URL.createObjectURL(_e),We.download="قالب_المستفيدين.csv",We.click(),URL.revokeObjectURL(We.href),F({message:"تم تحميل قالب CSV بنجاح",type:"success"}),setTimeout(()=>F(null),3e3)},X=()=>{ie(null),je(null),Q(!1)},xe=ee=>{switch(ee){case"success":return"bg-green-100 border-green-200 text-green-800";case"error":return"bg-red-100 border-red-200 text-red-800";case"warning":return"bg-orange-100 border-orange-200 text-orange-800"}},ke=ee=>{switch(ee){case"success":return e.jsx(ne,{className:"w-5 h-5 text-green-600"});case"error":return e.jsx(ge,{className:"w-5 h-5 text-red-600"});case"warning":return e.jsx($e,{className:"w-5 h-5 text-orange-600"})}},Re=ee=>{switch(ee){case"urgent":return"عاجل";case"high":return"عالي";case"normal":return"عادي";default:return"غير محدد"}};return e.jsxs("div",{className:"space-y-6",children:[$&&e.jsxs("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg flex items-center space-x-3 space-x-reverse ${xe($.type)}`,children:[ke($.type),e.jsx("span",{className:"font-medium",children:$.message}),e.jsx("button",{onClick:()=>F(null),className:"text-gray-500 hover:text-gray-700",children:e.jsx(Ct,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[s&&e.jsx(H,{variant:"secondary",icon:nl,iconPosition:"right",onClick:s,children:"العودة للقائمة"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"إنشاء مهام جماعية"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"إنشاء مهام توزيع لمجموعة من المستفيدين"})]})]}),e.jsx("div",{className:"flex space-x-3 space-x-reverse",children:e.jsx(H,{variant:"secondary",icon:ps,iconPosition:"right",onClick:()=>Q(!0),children:"استيراد مستفيدين"})})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"خطوات إنشاء المهام"}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-sm text-gray-600",children:[e.jsx($e,{className:"w-4 h-4"}),e.jsxs("span",{children:["الخطوة ",o.length>0?u&&(x||w)?"3":"2":"1"," من 3"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsxs("div",{className:`flex items-center space-x-2 space-x-reverse ${o.length>0?"text-green-600":"text-blue-600"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${o.length>0?"bg-green-100":"bg-blue-100"}`,children:o.length>0?e.jsx(ne,{className:"w-4 h-4"}):e.jsx("span",{className:"text-sm font-bold",children:"1"})}),e.jsx("span",{className:"text-sm font-medium",children:"تحديد المستفيدين"})]}),e.jsx("div",{className:"flex-1 h-0.5 bg-gray-200"}),e.jsxs("div",{className:`flex items-center space-x-2 space-x-reverse ${u?"text-green-600":o.length>0?"text-blue-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${u?"bg-green-100":o.length>0?"bg-blue-100":"bg-gray-100"}`,children:u?e.jsx(ne,{className:"w-4 h-4"}):e.jsx("span",{className:"text-sm font-bold",children:"2"})}),e.jsx("span",{className:"text-sm font-medium",children:"اختيار المؤسسة"})]}),e.jsx("div",{className:"flex-1 h-0.5 bg-gray-200"}),e.jsxs("div",{className:`flex items-center space-x-2 space-x-reverse ${(x||w)&&u?"text-green-600":u?"text-blue-600":"text-gray-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${(x||w)&&u?"bg-green-100":u?"bg-blue-100":"bg-gray-100"}`,children:(x||w)&&u?e.jsx(ne,{className:"w-4 h-4"}):e.jsx("span",{className:"text-sm font-bold",children:"3"})}),e.jsx("span",{className:"text-sm font-medium",children:"تحديد الطرد"})]})]})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["المستفيدين المحددين (",o.length,")"]}),e.jsx("div",{className:"flex space-x-2 space-x-reverse",children:e.jsx(H,{variant:"secondary",size:"sm",onClick:()=>c([]),disabled:o.length===0,children:"مسح الكل"})})]}),o.length>0?e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-60 overflow-y-auto",children:ce.map(ee=>e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(Te,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:ee.name}),e.jsx("p",{className:"text-sm text-gray-600",children:ee.detailedAddress.district})]})]}),e.jsx("button",{onClick:()=>re(ee.id),className:"text-red-600 hover:text-red-800 p-1 rounded-lg hover:bg-red-100 transition-colors",children:e.jsx(Ct,{className:"w-4 h-4"})})]},ee.id))}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Te,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"لم يتم تحديد أي مستفيدين"}),e.jsx("p",{className:"text-sm mt-2",children:"يرجى تحديد المستفيدين من القائمة أدناه"})]})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"إضافة مستفيدين إضافيين"}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsx(H,{variant:"secondary",icon:st,iconPosition:"right",size:"sm",onClick:Ze,children:"تحميل قالب CSV"}),e.jsx(H,{variant:"primary",icon:ps,iconPosition:"right",size:"sm",onClick:()=>Q(!0),children:"استيراد من ملف"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx(be,{type:"text",icon:Tt,iconPosition:"right",placeholder:"البحث عن مستفيدين (الاسم، رقم الهوية، الهاتف)...",value:S,onChange:ee=>N(ee.target.value)})}),S&&e.jsx("div",{className:"max-h-60 overflow-y-auto border border-gray-200 rounded-lg",children:me.filter(ee=>!o.includes(ee.id)).slice(0,10).map(ee=>e.jsxs("div",{onClick:()=>b(ee.id),className:"p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"bg-gray-100 p-2 rounded-lg",children:e.jsx(Te,{className:"w-4 h-4 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:ee.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[ee.nationalId," - ",ee.phone]}),e.jsx("p",{className:"text-sm text-gray-500",children:ee.detailedAddress.district})]})]}),e.jsx(Lt,{className:"w-5 h-5 text-blue-600"})]},ee.id))})]}),o.length>0&&e.jsx(V,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"اختيار مصدر الطرود"}),u&&e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-green-600",children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"تم الاختيار"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl p-6 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full translate-y-12 -translate-x-12"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"bg-white/20 p-3 rounded-xl",children:e.jsx(Ee,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-white",children:"الطرود الداخلية"}),e.jsx("p",{className:"text-green-100",children:"طرود من المنصة مباشرة"})]})]}),e.jsx("div",{className:"bg-white/20 px-3 py-1 rounded-full",children:e.jsx("span",{className:"text-white text-sm font-medium",children:"داخلي"})})]}),e.jsx("p",{className:"text-green-100 mb-6",children:"طرود متوفرة من مخزون المنصة الداخلي، جاهزة للتوزيع الفوري على المستفيدين"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white/10 p-3 rounded-lg",children:[e.jsx("p",{className:"text-white text-sm",children:"الطرود المتاحة"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"1,247"})]}),e.jsxs("div",{className:"bg-white/10 p-3 rounded-lg",children:[e.jsx("p",{className:"text-white text-sm",children:"القوالب الجاهزة"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"15"})]}),e.jsxs("div",{className:"bg-white/10 p-3 rounded-lg",children:[e.jsx("p",{className:"text-white text-sm",children:"متوسط التكلفة"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"45 ₪"})]})]}),e.jsx("button",{onClick:()=>h("internal"),className:`w-full py-4 px-6 rounded-xl font-semibold transition-all ${u==="internal"?"bg-white text-green-600 shadow-lg":"bg-white/20 text-white hover:bg-white/30"}`,children:u==="internal"?e.jsxs("div",{className:"flex items-center justify-center space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{children:"تم اختيار الطرود الداخلية"})]}):"اختيار الطرود الداخلية"})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:e.jsx(ot,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900",children:"المؤسسات الخارجية"}),e.jsx("p",{className:"text-gray-600",children:"طرود مدعومة من مؤسسات خارجية"})]})]}),e.jsxs(Ne,{variant:"info",size:"sm",children:[se.length," مؤسسة"]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(be,{type:"text",icon:Tt,iconPosition:"right",placeholder:"البحث في المؤسسات...",value:P,onChange:ee=>g(ee.target.value)})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-3",children:"المؤسسات الشائعة"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:se.filter(ee=>ee.isPopular).map(ee=>e.jsx("button",{onClick:()=>h(ee.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${u===ee.id?"bg-blue-600 text-white shadow-lg":"bg-blue-50 text-blue-700 hover:bg-blue-100"}`,children:ee.name},ee.id))})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-80 overflow-y-auto",children:oe.map(ee=>e.jsxs("div",{onClick:()=>h(ee.id),className:`p-4 rounded-lg border-2 cursor-pointer transition-all hover:shadow-md ${u===ee.id?"border-blue-500 bg-blue-50 shadow-lg":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(ot,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:ee.name}),e.jsx("p",{className:"text-sm text-gray-600",children:ee.type})]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[ee.packagesAvailable||0," طرد متاح • ",ee.templatesCount||0," قوالب"]})]},ee.id))})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-xl",children:e.jsx(yt,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900",children:"العائلات والمبادرات"}),e.jsx("p",{className:"text-gray-600",children:"طرود موزعة عبر العائلات بدعم خارجي"})]})]}),e.jsxs(Ne,{variant:"info",size:"sm",children:[Sn.length," عائلة"]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(be,{type:"text",icon:Tt,iconPosition:"right",placeholder:"البحث في العائلات...",value:M,onChange:ee=>v(ee.target.value)})}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-80 overflow-y-auto",children:B.map(ee=>{const _e=se.find(We=>We.id===ee.supportingOrganizationId);return e.jsxs("div",{onClick:()=>h(ee.id),className:`p-4 rounded-lg border-2 cursor-pointer transition-all hover:shadow-md ${u===ee.id?"border-purple-500 bg-purple-50 shadow-lg":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-3",children:[e.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:e.jsx(yt,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:ee.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[ee.membersCount," فرد"]})]})]}),_e&&e.jsxs("div",{className:"bg-gray-50 p-2 rounded-lg mb-2",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"بدعم من:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:_e.name})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[ee.packagesDistributed," طرد موزع • ",ee.completionRate,"% إنجاز"]})]},ee.id)})})]})]})}),u&&e.jsxs(V,{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"تحديد الطرد"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"اختيار من القوالب المتاحة"}),Le.length>0?e.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:Le.map(ee=>e.jsxs("div",{onClick:()=>{j(ee.id),T("")},className:`p-4 rounded-lg border-2 cursor-pointer transition-all ${x===ee.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h5",{className:"font-semibold text-gray-900",children:ee.name}),e.jsxs("span",{className:"text-sm font-bold text-green-600",children:[ee.estimatedCost," ₪"]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[ee.contents.length," أصناف"]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[ee.contents.slice(0,2).map(_e=>_e.name).join(", "),ee.contents.length>2&&"..."]})]},ee.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ee,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"لا توجد قوالب متاحة"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"أو إدخال كود الطرد"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(be,{label:"كود/رقم الطرد",type:"text",value:w,onChange:ee=>{T(ee.target.value),ee.target.value&&j("")},placeholder:"مثال: PKG-2024-001"}),w&&e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-2",children:[e.jsx(ge,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"font-medium text-yellow-800",children:"طرد مخصص"})]}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["سيتم إنشاء مهام لطرد برقم: ",e.jsx("strong",{children:w})]}),e.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"تأكد من وجود هذا الطرد في المخزون"})]})]})]})]})]}),(x||w)&&u&&e.jsxs(V,{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"خيارات المهمة"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"أولوية التوزيع"}),e.jsxs("select",{value:y,onChange:ee=>k(ee.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"normal",children:"عادية - خلال 2-3 أيام"}),e.jsx("option",{value:"high",children:"عالية - خلال 24 ساعة"}),e.jsx("option",{value:"urgent",children:"عاجلة - خلال 6 ساعات"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ التوزيع المطلوب"}),e.jsx("input",{type:"date",value:C,onChange:ee=>R(ee.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ملاحظات للمندوبين"}),e.jsx("textarea",{value:O,onChange:ee=>p(ee.target.value),placeholder:"تعليمات خاصة للمندوبين أو ملاحظات حول التوزيع...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]})]})]}),o.length>0&&u&&(x||w)&&e.jsxs(V,{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"ملخص المهام"}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-6 rounded-xl border border-blue-200 mb-6",children:e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl mb-2",children:e.jsx(Te,{className:"w-6 h-6 text-blue-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"عدد المستفيدين"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:o.length})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-xl mb-2",children:e.jsx(ot,{className:"w-6 h-6 text-green-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"المؤسسة"}),e.jsx("p",{className:"text-lg font-bold text-green-900",children:U==null?void 0:U.name})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-xl mb-2",children:e.jsx(Ee,{className:"w-6 h-6 text-purple-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"الطرد"}),e.jsx("p",{className:"text-lg font-bold text-purple-900",children:he?he.name:w})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-xl mb-2",children:e.jsx($e,{className:"w-6 h-6 text-orange-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"الأولوية"}),e.jsx(Ne,{variant:y==="urgent"?"error":y==="high"?"warning":"info",className:"text-lg font-bold",children:Re(y)})]})]})}),he&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"تفاصيل الطرد"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"التكلفة الإجمالية:"}),e.jsxs("span",{className:"font-bold text-green-600 mr-2",children:[(o.length*he.estimatedCost).toLocaleString()," ₪"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"الوزن الإجمالي:"}),e.jsxs("span",{className:"font-bold text-gray-900 mr-2",children:[(o.length*he.totalWeight).toFixed(1)," كيلو"]})]})]})]}),e.jsxs(H,{variant:"primary",icon:Yn,iconPosition:"right",onClick:Z,className:"w-full text-lg py-4",children:["إنشاء ",o.length," مهمة توزيع"]})]}),I&&e.jsx(ls,{isOpen:I,onClose:()=>W(!1),title:"تأكيد إنشاء المهام",size:"md",children:e.jsxs("div",{className:"p-6 text-center",children:[e.jsxs("div",{className:"bg-blue-100 p-6 rounded-xl mb-6",children:[e.jsx(Yn,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"هل أنت متأكد من إنشاء هذه المهام؟"}),e.jsxs("p",{className:"text-gray-600",children:["سيتم إنشاء ",o.length," مهمة توزيع وإشعار المندوبين"]})]}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg text-right mb-6",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"عدد المستفيدين:"}),e.jsx("span",{className:"font-medium text-gray-900",children:o.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"المؤسسة:"}),e.jsx("span",{className:"font-medium text-gray-900",children:U==null?void 0:U.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"الطرد:"}),e.jsx("span",{className:"font-medium text-gray-900",children:he?he.name:w})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"الأولوية:"}),e.jsx("span",{className:"font-medium text-gray-900",children:Re(y)})]}),he&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"التكلفة المتوقعة:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[(o.length*he.estimatedCost).toLocaleString()," ₪"]})]})]})}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-center",children:[e.jsx(H,{variant:"secondary",onClick:()=>W(!1),children:"إلغاء"}),e.jsx(H,{variant:"primary",onClick:pe,children:"تأكيد إنشاء المهام"})]})]})}),z&&e.jsx(ls,{isOpen:z,onClose:()=>{Y||X()},title:"استيراد مستفيدين من ملف Excel/CSV",size:"lg",children:e.jsx("div",{className:"p-6",children:G?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 p-6 rounded-xl border border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[e.jsx(ne,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"نتائج الاستيراد"}),e.jsxs("p",{className:"text-gray-600",children:["تم معالجة الملف: ",de==null?void 0:de.name]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"إجمالي الصفوف"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:G.total})]})}),e.jsx("div",{className:"bg-green-100 p-4 rounded-lg border border-green-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-green-600",children:"مستفيدين جدد"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:G.imported})]})}),e.jsx("div",{className:"bg-blue-100 p-4 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-blue-600",children:"تم التحديث"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:G.updated})]})}),e.jsx("div",{className:"bg-red-100 p-4 rounded-lg border border-red-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-red-600",children:"أخطاء"}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:G.errors.length})]})})]})]}),G.importedBeneficiaries.length>0&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["المستفيدين المستوردين (",G.importedBeneficiaries.length,")"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2",children:G.importedBeneficiaries.map((ee,_e)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:e.jsx(Ms,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:ee.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[ee.nationalId," - ",ee.phone]})]})]}),e.jsx(Ne,{variant:"success",size:"sm",children:Se.find(We=>We.nationalId===ee.nationalId&&We.id!==ee.id)?"محدث":"جديد"})]},ee.id))})]}),G.errors.length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[e.jsxs("h4",{className:"font-medium text-red-800 mb-3",children:["أخطاء الاستيراد (",G.errors.length,")"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2",children:G.errors.map((ee,_e)=>e.jsx("div",{className:"bg-white p-3 rounded-lg border border-red-200",children:e.jsxs("div",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ge,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-red-800",children:["الصف ",ee.row,":"]}),e.jsx("ul",{className:"text-sm text-red-700 mt-1",children:ee.errors.map((We,bt)=>e.jsxs("li",{children:["• ",We]},bt))})]})]})},_e))})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-end pt-4 border-t border-gray-200",children:[e.jsx(H,{variant:"secondary",icon:jt,iconPosition:"right",onClick:X,children:"استيراد ملف آخر"}),e.jsxs(H,{variant:"primary",onClick:()=>Q(!1),children:["إغلاق (",G.imported+G.updated," مستفيد مضاف)"]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"bg-blue-50 p-8 rounded-xl border-2 border-dashed border-blue-300 hover:border-blue-400 transition-colors",children:[e.jsx(ps,{className:"w-16 h-16 text-blue-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"اختر ملف Excel أو CSV"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"يجب أن يحتوي الملف على: الاسم، رقم الهوية، رقم الهاتف (اختياري)، رقم الهاتف البديل (اختياري)"}),e.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:Me,className:"hidden",id:"beneficiaries-file-upload",disabled:Y}),e.jsxs("label",{htmlFor:"beneficiaries-file-upload",className:"bg-blue-600 text-white px-6 py-3 rounded-xl font-medium hover:bg-blue-700 transition-colors cursor-pointer inline-flex items-center",children:[e.jsx(ps,{className:"w-4 h-4 ml-2"}),"اختيار ملف"]})]}),de&&e.jsx("div",{className:"mt-4 bg-green-50 p-4 rounded-xl border border-green-200",children:e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx(Ut,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-green-800",children:["تم اختيار الملف: ",de.name]}),e.jsxs("p",{className:"text-sm text-green-600",children:["الحجم: ",(de.size/1024).toFixed(1)," KB"]})]})]})})]}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"تحميل قالب CSV جاهز"}),e.jsx("p",{className:"text-sm text-gray-600",children:"قالب يحتوي على أمثلة وتنسيق صحيح للبيانات"})]}),e.jsx(H,{variant:"secondary",icon:st,iconPosition:"right",onClick:Ze,children:"تحميل القالب"})]})}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-3",children:"تعليمات الاستيراد"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-2",children:[e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:'الملف يجب أن يحتوي على عمود "الاسم" وعمود "رقم الهوية" كحد أدنى'})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"رقم الهوية يجب أن يكون 9 أرقام بالضبط"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"رقم الهاتف يجب أن يبدأ بـ 05 ويتكون من 10 أرقام"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"إذا كان المستفيد موجود (نفس رقم الهوية)، سيتم تحديث بياناته"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ge,{className:"w-4 h-4 text-orange-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"الحد الأقصى لحجم الملف: 10 ميجابايت"})]})]})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-end",children:[e.jsx(H,{variant:"secondary",onClick:()=>Q(!1),disabled:Y,children:"إلغاء"}),e.jsx(H,{variant:"primary",icon:Y?void 0:ps,iconPosition:"right",onClick:Pe,disabled:!de||Y,loading:Y,children:Y?"جاري الاستيراد...":"بدء الاستيراد"})]})]})})}),e.jsx(V,{className:"bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[e.jsx(Ee,{className:"w-6 h-6 text-blue-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-3",children:"تعليمات إنشاء المهام الجماعية"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-2",children:[e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"يمكن تحديد المستفيدين من القائمة الحالية أو البحث عن مستفيدين إضافيين"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"يمكن استيراد مستفيدين جدد من ملف Excel أو CSV"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"يمكن اختيار قالب طرد جاهز أو إدخال كود طرد مخصص"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"سيتم تعيين أفضل المندوبين المتاحين حسب المناطق"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"سيتم إرسال إشعارات للمستفيدين والمندوبين"})]})]})]})]})})]})}function pj({onNavigateToIndividualSend:t}){const{logInfo:s,logError:r}=Bt(),[i,o]=E.useState(!1),[c,u]=E.useState(null),[h,x]=E.useState(1),[j,w]=E.useState(20),[T,S]=E.useState(""),[N,P]=E.useState("all"),[g,M]=E.useState("all"),[v,y]=E.useState("all"),[k,C]=E.useState("all"),[R,O]=E.useState("createdAt"),[p,I]=E.useState("desc"),[W,z]=E.useState([]),[Q,de]=E.useState(!1),[je,Y]=E.useState(!1),[_,G]=E.useState(null),ie=[...new Set(Se.map(X=>X.detailedAddress.governorate))],F=(()=>{let X=[...Se];if(T){const xe=T.toLowerCase();X=X.filter(ke=>ke.name.toLowerCase().includes(xe)||ke.nationalId.includes(T)||ke.phone.includes(T))}if(N!=="all"&&(X=X.filter(xe=>xe.status===N)),g!=="all"&&(X=X.filter(xe=>xe.identityStatus===g)),v!=="all"&&(X=X.filter(xe=>xe.detailedAddress.governorate===v)),k!=="all"){const xe=new Date,ke=new Date;switch(k){case"today":ke.setHours(0,0,0,0),X=X.filter(Re=>new Date(Re.createdAt)>=ke);break;case"week":ke.setDate(xe.getDate()-7),X=X.filter(Re=>new Date(Re.createdAt)>=ke);break;case"month":ke.setMonth(xe.getMonth()-1),X=X.filter(Re=>new Date(Re.createdAt)>=ke);break}}return X.sort((xe,ke)=>{let Re,ee;switch(R){case"name":Re=xe.name,ee=ke.name;break;case"nationalId":Re=xe.nationalId,ee=ke.nationalId;break;case"createdAt":Re=new Date(xe.createdAt),ee=new Date(ke.createdAt);break;case"lastReceived":Re=new Date(xe.lastReceived),ee=new Date(ke.lastReceived);break;default:Re=xe.createdAt,ee=ke.createdAt}return Re<ee?p==="asc"?-1:1:Re>ee?p==="asc"?1:-1:0}),X})(),q=Math.ceil(F.length/j),se=(h-1)*j,D=se+j,me=F.slice(se,D);tn.useEffect(()=>{de(W.length>0)},[W]),tn.useEffect(()=>{x(1)},[T,N,g,v,k]);const oe=X=>{u(X),o(!0)},B=X=>{R===X?I(p==="asc"?"desc":"asc"):(O(X),I("asc"))},ce=X=>{z(xe=>xe.includes(X)?xe.filter(ke=>ke!==X):[...xe,X])},U=()=>{W.length===me.length?z([]):z(me.map(X=>X.id))},he=()=>{z([])},Le=(X,xe)=>{G({type:"approve",beneficiaryId:X,beneficiaryName:xe}),Y(!0)},b=(X,xe)=>{G({type:"reupload",beneficiaryId:X,beneficiaryName:xe}),Y(!0)},re=(X,xe)=>{G({type:"suspend",beneficiaryId:X,beneficiaryName:xe}),Y(!0)},Z=()=>{G({type:"batch-approve",beneficiaryIds:W}),Y(!0)},pe=()=>{G({type:"batch-reupload",beneficiaryIds:W}),Y(!0)},Me=()=>{if(_)try{switch(_.type){case"approve":if(_.beneficiaryId){const X=Se.findIndex(xe=>xe.id===_.beneficiaryId);X!==-1&&(Se[X].identityStatus="verified",Se[X].updatedAt=new Date().toISOString()),s(`تم توثيق هوية المستفيد: ${_.beneficiaryName}`,"StatusManagementPage")}break;case"reupload":if(_.beneficiaryId){const X=Se.findIndex(xe=>xe.id===_.beneficiaryId);X!==-1&&(Se[X].identityStatus="pending",Se[X].updatedAt=new Date().toISOString()),s(`تم طلب إعادة رفع الوثائق من المستفيد: ${_.beneficiaryName}. سيتم إرسال إشعار له لرفع وثائق جديدة.`,"StatusManagementPage")}break;case"batch-approve":_.beneficiaryIds&&(_.beneficiaryIds.forEach(X=>{const xe=Se.findIndex(ke=>ke.id===X);xe!==-1&&(Se[xe].identityStatus="verified",Se[xe].updatedAt=new Date().toISOString())}),s(`تم توثيق ${_.beneficiaryIds.length} مستفيد بشكل جماعي`,"StatusManagementPage"),z([]));break;case"batch-reupload":_.beneficiaryIds&&(_.beneficiaryIds.forEach(X=>{const xe=Se.findIndex(ke=>ke.id===X);xe!==-1&&(Se[xe].identityStatus="pending",Se[xe].updatedAt=new Date().toISOString())}),s(`تم طلب إعادة رفع الوثائق من ${_.beneficiaryIds.length} مستفيد بشكل جماعي. سيتم إرسال إشعارات لهم لرفع وثائق جديدة.`,"StatusManagementPage"),z([]));break;case"suspend":if(_.beneficiaryId){const X=Se.findIndex(xe=>xe.id===_.beneficiaryId);X!==-1&&(Se[X].status="suspended",Se[X].updatedAt=new Date().toISOString()),s(`تم تعليق حساب المستفيد: ${_.beneficiaryName}. تم إيقاف جميع الخدمات وسيتم إشعار المستفيد.`,"StatusManagementPage")}break}x(h)}catch(X){r(X,"StatusManagementPage")}},Ze=(()=>{var X,xe,ke,Re;if(!_)return{title:"",message:"",confirmText:"",variant:"primary"};switch(_.type){case"approve":return{title:"تأكيد توثيق الهوية",message:`هل أنت متأكد من توثيق هوية المستفيد "${_.beneficiaryName}"؟ سيتم تغيير حالته إلى "موثق" ويصبح مؤهلاً لاستلام المساعدات.`,confirmText:"توثيق الهوية",variant:"success"};case"reupload":return{title:"طلب إعادة رفع الوثائق",message:`هل تريد طلب إعادة رفع الوثائق من المستفيد "${_.beneficiaryName}"؟

سيتم:
• إرسال إشعار للمستفيد عبر الرسائل النصية
• تغيير حالة التوثيق إلى "بانتظار إعادة الرفع"
• إرسال تعليمات واضحة حول الوثائق المطلوبة`,confirmText:"إرسال طلب إعادة الرفع",variant:"warning"};case"batch-approve":return{title:"تأكيد التوثيق الجماعي",message:`هل أنت متأكد من توثيق هوية ${(X=_.beneficiaryIds)==null?void 0:X.length} مستفيد؟ سيتم تغيير حالتهم جميعاً إلى "موثق".`,confirmText:`توثيق ${(xe=_.beneficiaryIds)==null?void 0:xe.length} مستفيد`,variant:"success"};case"batch-reupload":return{title:"طلب إعادة رفع الوثائق (جماعي)",message:`هل تريد طلب إعادة رفع الوثائق من ${(ke=_.beneficiaryIds)==null?void 0:ke.length} مستفيد؟

سيتم:
• إرسال إشعارات جماعية عبر الرسائل النصية
• تغيير حالة التوثيق لجميع المحددين إلى "بانتظار إعادة الرفع"
• إرسال تعليمات واضحة لكل مستفيد`,confirmText:`إرسال طلب إعادة الرفع لـ ${(Re=_.beneficiaryIds)==null?void 0:Re.length} مستفيد`,variant:"warning"};case"suspend":return{title:"تأكيد تعليق حساب المستفيد",message:`هل أنت متأكد من تعليق حساب المستفيد "${_.beneficiaryName}"؟

عند تعليق الحساب:
• سيتم إيقاف جميع الخدمات للمستفيد
• لن يتمكن من استلام طرود جديدة
• ستبقى بياناته محفوظة للمراجعة
• يمكن إعادة تفعيل الحساب لاحقاً

يمكن مراجعة الحساب وإعادة تفعيله في أي وقت.`,confirmText:"تعليق الحساب",variant:"warning"};default:return{title:"",message:"",confirmText:"",variant:"primary"}}})();return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[e.jsx(H,{variant:"success",icon:jt,iconPosition:"right",onClick:()=>{x(1),z([]),s("تم تحديث حالات التوثيق","StatusManagementPage")},children:"تحديث حالات التوثيق"}),e.jsx(H,{variant:"primary",icon:Ut,iconPosition:"right",onClick:()=>{const X={date:new Date().toISOString(),totalBeneficiaries:F.length,verified:F.filter(_e=>_e.identityStatus==="verified").length,pending:F.filter(_e=>_e.identityStatus==="pending").length,rejected:F.filter(_e=>_e.identityStatus==="rejected").length,beneficiaries:F.map(_e=>({name:_e.name,nationalId:_e.nationalId,identityStatus:_e.identityStatus,createdAt:_e.createdAt,updatedAt:_e.updatedAt}))},xe=JSON.stringify(X,null,2),ke=new Blob([xe],{type:"application/json"}),Re=URL.createObjectURL(ke),ee=document.createElement("a");ee.href=Re,ee.download=`تقرير_التوثيق_${new Date().toISOString().split("T")[0]}.json`,ee.click(),URL.revokeObjectURL(Re),s("تم تصدير تقرير التوثيق","StatusManagementPage")},children:"تصدير تقرير التوثيق"})]})}),e.jsxs(V,{children:[e.jsxs("div",{className:"grid md:grid-cols-6 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx(be,{type:"text",icon:Tt,iconPosition:"right",placeholder:"البحث (الاسم، رقم الهوية، الهاتف)...",value:T,onChange:X=>S(X.target.value)})}),e.jsx("div",{children:e.jsxs("select",{value:g,onChange:X=>M(X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع حالات التوثيق"}),e.jsx("option",{value:"verified",children:"موثق"}),e.jsx("option",{value:"pending",children:"بانتظار التوثيق"}),e.jsx("option",{value:"rejected",children:"مرفوض التوثيق"})]})}),e.jsx("div",{children:e.jsxs("select",{value:N,onChange:X=>P(X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع الحالات"}),e.jsx("option",{value:"active",children:"نشط"}),e.jsx("option",{value:"pending",children:"معلق"}),e.jsx("option",{value:"suspended",children:"موقوف"})]})}),e.jsx("div",{children:e.jsxs("select",{value:v,onChange:X=>y(X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع المحافظات"}),ie.map(X=>e.jsx("option",{value:X,children:X},X))]})}),e.jsx("div",{children:e.jsxs("select",{value:k,onChange:X=>C(X.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع التواريخ"}),e.jsx("option",{value:"today",children:"اليوم"}),e.jsx("option",{value:"week",children:"هذا الأسبوع"}),e.jsx("option",{value:"month",children:"هذا الشهر"})]})})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm text-gray-600",children:[e.jsxs("span",{children:["عرض ",se+1,"-",Math.min(D,F.length)," من ",F.length," مستفيد"]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("span",{children:"عدد العناصر في الصفحة:"}),e.jsxs("select",{value:j,onChange:X=>{w(Number(X.target.value)),x(1)},className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]})]})]}),Q&&e.jsx(V,{className:"bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx(ne,{className:"w-5 h-5 text-blue-600"}),e.jsxs("span",{className:"font-medium text-blue-800",children:["تم تحديد ",W.length," مستفيد"]})]}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsxs(H,{variant:"success",size:"sm",onClick:Z,children:["توثيق المحدد (",W.length,")"]}),e.jsxs(H,{variant:"warning",size:"sm",onClick:pe,children:["طلب إعادة رفع (",W.length,")"]}),e.jsx(H,{variant:"secondary",size:"sm",icon:by,onClick:he,children:"إلغاء التحديد"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(V,{hover:!0,className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-xl",children:e.jsx(Ye,{className:"w-8 h-8 text-green-600"})}),e.jsx("span",{className:"text-3xl font-bold text-green-600",children:F.filter(X=>X.identityStatus==="verified").length})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"موثقين"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"تم التحقق من هويتهم"}),e.jsx(H,{variant:"success",size:"sm",className:"w-full",onClick:()=>M("verified"),children:"عرض الموثقين"})]}),e.jsxs(V,{hover:!0,className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"bg-yellow-100 p-3 rounded-xl",children:e.jsx($e,{className:"w-8 h-8 text-yellow-600"})}),e.jsx("span",{className:"text-3xl font-bold text-yellow-600",children:F.filter(X=>X.identityStatus==="pending").length})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"بانتظار التوثيق"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"يحتاجون مراجعة الوثائق"}),e.jsx(H,{variant:"warning",size:"sm",className:"w-full",onClick:()=>M("pending"),children:"مراجعة الوثائق"})]}),e.jsxs(V,{hover:!0,className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"bg-red-100 p-3 rounded-xl",children:e.jsx(ge,{className:"w-8 h-8 text-red-600"})}),e.jsx("span",{className:"text-3xl font-bold text-red-600",children:F.filter(X=>X.identityStatus==="rejected").length})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"مرفوض التوثيق"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"يحتاجون إعادة رفع الوثائق"}),e.jsx(H,{variant:"warning",size:"sm",className:"w-full",onClick:()=>M("rejected"),children:"طلب إعادة رفع الوثائق"})]}),e.jsxs(V,{hover:!0,className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"bg-gray-100 p-3 rounded-xl",children:e.jsx(El,{className:"w-8 h-8 text-gray-600"})}),e.jsx("span",{className:"text-3xl font-bold text-gray-600",children:F.filter(X=>X.status==="suspended").length})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"حسابات موقوفة"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"موقوف"}),e.jsx(H,{variant:"secondary",size:"sm",className:"w-full",onClick:()=>P("suspended"),children:"إدارة الموقوفين"})]})]}),e.jsxs(V,{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"قائمة التحقق من الهوية"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"المستفيدين في انتظار التحقق من هويتهم ووثائقهم"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-right",children:e.jsx("input",{type:"checkbox",checked:W.length===me.length&&me.length>0,onChange:U,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>B("name"),children:e.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[e.jsx("span",{children:"المستفيد"}),R==="name"&&(p==="asc"?e.jsx(ec,{className:"w-4 h-4"}):e.jsx(Jo,{className:"w-4 h-4"}))]})}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>B("nationalId"),children:e.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[e.jsx("span",{children:"رقم الهوية"}),R==="nationalId"&&(p==="asc"?e.jsx(ec,{className:"w-4 h-4"}):e.jsx(Jo,{className:"w-4 h-4"}))]})}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الهاتف"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المحافظة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"حالة التوثيق"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>B("createdAt"),children:e.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[e.jsx("span",{children:"تاريخ الإضافة"}),R==="createdAt"&&(p==="asc"?e.jsx(ec,{className:"w-4 h-4"}):e.jsx(Jo,{className:"w-4 h-4"}))]})}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الإجراءات"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:me.length>0?me.map(X=>{var xe,ke;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:W.includes(X.id),onChange:()=>ce(X.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg ml-3",children:e.jsx(Te,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:X.name}),e.jsx("div",{className:"text-sm text-gray-500",children:(xe=X.detailedAddress)==null?void 0:xe.city})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:X.nationalId}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:X.phone}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(ke=X.detailedAddress)==null?void 0:ke.governorate}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(Ne,{variant:X.identityStatus==="verified"?"success":X.identityStatus==="pending"?"warning":"error",size:"sm",children:X.identityStatus==="verified"?"موثق":X.identityStatus==="pending"?"بانتظار التوثيق":"مرفوض التوثيق"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(X.createdAt).toLocaleDateString("en-CA")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[X.identityStatus==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(H,{variant:"success",size:"sm",onClick:()=>Le(X.id,X.name),children:"توثيق"}),e.jsx(H,{variant:"warning",size:"sm",onClick:()=>b(X.id,X.name),children:"إعادة رفع"})]}),e.jsx(H,{variant:"secondary",size:"sm",onClick:()=>oe(X),children:"مراجعة"})]})})]},X.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(Ye,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"لا توجد نتائج مطابقة للفلاتر المحددة"}),e.jsx("p",{className:"text-sm",children:"جرب تعديل معايير البحث أو الفلترة"})]})})})})]})}),q>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["الصفحة ",h," من ",q," (",F.length," مستفيد إجمالي)"]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(H,{variant:"secondary",size:"sm",icon:vr,onClick:()=>x(X=>Math.max(1,X-1)),disabled:h===1,children:"السابق"}),e.jsx("div",{className:"flex space-x-1 space-x-reverse",children:Array.from({length:Math.min(5,q)},(X,xe)=>{const ke=Math.max(1,Math.min(q-4,h-2))+xe;return ke>q?null:e.jsx("button",{onClick:()=>x(ke),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${h===ke?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:ke},ke)})}),e.jsx(H,{variant:"secondary",size:"sm",icon:vy,onClick:()=>x(X=>Math.min(q,X+1)),disabled:h===q,children:"التالي"})]})]})]}),e.jsxs(V,{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"قائمة التحقق السريع"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"المستفيدين الجدد في انتظار التحقق من البيانات (عرض مبسط)"}),e.jsxs("div",{className:"space-y-4",children:[F.filter(X=>X.identityStatus==="pending").slice(0,5).map(X=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-xl border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"bg-yellow-100 p-2 rounded-lg",children:e.jsx(El,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:X.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["رقم الهوية: ",X.nationalId]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["تم الإضافة: ",new Date(X.createdAt).toLocaleDateString("en-CA")]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mt-2",children:[e.jsx(rl,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500",children:X.identityImageUrl?"تم رفع صورة الهوية":"لم يتم رفع صورة الهوية"})]})]})]}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsx(H,{variant:"success",size:"sm",onClick:()=>Le(X.id,X.name),children:"توثيق الهوية"}),e.jsx(H,{variant:"warning",size:"sm",icon:jt,onClick:()=>b(X.id,X.name),children:"طلب إعادة رفع الوثائق"}),e.jsx(H,{variant:"secondary",size:"sm",onClick:()=>oe(X),children:"مراجعة الوثائق"})]})]},X.id)),F.filter(X=>X.identityStatus==="pending").length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Star,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"لا توجد حسابات تحتاج توثيق حالياً"}),e.jsx("p",{className:"text-sm",children:"جميع المستفيدين تم التحقق من هويتهم"})]})]})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-xl",children:e.jsx(ge,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"ملخص مشاكل التوثيق"}),e.jsx("p",{className:"text-gray-600",children:"تحليل ديناميكي لحالات التوثيق الحالية"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-200",children:[e.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"يحتاجون إعادة رفع"}),e.jsxs("p",{className:"text-sm text-red-600",children:[F.filter(X=>X.identityStatus==="rejected").length," حالة تحتاج إعادة رفع الوثائق"]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-xl border border-yellow-200",children:[e.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"بانتظار التوثيق"}),e.jsxs("p",{className:"text-sm text-yellow-600",children:[F.filter(X=>X.identityStatus==="pending").length," حالة تحتاج مراجعة"]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"تم التوثيق"}),e.jsxs("p",{className:"text-sm text-blue-600",children:[F.filter(X=>X.identityStatus==="verified").length," مستفيد موثق"]})]})]})]}),e.jsx(p0,{isOpen:je,onClose:()=>{Y(!1),G(null)},onConfirm:Me,title:Ze.title,message:Ze.message,confirmButtonText:Ze.confirmText,confirmButtonVariant:Ze.variant,type:Ze.variant==="danger"?"danger":"warning"}),i&&c&&e.jsx(su,{beneficiary:c,onClose:()=>{o(!1),u(null)},onNavigateToIndividualSend:t,onEditBeneficiary:X=>{alert("سيتم فتح نموذج تعديل البيانات")},onApproveIdentity:(X,xe)=>{o(!1),Le(X,xe)},onRejectIdentity:(X,xe)=>{o(!1),handleRejectIdentity(X,xe)},onRequestReupload:(X,xe)=>{o(!1),b(X,xe)},onSuspendBeneficiary:(X,xe)=>{o(!1),re(X,xe)}})]})}function fj(){E.useState(null);const t=i=>{alert(`سيتم فتح نموذج تعديل بيانات ${i.name}`)},s=i=>{confirm(`هل تريد الاتصال بالرقم ${i}؟`)&&window.open(`tel:${i}`)},r=i=>{alert(`سيتم إعادة جدولة التوصيل لـ ${i.name}`)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[e.jsx("button",{className:"bg-orange-600 text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-orange-700 transition-colors",children:"إرسال تذكير جماعي"}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-blue-700 transition-colors",children:"تصدير القائمة"})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-orange-50",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"قائمة المتأخرين (5 مستفيدين)"})}),e.jsx("div",{className:"p-6 space-y-4",children:Se.slice(0,5).map(i=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 rounded-xl border border-orange-200",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:e.jsx($e,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:i.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["متأخر منذ 3 أيام - ",i.detailedAddress.district]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["آخر محاولة: ",new Date(i.lastReceived).toLocaleDateString("ar-SA")]})]})]}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsx("button",{onClick:()=>t(i),className:"bg-blue-600 text-white px-3 py-2 rounded-lg text-sm hover:bg-blue-700 transition-colors",children:"تعديل البيانات"}),e.jsx("button",{onClick:()=>s(i.phone),className:"bg-orange-600 text-white px-3 py-2 rounded-lg text-sm hover:bg-orange-700 transition-colors",children:"اتصال"}),e.jsx("button",{onClick:()=>r(i),className:"bg-green-600 text-white px-3 py-2 rounded-lg text-sm hover:bg-green-700 transition-colors",children:"إعادة جدولة"})]})]},i.id))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-xl",children:e.jsx(ge,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"ملخص التأخيرات"}),e.jsx("p",{className:"text-gray-600",children:"تحليل أسباب التأخير والحلول المقترحة"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-200",children:[e.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"عناوين غير صحيحة"}),e.jsx("p",{className:"text-sm text-red-600",children:"2 حالة تحتاج تحديث العنوان"})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-xl border border-yellow-200",children:[e.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"عدم توفر المستفيد"}),e.jsx("p",{className:"text-sm text-yellow-600",children:"2 حالة تحتاج إعادة جدولة"})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"مشاكل في التوصيل"}),e.jsx("p",{className:"text-sm text-blue-600",children:"1 حالة تحتاج متابعة خاصة"})]})]})]})]})}function gj(){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"flex space-x-3 space-x-reverse",children:e.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx(st,{className:"w-4 h-4 ml-2"}),"تصدير السجل"]})})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"آخر الأنشطة"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start space-x-4 space-x-reverse",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-full",children:e.jsx(ne,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"تم تسليم طرد مواد غذائية"}),e.jsx("span",{className:"text-sm text-gray-500",children:"منذ 5 دقائق"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"المستفيد: أحمد محمد الغزاوي - المندوب: محمد علي"}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"تم التوثيق بالصورة والموقع"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4 space-x-reverse",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:e.jsx(Ms,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"إضافة مستفيد جديد"}),e.jsx("span",{className:"text-sm text-gray-500",children:"منذ 15 دقيقة"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"المستفيد: فاطمة أحمد الشوا - بواسطة: سارة المشرفة"}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"في انتظار التحقق من الهوية"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4 space-x-reverse",children:[e.jsx("div",{className:"bg-purple-100 p-2 rounded-full",children:e.jsx(Ye,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"تم التحقق من هوية مستفيد"}),e.jsx("span",{className:"text-sm text-gray-500",children:"منذ 30 دقيقة"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"المستفيد: خالد الغزاوي - بواسطة: أحمد المراجع"}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"تم قبول الوثائق والموافقة"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4 space-x-reverse",children:[e.jsx("div",{className:"bg-orange-100 p-2 rounded-full",children:e.jsx(ge,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"تحديث عنوان مستفيد"}),e.jsx("span",{className:"text-sm text-gray-500",children:"منذ ساعة"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"المستفيد: مريم أبو النجا - بواسطة: فاطمة الموظفة"}),e.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"يحتاج إعادة جدولة التوصيل"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4 space-x-reverse",children:[e.jsx("div",{className:"bg-indigo-100 p-2 rounded-full",children:e.jsx(Ee,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"إنشاء طرد جديد"}),e.jsx("span",{className:"text-sm text-gray-500",children:"منذ ساعتين"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"طرد ملابس شتوية - بواسطة: أحمد المشرف"}),e.jsx("p",{className:"text-xs text-indigo-600 mt-1",children:"جاهز للتوزيع"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4 space-x-reverse",children:[e.jsx("div",{className:"bg-pink-100 p-2 rounded-full",children:e.jsx(Jt,{className:"w-5 h-5 text-pink-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"تعديل بيانات مستفيد"}),e.jsx("span",{className:"text-sm text-gray-500",children:"منذ 3 ساعات"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"المستفيد: سالم أبو خاطر - بواسطة: نور الموظفة"}),e.jsx("p",{className:"text-xs text-pink-600 mt-1",children:"تم تحديث رقم الهاتف"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-6",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:e.jsx(Qe,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"إحصائيات النشاط اليومي"}),e.jsx("p",{className:"text-gray-600",children:"ملخص أنشطة اليوم"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"طرود مسلمة"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:"23"})]}),e.jsx(ne,{className:"w-8 h-8 text-green-600"})]})}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"مستفيدين جدد"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:"8"})]}),e.jsx(Ms,{className:"w-8 h-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-800",children:"تحققات مكتملة"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:"12"})]}),e.jsx(Ye,{className:"w-8 h-8 text-purple-600"})]})}),e.jsx("div",{className:"bg-orange-50 p-4 rounded-xl border border-orange-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-800",children:"تحديثات البيانات"}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:"5"})]}),e.jsx(Jt,{className:"w-8 h-8 text-orange-600"})]})})]})]})]})}function vj({template:t,onSave:s,onCancel:r,isCopy:i=!1}){const{logError:o,logInfo:c}=Bt(),[u,h]=E.useState({name:"",type:"",organization_id:"",description:"",contents:[],estimatedCost:0,totalWeight:0}),[x,j]=E.useState({}),[w,T]=E.useState(!1),[S,N]=E.useState(null),P=!!t&&!i;E.useEffect(()=>{t&&(P||i)&&h({name:i?`${t.name} (نسخة)`:t.name||"",type:t.type||"",organization_id:t.organization_id||"",description:t.description||"",contents:t.contents||[],estimatedCost:t.estimatedCost||0,totalWeight:t.totalWeight||0})},[t,P,i]);const g=Ht.map(I=>({value:I.id,label:I.name})),M=[{value:"food",label:"مواد غذائية"},{value:"medical",label:"طبية"},{value:"clothing",label:"ملابس"},{value:"hygiene",label:"نظافة"},{value:"emergency",label:"طوارئ"}],v=(I,W)=>{h(z=>({...z,[I]:W})),x[I]&&j(z=>({...z,[I]:""}))},y=(I,W,z)=>{const Q=[...u.contents];Q[I]={...Q[I],[W]:z},h(de=>({...de,contents:Q,totalWeight:Q.reduce((je,Y)=>je+(Y.weight||0),0)}))},k=()=>{h(I=>({...I,contents:[...I.contents,{id:`item-${Date.now()}`,name:"",quantity:0,unit:"",weight:0}]}))},C=I=>{const W=u.contents.filter((z,Q)=>Q!==I);h(z=>({...z,contents:W,totalWeight:W.reduce((Q,de)=>Q+(de.weight||0),0)}))},R=()=>{const I={};return u.name.trim()||(I.name="اسم القالب مطلوب"),u.type||(I.type="نوع القالب مطلوب"),u.organization_id||(I.organization_id="المؤسسة المانحة مطلوبة"),u.estimatedCost<=0&&(I.estimatedCost="التكلفة المقدرة يجب أن تكون أكبر من صفر"),u.contents.length===0?I.contents="يجب إضافة عناصر إلى محتويات الطرد":u.contents.forEach((W,z)=>{W.name.trim()||(I[`contents[${z}].name`]="اسم العنصر مطلوب"),W.quantity<=0&&(I[`contents[${z}].quantity`]="الكمية يجب أن تكون أكبر من صفر"),W.unit.trim()||(I[`contents[${z}].unit`]="الوحدة مطلوبة"),W.weight<=0&&(I[`contents[${z}].weight`]="الوزن يجب أن يكون أكبر من صفر")}),j(I),Object.keys(I).length===0},O=async I=>{if(I.preventDefault(),!R()){o(new Error("فشل في التحقق من صحة البيانات"),"PackageTemplateForm");return}T(!0),N(null);try{await new Promise(W=>setTimeout(W,500)),s(u),c(`تم محاكاة حفظ قالب الطرد: ${u.name}`,"PackageTemplateForm")}catch(W){const z=W instanceof Error?W.message:"خطأ غير معروف";N(z),o(new Error(z),"PackageTemplateForm")}finally{T(!1)}},p=w;return e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("form",{onSubmit:O,className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 p-4 rounded-xl w-fit mx-auto mb-4",children:e.jsx(Ee,{className:"w-6 h-6 text-blue-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:P?"تعديل قالب الطرد":i?"نسخ قالب الطرد":"إضافة قالب طرد جديد"}),e.jsx("p",{className:"text-gray-600 mt-2",children:P?"تحديث معلومات قالب الطرد في النظام":i?"إنشاء نسخة جديدة من قالب موجود":"إضافة قالب طرد جديد لتسهيل عمليات التوزيع"})]}),S&&e.jsxs(V,{className:"bg-red-50 border-red-200",padding:"sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(ge,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-medium text-red-800",children:"خطأ في حفظ البيانات:"})]}),e.jsx("p",{className:"text-red-700 mt-2 text-sm",children:S})]}),e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(Ee,{className:"w-4 h-4 ml-2 text-blue-600"}),"معلومات القالب الأساسية"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(be,{label:"اسم القالب *",type:"text",value:u.name,onChange:I=>v("name",I.target.value),placeholder:"مثال: طرد رمضان كريم 2024",error:x.name,required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع القالب *"}),e.jsxs("select",{value:u.type,onChange:I=>v("type",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"اختر النوع"}),M.map(I=>e.jsx("option",{value:I.value,children:I.label},I.value))]}),x.type&&e.jsxs("p",{className:"text-red-600 text-sm mt-1 flex items-center",children:[e.jsx(ge,{className:"w-4 h-4 ml-1"}),x.type]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المؤسسة المانحة *"}),e.jsxs("select",{value:u.organization_id,onChange:I=>v("organization_id",I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"اختر المؤسسة"}),g.map(I=>e.jsx("option",{value:I.value,children:I.label},I.value))]}),x.organization_id&&e.jsxs("p",{className:"text-red-600 text-sm mt-1 flex items-center",children:[e.jsx(ge,{className:"w-4 h-4 ml-1"}),x.organization_id]})]}),e.jsx(be,{label:"التكلفة المقدرة (₪) *",type:"number",value:u.estimatedCost,onChange:I=>v("estimatedCost",parseFloat(I.target.value)||0),placeholder:"مثال: 50",error:x.estimatedCost,required:!0}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(be,{label:"الوصف",type:"textarea",value:u.description,onChange:I=>v("description",I.target.value),placeholder:"وصف تفصيلي لمحتويات الطرد أو الغرض منه...",rows:3})})]})]}),e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(jy,{className:"w-4 h-4 ml-2 text-green-600"}),"محتويات الطرد"]}),u.contents.map((I,W)=>e.jsxs("div",{className:"grid md:grid-cols-6 gap-4 mb-4 p-4 border border-gray-200 rounded-lg relative",children:[e.jsx(be,{label:"اسم العنصر *",type:"text",value:I.name,onChange:z=>y(W,"name",z.target.value),placeholder:"مثال: أرز بسمتي",error:x[`contents[${W}].name`],required:!0}),e.jsx(be,{label:"الكمية *",type:"number",value:I.quantity,onChange:z=>y(W,"quantity",parseInt(z.target.value)||0),placeholder:"مثال: 5",error:x[`contents[${W}].quantity`],required:!0}),e.jsx(be,{label:"الوحدة *",type:"text",value:I.unit,onChange:z=>y(W,"unit",z.target.value),placeholder:"مثال: كيلو",error:x[`contents[${W}].unit`],required:!0}),e.jsx(be,{label:"الوزن (كيلو) *",type:"number",value:I.weight,onChange:z=>y(W,"weight",parseFloat(z.target.value)||0),placeholder:"مثال: 5",error:x[`contents[${W}].weight`],required:!0}),e.jsx(be,{label:"ملاحظات",type:"text",value:I.notes,onChange:z=>y(W,"notes",z.target.value),placeholder:"ملاحظات خاصة بالعنصر"}),e.jsx("div",{className:"flex items-end justify-center",children:e.jsx(H,{type:"button",variant:"danger",icon:nr,onClick:()=>C(W),className:"w-full",children:"حذف"})})]},I.id||W)),x.contents&&e.jsxs("p",{className:"text-red-600 text-sm mt-1 flex items-center mb-4",children:[e.jsx(ge,{className:"w-4 h-4 ml-1"}),x.contents]}),e.jsx(H,{type:"button",variant:"secondary",icon:Lt,onClick:k,className:"w-full",children:"إضافة عنصر جديد"}),e.jsx("div",{className:"mt-6 text-right",children:e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["الوزن الإجمالي: ",u.totalWeight.toFixed(2)," كيلو"]})})]}),e.jsx(V,{className:"bg-gray-50",children:e.jsxs("div",{className:"flex space-x-4 space-x-reverse justify-end",children:[e.jsx(H,{variant:"secondary",icon:Ct,iconPosition:"right",onClick:r,disabled:p,children:"إلغاء"}),e.jsx(H,{variant:"primary",icon:p?void 0:ir,iconPosition:"right",type:"submit",disabled:p,loading:p,children:P?"حفظ التغييرات":i?"نسخ القالب":"إضافة القالب"})]})}),e.jsx(V,{className:"bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[e.jsx(ne,{className:"w-5 h-5 text-blue-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-3",children:"تعليمات مهمة"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-2",children:[e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"تأكد من إدخال جميع الحقول المطلوبة."})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"يجب أن تكون التكلفة المقدرة والوزن أكبر من صفر."})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"يمكنك إضافة عدة عناصر إلى محتويات الطرد."})]})]})]})]})})]})})}function yj({loggedInUser:t}){var Le,b,re;const[s,r]=E.useState(""),[i,o]=E.useState("all"),[c,u]=E.useState("all"),[h,x]=E.useState("all"),[j,w]=E.useState(!1),[T,S]=E.useState("add"),[N,P]=E.useState(null),{logError:g,logInfo:M}=Bt(),[v,y]=E.useState(!1),[k,C]=E.useState(null),[R,O]=E.useState(ks),p=Ht,I=()=>{console.log("تحديث البيانات الوهمية"),O([...ks])},W=async Z=>{const pe={id:`template-${Date.now()}`,name:Z.name||"",type:Z.type||"food",organization_id:Z.organization_id||"",description:Z.description||"",contents:Z.contents||[],status:"draft",createdAt:new Date().toISOString(),usageCount:0,totalWeight:Z.totalWeight||0,estimatedCost:Z.estimatedCost||0};return ks.unshift(pe),O([...ks]),M(`تم إضافة قالب: ${pe.name}`,"PackageListPage"),!0},z=async(Z,pe)=>(M(`محاكاة إضافة قالب: ${pe.name}`,"PackageListPage"),!0),Q=async Z=>{const pe=ks.length,Me=ks.filter(Pe=>Pe.id!==Z);return ks.splice(0,ks.length,...Me),O([...ks]),M(`تم حذف القالب: ${Z}`,"PackageListPage"),ks.length<pe},de=R.filter(Z=>{const pe=Z.name.toLowerCase().includes(s.toLowerCase())||Z.description.toLowerCase().includes(s.toLowerCase()),Me=i==="all"||Z.type===i,Pe=c==="all"||Z.status===c,Ze=h==="all"||Z.organization_id===h;return pe&&Me&&Pe&&Ze}),je=R.length,Y=R.filter(Z=>Z.status==="active").length,_=R.filter(Z=>Z.status==="draft").length,G=R.reduce((Z,pe)=>Z+pe.usageCount,0),ie=()=>{S("add"),P(null),w(!0)},$=Z=>{S("edit"),P(Z),w(!0)},F=Z=>{S("view"),P(Z),w(!0)},q=Z=>{S("copy"),P(Z),w(!0)},se=async Z=>{if(confirm(`هل أنت متأكد من حذف القالب "${Z.name}"؟`))try{await Q(Z.id)?M(`تم حذف القالب: ${Z.name}`,"PackageListPage"):g(new Error(`فشل حذف القالب: ${Z.name}`),"PackageListPage")}catch(pe){g(pe,"PackageListPage")}},D=async Z=>{await z(Z.id,{status:"active"}),M(`تم تفعيل القالب: ${Z.name}`,"PackageListPage"),I()},me=async Z=>{await z(Z.id,{status:"inactive"}),M(`تم إلغاء تفعيل القالب: ${Z.name}`,"PackageListPage"),I()},oe=Z=>{switch(Z){case"food":return"🍚";case"medical":return"💊";case"clothing":return"👕";case"hygiene":return"🧼";case"emergency":return"🚨";default:return"📦"}},B=Z=>{switch(Z){case"food":return"bg-orange-100 text-orange-800";case"medical":return"bg-red-100 text-red-800";case"clothing":return"bg-purple-100 text-purple-800";case"hygiene":return"bg-blue-100 text-blue-800";case"emergency":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ce=Z=>{switch(Z){case"active":return"bg-green-100 text-green-800";case"draft":return"bg-yellow-100 text-yellow-800";case"inactive":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},U=Z=>{switch(Z){case"active":return"نشط";case"draft":return"مسودة";case"inactive":return"غير نشط";default:return"غير محدد"}},he=()=>{const Z={date:new Date().toISOString(),totalTemplates:je,activeTemplates:Y,templates:de.map(X=>{var xe,ke;return{name:X.name,type:X.type,organization:(xe=p.find(Re=>Re.id===X.organization_id))==null?void 0:xe.name,usage_count:X.usageCount,estimated_cost:X.estimatedCost,total_weight:X.totalWeight,items_count:((ke=X.contents)==null?void 0:ke.length)||0}})},pe=JSON.stringify(Z,null,2),Me=new Blob([pe],{type:"application/json"}),Pe=URL.createObjectURL(Me),Ze=document.createElement("a");Ze.href=Pe,Ze.download=`قوالب_الطرود_${new Date().toISOString().split("T")[0]}.json`,Ze.click(),URL.revokeObjectURL(Pe),alert("تم تصدير قوالب الطرود بنجاح")};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-blue-600",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:["البيانات الوهمية محملة - ",R.length," قالب من ",p.length," مؤسسة"]})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[e.jsxs("button",{onClick:he,className:"bg-green-600 text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-green-700 transition-colors flex items-center",children:[e.jsx(st,{className:"w-4 h-4 ml-2"}),"تصدير القوالب"]}),e.jsxs("button",{onClick:ie,className:"bg-blue-600 text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx(Lt,{className:"w-4 h-4 ml-2"}),"إضافة قالب جديد"]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Tt,{className:"w-5 h-5 absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"البحث في القوالب...",value:s,onChange:Z=>r(Z.target.value),className:"w-full pr-12 pl-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("div",{children:e.jsxs("select",{value:i,onChange:Z=>o(Z.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع الأنواع"}),e.jsx("option",{value:"food",children:"مواد غذائية"}),e.jsx("option",{value:"medical",children:"طبية"}),e.jsx("option",{value:"clothing",children:"ملابس"}),e.jsx("option",{value:"hygiene",children:"نظافة"}),e.jsx("option",{value:"emergency",children:"طوارئ"})]})}),e.jsx("div",{children:e.jsxs("select",{value:c,onChange:Z=>u(Z.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع الحالات"}),e.jsx("option",{value:"active",children:"نشط"}),e.jsx("option",{value:"draft",children:"مسودة"}),e.jsx("option",{value:"inactive",children:"غير نشط"})]})}),e.jsx("div",{children:e.jsxs("select",{value:h,onChange:Z=>x(Z.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع المؤسسات"}),p.map(Z=>e.jsx("option",{value:Z.id,children:Z.name},Z.id))]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"إجمالي القوالب"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:je})]}),e.jsx("div",{className:"bg-blue-100 p-4 rounded-2xl",children:e.jsx(Ee,{className:"w-8 h-8 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"قوالب نشطة"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Y})]}),e.jsx("div",{className:"bg-green-100 p-4 rounded-2xl",children:e.jsx(ne,{className:"w-8 h-8 text-green-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"مسودات"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:_})]}),e.jsx("div",{className:"bg-yellow-100 p-4 rounded-2xl",children:e.jsx($e,{className:"w-8 h-8 text-yellow-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"إجمالي الاستخدام"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:G})]}),e.jsx("div",{className:"bg-purple-100 p-4 rounded-2xl",children:e.jsx(ss,{className:"w-8 h-8 text-purple-600"})})]})})]}),!v&&!k&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:de.length>0?de.map(Z=>{var pe,Me,Pe;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"text-3xl",children:oe(Z.type)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:Z.name}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${B(Z.type)}`,children:Z.type==="food"?"مواد غذائية":Z.type==="medical"?"طبية":Z.type==="clothing"?"ملابس":Z.type==="hygiene"?"نظافة":"طوارئ"})]})]}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${ce(Z.status)}`,children:U(Z.status)})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:Z.description}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[" ",e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-blue-600",children:((pe=Z.items)==null?void 0:pe.length)||Z.contents.length}),e.jsx("p",{className:"text-xs text-gray-600",children:"عناصر"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-green-600",children:((Me=Z.totalWeight)==null?void 0:Me.toFixed(1))||0}),e.jsx("p",{className:"text-xs text-gray-600",children:"كيلو"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-purple-600",children:Z.estimatedCost}),e.jsx("p",{className:"text-xs text-gray-600",children:"شيكل"})]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(ot,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:((Pe=p.find(Ze=>Ze.id===Z.organization_id))==null?void 0:Pe.name)||"غير محدد"})]}),Z.usageCount>0&&e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mt-2",children:[e.jsx(Es,{className:"w-4 h-4 text-yellow-500"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["استُخدم ",Z.usageCount," مرة"]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-100",children:[e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsxs("button",{onClick:()=>F(Z),className:"flex-1 bg-blue-600 text-white py-2 px-3 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors flex items-center justify-center",children:[e.jsx(vt,{className:"w-4 h-4 ml-1"}),"عرض"]}),e.jsxs("button",{onClick:()=>$(Z),className:"flex-1 bg-green-600 text-white py-2 px-3 rounded-lg text-sm font-medium hover:bg-green-700 transition-colors flex items-center justify-center",children:[e.jsx(Jt,{className:"w-4 h-4 ml-1"}),"تعديل"]}),e.jsx("button",{onClick:()=>q(Z),className:"bg-gray-600 text-white py-2 px-3 rounded-lg text-sm font-medium hover:bg-gray-700 transition-colors",title:"نسخ القالب",children:e.jsx(Kc,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse mt-2",children:[Z.status==="active"?e.jsx("button",{onClick:()=>me(Z),className:"flex-1 bg-orange-600 text-white py-2 px-3 rounded-lg text-sm font-medium hover:bg-orange-700 transition-colors",children:"إلغاء التفعيل"}):e.jsx("button",{onClick:()=>D(Z),className:"flex-1 bg-green-600 text-white py-2 px-3 rounded-lg text-sm font-medium hover:bg-green-700 transition-colors",children:"تفعيل"}),e.jsx("button",{onClick:()=>se(Z),className:"bg-red-600 text-white py-2 px-3 rounded-lg text-sm font-medium hover:bg-red-700 transition-colors",title:"حذف القالب",children:e.jsx(nr,{className:"w-4 h-4"})})]})]})]},Z.id)}):e.jsx("div",{className:"col-span-full bg-gray-50 border border-gray-200 rounded-2xl p-12",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(Ee,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:s||i!=="all"||c!=="all"||h!=="all"?"لا توجد قوالب مطابقة للفلاتر":"لا توجد قوالب طرود"}),e.jsx("p",{className:"text-sm mt-2",children:s||i!=="all"||c!=="all"||h!=="all"?"جرب تعديل الفلاتر أو مصطلح البحث":"ابدأ بإضافة قالب طرد جديد"})]})})}),j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",dir:"rtl",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-4xl mx-4 max-h-[95vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:T==="add"?"إضافة قالب طرد جديد":T==="edit"?"تعديل قالب الطرد":T==="copy"?"نسخ قالب الطرد":"عرض تفاصيل القالب"}),e.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:"✕"})]}),(T==="add"||T==="edit"||T==="copy")&&e.jsx(vj,{template:T==="add"?null:N,onSave:async Z=>{try{T==="add"||T==="copy"?(await W(Z),M(`تم ${T==="copy"?"نسخ":"إضافة"} القالب بنجاح: ${Z.name}`,"PackageListPage")):T==="edit"&&N&&(await z(N.id,Z),M(`تم تحديث القالب بنجاح: ${Z.name}`,"PackageListPage")),w(!1),P(null)}catch(pe){g(pe,"PackageListPage")}},onCancel:()=>{w(!1),P(null)},isCopy:T==="copy"}),T==="view"&&N&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-6 rounded-xl border border-blue-200",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"معلومات القالب"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"اسم القالب:"}),e.jsx("span",{className:"font-medium text-gray-900",children:N.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"النوع:"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${B(N.type)}`,children:N.type==="food"?"مواد غذائية":N.type==="medical"?"طبية":N.type==="clothing"?"ملابس":N.type==="hygiene"?"نظافة":"طوارئ"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"المؤسسة:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[" ",((Le=p.find(Z=>Z.id===N.organization_id))==null?void 0:Le.name)||"غير محدد"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"الحالة:"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${ce(N.status)}`,children:U(N.status)})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"إحصائيات الاستخدام"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[" ",e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"عدد مرات الاستخدام:"}),e.jsx("span",{className:"font-medium text-gray-900",children:N.usageCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"الوزن الإجمالي:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[((b=N.totalWeight)==null?void 0:b.toFixed(1))||0," كيلو"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"التكلفة المتوقعة:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[N.estimatedCost," ₪"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"تاريخ الإنشاء:"}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(N.createdAt).toLocaleDateString("ar-SA")})]})]})]})]}),N.description&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"الوصف"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:N.description})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"محتويات الطرد"}),e.jsx("div",{className:"space-y-3",children:((re=N.contents)==null?void 0:re.map((Z,pe)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-bold text-blue-600",children:pe+1})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:Z.name}),Z.notes&&e.jsx("p",{className:"text-xs text-gray-500",children:Z.notes})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[Z.quantity," ",Z.unit]}),Z.weight&&e.jsxs("p",{className:"text-xs text-gray-500",children:[Z.weight," كيلو"]})]})]},Z.id||pe)))||[]})]}),e.jsx("div",{className:"p-6 bg-gray-50 border-t border-gray-100",children:e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsxs("button",{onClick:()=>$(N),className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg text-sm font-medium hover:bg-green-700 transition-colors flex items-center justify-center",children:[e.jsx(Jt,{className:"w-4 h-4 ml-2"}),"تعديل القالب"]}),e.jsxs("button",{onClick:()=>q(N),className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors flex items-center justify-center",children:[e.jsx(Kc,{className:"w-4 h-4 ml-2"}),"نسخ القالب"]})]})})]})]})}),R.length===0&&e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-2xl p-12",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(Ee,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"لا توجد قوالب طرود"}),e.jsx("p",{className:"text-sm mt-2",children:"ابدأ بإضافة قالب طرد جديد"}),e.jsxs("button",{onClick:ie,className:"mt-4 bg-blue-600 text-white px-6 py-3 rounded-xl font-medium hover:bg-blue-700 transition-colors flex items-center mx-auto",children:[e.jsx(Lt,{className:"w-4 h-4 ml-2"}),"إضافة قالب جديد"]})]})})]})}function f0(t,s){const r=E.useRef(s);E.useEffect(function(){s!==r.current&&t.attributionControl!=null&&(r.current!=null&&t.attributionControl.removeAttribution(r.current),s!=null&&t.attributionControl.addAttribution(s)),r.current=s},[t,s])}const jj=1;function Nj(t){return Object.freeze({__version:jj,map:t})}function bj(t,s){return Object.freeze({...t,...s})}const g0=E.createContext(null),v0=g0.Provider;function y0(){const t=E.useContext(g0);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function wj(t){function s(r,i){const{instance:o,context:c}=t(r).current;return E.useImperativeHandle(i,()=>o),r.children==null?null:tn.createElement(v0,{value:c},r.children)}return E.forwardRef(s)}function _j(t){function s(r,i){const[o,c]=E.useState(!1),{instance:u}=t(r,c).current;E.useImperativeHandle(i,()=>u),E.useEffect(function(){o&&u.update()},[u,o,r.children]);const h=u._contentNode;return h?Mp.createPortal(r.children,h):null}return E.forwardRef(s)}function kj(t){function s(r,i){const{instance:o}=t(r).current;return E.useImperativeHandle(i,()=>o),null}return E.forwardRef(s)}function j0(t,s){const r=E.useRef();E.useEffect(function(){return s!=null&&t.instance.on(s),r.current=s,function(){r.current!=null&&t.instance.off(r.current),r.current=null}},[t,s])}function nu(t,s){const r=t.pane??s.pane;return r?{...t,pane:r}:t}function Sj(t,s){return function(i,o){const c=y0(),u=t(nu(i,c),c);return f0(c.map,i.attribution),j0(u.current,i.eventHandlers),s(u.current,c,i,o),u}}var sd={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,s){(function(r,i){i(s)})($f,function(r){var i="1.9.4";function o(n){var a,l,d,m;for(l=1,d=arguments.length;l<d;l++){m=arguments[l];for(a in m)n[a]=m[a]}return n}var c=Object.create||function(){function n(){}return function(a){return n.prototype=a,new n}}();function u(n,a){var l=Array.prototype.slice;if(n.bind)return n.bind.apply(n,l.call(arguments,1));var d=l.call(arguments,2);return function(){return n.apply(a,d.length?d.concat(l.call(arguments)):arguments)}}var h=0;function x(n){return"_leaflet_id"in n||(n._leaflet_id=++h),n._leaflet_id}function j(n,a,l){var d,m,f,A;return A=function(){d=!1,m&&(f.apply(l,m),m=!1)},f=function(){d?m=arguments:(n.apply(l,arguments),setTimeout(A,a),d=!0)},f}function w(n,a,l){var d=a[1],m=a[0],f=d-m;return n===d&&l?n:((n-m)%f+f)%f+m}function T(){return!1}function S(n,a){if(a===!1)return n;var l=Math.pow(10,a===void 0?6:a);return Math.round(n*l)/l}function N(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function P(n){return N(n).split(/\s+/)}function g(n,a){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?c(n.options):{});for(var l in a)n.options[l]=a[l];return n.options}function M(n,a,l){var d=[];for(var m in n)d.push(encodeURIComponent(l?m.toUpperCase():m)+"="+encodeURIComponent(n[m]));return(!a||a.indexOf("?")===-1?"?":"&")+d.join("&")}var v=/\{ *([\w_ -]+) *\}/g;function y(n,a){return n.replace(v,function(l,d){var m=a[d];if(m===void 0)throw new Error("No value provided for variable "+l);return typeof m=="function"&&(m=m(a)),m})}var k=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function C(n,a){for(var l=0;l<n.length;l++)if(n[l]===a)return l;return-1}var R="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function O(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var p=0;function I(n){var a=+new Date,l=Math.max(0,16-(a-p));return p=a+l,window.setTimeout(n,l)}var W=window.requestAnimationFrame||O("RequestAnimationFrame")||I,z=window.cancelAnimationFrame||O("CancelAnimationFrame")||O("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function Q(n,a,l){if(l&&W===I)n.call(a);else return W.call(window,u(n,a))}function de(n){n&&z.call(window,n)}var je={__proto__:null,extend:o,create:c,bind:u,get lastId(){return h},stamp:x,throttle:j,wrapNum:w,falseFn:T,formatNum:S,trim:N,splitWords:P,setOptions:g,getParamString:M,template:y,isArray:k,indexOf:C,emptyImageUrl:R,requestFn:W,cancelFn:z,requestAnimFrame:Q,cancelAnimFrame:de};function Y(){}Y.extend=function(n){var a=function(){g(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},l=a.__super__=this.prototype,d=c(l);d.constructor=a,a.prototype=d;for(var m in this)Object.prototype.hasOwnProperty.call(this,m)&&m!=="prototype"&&m!=="__super__"&&(a[m]=this[m]);return n.statics&&o(a,n.statics),n.includes&&(_(n.includes),o.apply(null,[d].concat(n.includes))),o(d,n),delete d.statics,delete d.includes,d.options&&(d.options=l.options?c(l.options):{},o(d.options,n.options)),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){l.callInitHooks&&l.callInitHooks.call(this),this._initHooksCalled=!0;for(var f=0,A=d._initHooks.length;f<A;f++)d._initHooks[f].call(this)}},a},Y.include=function(n){var a=this.prototype.options;return o(this.prototype,n),n.options&&(this.prototype.options=a,this.mergeOptions(n.options)),this},Y.mergeOptions=function(n){return o(this.prototype.options,n),this},Y.addInitHook=function(n){var a=Array.prototype.slice.call(arguments,1),l=typeof n=="function"?n:function(){this[n].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(l),this};function _(n){if(!(typeof L>"u"||!L||!L.Mixin)){n=k(n)?n:[n];for(var a=0;a<n.length;a++)n[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var G={on:function(n,a,l){if(typeof n=="object")for(var d in n)this._on(d,n[d],a);else{n=P(n);for(var m=0,f=n.length;m<f;m++)this._on(n[m],a,l)}return this},off:function(n,a,l){if(!arguments.length)delete this._events;else if(typeof n=="object")for(var d in n)this._off(d,n[d],a);else{n=P(n);for(var m=arguments.length===1,f=0,A=n.length;f<A;f++)m?this._off(n[f]):this._off(n[f],a,l)}return this},_on:function(n,a,l,d){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(n,a,l)===!1){l===this&&(l=void 0);var m={fn:a,ctx:l};d&&(m.once=!0),this._events=this._events||{},this._events[n]=this._events[n]||[],this._events[n].push(m)}},_off:function(n,a,l){var d,m,f;if(this._events&&(d=this._events[n],!!d)){if(arguments.length===1){if(this._firingCount)for(m=0,f=d.length;m<f;m++)d[m].fn=T;delete this._events[n];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var A=this._listens(n,a,l);if(A!==!1){var K=d[A];this._firingCount&&(K.fn=T,this._events[n]=d=d.slice()),d.splice(A,1)}}},fire:function(n,a,l){if(!this.listens(n,l))return this;var d=o({},a,{type:n,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var m=this._events[n];if(m){this._firingCount=this._firingCount+1||1;for(var f=0,A=m.length;f<A;f++){var K=m[f],J=K.fn;K.once&&this.off(n,J,K.ctx),J.call(K.ctx||this,d)}this._firingCount--}}return l&&this._propagateEvent(d),this},listens:function(n,a,l,d){typeof n!="string"&&console.warn('"string" type argument expected');var m=a;typeof a!="function"&&(d=!!a,m=void 0,l=void 0);var f=this._events&&this._events[n];if(f&&f.length&&this._listens(n,m,l)!==!1)return!0;if(d){for(var A in this._eventParents)if(this._eventParents[A].listens(n,a,l,d))return!0}return!1},_listens:function(n,a,l){if(!this._events)return!1;var d=this._events[n]||[];if(!a)return!!d.length;l===this&&(l=void 0);for(var m=0,f=d.length;m<f;m++)if(d[m].fn===a&&d[m].ctx===l)return m;return!1},once:function(n,a,l){if(typeof n=="object")for(var d in n)this._on(d,n[d],a,!0);else{n=P(n);for(var m=0,f=n.length;m<f;m++)this._on(n[m],a,l,!0)}return this},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[x(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[x(n)],this},_propagateEvent:function(n){for(var a in this._eventParents)this._eventParents[a].fire(n.type,o({layer:n.target,propagatedFrom:n.target},n),!0)}};G.addEventListener=G.on,G.removeEventListener=G.clearAllEventListeners=G.off,G.addOneTimeEventListener=G.once,G.fireEvent=G.fire,G.hasEventListeners=G.listens;var ie=Y.extend(G);function $(n,a,l){this.x=l?Math.round(n):n,this.y=l?Math.round(a):a}var F=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};$.prototype={clone:function(){return new $(this.x,this.y)},add:function(n){return this.clone()._add(q(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(q(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new $(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new $(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=F(this.x),this.y=F(this.y),this},distanceTo:function(n){n=q(n);var a=n.x-this.x,l=n.y-this.y;return Math.sqrt(a*a+l*l)},equals:function(n){return n=q(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=q(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function q(n,a,l){return n instanceof $?n:k(n)?new $(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new $(n.x,n.y):new $(n,a,l)}function se(n,a){if(n)for(var l=a?[n,a]:n,d=0,m=l.length;d<m;d++)this.extend(l[d])}se.prototype={extend:function(n){var a,l;if(!n)return this;if(n instanceof $||typeof n[0]=="number"||"x"in n)a=l=q(n);else if(n=D(n),a=n.min,l=n.max,!a||!l)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=l.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(l.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(l.y,this.max.y)),this},getCenter:function(n){return q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return q(this.min.x,this.max.y)},getTopRight:function(){return q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var a,l;return typeof n[0]=="number"||n instanceof $?n=q(n):n=D(n),n instanceof se?(a=n.min,l=n.max):a=l=n,a.x>=this.min.x&&l.x<=this.max.x&&a.y>=this.min.y&&l.y<=this.max.y},intersects:function(n){n=D(n);var a=this.min,l=this.max,d=n.min,m=n.max,f=m.x>=a.x&&d.x<=l.x,A=m.y>=a.y&&d.y<=l.y;return f&&A},overlaps:function(n){n=D(n);var a=this.min,l=this.max,d=n.min,m=n.max,f=m.x>a.x&&d.x<l.x,A=m.y>a.y&&d.y<l.y;return f&&A},isValid:function(){return!!(this.min&&this.max)},pad:function(n){var a=this.min,l=this.max,d=Math.abs(a.x-l.x)*n,m=Math.abs(a.y-l.y)*n;return D(q(a.x-d,a.y-m),q(l.x+d,l.y+m))},equals:function(n){return n?(n=D(n),this.min.equals(n.getTopLeft())&&this.max.equals(n.getBottomRight())):!1}};function D(n,a){return!n||n instanceof se?n:new se(n,a)}function me(n,a){if(n)for(var l=a?[n,a]:n,d=0,m=l.length;d<m;d++)this.extend(l[d])}me.prototype={extend:function(n){var a=this._southWest,l=this._northEast,d,m;if(n instanceof B)d=n,m=n;else if(n instanceof me){if(d=n._southWest,m=n._northEast,!d||!m)return this}else return n?this.extend(ce(n)||oe(n)):this;return!a&&!l?(this._southWest=new B(d.lat,d.lng),this._northEast=new B(m.lat,m.lng)):(a.lat=Math.min(d.lat,a.lat),a.lng=Math.min(d.lng,a.lng),l.lat=Math.max(m.lat,l.lat),l.lng=Math.max(m.lng,l.lng)),this},pad:function(n){var a=this._southWest,l=this._northEast,d=Math.abs(a.lat-l.lat)*n,m=Math.abs(a.lng-l.lng)*n;return new me(new B(a.lat-d,a.lng-m),new B(l.lat+d,l.lng+m))},getCenter:function(){return new B((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new B(this.getNorth(),this.getWest())},getSouthEast:function(){return new B(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof B||"lat"in n?n=ce(n):n=oe(n);var a=this._southWest,l=this._northEast,d,m;return n instanceof me?(d=n.getSouthWest(),m=n.getNorthEast()):d=m=n,d.lat>=a.lat&&m.lat<=l.lat&&d.lng>=a.lng&&m.lng<=l.lng},intersects:function(n){n=oe(n);var a=this._southWest,l=this._northEast,d=n.getSouthWest(),m=n.getNorthEast(),f=m.lat>=a.lat&&d.lat<=l.lat,A=m.lng>=a.lng&&d.lng<=l.lng;return f&&A},overlaps:function(n){n=oe(n);var a=this._southWest,l=this._northEast,d=n.getSouthWest(),m=n.getNorthEast(),f=m.lat>a.lat&&d.lat<l.lat,A=m.lng>a.lng&&d.lng<l.lng;return f&&A},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,a){return n?(n=oe(n),this._southWest.equals(n.getSouthWest(),a)&&this._northEast.equals(n.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function oe(n,a){return n instanceof me?n:new me(n,a)}function B(n,a,l){if(isNaN(n)||isNaN(a))throw new Error("Invalid LatLng object: ("+n+", "+a+")");this.lat=+n,this.lng=+a,l!==void 0&&(this.alt=+l)}B.prototype={equals:function(n,a){if(!n)return!1;n=ce(n);var l=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return l<=(a===void 0?1e-9:a)},toString:function(n){return"LatLng("+S(this.lat,n)+", "+S(this.lng,n)+")"},distanceTo:function(n){return he.distance(this,ce(n))},wrap:function(){return he.wrapLatLng(this)},toBounds:function(n){var a=180*n/40075017,l=a/Math.cos(Math.PI/180*this.lat);return oe([this.lat-a,this.lng-l],[this.lat+a,this.lng+l])},clone:function(){return new B(this.lat,this.lng,this.alt)}};function ce(n,a,l){return n instanceof B?n:k(n)&&typeof n[0]!="object"?n.length===3?new B(n[0],n[1],n[2]):n.length===2?new B(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new B(n.lat,"lng"in n?n.lng:n.lon,n.alt):a===void 0?null:new B(n,a,l)}var U={latLngToPoint:function(n,a){var l=this.projection.project(n),d=this.scale(a);return this.transformation._transform(l,d)},pointToLatLng:function(n,a){var l=this.scale(a),d=this.transformation.untransform(n,l);return this.projection.unproject(d)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var a=this.projection.bounds,l=this.scale(n),d=this.transformation.transform(a.min,l),m=this.transformation.transform(a.max,l);return new se(d,m)},infinite:!1,wrapLatLng:function(n){var a=this.wrapLng?w(n.lng,this.wrapLng,!0):n.lng,l=this.wrapLat?w(n.lat,this.wrapLat,!0):n.lat,d=n.alt;return new B(l,a,d)},wrapLatLngBounds:function(n){var a=n.getCenter(),l=this.wrapLatLng(a),d=a.lat-l.lat,m=a.lng-l.lng;if(d===0&&m===0)return n;var f=n.getSouthWest(),A=n.getNorthEast(),K=new B(f.lat-d,f.lng-m),J=new B(A.lat-d,A.lng-m);return new me(K,J)}},he=o({},U,{wrapLng:[-180,180],R:6371e3,distance:function(n,a){var l=Math.PI/180,d=n.lat*l,m=a.lat*l,f=Math.sin((a.lat-n.lat)*l/2),A=Math.sin((a.lng-n.lng)*l/2),K=f*f+Math.cos(d)*Math.cos(m)*A*A,J=2*Math.atan2(Math.sqrt(K),Math.sqrt(1-K));return this.R*J}}),Le=6378137,b={R:Le,MAX_LATITUDE:85.0511287798,project:function(n){var a=Math.PI/180,l=this.MAX_LATITUDE,d=Math.max(Math.min(l,n.lat),-l),m=Math.sin(d*a);return new $(this.R*n.lng*a,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(n){var a=180/Math.PI;return new B((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*a,n.x*a/this.R)},bounds:function(){var n=Le*Math.PI;return new se([-n,-n],[n,n])}()};function re(n,a,l,d){if(k(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=a,this._c=l,this._d=d}re.prototype={transform:function(n,a){return this._transform(n.clone(),a)},_transform:function(n,a){return a=a||1,n.x=a*(this._a*n.x+this._b),n.y=a*(this._c*n.y+this._d),n},untransform:function(n,a){return a=a||1,new $((n.x/a-this._b)/this._a,(n.y/a-this._d)/this._c)}};function Z(n,a,l,d){return new re(n,a,l,d)}var pe=o({},he,{code:"EPSG:3857",projection:b,transformation:function(){var n=.5/(Math.PI*b.R);return Z(n,.5,-n,.5)}()}),Me=o({},pe,{code:"EPSG:900913"});function Pe(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Ze(n,a){var l="",d,m,f,A,K,J;for(d=0,f=n.length;d<f;d++){for(K=n[d],m=0,A=K.length;m<A;m++)J=K[m],l+=(m?"L":"M")+J.x+" "+J.y;l+=a?we.svg?"z":"x":""}return l||"M0 0"}var X=document.documentElement.style,xe="ActiveXObject"in window,ke=xe&&!document.addEventListener,Re="msLaunchUri"in navigator&&!("documentMode"in document),ee=As("webkit"),_e=As("android"),We=As("android 2")||As("android 3"),bt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),lr=_e&&As("Google")&&bt<537&&!("AudioNode"in window),Vs=!!window.opera,zn=!Re&&As("chrome"),Mn=As("gecko")&&!ee&&!Vs&&!xe,te=!zn&&As("safari"),qe=As("phantom"),ct="OTransition"in X,Rt=navigator.platform.indexOf("Win")===0,lu=xe&&"transition"in X,Xl="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!We,ou="MozPerspective"in X,b0=!window.L_DISABLE_3D&&(lu||Xl||ou)&&!ct&&!qe,sa=typeof orientation<"u"||As("mobile"),w0=sa&&ee,_0=sa&&Xl,cu=!window.PointerEvent&&window.MSPointerEvent,du=!!(window.PointerEvent||cu),uu="ontouchstart"in window||!!window.TouchEvent,k0=!window.L_NO_TOUCH&&(uu||du),S0=sa&&Vs,C0=sa&&Mn,P0=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,L0=function(){var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",T,a),window.removeEventListener("testPassiveEventSupport",T,a)}catch{}return n}(),T0=function(){return!!document.createElement("canvas").getContext}(),Jl=!!(document.createElementNS&&Pe("svg").createSVGRect),I0=!!Jl&&function(){var n=document.createElement("div");return n.innerHTML="<svg/>",(n.firstChild&&n.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),E0=!Jl&&function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var a=n.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),z0=navigator.platform.indexOf("Mac")===0,M0=navigator.platform.indexOf("Linux")===0;function As(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var we={ie:xe,ielt9:ke,edge:Re,webkit:ee,android:_e,android23:We,androidStock:lr,opera:Vs,chrome:zn,gecko:Mn,safari:te,phantom:qe,opera12:ct,win:Rt,ie3d:lu,webkit3d:Xl,gecko3d:ou,any3d:b0,mobile:sa,mobileWebkit:w0,mobileWebkit3d:_0,msPointer:cu,pointer:du,touch:k0,touchNative:uu,mobileOpera:S0,mobileGecko:C0,retina:P0,passiveEvents:L0,canvas:T0,svg:Jl,vml:E0,inlineSvg:I0,mac:z0,linux:M0},mu=we.msPointer?"MSPointerDown":"pointerdown",hu=we.msPointer?"MSPointerMove":"pointermove",xu=we.msPointer?"MSPointerUp":"pointerup",pu=we.msPointer?"MSPointerCancel":"pointercancel",eo={touchstart:mu,touchmove:hu,touchend:xu,touchcancel:pu},fu={touchstart:F0,touchmove:di,touchend:di,touchcancel:di},or={},gu=!1;function A0(n,a,l){return a==="touchstart"&&D0(),fu[a]?(l=fu[a].bind(this,l),n.addEventListener(eo[a],l,!1),l):(console.warn("wrong event specified:",a),T)}function O0(n,a,l){if(!eo[a]){console.warn("wrong event specified:",a);return}n.removeEventListener(eo[a],l,!1)}function B0(n){or[n.pointerId]=n}function R0(n){or[n.pointerId]&&(or[n.pointerId]=n)}function vu(n){delete or[n.pointerId]}function D0(){gu||(document.addEventListener(mu,B0,!0),document.addEventListener(hu,R0,!0),document.addEventListener(xu,vu,!0),document.addEventListener(pu,vu,!0),gu=!0)}function di(n,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var l in or)a.touches.push(or[l]);a.changedTouches=[a],n(a)}}function F0(n,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&wt(a),di(n,a)}function $0(n){var a={},l,d;for(d in n)l=n[d],a[d]=l&&l.bind?l.bind(n):l;return n=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var U0=200;function Z0(n,a){n.addEventListener("dblclick",a);var l=0,d;function m(f){if(f.detail!==1){d=f.detail;return}if(!(f.pointerType==="mouse"||f.sourceCapabilities&&!f.sourceCapabilities.firesTouchEvents)){var A=wu(f);if(!(A.some(function(J){return J instanceof HTMLLabelElement&&J.attributes.for})&&!A.some(function(J){return J instanceof HTMLInputElement||J instanceof HTMLSelectElement}))){var K=Date.now();K-l<=U0?(d++,d===2&&a($0(f))):d=1,l=K}}}return n.addEventListener("click",m),{dblclick:a,simDblclick:m}}function H0(n,a){n.removeEventListener("dblclick",a.dblclick),n.removeEventListener("click",a.simDblclick)}var to=hi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),na=hi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),yu=na==="webkitTransition"||na==="OTransition"?na+"End":"transitionend";function ju(n){return typeof n=="string"?document.getElementById(n):n}function ra(n,a){var l=n.style[a]||n.currentStyle&&n.currentStyle[a];if((!l||l==="auto")&&document.defaultView){var d=document.defaultView.getComputedStyle(n,null);l=d?d[a]:null}return l==="auto"?null:l}function Fe(n,a,l){var d=document.createElement(n);return d.className=a||"",l&&l.appendChild(d),d}function Je(n){var a=n.parentNode;a&&a.removeChild(n)}function ui(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function cr(n){var a=n.parentNode;a&&a.lastChild!==n&&a.appendChild(n)}function dr(n){var a=n.parentNode;a&&a.firstChild!==n&&a.insertBefore(n,a.firstChild)}function so(n,a){if(n.classList!==void 0)return n.classList.contains(a);var l=mi(n);return l.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(l)}function ze(n,a){if(n.classList!==void 0)for(var l=P(a),d=0,m=l.length;d<m;d++)n.classList.add(l[d]);else if(!so(n,a)){var f=mi(n);no(n,(f?f+" ":"")+a)}}function it(n,a){n.classList!==void 0?n.classList.remove(a):no(n,N((" "+mi(n)+" ").replace(" "+a+" "," ")))}function no(n,a){n.className.baseVal===void 0?n.className=a:n.className.baseVal=a}function mi(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function ds(n,a){"opacity"in n.style?n.style.opacity=a:"filter"in n.style&&V0(n,a)}function V0(n,a){var l=!1,d="DXImageTransform.Microsoft.Alpha";try{l=n.filters.item(d)}catch{if(a===1)return}a=Math.round(a*100),l?(l.Enabled=a!==100,l.Opacity=a):n.style.filter+=" progid:"+d+"(opacity="+a+")"}function hi(n){for(var a=document.documentElement.style,l=0;l<n.length;l++)if(n[l]in a)return n[l];return!1}function An(n,a,l){var d=a||new $(0,0);n.style[to]=(we.ie3d?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(l?" scale("+l+")":"")}function dt(n,a){n._leaflet_pos=a,we.any3d?An(n,a):(n.style.left=a.x+"px",n.style.top=a.y+"px")}function On(n){return n._leaflet_pos||new $(0,0)}var aa,ia,ro;if("onselectstart"in document)aa=function(){Ie(window,"selectstart",wt)},ia=function(){He(window,"selectstart",wt)};else{var la=hi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);aa=function(){if(la){var n=document.documentElement.style;ro=n[la],n[la]="none"}},ia=function(){la&&(document.documentElement.style[la]=ro,ro=void 0)}}function ao(){Ie(window,"dragstart",wt)}function io(){He(window,"dragstart",wt)}var xi,lo;function oo(n){for(;n.tabIndex===-1;)n=n.parentNode;n.style&&(pi(),xi=n,lo=n.style.outlineStyle,n.style.outlineStyle="none",Ie(window,"keydown",pi))}function pi(){xi&&(xi.style.outlineStyle=lo,xi=void 0,lo=void 0,He(window,"keydown",pi))}function Nu(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function co(n){var a=n.getBoundingClientRect();return{x:a.width/n.offsetWidth||1,y:a.height/n.offsetHeight||1,boundingClientRect:a}}var W0={__proto__:null,TRANSFORM:to,TRANSITION:na,TRANSITION_END:yu,get:ju,getStyle:ra,create:Fe,remove:Je,empty:ui,toFront:cr,toBack:dr,hasClass:so,addClass:ze,removeClass:it,setClass:no,getClass:mi,setOpacity:ds,testProp:hi,setTransform:An,setPosition:dt,getPosition:On,get disableTextSelection(){return aa},get enableTextSelection(){return ia},disableImageDrag:ao,enableImageDrag:io,preventOutline:oo,restoreOutline:pi,getSizedParentNode:Nu,getScale:co};function Ie(n,a,l,d){if(a&&typeof a=="object")for(var m in a)mo(n,m,a[m],l);else{a=P(a);for(var f=0,A=a.length;f<A;f++)mo(n,a[f],l,d)}return this}var Os="_leaflet_events";function He(n,a,l,d){if(arguments.length===1)bu(n),delete n[Os];else if(a&&typeof a=="object")for(var m in a)ho(n,m,a[m],l);else if(a=P(a),arguments.length===2)bu(n,function(K){return C(a,K)!==-1});else for(var f=0,A=a.length;f<A;f++)ho(n,a[f],l,d);return this}function bu(n,a){for(var l in n[Os]){var d=l.split(/\d/)[0];(!a||a(d))&&ho(n,d,null,null,l)}}var uo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function mo(n,a,l,d){var m=a+x(l)+(d?"_"+x(d):"");if(n[Os]&&n[Os][m])return this;var f=function(K){return l.call(d||n,K||window.event)},A=f;!we.touchNative&&we.pointer&&a.indexOf("touch")===0?f=A0(n,a,f):we.touch&&a==="dblclick"?f=Z0(n,f):"addEventListener"in n?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?n.addEventListener(uo[a]||a,f,we.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(f=function(K){K=K||window.event,po(n,K)&&A(K)},n.addEventListener(uo[a],f,!1)):n.addEventListener(a,A,!1):n.attachEvent("on"+a,f),n[Os]=n[Os]||{},n[Os][m]=f}function ho(n,a,l,d,m){m=m||a+x(l)+(d?"_"+x(d):"");var f=n[Os]&&n[Os][m];if(!f)return this;!we.touchNative&&we.pointer&&a.indexOf("touch")===0?O0(n,a,f):we.touch&&a==="dblclick"?H0(n,f):"removeEventListener"in n?n.removeEventListener(uo[a]||a,f,!1):n.detachEvent("on"+a,f),n[Os][m]=null}function Bn(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,this}function xo(n){return mo(n,"wheel",Bn),this}function oa(n){return Ie(n,"mousedown touchstart dblclick contextmenu",Bn),n._leaflet_disable_click=!0,this}function wt(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function Rn(n){return wt(n),Bn(n),this}function wu(n){if(n.composedPath)return n.composedPath();for(var a=[],l=n.target;l;)a.push(l),l=l.parentNode;return a}function _u(n,a){if(!a)return new $(n.clientX,n.clientY);var l=co(a),d=l.boundingClientRect;return new $((n.clientX-d.left)/l.x-a.clientLeft,(n.clientY-d.top)/l.y-a.clientTop)}var q0=we.linux&&we.chrome?window.devicePixelRatio:we.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ku(n){return we.edge?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/q0:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}function po(n,a){var l=a.relatedTarget;if(!l)return!0;try{for(;l&&l!==n;)l=l.parentNode}catch{return!1}return l!==n}var G0={__proto__:null,on:Ie,off:He,stopPropagation:Bn,disableScrollPropagation:xo,disableClickPropagation:oa,preventDefault:wt,stop:Rn,getPropagationPath:wu,getMousePosition:_u,getWheelDelta:ku,isExternalTarget:po,addListener:Ie,removeListener:He},Su=ie.extend({run:function(n,a,l,d){this.stop(),this._el=n,this._inProgress=!0,this._duration=l||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=On(n),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Q(this._animate,this),this._step()},_step:function(n){var a=+new Date-this._startTime,l=this._duration*1e3;a<l?this._runFrame(this._easeOut(a/l),n):(this._runFrame(1),this._complete())},_runFrame:function(n,a){var l=this._startPos.add(this._offset.multiplyBy(n));a&&l._round(),dt(this._el,l),this.fire("step")},_complete:function(){de(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),Be=ie.extend({options:{crs:pe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,a){a=g(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(ce(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=na&&we.any3d&&!we.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ie(this._proxy,yu,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,a,l){if(a=a===void 0?this._zoom:this._limitZoom(a),n=this._limitCenter(ce(n),a,this.options.maxBounds),l=l||{},this._stop(),this._loaded&&!l.reset&&l!==!0){l.animate!==void 0&&(l.zoom=o({animate:l.animate},l.zoom),l.pan=o({animate:l.animate,duration:l.duration},l.pan));var d=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,a,l.zoom):this._tryAnimatedPan(n,l.pan);if(d)return clearTimeout(this._sizeTimer),this}return this._resetView(n,a,l.pan&&l.pan.noMoveStart),this},setZoom:function(n,a){return this._loaded?this.setView(this.getCenter(),n,{zoom:a}):(this._zoom=n,this)},zoomIn:function(n,a){return n=n||(we.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+n,a)},zoomOut:function(n,a){return n=n||(we.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-n,a)},setZoomAround:function(n,a,l){var d=this.getZoomScale(a),m=this.getSize().divideBy(2),f=n instanceof $?n:this.latLngToContainerPoint(n),A=f.subtract(m).multiplyBy(1-1/d),K=this.containerPointToLatLng(m.add(A));return this.setView(K,a,{zoom:l})},_getBoundsCenterZoom:function(n,a){a=a||{},n=n.getBounds?n.getBounds():oe(n);var l=q(a.paddingTopLeft||a.padding||[0,0]),d=q(a.paddingBottomRight||a.padding||[0,0]),m=this.getBoundsZoom(n,!1,l.add(d));if(m=typeof a.maxZoom=="number"?Math.min(a.maxZoom,m):m,m===1/0)return{center:n.getCenter(),zoom:m};var f=d.subtract(l).divideBy(2),A=this.project(n.getSouthWest(),m),K=this.project(n.getNorthEast(),m),J=this.unproject(A.add(K).divideBy(2).add(f),m);return{center:J,zoom:m}},fitBounds:function(n,a){if(n=oe(n),!n.isValid())throw new Error("Bounds are not valid.");var l=this._getBoundsCenterZoom(n,a);return this.setView(l.center,l.zoom,a)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,a){return this.setView(n,this._zoom,{pan:a})},panBy:function(n,a){if(n=q(n).round(),a=a||{},!n.x&&!n.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Su,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){ze(this._mapPane,"leaflet-pan-anim");var l=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,l,a.duration||.25,a.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,a,l){if(l=l||{},l.animate===!1||!we.any3d)return this.setView(n,a,l);this._stop();var d=this.project(this.getCenter()),m=this.project(n),f=this.getSize(),A=this._zoom;n=ce(n),a=a===void 0?A:a;var K=Math.max(f.x,f.y),J=K*this.getZoomScale(A,a),ae=m.distanceTo(d)||1,fe=1.42,Ce=fe*fe;function Ae(ut){var Ci=ut?-1:1,Bf=ut?J:K,Rf=J*J-K*K+Ci*Ce*Ce*ae*ae,Df=2*Bf*Ce*ae,So=Rf/Df,im=Math.sqrt(So*So+1)-So,Ff=im<1e-9?-18:Math.log(im);return Ff}function Dt(ut){return(Math.exp(ut)-Math.exp(-ut))/2}function pt(ut){return(Math.exp(ut)+Math.exp(-ut))/2}function ms(ut){return Dt(ut)/pt(ut)}var qt=Ae(0);function fr(ut){return K*(pt(qt)/pt(qt+fe*ut))}function zf(ut){return K*(pt(qt)*ms(qt+fe*ut)-Dt(qt))/Ce}function Mf(ut){return 1-Math.pow(1-ut,1.5)}var Af=Date.now(),rm=(Ae(1)-qt)/fe,Of=l.duration?1e3*l.duration:1e3*rm*.8;function am(){var ut=(Date.now()-Af)/Of,Ci=Mf(ut)*rm;ut<=1?(this._flyToFrame=Q(am,this),this._move(this.unproject(d.add(m.subtract(d).multiplyBy(zf(Ci)/ae)),A),this.getScaleZoom(K/fr(Ci),A),{flyTo:!0})):this._move(n,a)._moveEnd(!0)}return this._moveStart(!0,l.noMoveStart),am.call(this),this},flyToBounds:function(n,a){var l=this._getBoundsCenterZoom(n,a);return this.flyTo(l.center,l.zoom,a)},setMaxBounds:function(n){return n=oe(n),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),n.isValid()?(this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(n){var a=this.options.minZoom;return this.options.minZoom=n,this._loaded&&a!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var a=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&a!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,a){this._enforcingBounds=!0;var l=this.getCenter(),d=this._limitCenter(l,this._zoom,oe(n));return l.equals(d)||this.panTo(d,a),this._enforcingBounds=!1,this},panInside:function(n,a){a=a||{};var l=q(a.paddingTopLeft||a.padding||[0,0]),d=q(a.paddingBottomRight||a.padding||[0,0]),m=this.project(this.getCenter()),f=this.project(n),A=this.getPixelBounds(),K=D([A.min.add(l),A.max.subtract(d)]),J=K.getSize();if(!K.contains(f)){this._enforcingBounds=!0;var ae=f.subtract(K.getCenter()),fe=K.extend(f).getSize().subtract(J);m.x+=ae.x<0?-fe.x:fe.x,m.y+=ae.y<0?-fe.y:fe.y,this.panTo(this.unproject(m),a),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=o({animate:!1,pan:!0},n===!0?{animate:!0}:n);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var l=this.getSize(),d=a.divideBy(2).round(),m=l.divideBy(2).round(),f=d.subtract(m);return!f.x&&!f.y?this:(n.animate&&n.pan?this.panBy(f):(n.pan&&this._rawPanBy(f),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:l}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=o({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=u(this._handleGeolocationResponse,this),l=u(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,l,n):navigator.geolocation.getCurrentPosition(a,l,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){if(this._container._leaflet_id){var a=n.code,l=n.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+l+"."})}},_handleGeolocationResponse:function(n){if(this._container._leaflet_id){var a=n.coords.latitude,l=n.coords.longitude,d=new B(a,l),m=d.toBounds(n.coords.accuracy*2),f=this._locateOptions;if(f.setView){var A=this.getBoundsZoom(m);this.setView(d,f.maxZoom?Math.min(A,f.maxZoom):A)}var K={latlng:d,bounds:m,timestamp:n.timestamp};for(var J in n.coords)typeof n.coords[J]=="number"&&(K[J]=n.coords[J]);this.fire("locationfound",K)}},addHandler:function(n,a){if(!a)return this;var l=this[n]=new a(this);return this._handlers.push(l),this.options[n]&&l.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Je(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(de(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)Je(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,a){var l="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),d=Fe("div",l,a||this._mapPane);return n&&(this._panes[n]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),a=this.unproject(n.getBottomLeft()),l=this.unproject(n.getTopRight());return new me(a,l)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,a,l){n=oe(n),l=q(l||[0,0]);var d=this.getZoom()||0,m=this.getMinZoom(),f=this.getMaxZoom(),A=n.getNorthWest(),K=n.getSouthEast(),J=this.getSize().subtract(l),ae=D(this.project(K,d),this.project(A,d)).getSize(),fe=we.any3d?this.options.zoomSnap:1,Ce=J.x/ae.x,Ae=J.y/ae.y,Dt=a?Math.max(Ce,Ae):Math.min(Ce,Ae);return d=this.getScaleZoom(Dt,d),fe&&(d=Math.round(d/(fe/100))*(fe/100),d=a?Math.ceil(d/fe)*fe:Math.floor(d/fe)*fe),Math.max(m,Math.min(f,d))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new $(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,a){var l=this._getTopLeftPoint(n,a);return new se(l,l.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,a){var l=this.options.crs;return a=a===void 0?this._zoom:a,l.scale(n)/l.scale(a)},getScaleZoom:function(n,a){var l=this.options.crs;a=a===void 0?this._zoom:a;var d=l.zoom(n*l.scale(a));return isNaN(d)?1/0:d},project:function(n,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(ce(n),a)},unproject:function(n,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(q(n),a)},layerPointToLatLng:function(n){var a=q(n).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(n){var a=this.project(ce(n))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(ce(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(oe(n))},distance:function(n,a){return this.options.crs.distance(ce(n),ce(a))},containerPointToLayerPoint:function(n){return q(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return q(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var a=this.containerPointToLayerPoint(q(n));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(n)))},mouseEventToContainerPoint:function(n){return _u(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var a=this._container=ju(n);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ie(a,"scroll",this._onScroll,this),this._containerId=x(a)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&we.any3d,ze(n,"leaflet-container"+(we.touch?" leaflet-touch":"")+(we.retina?" leaflet-retina":"")+(we.ielt9?" leaflet-oldie":"")+(we.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=ra(n,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),dt(this._mapPane,new $(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ze(n.markerPane,"leaflet-zoom-hide"),ze(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,a,l){dt(this._mapPane,new $(0,0));var d=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var m=this._zoom!==a;this._moveStart(m,l)._move(n,a)._moveEnd(m),this.fire("viewreset"),d&&this.fire("load")},_moveStart:function(n,a){return n&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(n,a,l,d){a===void 0&&(a=this._zoom);var m=this._zoom!==a;return this._zoom=a,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),d?l&&l.pinch&&this.fire("zoom",l):((m||l&&l.pinch)&&this.fire("zoom",l),this.fire("move",l)),this},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return de(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){dt(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[x(this._container)]=this;var a=n?He:Ie;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),we.any3d&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){de(this._resizeRequest),this._resizeRequest=Q(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,a){for(var l=[],d,m=a==="mouseout"||a==="mouseover",f=n.target||n.srcElement,A=!1;f;){if(d=this._targets[x(f)],d&&(a==="click"||a==="preclick")&&this._draggableMoved(d)){A=!0;break}if(d&&d.listens(a,!0)&&(m&&!po(f,n)||(l.push(d),m))||f===this._container)break;f=f.parentNode}return!l.length&&!A&&!m&&this.listens(a,!0)&&(l=[this]),l},_isClickDisabled:function(n){for(;n&&n!==this._container;){if(n._leaflet_disable_click)return!0;n=n.parentNode}},_handleDOMEvent:function(n){var a=n.target||n.srcElement;if(!(!this._loaded||a._leaflet_disable_events||n.type==="click"&&this._isClickDisabled(a))){var l=n.type;l==="mousedown"&&oo(a),this._fireDOMEvent(n,l)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,a,l){if(n.type==="click"){var d=o({},n);d.type="preclick",this._fireDOMEvent(d,d.type,l)}var m=this._findEventTargets(n,a);if(l){for(var f=[],A=0;A<l.length;A++)l[A].listens(a,!0)&&f.push(l[A]);m=f.concat(m)}if(m.length){a==="contextmenu"&&wt(n);var K=m[0],J={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var ae=K.getLatLng&&(!K._radius||K._radius<=10);J.containerPoint=ae?this.latLngToContainerPoint(K.getLatLng()):this.mouseEventToContainerPoint(n),J.layerPoint=this.containerPointToLayerPoint(J.containerPoint),J.latlng=ae?K.getLatLng():this.layerPointToLatLng(J.layerPoint)}for(A=0;A<m.length;A++)if(m[A].fire(a,J,!0),J.originalEvent._stopped||m[A].options.bubblingMouseEvents===!1&&C(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,a=this._handlers.length;n<a;n++)this._handlers[n].disable()},whenReady:function(n,a){return this._loaded?n.call(a||this,{target:this}):this.on("load",n,a),this},_getMapPanePos:function(){return On(this._mapPane)||new $(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,a){var l=n&&a!==void 0?this._getNewPixelOrigin(n,a):this.getPixelOrigin();return l.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,a){var l=this.getSize()._divideBy(2);return this.project(n,a)._subtract(l)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,a,l){var d=this._getNewPixelOrigin(l,a);return this.project(n,a)._subtract(d)},_latLngBoundsToNewLayerBounds:function(n,a,l){var d=this._getNewPixelOrigin(l,a);return D([this.project(n.getSouthWest(),a)._subtract(d),this.project(n.getNorthWest(),a)._subtract(d),this.project(n.getSouthEast(),a)._subtract(d),this.project(n.getNorthEast(),a)._subtract(d)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,a,l){if(!l)return n;var d=this.project(n,a),m=this.getSize().divideBy(2),f=new se(d.subtract(m),d.add(m)),A=this._getBoundsOffset(f,l,a);return Math.abs(A.x)<=1&&Math.abs(A.y)<=1?n:this.unproject(d.add(A),a)},_limitOffset:function(n,a){if(!a)return n;var l=this.getPixelBounds(),d=new se(l.min.add(n),l.max.add(n));return n.add(this._getBoundsOffset(d,a))},_getBoundsOffset:function(n,a,l){var d=D(this.project(a.getNorthEast(),l),this.project(a.getSouthWest(),l)),m=d.min.subtract(n.min),f=d.max.subtract(n.max),A=this._rebound(m.x,-f.x),K=this._rebound(m.y,-f.y);return new $(A,K)},_rebound:function(n,a){return n+a>0?Math.round(n-a)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(a))},_limitZoom:function(n){var a=this.getMinZoom(),l=this.getMaxZoom(),d=we.any3d?this.options.zoomSnap:1;return d&&(n=Math.round(n/d)*d),Math.max(a,Math.min(l,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){it(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,a){var l=this._getCenterOffset(n)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(l)?!1:(this.panBy(l,a),!0)},_createAnimProxy:function(){var n=this._proxy=Fe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(a){var l=to,d=this._proxy.style[l];An(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),d===this._proxy.style[l]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Je(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),a=this.getZoom();An(this._proxy,this.project(n,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,a,l){if(this._animatingZoom)return!0;if(l=l||{},!this._zoomAnimated||l.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(a),m=this._getCenterOffset(n)._divideBy(1-1/d);return l.animate!==!0&&!this.getSize().contains(m)?!1:(Q(function(){this._moveStart(!0,l.noMoveStart||!1)._animateZoom(n,a,!0)},this),!0)},_animateZoom:function(n,a,l,d){this._mapPane&&(l&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=a,ze(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:a,noUpdate:d}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&it(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function K0(n,a){return new Be(n,a)}var bs=Y.extend({options:{position:"topright"},initialize:function(n){g(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var a=this._map;return a&&a.removeControl(this),this.options.position=n,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var a=this._container=this.onAdd(n),l=this.getPosition(),d=n._controlCorners[l];return ze(a,"leaflet-control"),l.indexOf("bottom")!==-1?d.insertBefore(a,d.firstChild):d.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Je(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),ca=function(n){return new bs(n)};Be.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},a="leaflet-",l=this._controlContainer=Fe("div",a+"control-container",this._container);function d(m,f){var A=a+m+" "+a+f;n[m+f]=Fe("div",A,l)}d("top","left"),d("top","right"),d("bottom","left"),d("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)Je(this._controlCorners[n]);Je(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Cu=bs.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,a,l,d){return l<d?-1:d<l?1:0}},initialize:function(n,a,l){g(this,l),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var d in n)this._addLayer(n[d],d);for(d in a)this._addLayer(a[d],d,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return bs.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,a){return this._addLayer(n,a),this._map?this._update():this},addOverlay:function(n,a){return this._addLayer(n,a,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var a=this._getLayer(x(n));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){ze(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(ze(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):it(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return it(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",a=this._container=Fe("div",n),l=this.options.collapsed;a.setAttribute("aria-haspopup",!0),oa(a),xo(a);var d=this._section=Fe("section",n+"-list");l&&(this._map.on("click",this.collapse,this),Ie(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var m=this._layersLink=Fe("a",n+"-toggle",a);m.href="#",m.title="Layers",m.setAttribute("role","button"),Ie(m,{keydown:function(f){f.keyCode===13&&this._expandSafely()},click:function(f){wt(f),this._expandSafely()}},this),l||this.expand(),this._baseLayersList=Fe("div",n+"-base",d),this._separator=Fe("div",n+"-separator",d),this._overlaysList=Fe("div",n+"-overlays",d),a.appendChild(d)},_getLayer:function(n){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&x(this._layers[a].layer)===n)return this._layers[a]},_addLayer:function(n,a,l){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:a,overlay:l}),this.options.sortLayers&&this._layers.sort(u(function(d,m){return this.options.sortFunction(d.layer,m.layer,d.name,m.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ui(this._baseLayersList),ui(this._overlaysList),this._layerControlInputs=[];var n,a,l,d,m=0;for(l=0;l<this._layers.length;l++)d=this._layers[l],this._addItem(d),a=a||d.overlay,n=n||!d.overlay,m+=d.overlay?0:1;return this.options.hideSingleBase&&(n=n&&m>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=a&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var a=this._getLayer(x(n.target)),l=a.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;l&&this._map.fire(l,a)},_createRadioElement:function(n,a){var l='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(a?' checked="checked"':"")+"/>",d=document.createElement("div");return d.innerHTML=l,d.firstChild},_addItem:function(n){var a=document.createElement("label"),l=this._map.hasLayer(n.layer),d;n.overlay?(d=document.createElement("input"),d.type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=l):d=this._createRadioElement("leaflet-base-layers_"+x(this),l),this._layerControlInputs.push(d),d.layerId=x(n.layer),Ie(d,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+n.name;var f=document.createElement("span");a.appendChild(f),f.appendChild(d),f.appendChild(m);var A=n.overlay?this._overlaysList:this._baseLayersList;return A.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var n=this._layerControlInputs,a,l,d=[],m=[];this._handlingClick=!0;for(var f=n.length-1;f>=0;f--)a=n[f],l=this._getLayer(a.layerId).layer,a.checked?d.push(l):a.checked||m.push(l);for(f=0;f<m.length;f++)this._map.hasLayer(m[f])&&this._map.removeLayer(m[f]);for(f=0;f<d.length;f++)this._map.hasLayer(d[f])||this._map.addLayer(d[f]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,a,l,d=this._map.getZoom(),m=n.length-1;m>=0;m--)a=n[m],l=this._getLayer(a.layerId).layer,a.disabled=l.options.minZoom!==void 0&&d<l.options.minZoom||l.options.maxZoom!==void 0&&d>l.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var n=this._section;this._preventClick=!0,Ie(n,"click",wt),this.expand();var a=this;setTimeout(function(){He(n,"click",wt),a._preventClick=!1})}}),Q0=function(n,a,l){return new Cu(n,a,l)},fo=bs.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(n){var a="leaflet-control-zoom",l=Fe("div",a+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,a+"-in",l,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,a+"-out",l,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),l},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,a,l,d,m){var f=Fe("a",l,d);return f.innerHTML=n,f.href="#",f.title=a,f.setAttribute("role","button"),f.setAttribute("aria-label",a),oa(f),Ie(f,"click",Rn),Ie(f,"click",m,this),Ie(f,"click",this._refocusOnMap,this),f},_updateDisabled:function(){var n=this._map,a="leaflet-disabled";it(this._zoomInButton,a),it(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||n._zoom===n.getMinZoom())&&(ze(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||n._zoom===n.getMaxZoom())&&(ze(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Be.mergeOptions({zoomControl:!0}),Be.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new fo,this.addControl(this.zoomControl))});var Y0=function(n){return new fo(n)},Pu=bs.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var a="leaflet-control-scale",l=Fe("div",a),d=this.options;return this._addScales(d,a+"-line",l),n.on(d.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),l},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,a,l){n.metric&&(this._mScale=Fe("div",a,l)),n.imperial&&(this._iScale=Fe("div",a,l))},_update:function(){var n=this._map,a=n.getSize().y/2,l=n.distance(n.containerPointToLatLng([0,a]),n.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(l)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var a=this._getRoundNum(n),l=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,l,a/n)},_updateImperial:function(n){var a=n*3.2808399,l,d,m;a>5280?(l=a/5280,d=this._getRoundNum(l),this._updateScale(this._iScale,d+" mi",d/l)):(m=this._getRoundNum(a),this._updateScale(this._iScale,m+" ft",m/a))},_updateScale:function(n,a,l){n.style.width=Math.round(this.options.maxWidth*l)+"px",n.innerHTML=a},_getRoundNum:function(n){var a=Math.pow(10,(Math.floor(n)+"").length-1),l=n/a;return l=l>=10?10:l>=5?5:l>=3?3:l>=2?2:1,a*l}}),X0=function(n){return new Pu(n)},J0='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',go=bs.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(we.inlineSvg?J0+" ":"")+"Leaflet</a>"},initialize:function(n){g(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=Fe("div","leaflet-control-attribution"),oa(this._container);for(var a in n._layers)n._layers[a].getAttribution&&this.addAttribution(n._layers[a].getAttribution());return this._update(),n.on("layeradd",this._addAttribution,this),this._container},onRemove:function(n){n.off("layeradd",this._addAttribution,this)},_addAttribution:function(n){n.layer.getAttribution&&(this.addAttribution(n.layer.getAttribution()),n.layer.once("remove",function(){this.removeAttribution(n.layer.getAttribution())},this))},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(this._map){var n=[];for(var a in this._attributions)this._attributions[a]&&n.push(a);var l=[];this.options.prefix&&l.push(this.options.prefix),n.length&&l.push(n.join(", ")),this._container.innerHTML=l.join(' <span aria-hidden="true">|</span> ')}}});Be.mergeOptions({attributionControl:!0}),Be.addInitHook(function(){this.options.attributionControl&&new go().addTo(this)});var ef=function(n){return new go(n)};bs.Layers=Cu,bs.Zoom=fo,bs.Scale=Pu,bs.Attribution=go,ca.layers=Q0,ca.zoom=Y0,ca.scale=X0,ca.attribution=ef;var Bs=Y.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Bs.addTo=function(n,a){return n.addHandler(a,this),this};var tf={Events:G},Lu=we.touch?"touchstart mousedown":"mousedown",on=ie.extend({options:{clickTolerance:3},initialize:function(n,a,l,d){g(this,d),this._element=n,this._dragStartTarget=a||n,this._preventOutline=l},enable:function(){this._enabled||(Ie(this._dragStartTarget,Lu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(on._dragging===this&&this.finishDrag(!0),He(this._dragStartTarget,Lu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(this._enabled&&(this._moved=!1,!so(this._element,"leaflet-zoom-anim"))){if(n.touches&&n.touches.length!==1){on._dragging===this&&this.finishDrag();return}if(!(on._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(on._dragging=this,this._preventOutline&&oo(this._element),ao(),aa(),!this._moving)){this.fire("down");var a=n.touches?n.touches[0]:n,l=Nu(this._element);this._startPoint=new $(a.clientX,a.clientY),this._startPos=On(this._element),this._parentScale=co(l);var d=n.type==="mousedown";Ie(document,d?"mousemove":"touchmove",this._onMove,this),Ie(document,d?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(n){if(this._enabled){if(n.touches&&n.touches.length>1){this._moved=!0;return}var a=n.touches&&n.touches.length===1?n.touches[0]:n,l=new $(a.clientX,a.clientY)._subtract(this._startPoint);!l.x&&!l.y||Math.abs(l.x)+Math.abs(l.y)<this.options.clickTolerance||(l.x/=this._parentScale.x,l.y/=this._parentScale.y,wt(n),this._moved||(this.fire("dragstart"),this._moved=!0,ze(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ze(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(l),this._moving=!0,this._lastEvent=n,this._updatePosition())}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),dt(this._element,this._newPos),this.fire("drag",n)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(n){it(document.body,"leaflet-dragging"),this._lastTarget&&(it(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),He(document,"mousemove touchmove",this._onMove,this),He(document,"mouseup touchend touchcancel",this._onUp,this),io(),ia();var a=this._moved&&this._moving;this._moving=!1,on._dragging=!1,a&&this.fire("dragend",{noInertia:n,distance:this._newPos.distanceTo(this._startPos)})}});function Tu(n,a,l){var d,m=[1,4,2,8],f,A,K,J,ae,fe,Ce,Ae;for(f=0,fe=n.length;f<fe;f++)n[f]._code=Dn(n[f],a);for(K=0;K<4;K++){for(Ce=m[K],d=[],f=0,fe=n.length,A=fe-1;f<fe;A=f++)J=n[f],ae=n[A],J._code&Ce?ae._code&Ce||(Ae=fi(ae,J,Ce,a,l),Ae._code=Dn(Ae,a),d.push(Ae)):(ae._code&Ce&&(Ae=fi(ae,J,Ce,a,l),Ae._code=Dn(Ae,a),d.push(Ae)),d.push(J));n=d}return n}function Iu(n,a){var l,d,m,f,A,K,J,ae,fe;if(!n||n.length===0)throw new Error("latlngs not passed");us(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var Ce=ce([0,0]),Ae=oe(n),Dt=Ae.getNorthWest().distanceTo(Ae.getSouthWest())*Ae.getNorthEast().distanceTo(Ae.getNorthWest());Dt<1700&&(Ce=vo(n));var pt=n.length,ms=[];for(l=0;l<pt;l++){var qt=ce(n[l]);ms.push(a.project(ce([qt.lat-Ce.lat,qt.lng-Ce.lng])))}for(K=J=ae=0,l=0,d=pt-1;l<pt;d=l++)m=ms[l],f=ms[d],A=m.y*f.x-f.y*m.x,J+=(m.x+f.x)*A,ae+=(m.y+f.y)*A,K+=A*3;K===0?fe=ms[0]:fe=[J/K,ae/K];var fr=a.unproject(q(fe));return ce([fr.lat+Ce.lat,fr.lng+Ce.lng])}function vo(n){for(var a=0,l=0,d=0,m=0;m<n.length;m++){var f=ce(n[m]);a+=f.lat,l+=f.lng,d++}return ce([a/d,l/d])}var sf={__proto__:null,clipPolygon:Tu,polygonCenter:Iu,centroid:vo};function Eu(n,a){if(!a||!n.length)return n.slice();var l=a*a;return n=af(n,l),n=rf(n,l),n}function zu(n,a,l){return Math.sqrt(da(n,a,l,!0))}function nf(n,a,l){return da(n,a,l)}function rf(n,a){var l=n.length,d=typeof Uint8Array<"u"?Uint8Array:Array,m=new d(l);m[0]=m[l-1]=1,yo(n,m,a,0,l-1);var f,A=[];for(f=0;f<l;f++)m[f]&&A.push(n[f]);return A}function yo(n,a,l,d,m){var f=0,A,K,J;for(K=d+1;K<=m-1;K++)J=da(n[K],n[d],n[m],!0),J>f&&(A=K,f=J);f>l&&(a[A]=1,yo(n,a,l,d,A),yo(n,a,l,A,m))}function af(n,a){for(var l=[n[0]],d=1,m=0,f=n.length;d<f;d++)lf(n[d],n[m])>a&&(l.push(n[d]),m=d);return m<f-1&&l.push(n[f-1]),l}var Mu;function Au(n,a,l,d,m){var f=d?Mu:Dn(n,l),A=Dn(a,l),K,J,ae;for(Mu=A;;){if(!(f|A))return[n,a];if(f&A)return!1;K=f||A,J=fi(n,a,K,l,m),ae=Dn(J,l),K===f?(n=J,f=ae):(a=J,A=ae)}}function fi(n,a,l,d,m){var f=a.x-n.x,A=a.y-n.y,K=d.min,J=d.max,ae,fe;return l&8?(ae=n.x+f*(J.y-n.y)/A,fe=J.y):l&4?(ae=n.x+f*(K.y-n.y)/A,fe=K.y):l&2?(ae=J.x,fe=n.y+A*(J.x-n.x)/f):l&1&&(ae=K.x,fe=n.y+A*(K.x-n.x)/f),new $(ae,fe,m)}function Dn(n,a){var l=0;return n.x<a.min.x?l|=1:n.x>a.max.x&&(l|=2),n.y<a.min.y?l|=4:n.y>a.max.y&&(l|=8),l}function lf(n,a){var l=a.x-n.x,d=a.y-n.y;return l*l+d*d}function da(n,a,l,d){var m=a.x,f=a.y,A=l.x-m,K=l.y-f,J=A*A+K*K,ae;return J>0&&(ae=((n.x-m)*A+(n.y-f)*K)/J,ae>1?(m=l.x,f=l.y):ae>0&&(m+=A*ae,f+=K*ae)),A=n.x-m,K=n.y-f,d?A*A+K*K:new $(m,f)}function us(n){return!k(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"}function Ou(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),us(n)}function Bu(n,a){var l,d,m,f,A,K,J,ae;if(!n||n.length===0)throw new Error("latlngs not passed");us(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var fe=ce([0,0]),Ce=oe(n),Ae=Ce.getNorthWest().distanceTo(Ce.getSouthWest())*Ce.getNorthEast().distanceTo(Ce.getNorthWest());Ae<1700&&(fe=vo(n));var Dt=n.length,pt=[];for(l=0;l<Dt;l++){var ms=ce(n[l]);pt.push(a.project(ce([ms.lat-fe.lat,ms.lng-fe.lng])))}for(l=0,d=0;l<Dt-1;l++)d+=pt[l].distanceTo(pt[l+1])/2;if(d===0)ae=pt[0];else for(l=0,f=0;l<Dt-1;l++)if(A=pt[l],K=pt[l+1],m=A.distanceTo(K),f+=m,f>d){J=(f-d)/m,ae=[K.x-J*(K.x-A.x),K.y-J*(K.y-A.y)];break}var qt=a.unproject(q(ae));return ce([qt.lat+fe.lat,qt.lng+fe.lng])}var of={__proto__:null,simplify:Eu,pointToSegmentDistance:zu,closestPointOnSegment:nf,clipSegment:Au,_getEdgeIntersection:fi,_getBitCode:Dn,_sqClosestPointOnSegment:da,isFlat:us,_flat:Ou,polylineCenter:Bu},jo={project:function(n){return new $(n.lng,n.lat)},unproject:function(n){return new B(n.y,n.x)},bounds:new se([-180,-90],[180,90])},No={R:6378137,R_MINOR:6356752314245179e-9,bounds:new se([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var a=Math.PI/180,l=this.R,d=n.lat*a,m=this.R_MINOR/l,f=Math.sqrt(1-m*m),A=f*Math.sin(d),K=Math.tan(Math.PI/4-d/2)/Math.pow((1-A)/(1+A),f/2);return d=-l*Math.log(Math.max(K,1e-10)),new $(n.lng*a*l,d)},unproject:function(n){for(var a=180/Math.PI,l=this.R,d=this.R_MINOR/l,m=Math.sqrt(1-d*d),f=Math.exp(-n.y/l),A=Math.PI/2-2*Math.atan(f),K=0,J=.1,ae;K<15&&Math.abs(J)>1e-7;K++)ae=m*Math.sin(A),ae=Math.pow((1-ae)/(1+ae),m/2),J=Math.PI/2-2*Math.atan(f*ae)-A,A+=J;return new B(A*a,n.x*a/l)}},cf={__proto__:null,LonLat:jo,Mercator:No,SphericalMercator:b},df=o({},he,{code:"EPSG:3395",projection:No,transformation:function(){var n=.5/(Math.PI*No.R);return Z(n,.5,-n,.5)}()}),Ru=o({},he,{code:"EPSG:4326",projection:jo,transformation:Z(1/180,1,-1/180,.5)}),uf=o({},U,{projection:jo,transformation:Z(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,a){var l=a.lng-n.lng,d=a.lat-n.lat;return Math.sqrt(l*l+d*d)},infinite:!0});U.Earth=he,U.EPSG3395=df,U.EPSG3857=pe,U.EPSG900913=Me,U.EPSG4326=Ru,U.Simple=uf;var ws=ie.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[x(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[x(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var a=n.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var l=this.getEvents();a.on(l,this),this.once("remove",function(){a.off(l,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Be.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var a=x(n);return this._layers[a]?this:(this._layers[a]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var a=x(n);return this._layers[a]?(this._loaded&&n.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return x(n)in this._layers},eachLayer:function(n,a){for(var l in this._layers)n.call(a,this._layers[l]);return this},_addLayers:function(n){n=n?k(n)?n:[n]:[];for(var a=0,l=n.length;a<l;a++)this.addLayer(n[a])},_addZoomLimit:function(n){(!isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[x(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var a=x(n);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,a=-1/0,l=this._getZoomSpan();for(var d in this._zoomBoundLayers){var m=this._zoomBoundLayers[d].options;n=m.minZoom===void 0?n:Math.min(n,m.minZoom),a=m.maxZoom===void 0?a:Math.max(a,m.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=n===1/0?void 0:n,l!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ur=ws.extend({initialize:function(n,a){g(this,a),this._layers={};var l,d;if(n)for(l=0,d=n.length;l<d;l++)this.addLayer(n[l])},addLayer:function(n){var a=this.getLayerId(n);return this._layers[a]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var a=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(n){var a=typeof n=="number"?n:this.getLayerId(n);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var a=Array.prototype.slice.call(arguments,1),l,d;for(l in this._layers)d=this._layers[l],d[n]&&d[n].apply(d,a);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,a){for(var l in this._layers)n.call(a,this._layers[l]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return x(n)}}),mf=function(n,a){return new ur(n,a)},Ws=ur.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),ur.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),ur.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new me;for(var a in this._layers){var l=this._layers[a];n.extend(l.getBounds?l.getBounds():l.getLatLng())}return n}}),hf=function(n,a){return new Ws(n,a)},mr=Y.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(n){g(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,a){var l=this._getIconUrl(n);if(!l){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(l,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(d,n),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),d},_setIconStyles:function(n,a){var l=this.options,d=l[a+"Size"];typeof d=="number"&&(d=[d,d]);var m=q(d),f=q(a==="shadow"&&l.shadowAnchor||l.iconAnchor||m&&m.divideBy(2,!0));n.className="leaflet-marker-"+a+" "+(l.className||""),f&&(n.style.marginLeft=-f.x+"px",n.style.marginTop=-f.y+"px"),m&&(n.style.width=m.x+"px",n.style.height=m.y+"px")},_createImg:function(n,a){return a=a||document.createElement("img"),a.src=n,a},_getIconUrl:function(n){return we.retina&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function xf(n){return new mr(n)}var ua=mr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return typeof ua.imagePath!="string"&&(ua.imagePath=this._detectIconPath()),(this.options.imagePath||ua.imagePath)+mr.prototype._getIconUrl.call(this,n)},_stripUrl:function(n){var a=function(l,d,m){var f=d.exec(l);return f&&f[m]};return n=a(n,/^url\((['"])?(.+)\1\)$/,2),n&&a(n,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var n=Fe("div","leaflet-default-icon-path",document.body),a=ra(n,"background-image")||ra(n,"backgroundImage");if(document.body.removeChild(n),a=this._stripUrl(a),a)return a;var l=document.querySelector('link[href$="leaflet.css"]');return l?l.href.substring(0,l.href.length-11-1):""}}),Du=Bs.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new on(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ze(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&it(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var a=this._marker,l=a._map,d=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,f=On(a._icon),A=l.getPixelBounds(),K=l.getPixelOrigin(),J=D(A.min._subtract(K).add(m),A.max._subtract(K).subtract(m));if(!J.contains(f)){var ae=q((Math.max(J.max.x,f.x)-J.max.x)/(A.max.x-J.max.x)-(Math.min(J.min.x,f.x)-J.min.x)/(A.min.x-J.min.x),(Math.max(J.max.y,f.y)-J.max.y)/(A.max.y-J.max.y)-(Math.min(J.min.y,f.y)-J.min.y)/(A.min.y-J.min.y)).multiplyBy(d);l.panBy(ae,{animate:!1}),this._draggable._newPos._add(ae),this._draggable._startPos._add(ae),dt(a._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=Q(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(de(this._panRequest),this._panRequest=Q(this._adjustPan.bind(this,n)))},_onDrag:function(n){var a=this._marker,l=a._shadow,d=On(a._icon),m=a._map.layerPointToLatLng(d);l&&dt(l,d),a._latlng=m,n.latlng=m,n.oldLatLng=this._oldLatLng,a.fire("move",n).fire("drag",n)},_onDragEnd:function(n){de(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),gi=ws.extend({options:{icon:new ua,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,a){g(this,a),this._latlng=ce(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var a=this._latlng;return this._latlng=ce(n),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),l=n.icon.createIcon(this._icon),d=!1;l!==this._icon&&(this._icon&&this._removeIcon(),d=!0,n.title&&(l.title=n.title),l.tagName==="IMG"&&(l.alt=n.alt||"")),ze(l,a),n.keyboard&&(l.tabIndex="0",l.setAttribute("role","button")),this._icon=l,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ie(l,"focus",this._panOnFocus,this);var m=n.icon.createShadow(this._shadow),f=!1;m!==this._shadow&&(this._removeShadow(),f=!0),m&&(ze(m,a),m.alt=""),this._shadow=m,n.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&f&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&He(this._icon,"focus",this._panOnFocus,this),Je(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Je(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&dt(this._icon,n),this._shadow&&dt(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var a=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(ze(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Du)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Du(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&ds(this._icon,n),this._shadow&&ds(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var n=this._map;if(n){var a=this.options.icon.options,l=a.iconSize?q(a.iconSize):q(0,0),d=a.iconAnchor?q(a.iconAnchor):q(0,0);n.panInside(this._latlng,{paddingTopLeft:d,paddingBottomRight:l.subtract(d)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function pf(n,a){return new gi(n,a)}var cn=ws.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return g(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),vi=cn.extend({options:{fill:!0,radius:10},initialize:function(n,a){g(this,a),this._latlng=ce(n),this._radius=this.options.radius},setLatLng:function(n){var a=this._latlng;return this._latlng=ce(n),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var a=n&&n.radius||this._radius;return cn.prototype.setStyle.call(this,n),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,a=this._radiusY||n,l=this._clickTolerance(),d=[n+l,a+l];this._pxBounds=new se(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ff(n,a){return new vi(n,a)}var bo=vi.extend({initialize:function(n,a,l){if(typeof a=="number"&&(a=o({},l,{radius:a})),g(this,a),this._latlng=ce(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new me(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:cn.prototype.setStyle,_project:function(){var n=this._latlng.lng,a=this._latlng.lat,l=this._map,d=l.options.crs;if(d.distance===he.distance){var m=Math.PI/180,f=this._mRadius/he.R/m,A=l.project([a+f,n]),K=l.project([a-f,n]),J=A.add(K).divideBy(2),ae=l.unproject(J).lat,fe=Math.acos((Math.cos(f*m)-Math.sin(a*m)*Math.sin(ae*m))/(Math.cos(a*m)*Math.cos(ae*m)))/m;(isNaN(fe)||fe===0)&&(fe=f/Math.cos(Math.PI/180*a)),this._point=J.subtract(l.getPixelOrigin()),this._radius=isNaN(fe)?0:J.x-l.project([ae,n-fe]).x,this._radiusY=J.y-A.y}else{var Ce=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=l.latLngToLayerPoint(this._latlng),this._radius=this._point.x-l.latLngToLayerPoint(Ce).x}this._updateBounds()}});function gf(n,a,l){return new bo(n,a,l)}var qs=cn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,a){g(this,a),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var a=1/0,l=null,d=da,m,f,A=0,K=this._parts.length;A<K;A++)for(var J=this._parts[A],ae=1,fe=J.length;ae<fe;ae++){m=J[ae-1],f=J[ae];var Ce=d(n,m,f,!0);Ce<a&&(a=Ce,l=d(n,m,f))}return l&&(l.distance=Math.sqrt(a)),l},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Bu(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(n,a){return a=a||this._defaultShape(),n=ce(n),a.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new me,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return us(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var a=[],l=us(n),d=0,m=n.length;d<m;d++)l?(a[d]=ce(n[d]),this._bounds.extend(a[d])):a[d]=this._convertLatLngs(n[d]);return a},_project:function(){var n=new se;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),a=new $(n,n);this._rawPxBounds&&(this._pxBounds=new se([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(n,a,l){var d=n[0]instanceof B,m=n.length,f,A;if(d){for(A=[],f=0;f<m;f++)A[f]=this._map.latLngToLayerPoint(n[f]),l.extend(A[f]);a.push(A)}else for(f=0;f<m;f++)this._projectLatlngs(n[f],a,l)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,l,d,m,f,A,K,J;for(l=0,m=0,f=this._rings.length;l<f;l++)for(J=this._rings[l],d=0,A=J.length;d<A-1;d++)K=Au(J[d],J[d+1],n,d,!0),K&&(a[m]=a[m]||[],a[m].push(K[0]),(K[1]!==J[d+1]||d===A-2)&&(a[m].push(K[1]),m++))}},_simplifyPoints:function(){for(var n=this._parts,a=this.options.smoothFactor,l=0,d=n.length;l<d;l++)n[l]=Eu(n[l],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,a){var l,d,m,f,A,K,J=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(l=0,f=this._parts.length;l<f;l++)for(K=this._parts[l],d=0,A=K.length,m=A-1;d<A;m=d++)if(!(!a&&d===0)&&zu(n,K[m],K[d])<=J)return!0;return!1}});function vf(n,a){return new qs(n,a)}qs._flat=Ou;var hr=qs.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Iu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(n){var a=qs.prototype._convertLatLngs.call(this,n),l=a.length;return l>=2&&a[0]instanceof B&&a[0].equals(a[l-1])&&a.pop(),a},_setLatLngs:function(n){qs.prototype._setLatLngs.call(this,n),us(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return us(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,a=this.options.weight,l=new $(a,a);if(n=new se(n.min.subtract(l),n.max.add(l)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var d=0,m=this._rings.length,f;d<m;d++)f=Tu(this._rings[d],n,!0),f.length&&this._parts.push(f)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var a=!1,l,d,m,f,A,K,J,ae;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(f=0,J=this._parts.length;f<J;f++)for(l=this._parts[f],A=0,ae=l.length,K=ae-1;A<ae;K=A++)d=l[A],m=l[K],d.y>n.y!=m.y>n.y&&n.x<(m.x-d.x)*(n.y-d.y)/(m.y-d.y)+d.x&&(a=!a);return a||qs.prototype._containsPoint.call(this,n,!0)}});function yf(n,a){return new hr(n,a)}var Gs=Ws.extend({initialize:function(n,a){g(this,a),this._layers={},n&&this.addData(n)},addData:function(n){var a=k(n)?n:n.features,l,d,m;if(a){for(l=0,d=a.length;l<d;l++)m=a[l],(m.geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var f=this.options;if(f.filter&&!f.filter(n))return this;var A=yi(n,f);return A?(A.feature=bi(n),A.defaultOptions=A.options,this.resetStyle(A),f.onEachFeature&&f.onEachFeature(n,A),this.addLayer(A)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=o({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(a){this._setLayerStyle(a,n)},this)},_setLayerStyle:function(n,a){n.setStyle&&(typeof a=="function"&&(a=a(n.feature)),n.setStyle(a))}});function yi(n,a){var l=n.type==="Feature"?n.geometry:n,d=l?l.coordinates:null,m=[],f=a&&a.pointToLayer,A=a&&a.coordsToLatLng||wo,K,J,ae,fe;if(!d&&!l)return null;switch(l.type){case"Point":return K=A(d),Fu(f,n,K,a);case"MultiPoint":for(ae=0,fe=d.length;ae<fe;ae++)K=A(d[ae]),m.push(Fu(f,n,K,a));return new Ws(m);case"LineString":case"MultiLineString":return J=ji(d,l.type==="LineString"?0:1,A),new qs(J,a);case"Polygon":case"MultiPolygon":return J=ji(d,l.type==="Polygon"?1:2,A),new hr(J,a);case"GeometryCollection":for(ae=0,fe=l.geometries.length;ae<fe;ae++){var Ce=yi({geometry:l.geometries[ae],type:"Feature",properties:n.properties},a);Ce&&m.push(Ce)}return new Ws(m);case"FeatureCollection":for(ae=0,fe=l.features.length;ae<fe;ae++){var Ae=yi(l.features[ae],a);Ae&&m.push(Ae)}return new Ws(m);default:throw new Error("Invalid GeoJSON object.")}}function Fu(n,a,l,d){return n?n(a,l):new gi(l,d&&d.markersInheritOptions&&d)}function wo(n){return new B(n[1],n[0],n[2])}function ji(n,a,l){for(var d=[],m=0,f=n.length,A;m<f;m++)A=a?ji(n[m],a-1,l):(l||wo)(n[m]),d.push(A);return d}function _o(n,a){return n=ce(n),n.alt!==void 0?[S(n.lng,a),S(n.lat,a),S(n.alt,a)]:[S(n.lng,a),S(n.lat,a)]}function Ni(n,a,l,d){for(var m=[],f=0,A=n.length;f<A;f++)m.push(a?Ni(n[f],us(n[f])?0:a-1,l,d):_o(n[f],d));return!a&&l&&m.length>0&&m.push(m[0].slice()),m}function xr(n,a){return n.feature?o({},n.feature,{geometry:a}):bi(a)}function bi(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var ko={toGeoJSON:function(n){return xr(this,{type:"Point",coordinates:_o(this.getLatLng(),n)})}};gi.include(ko),bo.include(ko),vi.include(ko),qs.include({toGeoJSON:function(n){var a=!us(this._latlngs),l=Ni(this._latlngs,a?1:0,!1,n);return xr(this,{type:(a?"Multi":"")+"LineString",coordinates:l})}}),hr.include({toGeoJSON:function(n){var a=!us(this._latlngs),l=a&&!us(this._latlngs[0]),d=Ni(this._latlngs,l?2:a?1:0,!0,n);return a||(d=[d]),xr(this,{type:(l?"Multi":"")+"Polygon",coordinates:d})}}),ur.include({toMultiPoint:function(n){var a=[];return this.eachLayer(function(l){a.push(l.toGeoJSON(n).geometry.coordinates)}),xr(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(n){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(n);var l=a==="GeometryCollection",d=[];return this.eachLayer(function(m){if(m.toGeoJSON){var f=m.toGeoJSON(n);if(l)d.push(f.geometry);else{var A=bi(f);A.type==="FeatureCollection"?d.push.apply(d,A.features):d.push(A)}}}),l?xr(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}});function $u(n,a){return new Gs(n,a)}var jf=$u,wi=ws.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,a,l){this._url=n,this._bounds=oe(a),g(this,l)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ze(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Je(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&cr(this._image),this},bringToBack:function(){return this._map&&dr(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=oe(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",a=this._image=n?this._url:Fe("img");if(ze(a,"leaflet-image-layer"),this._zoomAnimated&&ze(a,"leaflet-zoom-animated"),this.options.className&&ze(a,this.options.className),a.onselectstart=T,a.onmousemove=T,a.onload=u(this.fire,this,"load"),a.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(n){var a=this._map.getZoomScale(n.zoom),l=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;An(this._image,l,a)},_reset:function(){var n=this._image,a=new se(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),l=a.getSize();dt(n,a.min),n.style.width=l.x+"px",n.style.height=l.y+"px"},_updateOpacity:function(){ds(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)},getCenter:function(){return this._bounds.getCenter()}}),Nf=function(n,a,l){return new wi(n,a,l)},Uu=wi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var n=this._url.tagName==="VIDEO",a=this._image=n?this._url:Fe("video");if(ze(a,"leaflet-image-layer"),this._zoomAnimated&&ze(a,"leaflet-zoom-animated"),this.options.className&&ze(a,this.options.className),a.onselectstart=T,a.onmousemove=T,a.onloadeddata=u(this.fire,this,"load"),n){for(var l=a.getElementsByTagName("source"),d=[],m=0;m<l.length;m++)d.push(l[m].src);this._url=l.length>0?d:[a.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var f=0;f<this._url.length;f++){var A=Fe("source");A.src=this._url[f],a.appendChild(A)}}});function bf(n,a,l){return new Uu(n,a,l)}var Zu=wi.extend({_initImage:function(){var n=this._image=this._url;ze(n,"leaflet-image-layer"),this._zoomAnimated&&ze(n,"leaflet-zoom-animated"),this.options.className&&ze(n,this.options.className),n.onselectstart=T,n.onmousemove=T}});function wf(n,a,l){return new Zu(n,a,l)}var Rs=ws.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(n,a){n&&(n instanceof B||k(n))?(this._latlng=ce(n),g(this,a)):(g(this,n),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(n){return n=arguments.length?n:this._source._map,n.hasLayer(this)||n.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(n){return this._map?this.close():(arguments.length?this._source=n:n=this._source,this._prepareOpen(),this.openOn(n._map)),this},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&ds(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&ds(this._container,1),this.bringToFront(),this.options.interactive&&(ze(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(n){n._fadeAnimated?(ds(this._container,0),this._removeTimeout=setTimeout(u(Je,void 0,this._container),200)):Je(this._container),this.options.interactive&&(it(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=ce(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&cr(this._container),this},bringToBack:function(){return this._map&&dr(this._container),this},_prepareOpen:function(n){var a=this._source;if(!a._map)return!1;if(a instanceof Ws){a=null;var l=this._source._layers;for(var d in l)if(l[d]._map){a=l[d];break}if(!a)return!1;this._source=a}if(!n)if(a.getCenter)n=a.getCenter();else if(a.getLatLng)n=a.getLatLng();else if(a.getBounds)n=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(n),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var n=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")n.innerHTML=a;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var n=this._map.latLngToLayerPoint(this._latlng),a=q(this.options.offset),l=this._getAnchor();this._zoomAnimated?dt(this._container,n.add(l)):a=a.add(n).add(l);var d=this._containerBottom=-a.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=d+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});Be.include({_initOverlay:function(n,a,l,d){var m=a;return m instanceof n||(m=new n(d).setContent(a)),l&&m.setLatLng(l),m}}),ws.include({_initOverlay:function(n,a,l,d){var m=l;return m instanceof n?(g(m,d),m._source=this):(m=a&&!d?a:new n(d,this),m.setContent(l)),m}});var _i=Rs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n=arguments.length?n:this._source._map,!n.hasLayer(this)&&n._popup&&n._popup.options.autoClose&&n.removeLayer(n._popup),n._popup=this,Rs.prototype.openOn.call(this,n)},onAdd:function(n){Rs.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof cn||this._source.on("preclick",Bn))},onRemove:function(n){Rs.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof cn||this._source.off("preclick",Bn))},getEvents:function(){var n=Rs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this.close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_initLayout:function(){var n="leaflet-popup",a=this._container=Fe("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),l=this._wrapper=Fe("div",n+"-content-wrapper",a);if(this._contentNode=Fe("div",n+"-content",l),oa(a),xo(this._contentNode),Ie(a,"contextmenu",Bn),this._tipContainer=Fe("div",n+"-tip-container",a),this._tip=Fe("div",n+"-tip",this._tipContainer),this.options.closeButton){var d=this._closeButton=Fe("a",n+"-close-button",a);d.setAttribute("role","button"),d.setAttribute("aria-label","Close popup"),d.href="#close",d.innerHTML='<span aria-hidden="true">&#215;</span>',Ie(d,"click",function(m){wt(m),this.close()},this)}},_updateLayout:function(){var n=this._contentNode,a=n.style;a.width="",a.whiteSpace="nowrap";var l=n.offsetWidth;l=Math.min(l,this.options.maxWidth),l=Math.max(l,this.options.minWidth),a.width=l+1+"px",a.whiteSpace="",a.height="";var d=n.offsetHeight,m=this.options.maxHeight,f="leaflet-popup-scrolled";m&&d>m?(a.height=m+"px",ze(n,f)):it(n,f),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var a=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),l=this._getAnchor();dt(this._container,a.add(l))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var n=this._map,a=parseInt(ra(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+a,d=this._containerWidth,m=new $(this._containerLeft,-l-this._containerBottom);m._add(On(this._container));var f=n.layerPointToContainerPoint(m),A=q(this.options.autoPanPadding),K=q(this.options.autoPanPaddingTopLeft||A),J=q(this.options.autoPanPaddingBottomRight||A),ae=n.getSize(),fe=0,Ce=0;f.x+d+J.x>ae.x&&(fe=f.x+d-ae.x+J.x),f.x-fe-K.x<0&&(fe=f.x-K.x),f.y+l+J.y>ae.y&&(Ce=f.y+l-ae.y+J.y),f.y-Ce-K.y<0&&(Ce=f.y-K.y),(fe||Ce)&&(this.options.keepInView&&(this._autopanning=!0),n.fire("autopanstart").panBy([fe,Ce]))}},_getAnchor:function(){return q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),_f=function(n,a){return new _i(n,a)};Be.mergeOptions({closePopupOnClick:!0}),Be.include({openPopup:function(n,a,l){return this._initOverlay(_i,n,a,l).openOn(this),this},closePopup:function(n){return n=arguments.length?n:this._popup,n&&n.close(),this}}),ws.include({bindPopup:function(n,a){return this._popup=this._initOverlay(_i,this._popup,n,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n){return this._popup&&(this instanceof Ws||(this._popup._source=this),this._popup._prepareOpen(n||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){if(!(!this._popup||!this._map)){Rn(n);var a=n.layer||n.target;if(this._popup._source===a&&!(a instanceof cn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(n.latlng);return}this._popup._source=a,this.openPopup(n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var ki=Rs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(n){Rs.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(n){Rs.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var n=Rs.prototype.getEvents.call(this);return this.options.permanent||(n.preclick=this.close),n},_initLayout:function(){var n="leaflet-tooltip",a=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Fe("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+x(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var a,l,d=this._map,m=this._container,f=d.latLngToContainerPoint(d.getCenter()),A=d.layerPointToContainerPoint(n),K=this.options.direction,J=m.offsetWidth,ae=m.offsetHeight,fe=q(this.options.offset),Ce=this._getAnchor();K==="top"?(a=J/2,l=ae):K==="bottom"?(a=J/2,l=0):K==="center"?(a=J/2,l=ae/2):K==="right"?(a=0,l=ae/2):K==="left"?(a=J,l=ae/2):A.x<f.x?(K="right",a=0,l=ae/2):(K="left",a=J+(fe.x+Ce.x)*2,l=ae/2),n=n.subtract(q(a,l,!0)).add(fe).add(Ce),it(m,"leaflet-tooltip-right"),it(m,"leaflet-tooltip-left"),it(m,"leaflet-tooltip-top"),it(m,"leaflet-tooltip-bottom"),ze(m,"leaflet-tooltip-"+K),dt(m,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&ds(this._container,n)},_animateZoom:function(n){var a=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(a)},_getAnchor:function(){return q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),kf=function(n,a){return new ki(n,a)};Be.include({openTooltip:function(n,a,l){return this._initOverlay(ki,n,a,l).openOn(this),this},closeTooltip:function(n){return n.close(),this}}),ws.include({bindTooltip:function(n,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ki,this._tooltip,n,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var a=n?"off":"on",l={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?l.add=this._openTooltip:(l.mouseover=this._openTooltip,l.mouseout=this.closeTooltip,l.click=this._openTooltip,this._map?this._addFocusListeners():l.add=this._addFocusListeners),this._tooltip.options.sticky&&(l.mousemove=this._moveTooltip),this[a](l),this._tooltipHandlersAdded=!n}},openTooltip:function(n){return this._tooltip&&(this instanceof Ws||(this._tooltip._source=this),this._tooltip._prepareOpen(n)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(n){var a=typeof n.getElement=="function"&&n.getElement();a&&(Ie(a,"focus",function(){this._tooltip._source=n,this.openTooltip()},this),Ie(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(n){var a=typeof n.getElement=="function"&&n.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(n){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(n)});return}this._tooltip._source=n.layer||n.target,this.openTooltip(this._tooltip.options.sticky?n.latlng:void 0)}},_moveTooltip:function(n){var a=n.latlng,l,d;this._tooltip.options.sticky&&n.originalEvent&&(l=this._map.mouseEventToContainerPoint(n.originalEvent),d=this._map.containerPointToLayerPoint(l),a=this._map.layerPointToLatLng(d)),this._tooltip.setLatLng(a)}});var Hu=mr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var a=n&&n.tagName==="DIV"?n:document.createElement("div"),l=this.options;if(l.html instanceof Element?(ui(a),a.appendChild(l.html)):a.innerHTML=l.html!==!1?l.html:"",l.bgPos){var d=q(l.bgPos);a.style.backgroundPosition=-d.x+"px "+-d.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function Sf(n){return new Hu(n)}mr.Default=ua;var ma=ws.extend({options:{tileSize:256,opacity:1,updateWhenIdle:we.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){g(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),Je(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(cr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(dr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var n=this._clampZoom(this._map.getZoom());n!==this._tileZoom&&(this._tileZoom=n,this._updateLevels()),this._update()}return this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=j(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof $?n:new $(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var a=this.getPane().children,l=-n(-1/0,1/0),d=0,m=a.length,f;d<m;d++)f=a[d].style.zIndex,a[d]!==this._container&&f&&(l=n(l,+f));isFinite(l)&&(this.options.zIndex=l+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!we.ielt9){ds(this._container,this.options.opacity);var n=+new Date,a=!1,l=!1;for(var d in this._tiles){var m=this._tiles[d];if(!(!m.current||!m.loaded)){var f=Math.min(1,(n-m.loaded)/200);ds(m.el,f),f<1?a=!0:(m.active?l=!0:this._onOpaqueTile(m),m.active=!0)}}l&&!this._noPrune&&this._pruneTiles(),a&&(de(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this))}},_onOpaqueTile:T,_initContainer:function(){this._container||(this._container=Fe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,a=this.options.maxZoom;if(n!==void 0){for(var l in this._levels)l=Number(l),this._levels[l].el.children.length||l===n?(this._levels[l].el.style.zIndex=a-Math.abs(n-l),this._onUpdateLevel(l)):(Je(this._levels[l].el),this._removeTilesAtZoom(l),this._onRemoveLevel(l),delete this._levels[l]);var d=this._levels[n],m=this._map;return d||(d=this._levels[n]={},d.el=Fe("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=a,d.origin=m.project(m.unproject(m.getPixelOrigin()),n).round(),d.zoom=n,this._setZoomTransform(d,m.getCenter(),m.getZoom()),T(d.el.offsetWidth),this._onCreateLevel(d)),this._level=d,d}},_onUpdateLevel:T,_onRemoveLevel:T,_onCreateLevel:T,_pruneTiles:function(){if(this._map){var n,a,l=this._map.getZoom();if(l>this.options.maxZoom||l<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)a=this._tiles[n],a.retain=a.current;for(n in this._tiles)if(a=this._tiles[n],a.current&&!a.active){var d=a.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var a in this._tiles)this._tiles[a].coords.z===n&&this._removeTile(a)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)Je(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,a,l,d){var m=Math.floor(n/2),f=Math.floor(a/2),A=l-1,K=new $(+m,+f);K.z=+A;var J=this._tileCoordsToKey(K),ae=this._tiles[J];return ae&&ae.active?(ae.retain=!0,!0):(ae&&ae.loaded&&(ae.retain=!0),A>d?this._retainParent(m,f,A,d):!1)},_retainChildren:function(n,a,l,d){for(var m=2*n;m<2*n+2;m++)for(var f=2*a;f<2*a+2;f++){var A=new $(m,f);A.z=l+1;var K=this._tileCoordsToKey(A),J=this._tiles[K];if(J&&J.active){J.retain=!0;continue}else J&&J.loaded&&(J.retain=!0);l+1<d&&this._retainChildren(m,f,l+1,d)}},_resetView:function(n){var a=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var a=this.options;return a.minNativeZoom!==void 0&&n<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<n?a.maxNativeZoom:n},_setView:function(n,a,l,d){var m=Math.round(a);this.options.maxZoom!==void 0&&m>this.options.maxZoom||this.options.minZoom!==void 0&&m<this.options.minZoom?m=void 0:m=this._clampZoom(m);var f=this.options.updateWhenZooming&&m!==this._tileZoom;(!d||f)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),m!==void 0&&this._update(n),l||this._pruneTiles(),this._noPrune=!!l),this._setZoomTransforms(n,a)},_setZoomTransforms:function(n,a){for(var l in this._levels)this._setZoomTransform(this._levels[l],n,a)},_setZoomTransform:function(n,a,l){var d=this._map.getZoomScale(l,n.zoom),m=n.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(a,l)).round();we.any3d?An(n.el,m,d):dt(n.el,m)},_resetGrid:function(){var n=this._map,a=n.options.crs,l=this._tileSize=this.getTileSize(),d=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,a.wrapLng[0]],d).x/l.x),Math.ceil(n.project([0,a.wrapLng[1]],d).x/l.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([a.wrapLat[0],0],d).y/l.x),Math.ceil(n.project([a.wrapLat[1],0],d).y/l.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var a=this._map,l=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),d=a.getZoomScale(l,this._tileZoom),m=a.project(n,this._tileZoom).floor(),f=a.getSize().divideBy(d*2);return new se(m.subtract(f),m.add(f))},_update:function(n){var a=this._map;if(a){var l=this._clampZoom(a.getZoom());if(n===void 0&&(n=a.getCenter()),this._tileZoom!==void 0){var d=this._getTiledPixelBounds(n),m=this._pxBoundsToTileRange(d),f=m.getCenter(),A=[],K=this.options.keepBuffer,J=new se(m.getBottomLeft().subtract([K,-K]),m.getTopRight().add([K,-K]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ae in this._tiles){var fe=this._tiles[ae].coords;(fe.z!==this._tileZoom||!J.contains(new $(fe.x,fe.y)))&&(this._tiles[ae].current=!1)}if(Math.abs(l-this._tileZoom)>1){this._setView(n,l);return}for(var Ce=m.min.y;Ce<=m.max.y;Ce++)for(var Ae=m.min.x;Ae<=m.max.x;Ae++){var Dt=new $(Ae,Ce);if(Dt.z=this._tileZoom,!!this._isValidTile(Dt)){var pt=this._tiles[this._tileCoordsToKey(Dt)];pt?pt.current=!0:A.push(Dt)}}if(A.sort(function(qt,fr){return qt.distanceTo(f)-fr.distanceTo(f)}),A.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ms=document.createDocumentFragment();for(Ae=0;Ae<A.length;Ae++)this._addTile(A[Ae],ms);this._level.el.appendChild(ms)}}}},_isValidTile:function(n){var a=this._map.options.crs;if(!a.infinite){var l=this._globalTileRange;if(!a.wrapLng&&(n.x<l.min.x||n.x>l.max.x)||!a.wrapLat&&(n.y<l.min.y||n.y>l.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(n);return oe(this.options.bounds).overlaps(d)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var a=this._map,l=this.getTileSize(),d=n.scaleBy(l),m=d.add(l),f=a.unproject(d,n.z),A=a.unproject(m,n.z);return[f,A]},_tileCoordsToBounds:function(n){var a=this._tileCoordsToNwSe(n),l=new me(a[0],a[1]);return this.options.noWrap||(l=this._map.wrapLatLngBounds(l)),l},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var a=n.split(":"),l=new $(+a[0],+a[1]);return l.z=+a[2],l},_removeTile:function(n){var a=this._tiles[n];a&&(Je(a.el),delete this._tiles[n],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){ze(n,"leaflet-tile");var a=this.getTileSize();n.style.width=a.x+"px",n.style.height=a.y+"px",n.onselectstart=T,n.onmousemove=T,we.ielt9&&this.options.opacity<1&&ds(n,this.options.opacity)},_addTile:function(n,a){var l=this._getTilePos(n),d=this._tileCoordsToKey(n),m=this.createTile(this._wrapCoords(n),u(this._tileReady,this,n));this._initTile(m),this.createTile.length<2&&Q(u(this._tileReady,this,n,null,m)),dt(m,l),this._tiles[d]={el:m,coords:n,current:!0},a.appendChild(m),this.fire("tileloadstart",{tile:m,coords:n})},_tileReady:function(n,a,l){a&&this.fire("tileerror",{error:a,tile:l,coords:n});var d=this._tileCoordsToKey(n);l=this._tiles[d],l&&(l.loaded=+new Date,this._map._fadeAnimated?(ds(l.el,0),de(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this)):(l.active=!0,this._pruneTiles()),a||(ze(l.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:l.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),we.ielt9||!this._map._fadeAnimated?Q(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var a=new $(this._wrapX?w(n.x,this._wrapX):n.x,this._wrapY?w(n.y,this._wrapY):n.y);return a.z=n.z,a},_pxBoundsToTileRange:function(n){var a=this.getTileSize();return new se(n.min.unscaleBy(a).floor(),n.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function Cf(n){return new ma(n)}var pr=ma.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(n,a){this._url=n,a=g(this,a),a.detectRetina&&we.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(n,a){return this._url===n&&a===void 0&&(a=!0),this._url=n,a||this.redraw(),this},createTile:function(n,a){var l=document.createElement("img");return Ie(l,"load",u(this._tileOnLoad,this,a,l)),Ie(l,"error",u(this._tileOnError,this,a,l)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(l.referrerPolicy=this.options.referrerPolicy),l.alt="",l.src=this.getTileUrl(n),l},getTileUrl:function(n){var a={r:we.retina?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var l=this._globalTileRange.max.y-n.y;this.options.tms&&(a.y=l),a["-y"]=l}return y(this._url,o(a,this.options))},_tileOnLoad:function(n,a){we.ielt9?setTimeout(u(n,this,null,a),0):n(null,a)},_tileOnError:function(n,a,l){var d=this.options.errorTileUrl;d&&a.getAttribute("src")!==d&&(a.src=d),n(l,a)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,a=this.options.maxZoom,l=this.options.zoomReverse,d=this.options.zoomOffset;return l&&(n=a-n),n+d},_getSubdomain:function(n){var a=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var n,a;for(n in this._tiles)if(this._tiles[n].coords.z!==this._tileZoom&&(a=this._tiles[n].el,a.onload=T,a.onerror=T,!a.complete)){a.src=R;var l=this._tiles[n].coords;Je(a),delete this._tiles[n],this.fire("tileabort",{tile:a,coords:l})}},_removeTile:function(n){var a=this._tiles[n];if(a)return a.el.setAttribute("src",R),ma.prototype._removeTile.call(this,n)},_tileReady:function(n,a,l){if(!(!this._map||l&&l.getAttribute("src")===R))return ma.prototype._tileReady.call(this,n,a,l)}});function Vu(n,a){return new pr(n,a)}var Wu=pr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,a){this._url=n;var l=o({},this.defaultWmsParams);for(var d in a)d in this.options||(l[d]=a[d]);a=g(this,a);var m=a.detectRetina&&we.retina?2:1,f=this.getTileSize();l.width=f.x*m,l.height=f.y*m,this.wmsParams=l},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,pr.prototype.onAdd.call(this,n)},getTileUrl:function(n){var a=this._tileCoordsToNwSe(n),l=this._crs,d=D(l.project(a[0]),l.project(a[1])),m=d.min,f=d.max,A=(this._wmsVersion>=1.3&&this._crs===Ru?[m.y,m.x,f.y,f.x]:[m.x,m.y,f.x,f.y]).join(","),K=pr.prototype.getTileUrl.call(this,n);return K+M(this.wmsParams,K,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+A},setParams:function(n,a){return o(this.wmsParams,n),a||this.redraw(),this}});function Pf(n,a){return new Wu(n,a)}pr.WMS=Wu,Vu.wms=Pf;var Ks=ws.extend({options:{padding:.1},initialize:function(n){g(this,n),x(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ze(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,a){var l=this._map.getZoomScale(a,this._zoom),d=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,a),f=d.multiplyBy(-l).add(m).subtract(this._map._getNewPixelOrigin(n,a));we.any3d?An(this._container,f,l):dt(this._container,f)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,a=this._map.getSize(),l=this._map.containerPointToLayerPoint(a.multiplyBy(-n)).round();this._bounds=new se(l,l.add(a.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),qu=Ks.extend({options:{tolerance:0},getEvents:function(){var n=Ks.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ks.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");Ie(n,"mousemove",this._onMouseMove,this),Ie(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ie(n,"mouseout",this._handleMouseOut,this),n._leaflet_disable_events=!0,this._ctx=n.getContext("2d")},_destroyContainer:function(){de(this._redrawRequest),delete this._ctx,Je(this._container),He(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var a in this._layers)n=this._layers[a],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ks.prototype._update.call(this);var n=this._bounds,a=this._container,l=n.getSize(),d=we.retina?2:1;dt(a,n.min),a.width=d*l.x,a.height=d*l.y,a.style.width=l.x+"px",a.style.height=l.y+"px",we.retina&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){Ks.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[x(n)]=n;var a=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var a=n._order,l=a.next,d=a.prev;l?l.prev=d:this._drawLast=d,d?d.next=l:this._drawFirst=l,delete n._order,delete this._layers[x(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var a=n.options.dashArray.split(/[, ]+/),l=[],d,m;for(m=0;m<a.length;m++){if(d=Number(a[m]),isNaN(d))return;l.push(d)}n.options._dashArray=l}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){this._map&&(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||Q(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var a=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new se,this._redrawBounds.extend(n._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(n._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var a=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,a=this._redrawBounds;if(this._ctx.save(),a){var l=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,l.x,l.y),this._ctx.clip()}this._drawing=!0;for(var d=this._drawFirst;d;d=d.next)n=d.layer,(!a||n._pxBounds&&n._pxBounds.intersects(a))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,a){if(this._drawing){var l,d,m,f,A=n._parts,K=A.length,J=this._ctx;if(K){for(J.beginPath(),l=0;l<K;l++){for(d=0,m=A[l].length;d<m;d++)f=A[l][d],J[d?"lineTo":"moveTo"](f.x,f.y);a&&J.closePath()}this._fillStroke(J,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var a=n._point,l=this._ctx,d=Math.max(Math.round(n._radius),1),m=(Math.max(Math.round(n._radiusY),1)||d)/d;m!==1&&(l.save(),l.scale(1,m)),l.beginPath(),l.arc(a.x,a.y/m,d,0,Math.PI*2,!1),m!==1&&l.restore(),this._fillStroke(l,n)}},_fillStroke:function(n,a){var l=a.options;l.fill&&(n.globalAlpha=l.fillOpacity,n.fillStyle=l.fillColor||l.color,n.fill(l.fillRule||"evenodd")),l.stroke&&l.weight!==0&&(n.setLineDash&&n.setLineDash(a.options&&a.options._dashArray||[]),n.globalAlpha=l.opacity,n.lineWidth=l.weight,n.strokeStyle=l.color,n.lineCap=l.lineCap,n.lineJoin=l.lineJoin,n.stroke())},_onClick:function(n){for(var a=this._map.mouseEventToLayerPoint(n),l,d,m=this._drawFirst;m;m=m.next)l=m.layer,l.options.interactive&&l._containsPoint(a)&&(!(n.type==="click"||n.type==="preclick")||!this._map._draggableMoved(l))&&(d=l);this._fireEvent(d?[d]:!1,n)},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,a)}},_handleMouseOut:function(n){var a=this._hoveredLayer;a&&(it(this._container,"leaflet-interactive"),this._fireEvent([a],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,a){if(!this._mouseHoverThrottled){for(var l,d,m=this._drawFirst;m;m=m.next)l=m.layer,l.options.interactive&&l._containsPoint(a)&&(d=l);d!==this._hoveredLayer&&(this._handleMouseOut(n),d&&(ze(this._container,"leaflet-interactive"),this._fireEvent([d],n,"mouseover"),this._hoveredLayer=d)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,n),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,a,l){this._map._fireDOMEvent(a,l||a.type,n)},_bringToFront:function(n){var a=n._order;if(a){var l=a.next,d=a.prev;if(l)l.prev=d;else return;d?d.next=l:l&&(this._drawFirst=l),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(n)}},_bringToBack:function(n){var a=n._order;if(a){var l=a.next,d=a.prev;if(d)d.next=l;else return;l?l.prev=d:d&&(this._drawLast=d),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(n)}}});function Gu(n){return we.canvas?new qu(n):null}var ha=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{}return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Lf={_initContainer:function(){this._container=Fe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ks.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var a=n._container=ha("shape");ze(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",n._path=ha("path"),a.appendChild(n._path),this._updateStyle(n),this._layers[x(n)]=n},_addPath:function(n){var a=n._container;this._container.appendChild(a),n.options.interactive&&n.addInteractiveTarget(a)},_removePath:function(n){var a=n._container;Je(a),n.removeInteractiveTarget(a),delete this._layers[x(n)]},_updateStyle:function(n){var a=n._stroke,l=n._fill,d=n.options,m=n._container;m.stroked=!!d.stroke,m.filled=!!d.fill,d.stroke?(a||(a=n._stroke=ha("stroke")),m.appendChild(a),a.weight=d.weight+"px",a.color=d.color,a.opacity=d.opacity,d.dashArray?a.dashStyle=k(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=d.lineCap.replace("butt","flat"),a.joinstyle=d.lineJoin):a&&(m.removeChild(a),n._stroke=null),d.fill?(l||(l=n._fill=ha("fill")),m.appendChild(l),l.color=d.fillColor||d.color,l.opacity=d.fillOpacity):l&&(m.removeChild(l),n._fill=null)},_updateCircle:function(n){var a=n._point.round(),l=Math.round(n._radius),d=Math.round(n._radiusY||l);this._setPath(n,n._empty()?"M0 0":"AL "+a.x+","+a.y+" "+l+","+d+" 0,"+65535*360)},_setPath:function(n,a){n._path.v=a},_bringToFront:function(n){cr(n._container)},_bringToBack:function(n){dr(n._container)}},Si=we.vml?ha:Pe,xa=Ks.extend({_initContainer:function(){this._container=Si("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Si("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Je(this._container),He(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ks.prototype._update.call(this);var n=this._bounds,a=n.getSize(),l=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,l.setAttribute("width",a.x),l.setAttribute("height",a.y)),dt(l,n.min),l.setAttribute("viewBox",[n.min.x,n.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(n){var a=n._path=Si("path");n.options.className&&ze(a,n.options.className),n.options.interactive&&ze(a,"leaflet-interactive"),this._updateStyle(n),this._layers[x(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){Je(n._path),n.removeInteractiveTarget(n._path),delete this._layers[x(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var a=n._path,l=n.options;a&&(l.stroke?(a.setAttribute("stroke",l.color),a.setAttribute("stroke-opacity",l.opacity),a.setAttribute("stroke-width",l.weight),a.setAttribute("stroke-linecap",l.lineCap),a.setAttribute("stroke-linejoin",l.lineJoin),l.dashArray?a.setAttribute("stroke-dasharray",l.dashArray):a.removeAttribute("stroke-dasharray"),l.dashOffset?a.setAttribute("stroke-dashoffset",l.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),l.fill?(a.setAttribute("fill",l.fillColor||l.color),a.setAttribute("fill-opacity",l.fillOpacity),a.setAttribute("fill-rule",l.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(n,a){this._setPath(n,Ze(n._parts,a))},_updateCircle:function(n){var a=n._point,l=Math.max(Math.round(n._radius),1),d=Math.max(Math.round(n._radiusY),1)||l,m="a"+l+","+d+" 0 1,0 ",f=n._empty()?"M0 0":"M"+(a.x-l)+","+a.y+m+l*2+",0 "+m+-l*2+",0 ";this._setPath(n,f)},_setPath:function(n,a){n._path.setAttribute("d",a)},_bringToFront:function(n){cr(n._path)},_bringToBack:function(n){dr(n._path)}});we.vml&&xa.include(Lf);function Ku(n){return we.svg||we.vml?new xa(n):null}Be.include({getRenderer:function(n){var a=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var a=this._paneRenderers[n];return a===void 0&&(a=this._createRenderer({pane:n}),this._paneRenderers[n]=a),a},_createRenderer:function(n){return this.options.preferCanvas&&Gu(n)||Ku(n)}});var Qu=hr.extend({initialize:function(n,a){hr.prototype.initialize.call(this,this._boundsToLatLngs(n),a)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=oe(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function Tf(n,a){return new Qu(n,a)}xa.create=Si,xa.pointsToPath=Ze,Gs.geometryToLayer=yi,Gs.coordsToLatLng=wo,Gs.coordsToLatLngs=ji,Gs.latLngToCoords=_o,Gs.latLngsToCoords=Ni,Gs.getFeature=xr,Gs.asFeature=bi,Be.mergeOptions({boxZoom:!0});var Yu=Bs.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){Ie(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){He(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Je(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),aa(),ao(),this._startPoint=this._map.mouseEventToContainerPoint(n),Ie(document,{contextmenu:Rn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=Fe("div","leaflet-zoom-box",this._container),ze(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var a=new se(this._point,this._startPoint),l=a.getSize();dt(this._box,a.min),this._box.style.width=l.x+"px",this._box.style.height=l.y+"px"},_finish:function(){this._moved&&(Je(this._box),it(this._container,"leaflet-crosshair")),ia(),io(),He(document,{contextmenu:Rn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var a=new me(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(n){n.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Be.addInitHook("addHandler","boxZoom",Yu),Be.mergeOptions({doubleClickZoom:!0});var Xu=Bs.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var a=this._map,l=a.getZoom(),d=a.options.zoomDelta,m=n.originalEvent.shiftKey?l-d:l+d;a.options.doubleClickZoom==="center"?a.setZoom(m):a.setZoomAround(n.containerPoint,m)}});Be.addInitHook("addHandler","doubleClickZoom",Xu),Be.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ju=Bs.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new on(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}ze(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){it(this._map._container,"leaflet-grab"),it(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=oe(this._map.options.maxBounds);this._offsetLimit=D(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var a=this._lastTime=+new Date,l=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(l),this._times.push(a),this._prunePositions(a)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,a){return n-(n-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;n.x<a.min.x&&(n.x=this._viscousLimit(n.x,a.min.x)),n.y<a.min.y&&(n.y=this._viscousLimit(n.y,a.min.y)),n.x>a.max.x&&(n.x=this._viscousLimit(n.x,a.max.x)),n.y>a.max.y&&(n.y=this._viscousLimit(n.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,a=Math.round(n/2),l=this._initialWorldOffset,d=this._draggable._newPos.x,m=(d-a+l)%n+a-l,f=(d+a+l)%n-a-l,A=Math.abs(m+l)<Math.abs(f+l)?m:f;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=A},_onDragEnd:function(n){var a=this._map,l=a.options,d=!l.inertia||n.noInertia||this._times.length<2;if(a.fire("dragend",n),d)a.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),f=(this._lastTime-this._times[0])/1e3,A=l.easeLinearity,K=m.multiplyBy(A/f),J=K.distanceTo([0,0]),ae=Math.min(l.inertiaMaxSpeed,J),fe=K.multiplyBy(ae/J),Ce=ae/(l.inertiaDeceleration*A),Ae=fe.multiplyBy(-Ce/2).round();!Ae.x&&!Ae.y?a.fire("moveend"):(Ae=a._limitOffset(Ae,a.options.maxBounds),Q(function(){a.panBy(Ae,{duration:Ce,easeLinearity:A,noMoveStart:!0,animate:!0})}))}}});Be.addInitHook("addHandler","dragging",Ju),Be.mergeOptions({keyboard:!0,keyboardPanDelta:80});var em=Bs.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),Ie(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),He(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,a=document.documentElement,l=n.scrollTop||a.scrollTop,d=n.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(d,l)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var a=this._panKeys={},l=this.keyCodes,d,m;for(d=0,m=l.left.length;d<m;d++)a[l.left[d]]=[-1*n,0];for(d=0,m=l.right.length;d<m;d++)a[l.right[d]]=[n,0];for(d=0,m=l.down.length;d<m;d++)a[l.down[d]]=[0,n];for(d=0,m=l.up.length;d<m;d++)a[l.up[d]]=[0,-1*n]},_setZoomDelta:function(n){var a=this._zoomKeys={},l=this.keyCodes,d,m;for(d=0,m=l.zoomIn.length;d<m;d++)a[l.zoomIn[d]]=n;for(d=0,m=l.zoomOut.length;d<m;d++)a[l.zoomOut[d]]=-n},_addHooks:function(){Ie(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){He(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var a=n.keyCode,l=this._map,d;if(a in this._panKeys){if(!l._panAnim||!l._panAnim._inProgress)if(d=this._panKeys[a],n.shiftKey&&(d=q(d).multiplyBy(3)),l.options.maxBounds&&(d=l._limitOffset(q(d),l.options.maxBounds)),l.options.worldCopyJump){var m=l.wrapLatLng(l.unproject(l.project(l.getCenter()).add(d)));l.panTo(m)}else l.panBy(d)}else if(a in this._zoomKeys)l.setZoom(l.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&l._popup&&l._popup.options.closeOnEscapeKey)l.closePopup();else return;Rn(n)}}});Be.addInitHook("addHandler","keyboard",em),Be.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var tm=Bs.extend({addHooks:function(){Ie(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){He(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var a=ku(n),l=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var d=Math.max(l-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),d),Rn(n)},_performZoom:function(){var n=this._map,a=n.getZoom(),l=this._map.options.zoomSnap||0;n._stop();var d=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,f=l?Math.ceil(m/l)*l:m,A=n._limitZoom(a+(this._delta>0?f:-f))-a;this._delta=0,this._startTime=null,A&&(n.options.scrollWheelZoom==="center"?n.setZoom(a+A):n.setZoomAround(this._lastMousePos,a+A))}});Be.addInitHook("addHandler","scrollWheelZoom",tm);var If=600;Be.mergeOptions({tapHold:we.touchNative&&we.safari&&we.mobile,tapTolerance:15});var sm=Bs.extend({addHooks:function(){Ie(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){He(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(clearTimeout(this._holdTimeout),n.touches.length===1){var a=n.touches[0];this._startPos=this._newPos=new $(a.clientX,a.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Ie(document,"touchend",wt),Ie(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),If),Ie(document,"touchend touchcancel contextmenu",this._cancel,this),Ie(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function n(){He(document,"touchend",wt),He(document,"touchend touchcancel",n)},_cancel:function(){clearTimeout(this._holdTimeout),He(document,"touchend touchcancel contextmenu",this._cancel,this),He(document,"touchmove",this._onMove,this)},_onMove:function(n){var a=n.touches[0];this._newPos=new $(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(n,a){var l=new MouseEvent(n,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});l._simulated=!0,a.target.dispatchEvent(l)}});Be.addInitHook("addHandler","tapHold",sm),Be.mergeOptions({touchZoom:we.touch,bounceAtZoomLimits:!0});var nm=Bs.extend({addHooks:function(){ze(this._map._container,"leaflet-touch-zoom"),Ie(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){it(this._map._container,"leaflet-touch-zoom"),He(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var a=this._map;if(!(!n.touches||n.touches.length!==2||a._animatingZoom||this._zooming)){var l=a.mouseEventToContainerPoint(n.touches[0]),d=a.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(l.add(d)._divideBy(2))),this._startDist=l.distanceTo(d),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),Ie(document,"touchmove",this._onTouchMove,this),Ie(document,"touchend touchcancel",this._onTouchEnd,this),wt(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var a=this._map,l=a.mouseEventToContainerPoint(n.touches[0]),d=a.mouseEventToContainerPoint(n.touches[1]),m=l.distanceTo(d)/this._startDist;if(this._zoom=a.getScaleZoom(m,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&m<1||this._zoom>a.getMaxZoom()&&m>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,m===1)return}else{var f=l._add(d)._divideBy(2)._subtract(this._centerPoint);if(m===1&&f.x===0&&f.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(f),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),de(this._animRequest);var A=u(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Q(A,this,!0),wt(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,de(this._animRequest),He(document,"touchmove",this._onTouchMove,this),He(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Be.addInitHook("addHandler","touchZoom",nm),Be.BoxZoom=Yu,Be.DoubleClickZoom=Xu,Be.Drag=Ju,Be.Keyboard=em,Be.ScrollWheelZoom=tm,Be.TapHold=sm,Be.TouchZoom=nm,r.Bounds=se,r.Browser=we,r.CRS=U,r.Canvas=qu,r.Circle=bo,r.CircleMarker=vi,r.Class=Y,r.Control=bs,r.DivIcon=Hu,r.DivOverlay=Rs,r.DomEvent=G0,r.DomUtil=W0,r.Draggable=on,r.Evented=ie,r.FeatureGroup=Ws,r.GeoJSON=Gs,r.GridLayer=ma,r.Handler=Bs,r.Icon=mr,r.ImageOverlay=wi,r.LatLng=B,r.LatLngBounds=me,r.Layer=ws,r.LayerGroup=ur,r.LineUtil=of,r.Map=Be,r.Marker=gi,r.Mixin=tf,r.Path=cn,r.Point=$,r.PolyUtil=sf,r.Polygon=hr,r.Polyline=qs,r.Popup=_i,r.PosAnimation=Su,r.Projection=cf,r.Rectangle=Qu,r.Renderer=Ks,r.SVG=xa,r.SVGOverlay=Zu,r.TileLayer=pr,r.Tooltip=ki,r.Transformation=re,r.Util=je,r.VideoOverlay=Uu,r.bind=u,r.bounds=D,r.canvas=Gu,r.circle=gf,r.circleMarker=ff,r.control=ca,r.divIcon=Sf,r.extend=o,r.featureGroup=hf,r.geoJSON=$u,r.geoJson=jf,r.gridLayer=Cf,r.icon=xf,r.imageOverlay=Nf,r.latLng=ce,r.latLngBounds=oe,r.layerGroup=mf,r.map=K0,r.marker=pf,r.point=q,r.polygon=yf,r.polyline=vf,r.popup=_f,r.rectangle=Tf,r.setOptions=g,r.stamp=x,r.svg=Ku,r.svgOverlay=wf,r.tileLayer=Vu,r.tooltip=kf,r.transformation=Z,r.version=i,r.videoOverlay=bf;var Ef=window.L;r.noConflict=function(){return window.L=Ef,this},window.L=r})})(sd,sd.exports);var ci=sd.exports;const ru=Nh(ci);function au(t,s,r){return Object.freeze({instance:t,context:s,container:r})}function iu(t,s){return s==null?function(i,o){const c=E.useRef();return c.current||(c.current=t(i,o)),c}:function(i,o){const c=E.useRef();c.current||(c.current=t(i,o));const u=E.useRef(i),{instance:h}=c.current;return E.useEffect(function(){u.current!==i&&(s(h,i,u.current),u.current=i)},[h,i,o]),c}}function Cj(t,s){E.useEffect(function(){return(s.layerContainer??s.map).addLayer(t.instance),function(){var c;(c=s.layerContainer)==null||c.removeLayer(t.instance),s.map.removeLayer(t.instance)}},[s,t])}function N0(t){return function(r){const i=y0(),o=t(nu(r,i),i);return f0(i.map,r.attribution),j0(o.current,r.eventHandlers),Cj(o.current,i),o}}function Pj(t,s){const r=iu(t,s),i=N0(r);return wj(i)}function Lj(t,s){const r=iu(t),i=Sj(r,s);return _j(i)}function Tj(t,s){const r=iu(t,s),i=N0(r);return kj(i)}function Ij(t,s,r){const{opacity:i,zIndex:o}=s;i!=null&&i!==r.opacity&&t.setOpacity(i),o!=null&&o!==r.zIndex&&t.setZIndex(o)}function nd(){return nd=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},nd.apply(this,arguments)}function Ej({bounds:t,boundsOptions:s,center:r,children:i,className:o,id:c,placeholder:u,style:h,whenReady:x,zoom:j,...w},T){const[S]=E.useState({className:o,id:c,style:h}),[N,P]=E.useState(null);E.useImperativeHandle(T,()=>(N==null?void 0:N.map)??null,[N]);const g=E.useCallback(v=>{if(v!==null&&N===null){const y=new ci.Map(v,w);r!=null&&j!=null?y.setView(r,j):t!=null&&y.fitBounds(t,s),x!=null&&y.whenReady(x),P(Nj(y))}},[]);E.useEffect(()=>()=>{N==null||N.map.remove()},[N]);const M=N?tn.createElement(v0,{value:N},i):u??null;return tn.createElement("div",nd({},S,{ref:g}),M)}const zj=E.forwardRef(Ej),Mj=Pj(function({position:s,...r},i){const o=new ci.Marker(s,r);return au(o,bj(i,{overlayContainer:o}))},function(s,r,i){r.position!==i.position&&s.setLatLng(r.position),r.icon!=null&&r.icon!==i.icon&&s.setIcon(r.icon),r.zIndexOffset!=null&&r.zIndexOffset!==i.zIndexOffset&&s.setZIndexOffset(r.zIndexOffset),r.opacity!=null&&r.opacity!==i.opacity&&s.setOpacity(r.opacity),s.dragging!=null&&r.draggable!==i.draggable&&(r.draggable===!0?s.dragging.enable():s.dragging.disable())}),Aj=Lj(function(s,r){const i=new ci.Popup(s,r.overlayContainer);return au(i,r)},function(s,r,{position:i},o){E.useEffect(function(){const{instance:u}=s;function h(j){j.popup===u&&(u.update(),o(!0))}function x(j){j.popup===u&&o(!1)}return r.map.on({popupopen:h,popupclose:x}),r.overlayContainer==null?(i!=null&&u.setLatLng(i),u.openOn(r.map)):r.overlayContainer.bindPopup(u),function(){var w;r.map.off({popupopen:h,popupclose:x}),(w=r.overlayContainer)==null||w.unbindPopup(),r.map.removeLayer(u)}},[s,r,o,i])}),Oj=Tj(function({url:s,...r},i){const o=new ci.TileLayer(s,nu(r,i));return au(o,i)},function(s,r,i){Ij(s,r,i);const{url:o}=r;o!=null&&o!==i.url&&s.setUrl(o)});delete ru.Icon.Default.prototype._getIconUrl;ru.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Bj=(t,s)=>{const r=`
    <svg width="25" height="25" viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg">
      <circle cx="12.5" cy="12.5" r="10" fill="${t}" stroke="white" stroke-width="2"/>
      <circle cx="12.5" cy="12.5" r="6" fill="white" opacity="0.8"/>
    </svg>
  `;return ru.divIcon({html:r,className:"custom-marker",iconSize:[25,25],iconAnchor:[12.5,12.5]})},jh=t=>{switch(t){case"delivered":return"#10b981";case"problem":return"#ef4444";case"rescheduled":return"#f59e0b";case"pending":return"#3b82f6";default:return"#6b7280"}},Rj=t=>{switch(t){case"delivered":return"تم التوصيل";case"problem":return"مشكلة في التسليم";case"rescheduled":return"معاد جدولتها";case"pending":return"في الانتظار";default:return"غير محدد"}};function Dj({points:t,onPointClick:s,activeFilter:r="all",className:i=""}){const[o,c]=E.useState(null),u=[31.3547,34.3088],h=[[31.2,34.2],[31.6,34.5]],x=r==="all"?t:t.filter(j=>j.status===r);return E.useEffect(()=>{const j=document.createElement("style");return j.textContent=`
      .custom-marker {
        background: none !important;
        border: none !important;
      }
      .leaflet-popup-content-wrapper {
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      }
      .leaflet-popup-content {
        margin: 0;
        padding: 0;
        border-radius: 12px;
        overflow: hidden;
      }
      .leaflet-popup-tip {
        background: white;
      }
    `,document.head.appendChild(j),()=>{document.head.removeChild(j)}},[]),e.jsxs("div",{className:`relative ${i}`,children:[e.jsxs(zj,{center:u,zoom:11,className:"z-0",style:{height:"500px",width:"100%",borderRadius:"12px"},maxBounds:h,maxBoundsViscosity:1,ref:c,children:[e.jsx(Oj,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),x.map(j=>e.jsx(Mj,{position:[j.lat,j.lng],icon:Bj(jh(j.status),j.status),children:e.jsx(Aj,{children:e.jsxs("div",{className:"p-4 min-w-[250px]",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:jh(j.status)}}),e.jsx("h3",{className:"font-bold text-gray-900",children:j.title})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"الحالة:"}),e.jsx("span",{className:"font-medium",children:Rj(j.status)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"رقم الهوية:"}),e.jsx("span",{className:"font-medium",children:j.data.nationalId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"الهاتف:"}),e.jsx("span",{className:"font-medium",children:j.data.phone})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"المنطقة:"}),e.jsx("span",{className:"font-medium",children:j.data.detailedAddress.district})]})]}),e.jsx("button",{onClick:()=>s(j.data),className:"w-full mt-3 bg-blue-600 text-white py-2 px-4 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"عرض التفاصيل الكاملة"})]})})},j.id))]}),e.jsxs("div",{className:"absolute bottom-4 right-4 bg-white rounded-xl p-4 shadow-lg border border-gray-200 z-10",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3 text-sm",children:"مفتاح الخريطة"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-xs",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),e.jsxs("span",{children:["تم التوصيل (",t.filter(j=>j.status==="delivered").length,")"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-xs",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500"}),e.jsxs("span",{children:["مشكلة في التسليم (",t.filter(j=>j.status==="problem").length,")"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-xs",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-orange-500"}),e.jsxs("span",{children:["معاد جدولتها (",t.filter(j=>j.status==="rescheduled").length,")"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-xs",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500"}),e.jsxs("span",{children:["في الانتظار (",t.filter(j=>j.status==="pending").length,")"]})]})]})]}),e.jsx("div",{className:"absolute top-4 left-4 z-10 space-y-2",children:e.jsx("button",{onClick:()=>o==null?void 0:o.setView(u,11),className:"bg-white p-3 rounded-lg shadow-lg border border-gray-200 hover:bg-gray-50 transition-colors",title:"العودة لمركز غزة",children:e.jsxs("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})})]})}function Fj({onNavigateToIndividualSend:t}){E.useState("");const[s,r]=E.useState("all"),[i,o]=E.useState("all"),[c,u]=E.useState("all"),[h,x]=E.useState("all"),[j,w]=E.useState("all"),[T,S]=E.useState("2024-01-01"),[N,P]=E.useState(new Date().toISOString().split("T")[0]),[g,M]=E.useState(!1),[v,y]=E.useState(null),k=at.map(Y=>{var ie;const _=Se.find($=>$.id===Y.beneficiaryId);if(!_||!_.location)return null;let G="pending";return Y.status==="delivered"?G="delivered":Y.status==="failed"?G="problem":Y.status==="rescheduled"?G="rescheduled":G="pending",{id:Y.id,lat:_.location.lat,lng:_.location.lng,status:G,title:_.name,description:`${Y.id} - ${((ie=is.find($=>$.id===Y.packageId))==null?void 0:ie.name)||"طرد"}`,data:_}}).filter(Boolean),C=[...new Set(Se.map(Y=>Y.detailedAddress.governorate))],R=[...new Set(Se.filter(Y=>c==="all"||Y.detailedAddress.governorate===c).map(Y=>Y.detailedAddress.city))],O=[...new Set(Se.filter(Y=>(c==="all"||Y.detailedAddress.governorate===c)&&(h==="all"||Y.detailedAddress.city===h)).map(Y=>Y.detailedAddress.district))],p=at.filter(Y=>Y.status==="delivered").length,I=at.filter(Y=>Y.status==="pending").length,W=at.filter(Y=>Y.status==="in_progress"||Y.status==="assigned").length,z=at.filter(Y=>Y.status==="failed"||Y.status==="rescheduled").length,Q=k.filter(Y=>{const _=Y.data,G=at.find($=>$.beneficiaryId===_.id),ie=G?is.find($=>$.id===G.packageId):null;if(s!=="all"&&Y.status!==s||i!=="all"&&(ie==null?void 0:ie.type)!==i||c!=="all"&&_.detailedAddress.governorate!==c||h!=="all"&&_.detailedAddress.city!==h||j!=="all"&&_.detailedAddress.district!==j)return!1;if(G){const $=new Date(G.createdAt).toISOString().split("T")[0];if($<T||$>N)return!1}return!0}),de=Y=>{y(Y),M(!0)},je=()=>{const Y={date:new Date().toISOString(),filters:{status:s,type:i,province:c,city:h,district:j,fromDate:T,toDate:N},statistics:{delivered:p,inPreparation:I,inTransit:W,needsFollowUp:z,totalPoints:Q.length},points:Q.map(F=>({id:F.id,beneficiary:F.data.name,status:F.status,location:`${F.data.detailedAddress.governorate} - ${F.data.detailedAddress.city}`}))},_=JSON.stringify(Y,null,2),G=new Blob([_],{type:"application/json"}),ie=URL.createObjectURL(G),$=document.createElement("a");$.href=ie,$.download=`تقرير_الخريطة_${new Date().toISOString().split("T")[0]}.json`,$.click(),URL.revokeObjectURL(ie),alert("تم تصدير تقرير الخريطة بنجاح")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"طرود تم توصيلها"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"1,247"}),e.jsxs("p",{className:"text-green-600 text-sm mt-2 flex items-center",children:[e.jsx(ss,{className:"w-4 h-4 ml-1"}),"+156 اليوم"]})]}),e.jsx("div",{className:"bg-green-100 p-4 rounded-2xl",children:e.jsx(ne,{className:"w-8 h-8 text-green-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"طرود قيد التحضير"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"89"}),e.jsxs("p",{className:"text-blue-600 text-sm mt-2 flex items-center",children:[e.jsx($e,{className:"w-4 h-4 ml-1"}),"متوسط 24 ساعة"]})]}),e.jsx("div",{className:"bg-blue-100 p-4 rounded-2xl",children:e.jsx(Ee,{className:"w-8 h-8 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"طرود في الطريق"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"1,247"}),e.jsxs("p",{className:"text-orange-600 text-sm mt-2 flex items-center",children:[e.jsx(St,{className:"w-4 h-4 ml-1"}),"متوسط 4 ساعات"]})]}),e.jsx("div",{className:"bg-orange-100 p-4 rounded-2xl",children:e.jsx(St,{className:"w-8 h-8 text-orange-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"طرود لم يتم توصيلها"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"12"}),e.jsxs("p",{className:"text-red-600 text-sm mt-2 flex items-center",children:[e.jsx(ge,{className:"w-4 h-4 ml-1"}),"تحتاج إجراء فوري"]})]}),e.jsx("div",{className:"bg-red-100 p-4 rounded-2xl",children:e.jsx(ge,{className:"w-8 h-8 text-red-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[e.jsx(At,{className:"w-5 h-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"اختيار المنطقة الجغرافية"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المحافظة"}),e.jsxs("select",{value:c,onChange:Y=>{u(Y.target.value),x("all"),w("all")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع المحافظات"}),C.map(Y=>e.jsx("option",{value:Y,children:Y},Y))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المدينة / المخيم"}),e.jsxs("select",{value:h,onChange:Y=>{x(Y.target.value),w("all")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"اختر المحافظة أولاً"}),R.map(Y=>e.jsx("option",{value:Y,children:Y},Y))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحي / المنطقة"}),e.jsxs("select",{value:j,onChange:Y=>w(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"اختر المدينة أولاً"}),O.map(Y=>e.jsx("option",{value:Y,children:Y},Y))]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"الخريطة التفاعلية - التتبع الجغرافي المباشر"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"انقر على أي نقطة لعرض ملف المستفيد كاملاً مع سجل الطرود و إثبات التسليم"})]}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsxs("button",{onClick:je,className:"bg-green-600 text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-green-700 transition-colors flex items-center",children:[e.jsx(st,{className:"w-4 h-4 ml-2"}),"تصدير التقرير"]}),e.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx(jt,{className:"w-4 h-4 ml-2"}),"تحديث"]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"حالة التوصيل"}),e.jsxs("select",{value:s,onChange:Y=>r(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع الحالات"}),e.jsx("option",{value:"delivered",children:"تم التوصيل"}),e.jsx("option",{value:"problem",children:"مشكلة في التسليم"}),e.jsx("option",{value:"rescheduled",children:"معاد جدولتها"}),e.jsx("option",{value:"pending",children:"في الانتظار"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع المساعدة"}),e.jsxs("select",{value:i,onChange:Y=>o(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع الأنواع"}),e.jsx("option",{value:"مواد غذائية",children:"مواد غذائية"}),e.jsx("option",{value:"ملابس",children:"ملابس"}),e.jsx("option",{value:"أدوية",children:"أدوية"}),e.jsx("option",{value:"بطانيات",children:"بطانيات"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"من تاريخ"}),e.jsx("input",{type:"date",value:T,onChange:Y=>S(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"إلى التاريخ"}),e.jsx("input",{type:"date",value:N,onChange:Y=>P(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{r("all"),o("all"),u("all"),x("all"),w("all"),S("2024-01-01"),P(new Date().toISOString().split("T")[0])},className:"w-full bg-gray-600 text-white py-2 px-4 rounded-lg text-sm font-medium hover:bg-gray-700 transition-colors",children:"إعادة تعيين"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Dj,{points:Q,onPointClick:de,activeFilter:s,className:"w-full"}),e.jsxs("div",{className:"absolute top-4 right-4 bg-white/90 backdrop-blur-sm rounded-xl p-4 shadow-lg border border-gray-200 z-10",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm",children:"معلومات الخريطة"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"النقاط المعروضة:"}),e.jsx("span",{className:"font-medium",children:Q.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"المنطقة:"}),e.jsx("span",{className:"font-medium",children:"قطاع غزة"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"آخر تحديث:"}),e.jsx("span",{className:"font-medium",children:new Date().toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"})}),e.jsx("span",{className:"font-medium",children:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]})]})]})]}),e.jsxs("div",{className:"mt-6 grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500"}),e.jsx("span",{className:"font-medium text-green-800",children:"تم التوصيل"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-900 mt-2",children:Q.filter(Y=>Y.status==="delivered").length})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500"}),e.jsx("span",{className:"font-medium text-red-800",children:"فشل التسليم"})]}),e.jsx("p",{className:"text-2xl font-bold text-red-900 mt-2",children:Q.filter(Y=>Y.status==="problem").length})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl border border-orange-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-orange-500"}),e.jsx("span",{className:"font-medium text-orange-800",children:"في الانتظار"})]}),e.jsx("p",{className:"text-2xl font-bold text-orange-900 mt-2",children:Q.filter(Y=>Y.status==="rescheduled").length})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500"}),e.jsx("span",{className:"font-medium text-blue-800",children:"قيد التوصيل"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 mt-2",children:Q.filter(Y=>Y.status==="pending").length})]})]})]}),g&&v&&e.jsx(su,{beneficiary:v,onClose:()=>{M(!1),y(null)},onNavigateToIndividualSend:t,onEditBeneficiary:Y=>{alert("لا يمكن التعديل من هذه الشاشة، يرجى الانتقال إلى قائمة المستفيدين")}})]})}function $j(){const[t,s]=E.useState("overview"),[r,i]=E.useState("month"),[o,c]=E.useState("overview"),[u,h]=E.useState("all"),[x,j]=E.useState(""),[w,T]=E.useState("all"),[S,N]=E.useState("all"),[P,g]=E.useState(null),[M,v]=E.useState(!1),[y,k]=E.useState(!1),C=Xr(),R=[{id:"overview",name:"نظرة عامة",icon:gt},{id:"batches",name:"دفعات التوزيع",icon:Ee},{id:"performance",name:"تقارير الأداء",icon:ss},{id:"geographical",name:"التوزيع الجغرافي",icon:At}],O=[{id:"overview",name:"نظرة عامة",icon:gt},{id:"delivery",name:"تقرير التسليم",icon:ne},{id:"performance",name:"تقرير الأداء",icon:ss},{id:"beneficiaries",name:"تقرير المستفيدين",icon:Te},{id:"geographical",name:"التوزيع الجغرافي",icon:At}],p=[{id:"all",name:"جميع المناطق",count:1502},{id:"north",name:"شمال غزة",count:387},{id:"gaza",name:"مدينة غزة",count:456},{id:"middle",name:"الوسط",count:234},{id:"khan-younis",name:"خان يونس",count:298},{id:"rafah",name:"رفح",count:127}],I=[{name:"خالد أحمد",delivered:247,successRate:98.5,rating:4.9},{name:"محمد سعيد",delivered:234,successRate:96.2,rating:4.8},{name:"أحمد علي",delivered:189,successRate:94.8,rating:4.7},{name:"يوسف حسام",delivered:156,successRate:93.1,rating:4.6},{name:"سامي محمد",delivered:134,successRate:91.5,rating:4.5}],W=[{type:"طرود غذائية",count:987,percentage:65,color:"bg-orange-500"},{type:"طرود طبية",count:304,percentage:20,color:"bg-red-500"},{type:"ملابس",count:152,percentage:10,color:"bg-purple-500"},{type:"بطانيات",count:76,percentage:5,color:"bg-blue-500"}],z=[{month:"يناير",delivered:1247,failed:45,pending:89},{month:"فبراير",delivered:1356,failed:32,pending:67},{month:"مارس",delivered:1489,failed:28,pending:78},{month:"أبريل",delivered:1567,failed:23,pending:56},{month:"مايو",delivered:1634,failed:19,pending:45}],Q=Fn.filter(_=>{var F;const G=_.name.toLowerCase().includes(x.toLowerCase())||((F=_.description)==null?void 0:F.toLowerCase().includes(x.toLowerCase())),ie=w==="all"||_.organizationId===w,$=S==="all"||_.status===S;return G&&ie&&$}),de=_=>{g(_),k(!0)},je=()=>{v(!0)},Y=()=>{let _;t==="batches"?_={type:"distribution_batches",generatedAt:new Date().toISOString(),totalBatches:Q.length,batches:Q.map(q=>{const se=La(q.id),D=Ht.find(me=>me.id===q.organizationId);return{name:q.name,organization:(D==null?void 0:D.name)||"غير محدد",createdAt:q.createdAt,status:q.status,totalTasks:se.totalTasks,deliveredTasks:se.deliveredTasks,failedTasks:se.failedTasks,deliveryRate:se.deliveryRate}})}:_={type:o,dateRange:r,region:u,generatedAt:new Date().toISOString(),stats:C,details:{totalTasks:at.length,completedTasks:at.filter(q=>q.status==="delivered").length,pendingTasks:at.filter(q=>q.status==="pending").length,failedTasks:at.filter(q=>q.status==="failed").length,topCouriers:I,packageDistribution:W,monthlyTrends:z}};const G=JSON.stringify(_,null,2),ie=new Blob([G],{type:"application/json"}),$=URL.createObjectURL(ie),F=document.createElement("a");F.href=$,F.download=`تقرير_${t==="batches"?"دفعات_التوزيع":"التوزيع"}_${new Date().toISOString().split("T")[0]}.json`,F.click(),URL.revokeObjectURL($),alert(`تم تصدير ${t==="batches"?"تقرير دفعات التوزيع":"التقرير"} بنجاح`)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"flex space-x-1 space-x-reverse",children:R.map(_=>{const G=_.icon,ie=t===_.id;return e.jsxs("button",{onClick:()=>s(_.id),className:`flex items-center space-x-2 space-x-reverse px-4 py-3 rounded-lg text-sm font-medium transition-colors ${ie?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{children:_.name})]},_.id)})}),e.jsx(H,{variant:"success",icon:st,iconPosition:"right",onClick:Y,children:"تصدير التقرير"})]})}),t==="batches"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(V,{children:e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsx(be,{type:"text",icon:Tt,iconPosition:"right",placeholder:"البحث في دفعات التوزيع...",value:x,onChange:_=>j(_.target.value)}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المؤسسة"}),e.jsxs("select",{value:w,onChange:_=>T(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع المؤسسات"}),Ht.map(_=>e.jsx("option",{value:_.id,children:_.name},_.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحالة"}),e.jsxs("select",{value:S,onChange:_=>N(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع الحالات"}),e.jsx("option",{value:"active",children:"نشطة"}),e.jsx("option",{value:"completed",children:"مكتملة"}),e.jsx("option",{value:"paused",children:"متوقفة"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(H,{variant:"primary",icon:Lt,iconPosition:"right",onClick:je,className:"w-full",children:"إضافة دفعة جديدة"})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(V,{className:"bg-blue-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl mb-2",children:e.jsx(Ee,{className:"w-6 h-6 text-blue-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-blue-600",children:"إجمالي الدفعات"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:Fn.length})]})}),e.jsx(V,{className:"bg-green-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-xl mb-2",children:e.jsx(ne,{className:"w-6 h-6 text-green-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-green-600",children:"دفعات نشطة"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:Fn.filter(_=>_.status==="active").length})]})}),e.jsx(V,{className:"bg-purple-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-xl mb-2",children:e.jsx(Qe,{className:"w-6 h-6 text-purple-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-purple-600",children:"إجمالي المهام"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:Fn.reduce((_,G)=>_+La(G.id).totalTasks,0)})]})}),e.jsx(V,{className:"bg-orange-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-xl mb-2",children:e.jsx(ss,{className:"w-6 h-6 text-orange-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-orange-600",children:"متوسط نسبة التسليم"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-900",children:[Fn.length>0?Math.round(Fn.reduce((_,G)=>_+La(G.id).deliveryRate,0)/Fn.length):0,"%"]})]})})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["دفعات التوزيع (",Q.length,")"]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-blue-600",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"البيانات الوهمية"})]})]}),e.jsx("div",{className:"grid gap-4",children:Q.length>0?Q.map(_=>{const G=La(_.id),ie=Ht.find($=>$.id===_.organizationId);return e.jsx(V,{className:"hover:border-blue-300 transition-colors cursor-pointer",onClick:()=>de(_),children:e.jsxs("div",{className:"grid md:grid-cols-4 gap-6 items-center",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-2",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx(Ee,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:_.name}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mt-1",children:[e.jsx(ot,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:(ie==null?void 0:ie.name)||"غير محدد"})]})]})]}),_.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:_.description}),e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse mt-3 text-xs text-gray-500",children:[e.jsxs("span",{children:["تاريخ الإنشاء: ",new Date(_.createdAt).toLocaleDateString("ar-SA")]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["بواسطة: ",_.createdBy]})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-blue-600",children:G.totalTasks}),e.jsx("p",{className:"text-xs text-gray-600",children:"إجمالي المهام"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-green-600",children:G.deliveredTasks}),e.jsx("p",{className:"text-xs text-gray-600",children:"تم التسليم"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-red-600",children:G.failedTasks}),e.jsx("p",{className:"text-xs text-gray-600",children:"فشل"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-orange-600",children:G.pendingTasks}),e.jsx("p",{className:"text-xs text-gray-600",children:"معلق"})]})]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-2",children:e.jsx(Ne,{variant:_.status==="active"?"info":_.status==="completed"?"success":"warning",size:"sm",children:_.status==="active"?"نشطة":_.status==="completed"?"مكتملة":"متوقفة"})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[G.deliveryRate,"%"]}),e.jsx("p",{className:"text-xs text-gray-600",children:"نسبة التسليم"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${G.deliveryRate}%`}})})]})]})},_.id)}):e.jsx(V,{className:"p-12",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(Ee,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:x||w!=="all"||S!=="all"?"لا توجد دفعات مطابقة للفلاتر":"لا توجد دفعات توزيع"}),e.jsx("p",{className:"text-sm mt-2",children:x||w!=="all"||S!=="all"?"جرب تعديل الفلاتر أو مصطلح البحث":"ابدأ بإنشاء دفعة توزيع جديدة من صفحة المهام الجماعية"})]})})})]})]}),t==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(V,{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"إعدادات التقرير"})}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع التقرير"}),e.jsx("select",{value:o,onChange:_=>c(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:O.map(_=>e.jsx("option",{value:_.id,children:_.name},_.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الفترة الزمنية"}),e.jsxs("select",{value:r,onChange:_=>i(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"today",children:"اليوم"}),e.jsx("option",{value:"week",children:"هذا الأسبوع"}),e.jsx("option",{value:"month",children:"هذا الشهر"}),e.jsx("option",{value:"quarter",children:"هذا الربع"}),e.jsx("option",{value:"year",children:"هذا العام"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المنطقة"}),e.jsx("select",{value:u,onChange:_=>h(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:p.map(_=>e.jsx("option",{value:_.id,children:_.name},_.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تصفية إضافية"}),e.jsxs("button",{className:"w-full flex items-center justify-center px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Ln,{className:"w-4 h-4 ml-2"}),"فلاتر متقدمة"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"معدل التسليم"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[C.deliveryRate,"%"]}),e.jsxs("p",{className:"text-green-600 text-sm mt-2 flex items-center",children:[e.jsx(ss,{className:"w-4 h-4 ml-1"}),"+5% من الشهر الماضي"]})]}),e.jsx("div",{className:"bg-green-100 p-4 rounded-2xl",children:e.jsx(ne,{className:"w-8 h-8 text-green-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"متوسط وقت التسليم"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"2.3"}),e.jsx("p",{className:"text-blue-600 text-sm mt-2",children:"ساعة"})]}),e.jsx("div",{className:"bg-blue-100 p-4 rounded-2xl",children:e.jsx($e,{className:"w-8 h-8 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"رضا المستفيدين"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"4.7"}),e.jsxs("p",{className:"text-yellow-600 text-sm mt-2 flex items-center",children:[e.jsx(Es,{className:"w-4 h-4 ml-1"}),"من 5 نجوم"]})]}),e.jsx("div",{className:"bg-yellow-100 p-4 rounded-2xl",children:e.jsx(Tl,{className:"w-8 h-8 text-yellow-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"التكلفة لكل طرد"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"45"}),e.jsx("p",{className:"text-purple-600 text-sm mt-2",children:"شيكل"})]}),e.jsx("div",{className:"bg-purple-100 p-4 rounded-2xl",children:e.jsx(Ee,{className:"w-8 h-8 text-purple-600"})})]})})]}),e.jsx("div",{className:"grid lg:grid-cols-2 gap-8"})]}),t==="performance"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(Rp,{className:"w-6 h-6 ml-2 text-blue-600"}),"اتجاهات التسليم الشهرية"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"آخر 5 أشهر"})]}),e.jsx("div",{className:"space-y-4",children:z.map((_,G)=>{const ie=_.delivered+_.failed+_.pending,$=(_.delivered/ie*100).toFixed(1);return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-900",children:_.month}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:_.delivered}),e.jsx("span",{className:"text-sm text-gray-600 mr-1",children:"طرد"}),e.jsxs("div",{className:"text-xs text-green-600",children:[$,"% نجاح"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsxs("div",{className:"flex h-3 rounded-full overflow-hidden",children:[e.jsx("div",{className:"bg-green-500",style:{width:`${_.delivered/ie*100}%`}}),e.jsx("div",{className:"bg-blue-500",style:{width:`${_.pending/ie*100}%`}}),e.jsx("div",{className:"bg-red-500",style:{width:`${_.failed/ie*100}%`}})]})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["تم التسليم: ",_.delivered]}),e.jsxs("span",{children:["معلق: ",_.pending]}),e.jsxs("span",{children:["فشل: ",_.failed]})]})]},_.month)})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(Dp,{className:"w-6 h-6 ml-2 text-purple-600"}),"توزيع أنواع الطرود"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["إجمالي: ",W.reduce((_,G)=>_+G.count,0)]})]}),e.jsx("div",{className:"space-y-4",children:W.map((_,G)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("div",{className:`w-4 h-4 rounded ${_.color}`}),e.jsx("span",{className:"font-medium text-gray-900",children:_.type})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:_.count}),e.jsxs("div",{className:"text-sm text-gray-600",children:[_.percentage,"%"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${_.color}`,style:{width:`${_.percentage}%`}})})]},_.type))})]})]})}),t==="geographical"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(At,{className:"w-6 h-6 ml-2 text-green-600"}),"الأداء حسب المناطق"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"إجمالي الطرود الموزعة"})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.filter(_=>_.id!=="all").map(_=>{const G=75+Math.random()*20,ie=2+Math.random()*2;return e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:_.name}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:_.count})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"معدل النجاح:"}),e.jsxs("span",{className:"font-medium "+(G>80?"text-green-600":G>60?"text-yellow-600":"text-red-600"),children:[G.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full "+(G>80?"bg-green-500":G>60?"bg-yellow-500":"bg-red-500"),style:{width:`${G}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"متوسط الوقت:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[ie.toFixed(1)," ساعة"]})]})]})]},_.id)})})]})}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(Tl,{className:"w-6 h-6 ml-2 text-yellow-600"}),"أفضل المندوبين"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"هذا الشهر"})]}),e.jsx("div",{className:"space-y-4",children:I.map((_,G)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm ${G===0?"bg-yellow-500":G===1?"bg-gray-400":G===2?"bg-orange-600":"bg-blue-500"}`,children:G+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:_.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[_.delivered," طرد موزع"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse mb-1",children:[e.jsx(Es,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:_.rating})]}),e.jsxs("div",{className:"text-sm text-green-600 font-medium",children:[_.successRate,"%"]})]})]},_.name))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(Qe,{className:"w-6 h-6 ml-2 text-purple-600"}),"رؤى الأداء"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(ne,{className:"w-4 h-4 ml-2 text-green-600"}),"نقاط القوة"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-sm text-green-700 bg-green-50 p-2 rounded-lg",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:"معدل تسليم عالي في منطقة خان يونس (75%)"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-sm text-green-700 bg-green-50 p-2 rounded-lg",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:"تحسن في أوقات التسليم بنسبة 15%"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-sm text-green-700 bg-green-50 p-2 rounded-lg",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:"رضا عالي من المستفيدين (4.7/5)"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(ge,{className:"w-4 h-4 ml-2 text-orange-600"}),"نقاط التحسين"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-sm text-orange-700 bg-orange-50 p-2 rounded-lg",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{children:"تحسين التوصيل في منطقة رفح (40%)"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-sm text-orange-700 bg-orange-50 p-2 rounded-lg",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{children:"تقليل حالات فشل التسليم"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-sm text-orange-700 bg-orange-50 p-2 rounded-lg",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{children:"تحديث قاعدة بيانات العناوين"})]})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(gt,{className:"w-6 h-6 ml-2 text-blue-600"}),"إحصائيات مفصلة"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-green-50 p-6 rounded-xl border border-green-200",children:[e.jsxs("h4",{className:"font-medium text-green-800 mb-4 flex items-center",children:[e.jsx(ne,{className:"w-5 h-5 ml-2"}),"الطرود المسلمة بنجاح"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"مواد غذائية:"}),e.jsx("span",{className:"font-medium text-green-900",children:"987 طرد"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"ملابس:"}),e.jsx("span",{className:"font-medium text-green-900",children:"152 طرد"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"أدوية:"}),e.jsx("span",{className:"font-medium text-green-900",children:"304 طرد"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"بطانيات:"}),e.jsx("span",{className:"font-medium text-green-900",children:"76 طرد"})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-6 rounded-xl border border-yellow-200",children:[e.jsxs("h4",{className:"font-medium text-yellow-800 mb-4 flex items-center",children:[e.jsx($e,{className:"w-5 h-5 ml-2"}),"الطرود المعلقة"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-yellow-700",children:"في الانتظار:"}),e.jsx("span",{className:"font-medium text-yellow-900",children:"89 طرد"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-yellow-700",children:"قيد التوصيل:"}),e.jsx("span",{className:"font-medium text-yellow-900",children:"45 طرد"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-yellow-700",children:"تم إعادة الجدولة:"}),e.jsx("span",{className:"font-medium text-yellow-900",children:"23 طرد"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-yellow-700",children:"قيد التحضير:"}),e.jsx("span",{className:"font-medium text-yellow-900",children:"67 طرد"})]})]})]}),e.jsxs("div",{className:"bg-red-50 p-6 rounded-xl border border-red-200",children:[e.jsxs("h4",{className:"font-medium text-red-800 mb-4 flex items-center",children:[e.jsx(ge,{className:"w-5 h-5 ml-2"}),"المشاكل والتحديات"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-700",children:"فشل التسليم:"}),e.jsx("span",{className:"font-medium text-red-900",children:"12 طرد"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-700",children:"عناوين خاطئة:"}),e.jsx("span",{className:"font-medium text-red-900",children:"8 طرد"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-700",children:"عدم توفر المستفيد:"}),e.jsx("span",{className:"font-medium text-red-900",children:"4 طرد"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-700",children:"مشاكل أمنية:"}),e.jsx("span",{className:"font-medium text-red-900",children:"2 طرد"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx($e,{className:"w-6 h-6 ml-2 text-blue-600"}),"تحليل الأوقات والكفاءة"]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 p-4 rounded-xl mb-3",children:e.jsx($e,{className:"w-8 h-8 text-blue-600 mx-auto"})}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"متوسط وقت التحضير"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"1.2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"ساعة"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-green-100 p-4 rounded-xl mb-3",children:e.jsx(St,{className:"w-8 h-8 text-green-600 mx-auto"})}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"متوسط وقت التوصيل"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"2.3"}),e.jsx("p",{className:"text-sm text-gray-600",children:"ساعة"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-purple-100 p-4 rounded-xl mb-3",children:e.jsx(Qe,{className:"w-8 h-8 text-purple-600 mx-auto"})}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"أفضل وقت للتوصيل"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"10-14"}),e.jsx("p",{className:"text-sm text-gray-600",children:"صباحاً"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-orange-100 p-4 rounded-xl mb-3",children:e.jsx(Dr,{className:"w-8 h-8 text-orange-600 mx-auto"})}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"أفضل يوم للتوصيل"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:"الأحد"}),e.jsx("p",{className:"text-sm text-gray-600",children:"أعلى معدل نجاح"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 rounded-2xl p-6 border border-blue-200",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(ss,{className:"w-6 h-6 ml-2 text-blue-600"}),"توصيات لتحسين الأداء"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"توصيات فورية:"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"زيادة عدد المندوبين في منطقة رفح لتحسين معدل التسليم"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"تحديث قاعدة بيانات العناوين لتقليل حالات العناوين الخاطئة"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"تدريب المندوبين على التعامل مع الحالات الصعبة"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-green-800",children:"توصيات طويلة المدى:"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"تطوير تطبيق جوال للمندوبين لتحسين التتبع"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"إنشاء نظام تقييم المستفيدين للخدمة"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"تطوير شراكات مع مؤسسات محلية لتحسين التغطية"})]})]})]})]})]}),y&&P&&e.jsx(ls,{isOpen:y,onClose:()=>{k(!1),g(null)},title:`تفاصيل دفعة التوزيع: ${P.name}`,size:"xl",children:e.jsx(Uj,{batch:P})}),M&&e.jsx(ls,{isOpen:M,onClose:()=>v(!1),title:"إنشاء دفعة توزيع جديدة",size:"md",children:e.jsxs("div",{className:"p-6 text-center",children:[e.jsxs("div",{className:"bg-blue-100 p-6 rounded-xl mb-6",children:[e.jsx(Lt,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-2",children:"إنشاء دفعة توزيع جديدة"}),e.jsx("p",{className:"text-gray-600",children:"يُنصح بإنشاء دفعات التوزيع من خلال صفحة المهام الجماعية"})]}),e.jsxs("div",{className:"space-y-4 text-sm text-gray-600 mb-6",children:[e.jsx("p",{children:"لإنشاء دفعة توزيع جديدة بشكل صحيح:"}),e.jsxs("ol",{className:"text-right space-y-2",children:[e.jsx("li",{children:'1. انتقل إلى صفحة "المهام الجماعية"'}),e.jsx("li",{children:"2. حدد المستفيدين والطرود"}),e.jsx("li",{children:"3. أنشئ دفعة توزيع جديدة أو اختر موجودة"}),e.jsx("li",{children:"4. ستظهر الدفعة هنا تلقائياً للمتابعة"})]})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-center",children:[e.jsx(H,{variant:"secondary",onClick:()=>v(!1),children:"إغلاق"}),e.jsx(H,{variant:"primary",onClick:()=>{alert("سيتم توجيهك إلى صفحة المهام الجماعية لإنشاء دفعة جديدة"),v(!1)},children:"انتقل إلى المهام الجماعية"})]})]})})]})}function Uj({batch:t}){const[s,r]=E.useState("overview"),[i,o]=E.useState(""),[c,u]=E.useState("all"),h=La(t.id),x=m0(t.id),j=Ht.find(P=>P.id===t.organizationId),T=x.map(P=>{const g=Se.find(M=>M.id===P.beneficiaryId);return g?{...g,taskStatus:P.status,taskId:P.id}:null}).filter(Boolean).filter(P=>{if(!P)return!1;const g=P.name.toLowerCase().includes(i.toLowerCase())||P.nationalId.includes(i),M=c==="all"||P.taskStatus===c;return g&&M}),S=[{id:"overview",name:"نظرة عامة",icon:gt},{id:"beneficiaries",name:"المستفيدين",icon:Te},{id:"tasks",name:"المهام",icon:Qe},{id:"analysis",name:"تحليل الأداء",icon:ss}],N=P=>{switch(P){case"pending":return"في الانتظار";case"assigned":return"معين";case"in_progress":return"قيد التنفيذ";case"delivered":return"تم التسليم";case"failed":return"فشل";case"rescheduled":return"معاد جدولته";default:return"غير محدد"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-xl border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse mb-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl",children:e.jsx(Ee,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:t.name}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mt-1",children:[e.jsx(ot,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-600",children:(j==null?void 0:j.name)||"غير محدد"})]})]})]}),t.description&&e.jsx("p",{className:"text-gray-700 mb-4",children:t.description}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"إجمالي المهام"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:h.totalTasks})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"تم التسليم"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:h.deliveredTasks})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"فشل التسليم"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:h.failedTasks})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"نسبة التسليم"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[h.deliveryRate,"%"]})]})]})]}),e.jsxs(V,{children:[e.jsx("div",{className:"flex space-x-1 space-x-reverse mb-6",children:S.map(P=>{const g=P.icon,M=s===P.id;return e.jsxs("button",{onClick:()=>r(P.id),className:`flex items-center space-x-2 space-x-reverse px-4 py-2 rounded-lg text-sm font-medium transition-colors ${M?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{children:P.name})]},P.id)})}),s==="overview"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"توزيع حالات التسليم"}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx("span",{className:"text-white font-bold",children:h.deliveredTasks})}),e.jsx("p",{className:"text-sm text-gray-600",children:"تم التسليم"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx("span",{className:"text-white font-bold",children:h.failedTasks})}),e.jsx("p",{className:"text-sm text-gray-600",children:"فشل"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-500 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx("span",{className:"text-white font-bold",children:h.pendingTasks})}),e.jsx("p",{className:"text-sm text-gray-600",children:"معلق"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsxs("span",{className:"text-white font-bold",children:[h.deliveryRate,"%"]})}),e.jsx("p",{className:"text-sm text-gray-600",children:"نسبة النجاح"})]})]})]})}),s==="beneficiaries"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(be,{type:"text",icon:Tt,iconPosition:"right",placeholder:"البحث في المستفيدين...",value:i,onChange:P=>o(P.target.value)}),e.jsx("div",{children:e.jsxs("select",{value:c,onChange:P=>u(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع الحالات"}),e.jsx("option",{value:"delivered",children:"تم التسليم"}),e.jsx("option",{value:"failed",children:"فشل التسليم"}),e.jsx("option",{value:"pending",children:"في الانتظار"}),e.jsx("option",{value:"in_progress",children:"قيد التنفيذ"})]})})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المستفيد"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"رقم الهوية"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الهاتف"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المنطقة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"حالة التسليم"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"إجراءات"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(P=>{var g,M;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-100 p-1 rounded-lg ml-3",children:e.jsx(Te,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.name}),e.jsx("div",{className:"text-sm text-gray-500",children:(g=P.detailedAddress)==null?void 0:g.city})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P.nationalId}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P.phone}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(M=P.detailedAddress)==null?void 0:M.district}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(Ne,{variant:P.taskStatus==="delivered"?"success":P.taskStatus==="failed"?"error":P.taskStatus==="in_progress"?"warning":"info",size:"sm",children:N(P.taskStatus)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[P.taskStatus==="failed"&&e.jsx(H,{variant:"warning",size:"sm",onClick:()=>{confirm(`هل تريد الاتصال بـ ${P.name} على الرقم ${P.phone}؟`)&&window.open(`tel:${P.phone}`)},children:"اتصال"}),e.jsx(H,{variant:"secondary",size:"sm",onClick:()=>alert(`عرض تفاصيل ${P.name}`),children:"عرض"})]})})]},P.id)})})]})})]}),s==="tasks"&&e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المهمة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المستفيد"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المندوب"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"تاريخ الإنشاء"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(P=>{const g=Se.find(v=>v.id===P.beneficiaryId),M=P.courierId?d0.find(v=>v.id===P.courierId):null;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["#",P.id.slice(-8)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(g==null?void 0:g.name)||"غير محدد"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(M==null?void 0:M.name)||"غير معين"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(Ne,{variant:P.status==="delivered"?"success":P.status==="failed"?"error":P.status==="in_progress"?"warning":"info",size:"sm",children:N(P.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(P.createdAt).toLocaleDateString("ar-SA")})]},P.id)})})]})})}),s==="analysis"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-red-50 p-6 rounded-xl border border-red-200",children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-4",children:"تحليل أسباب الفشل"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"عناوين خاطئة"}),e.jsx("p",{className:"text-xl font-bold text-red-600",children:Math.floor(h.failedTasks*.4)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"المستفيد غير موجود"}),e.jsx("p",{className:"text-xl font-bold text-red-600",children:Math.floor(h.failedTasks*.3)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"أسباب أخرى"}),e.jsx("p",{className:"text-xl font-bold text-red-600",children:Math.floor(h.failedTasks*.3)})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-6 rounded-xl border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-4",children:"رؤى الأداء"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{children:["نسبة التسليم الحالية: ",h.deliveryRate,"%"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx($e,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{children:"متوسط وقت التسليم: 2.5 ساعة"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(Te,{className:"w-4 h-4 text-purple-600"}),e.jsxs("span",{children:["عدد المندوبين المشاركين: ",new Set(x.filter(P=>P.courierId).map(P=>P.courierId)).size]})]})]})]})]})]})]})}function Zj({organization:t,onSave:s,onCancel:r}){const{logError:i,logInfo:o}=Bt(),[c,u]=E.useState({name:"",type:"",location:"",contactPerson:"",phone:"",email:"",status:"pending"}),[h,x]=E.useState({}),[j,w]=E.useState(!1),[T,S]=E.useState(null),N=!!t;E.useEffect(()=>{t&&u({name:t.name||"",type:t.type||"",location:t.location||"",contactPerson:t.contactPerson||"",phone:t.phone||"",email:t.email||"",status:t.status||"pending"})},[t]);const P=["منظمة دولية","منظمة محلية","جمعية خيرية","مبادرة فردية","أخرى"],g=[{value:"active",label:"نشطة"},{value:"pending",label:"معلقة"},{value:"suspended",label:"موقوفة"}],M=(C,R)=>{u(O=>({...O,[C]:R})),h[C]&&x(O=>({...O,[C]:""}))},v=()=>{const C={};return c.name.trim()||(C.name="اسم المؤسسة مطلوب"),c.type.trim()||(C.type="نوع المؤسسة مطلوب"),c.location.trim()||(C.location="الموقع مطلوب"),c.contactPerson.trim()||(C.contactPerson="اسم شخص الاتصال مطلوب"),c.phone.trim()?/^05\d{8}$/.test(c.phone)||(C.phone="رقم الهاتف يجب أن يبدأ بـ 05 ويتكون من 10 أرقام"):C.phone="رقم الهاتف مطلوب",c.email.trim()?/\S+@\S+\.\S+/.test(c.email)||(C.email="صيغة البريد الإلكتروني غير صحيحة"):C.email="البريد الإلكتروني مطلوب",x(C),Object.keys(C).length===0},y=async C=>{if(C.preventDefault(),!v()){i(new Error("فشل في التحقق من صحة البيانات"),"OrganizationForm");return}w(!0),S(null);try{const R={name:c.name.trim(),type:c.type.trim(),location:c.location.trim(),contactPerson:c.contactPerson.trim(),phone:c.phone.trim(),email:c.email.trim(),status:c.status};await new Promise(O=>setTimeout(O,500)),s(R),o("تم محاكاة حفظ بيانات المؤسسة: "+c.name,"OrganizationForm")}catch(R){const O=R instanceof Error?R.message:"خطأ غير معروف";S(O),i(new Error(O),"OrganizationForm")}finally{w(!1)}},k=j;return e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("form",{onSubmit:y,className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 p-4 rounded-xl w-fit mx-auto mb-4",children:e.jsx(ot,{className:"w-6 h-6 text-blue-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:N?"تعديل بيانات المؤسسة":"إضافة مؤسسة جديدة"}),e.jsx("p",{className:"text-gray-600 mt-2",children:N?"تحديث معلومات المؤسسة في النظام":"إضافة مؤسسة جديدة إلى قاعدة البيانات"})]}),T&&e.jsxs(V,{className:"bg-red-50 border-red-200",padding:"sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(ge,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-medium text-red-800",children:"خطأ في حفظ البيانات:"})]}),e.jsx("p",{className:"text-red-700 mt-2 text-sm",children:T})]}),e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(ot,{className:"w-4 h-4 ml-2 text-blue-600"}),"المعلومات العامة"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(be,{label:"اسم المؤسسة *",type:"text",value:c.name,onChange:C=>M("name",C.target.value),placeholder:"مثال: جمعية الهلال الأحمر",error:h.name,required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع المؤسسة *"}),e.jsxs("select",{value:c.type,onChange:C=>M("type",C.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"اختر النوع"}),P.map(C=>e.jsx("option",{value:C,children:C},C))]}),h.type&&e.jsxs("p",{className:"text-red-600 text-sm mt-1 flex items-center",children:[e.jsx(ge,{className:"w-4 h-4 ml-1"}),h.type]})]}),e.jsx(be,{label:"الموقع (المدينة/المنطقة) *",type:"text",value:c.location,onChange:C=>M("location",C.target.value),placeholder:"مثال: خان يونس - الكتيبة",error:h.location,required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"حالة المؤسسة *"}),e.jsx("select",{value:c.status,onChange:C=>M("status",C.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:g.map(C=>e.jsx("option",{value:C.value,children:C.label},C.value))})]})]})]}),e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(Gr,{className:"w-4 h-4 ml-2 text-green-600"}),"معلومات الاتصال"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(be,{label:"اسم شخص الاتصال *",type:"text",value:c.contactPerson,onChange:C=>M("contactPerson",C.target.value),placeholder:"مثال: أحمد أبو سالم",error:h.contactPerson,required:!0}),e.jsx(be,{label:"رقم الهاتف *",type:"tel",value:c.phone,onChange:C=>M("phone",C.target.value),placeholder:"مثال: 0591234567",error:h.phone,required:!0}),e.jsx(be,{label:"البريد الإلكتروني *",type:"email",value:c.email,onChange:C=>M("email",C.target.value),placeholder:"مثال: info@example.com",error:h.email,required:!0})]})]}),e.jsx(V,{className:"bg-gray-50",children:e.jsxs("div",{className:"flex space-x-4 space-x-reverse justify-end",children:[e.jsx(H,{variant:"secondary",icon:Ct,iconPosition:"right",onClick:r,disabled:k,children:"إلغاء"}),e.jsx(H,{variant:"primary",icon:k?void 0:ir,iconPosition:"right",type:"submit",disabled:k,loading:k,children:N?"حفظ التغييرات":"إضافة المؤسسة"})]})}),e.jsx(V,{className:"bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[e.jsx(Qe,{className:"w-5 h-5 text-blue-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-3",children:"تعليمات مهمة"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-2",children:[e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"تأكد من إدخال جميع الحقول المطلوبة."})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"رقم الهاتف يجب أن يبدأ بـ 05 ويتكون من 10 أرقام."})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"البريد الإلكتروني يجب أن يكون بصيغة صحيحة."})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:'الحالة الافتراضية للمؤسسة الجديدة هي "معلقة".'})]})]})]})]})})]})})}function Hj({loggedInUser:t,highlightOrganizationId:s}){const[r,i]=E.useState(""),[o,c]=E.useState("all"),[u,h]=E.useState(!1),[x,j]=E.useState("add"),[w,T]=E.useState(null),{logError:S,logInfo:N}=Bt(),P=Ht,g=()=>{N("محاكاة تحديث بيانات المؤسسات","OrganizationsListPage")},M=async _=>(N(`محاكاة إضافة مؤسسة: ${_.name}`,"OrganizationsListPage"),Ht.push({..._,id:`org-${Date.now()}`,beneficiariesCount:0,packagesCount:0,completionRate:0,createdAt:new Date().toISOString(),packagesAvailable:0,templatesCount:0,isPopular:!1}),!0),v=async(_,G)=>(N(`محاكاة تحديث مؤسسة: ${_}`,"OrganizationsListPage"),!0),y=P.filter(_=>{const G=_.name.toLowerCase().includes(r.toLowerCase())||_.type.toLowerCase().includes(r.toLowerCase())||_.location.toLowerCase().includes(r.toLowerCase()),ie=o==="all"||_.status===o;return G&&ie}),k=P.length,C=P.filter(_=>_.status==="active").length,R=P.filter(_=>_.status==="pending").length,O=P.reduce((_,G)=>_+G.beneficiariesCount,0),p=()=>{j("add"),T(null),h(!0)},I=_=>{j("edit"),T(_),h(!0)},W=_=>{j("view"),T(_),h(!0)},z=_=>{confirm(`هل تريد الاتصال بالرقم ${_}؟`)&&window.open(`tel:${_}`)},Q=_=>{window.open(`mailto:${_}`)},de=_=>{switch(_){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"suspended":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},je=_=>{switch(_){case"active":return"نشطة";case"pending":return"معلقة";case"suspended":return"موقوفة";default:return"غير محدد"}},Y=()=>{const _={date:new Date().toISOString(),totalOrganizations:k,activeOrganizations:C,pendingOrganizations:R,totalBeneficiaries:O,organizations:y},G=JSON.stringify(_,null,2),ie=new Blob([G],{type:"application/json"}),$=URL.createObjectURL(ie),F=document.createElement("a");F.href=$,F.download=`تقرير_المؤسسات_${new Date().toISOString().split("T")[0]}.json`,F.click(),URL.revokeObjectURL($),alert("تم تصدير تقرير المؤسسات بنجاح")};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-blue-600",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:["البيانات الوهمية محملة (",P.length," مؤسسة)"]})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[e.jsxs("button",{onClick:Y,className:"bg-green-600 text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-green-700 transition-colors flex items-center",children:[e.jsx(st,{className:"w-4 h-4 ml-2"}),"تصدير التقرير"]}),e.jsxs("button",{onClick:p,className:"bg-blue-600 text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx(Lt,{className:"w-4 h-4 ml-2"}),"إضافة مؤسسة جديدة"]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(Tt,{className:"w-5 h-5 absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"البحث في المؤسسات (الاسم، النوع، الموقع)...",value:r,onChange:_=>i(_.target.value),className:"w-full pr-12 pl-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("div",{children:e.jsxs("select",{value:o,onChange:_=>c(_.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع الحالات"}),e.jsx("option",{value:"active",children:"نشطة"}),e.jsx("option",{value:"pending",children:"معلقة"}),e.jsx("option",{value:"suspended",children:"موقوفة"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"إجمالي المؤسسات"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:k})]}),e.jsx("div",{className:"bg-blue-100 p-4 rounded-2xl",children:e.jsx(ot,{className:"w-8 h-8 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"مؤسسات نشطة"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:C})]}),e.jsx("div",{className:"bg-green-100 p-4 rounded-2xl",children:e.jsx(ne,{className:"w-8 h-8 text-green-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"معلقة"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:R})]}),e.jsx("div",{className:"bg-yellow-100 p-4 rounded-2xl",children:e.jsx($e,{className:"w-8 h-8 text-yellow-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"إجمالي المستفيدين"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:O})]}),e.jsx("div",{className:"bg-purple-100 p-4 rounded-2xl",children:e.jsx(Te,{className:"w-8 h-8 text-purple-600"})})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["قائمة المؤسسات (",y.length,")"]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-blue-600",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"البيانات الوهمية"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المؤسسة"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"النوع"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الموقع"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"جهة الاتصال"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المستفيدين"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الحالة"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الإجراءات"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.length>0?y.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-xl ml-4",children:e.jsx(ot,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["تاريخ التسجيل: ",new Date(_.createdAt).toLocaleDateString("en-CA")]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_.type}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[e.jsx(At,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:_.location})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:_.contactPerson}),e.jsx("div",{className:"text-gray-500",children:_.phone})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[e.jsx(Te,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium",children:_.beneficiariesCount})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[_.packagesCount," طرد"]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${de(_.status)}`,children:je(_.status)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[_.completionRate,"% إنجاز"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsx("button",{onClick:()=>W(_),className:"text-blue-600 hover:text-blue-900 p-2 rounded-lg hover:bg-blue-50 transition-colors",title:"عرض التفاصيل",children:e.jsx(vt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>I(_),className:"text-green-600 hover:text-green-900 p-2 rounded-lg hover:bg-green-50 transition-colors",title:"تعديل",children:e.jsx(Jt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>z(_.phone),className:"text-orange-600 hover:text-orange-900 p-2 rounded-lg hover:bg-orange-50 transition-colors",title:"اتصال",children:e.jsx(qr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Q(_.email),className:"text-purple-600 hover:text-purple-900 p-2 rounded-lg hover:bg-purple-50 transition-colors",title:"إرسال بريد إلكتروني",children:e.jsx(Il,{className:"w-4 h-4"})})]})})]},_.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(ot,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:r?"لا توجد نتائج للبحث":"لا توجد مؤسسات"}),e.jsx("p",{className:"text-sm mt-2",children:r?"جرب تعديل مصطلح البحث":"لم يتم إضافة أي مؤسسات بعد"})]})})})})]})})})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",dir:"rtl",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:x==="add"?"إضافة مؤسسة جديدة":x==="edit"?"تعديل بيانات المؤسسة":"عرض تفاصيل المؤسسة"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 p-2 rounded-lg hover:bg-gray-100 transition-colors",children:"✕"})]}),(x==="add"||x==="edit")&&e.jsx(Zj,{organization:x==="edit"?w:null,onSave:_=>{x==="add"?M(_):x==="edit"&&w&&v(w.id),h(!1),T(null),g()},onCancel:()=>{h(!1),T(null)}}),x==="view"&&w&&e.jsxs("div",{className:"p-6",children:[e.jsxs("h4",{className:"text-lg font-bold",children:["تفاصيل المؤسسة: ",w.name]}),e.jsxs("p",{children:["النوع: ",w.type]}),e.jsxs("p",{children:["الموقع: ",w.location]}),e.jsxs("p",{children:["شخص الاتصال: ",w.contactPerson]}),e.jsxs("p",{children:["الهاتف: ",w.phone]}),e.jsxs("p",{children:["البريد الإلكتروني: ",w.email]}),e.jsxs("p",{children:["الحالة: ",w.status]}),e.jsx(H,{onClick:()=>h(!1),className:"mt-4",children:"إغلاق"})]})]})})]})}const sc=(t=500)=>new Promise(s=>setTimeout(s,t)),Vj={async getOverallStats(){return await sc(),Xr()},async getGeographicStats(){return await sc(),[{area_name:"خان يونس",total_beneficiaries:156,delivered_packages:89,pending_packages:23,success_rate:79.5},{area_name:"غزة",total_beneficiaries:234,delivered_packages:187,pending_packages:34,success_rate:84.6},{area_name:"رفح",total_beneficiaries:98,delivered_packages:67,pending_packages:18,success_rate:78.8},{area_name:"الوسطى",total_beneficiaries:123,delivered_packages:95,pending_packages:15,success_rate:86.4},{area_name:"شمال غزة",total_beneficiaries:87,delivered_packages:62,pending_packages:12,success_rate:83.8}]},async generateComprehensiveReport(t,s){await sc();const r=Xr();return{period:{start_date:t||"2024-01-01",end_date:s||new Date().toISOString().split("T")[0]},beneficiaries:{total:r.totalBeneficiaries,verified:Math.floor(r.totalBeneficiaries*.85),active:Math.floor(r.totalBeneficiaries*.92)},packages:{total:r.totalPackages,delivered:r.deliveredPackages,pending:r.totalPackages-r.deliveredPackages},performance:{delivery_rate:r.deliveryRate,average_delivery_time:2.3},geographic_distribution:await this.getGeographicStats()}}};function Wj({showDetails:t=!1}){return e.jsxs("div",{className:`flex items-center space-x-3 space-x-reverse text-blue-600 ${t?"bg-blue-50 p-3 rounded-lg border border-blue-200":""}`,children:[e.jsx($t,{className:"w-4 h-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"النظام يعمل بالبيانات الوهمية"}),t&&e.jsx("p",{className:"text-xs text-blue-500 mt-1",children:"Supabase معطل - جميع البيانات وهمية للتطوير"})]})]})}function qj(){var g,M,v,y,k,C,R,O,p,I,W,z,Q,de,je,Y,_,G,ie;const[t,s]=E.useState(null),[r,i]=E.useState(!1),[o,c]=E.useState(null),u=Se,h=Ht,x=Sn,j=is,w=at,T=tu,S=u0,N=Al,P=[{name:"المستفيدين",data:u,loading:!1,error:null,icon:Te,color:"blue"},{name:"المؤسسات",data:h,loading:!1,error:null,icon:ot,color:"green"},{name:"العائلات",data:x,loading:!1,error:null,icon:yt,color:"purple"},{name:"الطرود",data:j,loading:!1,error:null,icon:Ee,color:"orange"},{name:"المهام",data:w,loading:!1,error:null,icon:Qe,color:"indigo"},{name:"التنبيهات",data:T,loading:!1,error:null,icon:Bell,color:"red"},{name:"الأدوار",data:S,loading:!1,error:null,icon:Star,color:"purple"},{name:"المستخدمين",data:N,loading:!1,error:null,icon:Te,color:"teal"}];return E.useEffect(()=>{(async()=>{try{i(!0),c(null);const F=await Vj.getOverallStats();s(F)}catch(F){const q=F instanceof Error?F.message:"خطأ في جلب الإحصائيات";c(q)}finally{i(!1)}})()},[]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx($t,{className:"w-6 h-6 ml-2 text-blue-600"}),"حالة النظام"]}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx(jt,{className:"w-4 h-4 ml-2"}),"تحديث البيانات"]})]}),e.jsx(Wj,{showDetails:!0}),e.jsxs("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-800",children:"النظام يعمل بالبيانات الوهمية بشكل كامل"})]}),e.jsx("p",{className:"text-blue-700 mt-2 text-sm",children:"جميع الواجهات ولوحات التحكم تستخدم البيانات الوهمية للتطوير"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"إحصائيات البيانات الوهمية"}),r?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(jt,{className:"w-8 h-8 animate-spin text-blue-600"}),e.jsx("span",{className:"mr-3 text-gray-600",children:"جاري تحميل الإحصائيات..."})]}):o?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(ge,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-medium text-red-800",children:"خطأ في تحميل الإحصائيات:"})]}),e.jsx("p",{className:"text-red-700 mt-2 text-sm",children:o})]}):t?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-2",children:[e.jsx(Te,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-800",children:"المستفيدين"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:t.totalBeneficiaries}),e.jsxs("p",{className:"text-xs text-blue-700",children:[u.filter($=>$.identityStatus==="verified").length," موثق"]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-2",children:[e.jsx(Ee,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium text-green-800",children:"الطرود"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:t.totalPackages}),e.jsxs("p",{className:"text-xs text-green-700",children:[t.deliveredPackages," مسلم"]})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl border border-orange-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-2",children:[e.jsx(Qe,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:"font-medium text-orange-800",children:"المهام النشطة"})]}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:t.activeTasks})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-2",children:[e.jsx(Ye,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-medium text-red-800",children:"تنبيهات حرجة"})]}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:t.criticalAlerts})]})]}):null]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"اختبار البيانات الوهمية"}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map($=>{var se;const F=$.icon,q={blue:"bg-blue-50 border-blue-200 text-blue-800",green:"bg-green-50 border-green-200 text-green-800",purple:"bg-purple-50 border-purple-200 text-purple-800",orange:"bg-orange-50 border-orange-200 text-orange-800",indigo:"bg-indigo-50 border-indigo-200 text-indigo-800",red:"bg-red-50 border-red-200 text-red-800",teal:"bg-teal-50 border-teal-200 text-teal-800"};return e.jsxs("div",{className:`p-4 rounded-xl border ${q[$.color]}`,children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-3",children:[e.jsx(F,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:$.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-green-600",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"متاح"})]}),e.jsxs("p",{className:"text-lg font-bold",children:[((se=$.data)==null?void 0:se.length)||0," سجل"]})]})]},$.name)})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"عينة من البيانات الوهمية"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-3",children:"أول مستفيد في البيانات الوهمية:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700",children:"الاسم:"}),e.jsx("span",{className:"font-medium text-blue-900 mr-2",children:(g=u[0])==null?void 0:g.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700",children:"رقم الهوية:"}),e.jsx("span",{className:"font-medium text-blue-900 mr-2",children:(M=u[0])==null?void 0:M.nationalId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700",children:"الهاتف:"}),e.jsx("span",{className:"font-medium text-blue-900 mr-2",children:(v=u[0])==null?void 0:v.phone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700",children:"الحالة:"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium mr-2 ${((y=u[0])==null?void 0:y.status)==="active"?"bg-green-100 text-green-800":((k=u[0])==null?void 0:k.status)==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:((C=u[0])==null?void 0:C.status)==="active"?"نشط":((R=u[0])==null?void 0:R.status)==="pending"?"معلق":"موقوف"})]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:[e.jsx("h4",{className:"font-medium text-green-800 mb-3",children:"أول مؤسسة في البيانات الوهمية:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-green-700",children:"اسم المؤسسة:"}),e.jsx("span",{className:"font-medium text-green-900 mr-2",children:(O=h[0])==null?void 0:O.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-green-700",children:"النوع:"}),e.jsx("span",{className:"font-medium text-green-900 mr-2",children:(p=h[0])==null?void 0:p.type})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-green-700",children:"الموقع:"}),e.jsx("span",{className:"font-medium text-green-900 mr-2",children:(I=h[0])==null?void 0:I.location})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-green-700",children:"الحالة:"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium mr-2 ${((W=h[0])==null?void 0:W.status)==="active"?"bg-green-100 text-green-800":((z=h[0])==null?void 0:z.status)==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:((Q=h[0])==null?void 0:Q.status)==="active"?"نشط":((de=h[0])==null?void 0:de.status)==="pending"?"معلق":"موقوف"})]})]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-200",children:[e.jsx("h4",{className:"font-medium text-purple-800 mb-3",children:"أول دور في النظام:"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-700",children:"اسم الدور:"}),e.jsx("span",{className:"font-medium text-purple-900 mr-2",children:(je=S[0])==null?void 0:je.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-700",children:"الوصف:"}),e.jsx("span",{className:"font-medium text-purple-900 mr-2",children:(Y=S[0])==null?void 0:Y.description})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-700",children:"عدد المستخدمين:"}),e.jsx("span",{className:"font-medium text-purple-900 mr-2",children:(_=S[0])==null?void 0:_.userCount})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-purple-700",children:"عدد الصلاحيات:"}),e.jsx("span",{className:"font-medium text-purple-900 mr-2",children:((ie=(G=S[0])==null?void 0:G.permissions)==null?void 0:ie.length)||0})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"معلومات البيانات الوهمية"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200",children:[e.jsxs("h4",{className:"font-medium text-blue-800 mb-3",children:["عينة من المستفيدين (",u.length," إجمالي):"]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:u.slice(0,5).map(($,F)=>e.jsxs("div",{className:"bg-white p-3 rounded-lg flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:$.name}),e.jsx("p",{className:"text-sm text-gray-600",children:$.nationalId})]}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${$.status==="active"?"bg-green-100 text-green-800":$.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:$.status==="active"?"نشط":$.status==="pending"?"معلق":"موقوف"})]},$.id))})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:[e.jsxs("h4",{className:"font-medium text-green-800 mb-3",children:["عينة من المؤسسات (",h.length," إجمالي):"]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:h.slice(0,5).map(($,F)=>e.jsxs("div",{className:"bg-white p-3 rounded-lg flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:$.name}),e.jsx("p",{className:"text-sm text-gray-600",children:$.type})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[$.beneficiariesCount," مستفيد"]})]},$.id))})]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-2xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[e.jsx(ge,{className:"w-6 h-6 text-yellow-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-800 mb-3",children:"معلومات التطوير"}),e.jsxs("div",{className:"space-y-2 text-sm text-yellow-700",children:[e.jsx("p",{children:"• النظام يعمل حالياً بالبيانات الوهمية المحددة في ملف mockData.ts"}),e.jsx("p",{children:"• جميع العمليات (إضافة، تعديل، حذف) محاكاة ولا تؤثر على قاعدة بيانات حقيقية"}),e.jsx("p",{children:"• يمكن مواصلة تطوير الواجهات والمكونات دون الحاجة لقاعدة بيانات"}),e.jsx("p",{children:"• عند الحاجة لقاعدة بيانات حقيقية، يمكن إعادة تفعيل Supabase"})]})]})]})})]})}function Gj(){var B,ce;const[t,s]=E.useState(""),[r,i]=E.useState("all"),[o,c]=E.useState("all"),[u,h]=E.useState("all"),[x,j]=E.useState(!1),[w,T]=E.useState("assign"),[S,N]=E.useState(null),[P,g]=E.useState(null),{logInfo:M,logError:v}=Bt(),[y,k]=E.useState(at),C=Se,R=is,O=d0,[p,I]=E.useState({courierId:"",scheduledAt:"",notes:""}),[W,z]=E.useState({status:"",courierNotes:"",deliveryProofImageUrl:"",failureReason:""}),Q=["شمال غزة","مدينة غزة","الوسط","خان يونس","رفح"],de=y.filter(U=>{const he=C.find(re=>re.id===U.beneficiaryId),Le=R.find(re=>re.id===U.packageId),b=U.courierId?O.find(re=>re.id===U.courierId):null;if(t){const re=t.toLowerCase(),Z=(he==null?void 0:he.name.toLowerCase().includes(re))||(he==null?void 0:he.nationalId.includes(t))||(he==null?void 0:he.phone.includes(t)),pe=Le==null?void 0:Le.name.toLowerCase().includes(re),Me=b==null?void 0:b.name.toLowerCase().includes(re);if(!Z&&!pe&&!Me)return!1}return!(r!=="all"&&U.status!==r||o!=="all"&&(o==="unassigned"&&U.courierId||o!=="unassigned"&&U.courierId!==o)||u!=="all"&&he&&!he.detailedAddress.governorate.includes(u))}),je={total:y.length,pending:y.filter(U=>U.status==="pending").length,assigned:y.filter(U=>U.status==="assigned").length,inProgress:y.filter(U=>U.status==="in_progress").length,delivered:y.filter(U=>U.status==="delivered").length,failed:y.filter(U=>U.status==="failed").length,unassigned:y.filter(U=>!U.courierId).length},Y=U=>{N(U),T("assign"),I({courierId:U.courierId||"",scheduledAt:U.scheduledAt||"",notes:U.notes||""}),j(!0)},_=U=>{N(U),T("update"),z({status:U.status,courierNotes:U.courierNotes||"",deliveryProofImageUrl:U.deliveryProofImageUrl||"",failureReason:U.failureReason||""}),j(!0)},G=U=>{N(U),T("view"),j(!0)},ie=U=>{N(U),T("reschedule"),I({courierId:U.courierId||"",scheduledAt:U.scheduledAt||"",notes:U.notes||""}),j(!0)},$=async()=>{if(!S||!p.courierId){g({message:"يرجى اختيار المندوب",type:"error"}),setTimeout(()=>g(null),3e3);return}try{const U=y.map(Le=>Le.id===S.id?{...Le,courierId:p.courierId,status:"assigned",scheduledAt:p.scheduledAt||new Date().toISOString(),notes:p.notes}:Le);k(U);const he=O.find(Le=>Le.id===p.courierId);g({message:`تم تعيين المندوب ${he==null?void 0:he.name} للمهمة بنجاح`,type:"success"}),setTimeout(()=>g(null),3e3),j(!1),N(null),M(`تم تعيين مندوب للمهمة: ${S.id}`,"TasksManagementPage")}catch(U){v(U,"TasksManagementPage"),g({message:"حدث خطأ في تعيين المندوب",type:"error"}),setTimeout(()=>g(null),3e3)}},F=async()=>{if(!S||!W.status){g({message:"يرجى اختيار الحالة الجديدة",type:"error"}),setTimeout(()=>g(null),3e3);return}try{const U=y.map(he=>he.id===S.id?{...he,status:W.status,courierNotes:W.courierNotes,deliveryProofImageUrl:W.deliveryProofImageUrl,failureReason:W.failureReason,deliveredAt:W.status==="delivered"?new Date().toISOString():he.deliveredAt}:he);k(U),g({message:`تم تحديث حالة المهمة إلى "${se(W.status)}" بنجاح`,type:"success"}),setTimeout(()=>g(null),3e3),j(!1),N(null),M(`تم تحديث حالة المهمة: ${S.id}`,"TasksManagementPage")}catch(U){v(U,"TasksManagementPage"),g({message:"حدث خطأ في تحديث حالة المهمة",type:"error"}),setTimeout(()=>g(null),3e3)}},q=async()=>{if(!S||!p.scheduledAt){g({message:"يرجى تحديد موعد جديد",type:"error"}),setTimeout(()=>g(null),3e3);return}try{const U=y.map(he=>he.id===S.id?{...he,status:"rescheduled",scheduledAt:p.scheduledAt,notes:p.notes}:he);k(U),g({message:"تم إعادة جدولة المهمة بنجاح",type:"success"}),setTimeout(()=>g(null),3e3),j(!1),N(null),M(`تم إعادة جدولة المهمة: ${S.id}`,"TasksManagementPage")}catch(U){v(U,"TasksManagementPage"),g({message:"حدث خطأ في إعادة جدولة المهمة",type:"error"}),setTimeout(()=>g(null),3e3)}},se=U=>{switch(U){case"pending":return"في الانتظار";case"assigned":return"معين";case"in_progress":return"قيد التنفيذ";case"delivered":return"تم التسليم";case"failed":return"فشل";case"rescheduled":return"معاد جدولته";default:return"غير محدد"}},D=U=>{switch(U){case"success":return"bg-green-100 border-green-200 text-green-800";case"error":return"bg-red-100 border-red-200 text-red-800";case"warning":return"bg-orange-100 border-orange-200 text-orange-800"}},me=U=>{switch(U){case"success":return e.jsx(ne,{className:"w-5 h-5 text-green-600"});case"error":return e.jsx(ge,{className:"w-5 h-5 text-red-600"});case"warning":return e.jsx($e,{className:"w-5 h-5 text-orange-600"})}},oe=()=>{const U={date:new Date().toISOString(),totalTasks:y.length,filteredTasks:de.length,statistics:je,tasks:de.map(Z=>{const pe=C.find(Ze=>Ze.id===Z.beneficiaryId),Me=R.find(Ze=>Ze.id===Z.packageId),Pe=Z.courierId?O.find(Ze=>Ze.id===Z.courierId):null;return{id:Z.id,beneficiary:pe==null?void 0:pe.name,package:Me==null?void 0:Me.name,courier:(Pe==null?void 0:Pe.name)||"غير معين",status:se(Z.status),createdAt:Z.createdAt,scheduledAt:Z.scheduledAt,deliveredAt:Z.deliveredAt}})},he=JSON.stringify(U,null,2),Le=new Blob([he],{type:"application/json"}),b=URL.createObjectURL(Le),re=document.createElement("a");re.href=b,re.download=`تقرير_المهام_${new Date().toISOString().split("T")[0]}.json`,re.click(),URL.revokeObjectURL(b),g({message:"تم تصدير تقرير المهام بنجاح",type:"success"}),setTimeout(()=>g(null),3e3)};return e.jsxs("div",{className:"space-y-6",children:[P&&e.jsxs("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg flex items-center space-x-3 space-x-reverse ${D(P.type)}`,children:[me(P.type),e.jsx("span",{className:"font-medium",children:P.message}),e.jsx("button",{onClick:()=>g(null),className:"text-gray-500 hover:text-gray-700",children:e.jsx(jt,{className:"w-4 h-4"})})]}),e.jsx(V,{className:"bg-blue-50 border-blue-200",padding:"sm",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-blue-600",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:["البيانات الوهمية محملة - ",y.length," مهمة، ",O.length," مندوب"]})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[e.jsx(H,{variant:"success",icon:st,iconPosition:"right",onClick:oe,children:"تصدير المهام"}),e.jsx(H,{variant:"primary",icon:jt,iconPosition:"right",children:"تحديث البيانات"})]})}),e.jsx(V,{children:e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsx(be,{type:"text",icon:Tt,iconPosition:"right",placeholder:"البحث في المهام...",value:t,onChange:U=>s(U.target.value)}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"حالة المهمة"}),e.jsxs("select",{value:r,onChange:U=>i(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع الحالات"}),e.jsx("option",{value:"pending",children:"في الانتظار"}),e.jsx("option",{value:"assigned",children:"معين"}),e.jsx("option",{value:"in_progress",children:"قيد التنفيذ"}),e.jsx("option",{value:"delivered",children:"تم التسليم"}),e.jsx("option",{value:"failed",children:"فشل"}),e.jsx("option",{value:"rescheduled",children:"معاد جدولته"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المندوب"}),e.jsxs("select",{value:o,onChange:U=>c(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع المندوبين"}),e.jsx("option",{value:"unassigned",children:"غير معين"}),O.map(U=>e.jsx("option",{value:U.id,children:U.name},U.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المنطقة"}),e.jsxs("select",{value:u,onChange:U=>h(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع المناطق"}),Q.map(U=>e.jsx("option",{value:U,children:U},U))]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsx(V,{className:"bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-gray-100 p-3 rounded-xl mb-2",children:e.jsx(Qe,{className:"w-6 h-6 text-gray-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"إجمالي المهام"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:je.total})]})}),e.jsx(V,{className:"bg-blue-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl mb-2",children:e.jsx($e,{className:"w-6 h-6 text-blue-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-blue-600",children:"في الانتظار"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:je.pending})]})}),e.jsx(V,{className:"bg-orange-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-xl mb-2",children:e.jsx(St,{className:"w-6 h-6 text-orange-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-orange-600",children:"قيد التنفيذ"}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:je.inProgress})]})}),e.jsx(V,{className:"bg-green-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-xl mb-2",children:e.jsx(ne,{className:"w-6 h-6 text-green-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-green-600",children:"تم التسليم"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:je.delivered})]})}),e.jsx(V,{className:"bg-red-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-red-100 p-3 rounded-xl mb-2",children:e.jsx(ge,{className:"w-6 h-6 text-red-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-red-600",children:"فشل"}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:je.failed})]})}),e.jsx(V,{className:"bg-purple-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-xl mb-2",children:e.jsx(Te,{className:"w-6 h-6 text-purple-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-purple-600",children:"غير معين"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:je.unassigned})]})})]}),e.jsxs(V,{padding:"none",className:"overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["قائمة المهام (",de.length,")"]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-blue-600",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"البيانات الوهمية"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المهمة"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المستفيد"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المندوب"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الحالة"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الموعد المحدد"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الإجراءات"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:de.length>0?de.map(U=>{var re;const he=C.find(Z=>Z.id===U.beneficiaryId),Le=R.find(Z=>Z.id===U.packageId),b=U.courierId?O.find(Z=>Z.id===U.courierId):null;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg ml-4",children:e.jsx(Ee,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:(Le==null?void 0:Le.name)||"طرد غير محدد"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["#",U.id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:(he==null?void 0:he.name)||"غير محدد"}),e.jsx("div",{className:"text-sm text-gray-500",children:((re=he==null?void 0:he.detailedAddress)==null?void 0:re.district)||"غير محدد"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-1 rounded-lg ml-2",children:e.jsx(St,{className:"w-3 h-3 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.name}),e.jsx("div",{className:"text-sm text-gray-500",children:b.phone})]})]}):e.jsx(Ne,{variant:"warning",size:"sm",children:"غير معين"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(Ne,{variant:U.status==="delivered"?"success":U.status==="failed"?"error":U.status==="in_progress"?"warning":"info",size:"sm",children:se(U.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:U.scheduledAt?new Date(U.scheduledAt).toLocaleDateString("ar-SA"):"غير محدد"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsx("button",{onClick:()=>G(U),className:"text-blue-600 hover:text-blue-900 p-2 rounded-lg hover:bg-blue-50 transition-colors",title:"عرض التفاصيل",children:e.jsx(vt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_(U),className:"text-green-600 hover:text-green-900 p-2 rounded-lg hover:bg-green-50 transition-colors",title:"تحديث الحالة",children:e.jsx(Jt,{className:"w-4 h-4"})}),!U.courierId&&e.jsx("button",{onClick:()=>Y(U),className:"text-purple-600 hover:text-purple-900 p-2 rounded-lg hover:bg-purple-50 transition-colors",title:"تعيين مندوب",children:e.jsx(Te,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ie(U),className:"text-orange-600 hover:text-orange-900 p-2 rounded-lg hover:bg-orange-50 transition-colors",title:"إعادة جدولة",children:e.jsx(Dr,{className:"w-4 h-4"})})]})})]},U.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(Qe,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:t||r!=="all"||o!=="all"||u!=="all"?"لا توجد مهام مطابقة للفلاتر":"لا توجد مهام"}),e.jsx("p",{className:"text-sm mt-2",children:t||r!=="all"||o!=="all"||u!=="all"?"جرب تعديل الفلاتر أو مصطلح البحث":"لم يتم إنشاء أي مهام بعد"})]})})})})]})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(V,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"أداء المندوبين"}),e.jsx("div",{className:"space-y-4",children:O.slice(0,5).map(U=>{const he=y.filter(re=>re.courierId===U.id),Le=he.filter(re=>re.status==="delivered").length,b=he.length>0?Le/he.length*100:0;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:e.jsx(St,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:U.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[he.length," مهمة"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse mb-1",children:[e.jsx(Es,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:U.rating})]}),e.jsxs("div",{className:"text-sm text-green-600 font-medium",children:[b.toFixed(1),"%"]})]})]},U.id)})})]}),e.jsxs(V,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"إحصائيات الأداء"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-green-700",children:"معدل النجاح"}),e.jsxs("span",{className:"text-2xl font-bold text-green-900",children:[y.length>0?(je.delivered/y.length*100).toFixed(1):0,"%"]})]})}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"متوسط وقت التسليم"}),e.jsx("span",{className:"text-2xl font-bold text-blue-900",children:"2.3 ساعة"})]})}),e.jsx("div",{className:"bg-orange-50 p-4 rounded-xl border border-orange-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-orange-700",children:"المهام المعلقة"}),e.jsx("span",{className:"text-2xl font-bold text-orange-900",children:je.pending+je.assigned})]})})]})]})]}),x&&S&&e.jsx(ls,{isOpen:x,onClose:()=>j(!1),title:w==="assign"?"تعيين مندوب للمهمة":w==="update"?"تحديث حالة المهمة":w==="reschedule"?"إعادة جدولة المهمة":"تفاصيل المهمة",size:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"معلومات المهمة"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"المستفيد:"}),e.jsx("span",{className:"font-medium text-gray-900 mr-2",children:((B=C.find(U=>U.id===S.beneficiaryId))==null?void 0:B.name)||"غير محدد"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"الطرد:"}),e.jsx("span",{className:"font-medium text-gray-900 mr-2",children:((ce=R.find(U=>U.id===S.packageId))==null?void 0:ce.name)||"غير محدد"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"الحالة الحالية:"}),e.jsx(Ne,{variant:S.status==="delivered"?"success":S.status==="failed"?"error":S.status==="in_progress"?"warning":"info",size:"sm",className:"mr-2",children:se(S.status)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"تاريخ الإنشاء:"}),e.jsx("span",{className:"font-medium text-gray-900 mr-2",children:new Date(S.createdAt).toLocaleDateString("ar-SA")})]})]})]}),w==="assign"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اختيار المندوب"}),e.jsxs("select",{value:p.courierId,onChange:U=>I({...p,courierId:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"اختر المندوب"}),O.filter(U=>U.status==="active").map(U=>e.jsxs("option",{value:U.id,children:[U.name," - تقييم: ",U.rating]},U.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"موعد التسليم المحدد"}),e.jsx("input",{type:"datetime-local",value:p.scheduledAt,onChange:U=>I({...p,scheduledAt:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ملاحظات للمندوب"}),e.jsx("textarea",{value:p.notes,onChange:U=>I({...p,notes:U.target.value}),placeholder:"تعليمات خاصة للمندوب...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-end pt-4",children:[e.jsx(H,{variant:"secondary",onClick:()=>j(!1),children:"إلغاء"}),e.jsx(H,{variant:"primary",onClick:$,children:"تعيين المندوب"})]})]}),w==="update"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحالة الجديدة"}),e.jsxs("select",{value:W.status,onChange:U=>z({...W,status:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"اختر الحالة"}),e.jsx("option",{value:"assigned",children:"معين"}),e.jsx("option",{value:"in_progress",children:"قيد التنفيذ"}),e.jsx("option",{value:"delivered",children:"تم التسليم"}),e.jsx("option",{value:"failed",children:"فشل"}),e.jsx("option",{value:"rescheduled",children:"معاد جدولته"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ملاحظات المندوب"}),e.jsx("textarea",{value:W.courierNotes,onChange:U=>z({...W,courierNotes:U.target.value}),placeholder:"ملاحظات من المندوب حول المهمة...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),W.status==="failed"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سبب الفشل"}),e.jsx("textarea",{value:W.failureReason,onChange:U=>z({...W,failureReason:U.target.value}),placeholder:"اذكر سبب فشل التسليم...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-end pt-4",children:[e.jsx(H,{variant:"secondary",onClick:()=>j(!1),children:"إلغاء"}),e.jsx(H,{variant:"primary",onClick:F,children:"تحديث الحالة"})]})]}),w==="reschedule"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الموعد الجديد"}),e.jsx("input",{type:"datetime-local",value:p.scheduledAt,onChange:U=>I({...p,scheduledAt:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سبب إعادة الجدولة"}),e.jsx("textarea",{value:p.notes,onChange:U=>I({...p,notes:U.target.value}),placeholder:"اذكر سبب إعادة الجدولة...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-end pt-4",children:[e.jsx(H,{variant:"secondary",onClick:()=>j(!1),children:"إلغاء"}),e.jsx(H,{variant:"warning",onClick:q,children:"إعادة الجدولة"})]})]}),w==="view"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl",children:[e.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:"معلومات المستفيد"}),e.jsx("div",{className:"space-y-1 text-sm",children:(()=>{const U=C.find(he=>he.id===S.beneficiaryId);return U?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-blue-700",children:"الاسم:"})," ",e.jsx("span",{className:"font-medium",children:U.name})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-blue-700",children:"الهاتف:"})," ",e.jsx("span",{className:"font-medium",children:U.phone})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-blue-700",children:"العنوان:"})," ",e.jsx("span",{className:"font-medium",children:U.detailedAddress.district})]})]}):e.jsx("p",{className:"text-gray-500",children:"معلومات غير متاحة"})})()})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl",children:[e.jsx("h5",{className:"font-medium text-green-800 mb-2",children:"معلومات الطرد"}),e.jsx("div",{className:"space-y-1 text-sm",children:(()=>{const U=R.find(he=>he.id===S.packageId);return U?e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-green-700",children:"اسم الطرد:"})," ",e.jsx("span",{className:"font-medium",children:U.name})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-green-700",children:"النوع:"})," ",e.jsx("span",{className:"font-medium",children:U.type})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-green-700",children:"القيمة:"})," ",e.jsxs("span",{className:"font-medium",children:[U.value," ₪"]})]})]}):e.jsx("p",{className:"text-gray-500",children:"معلومات غير متاحة"})})()})]})]}),S.courierNotes&&e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-xl border border-yellow-200",children:[e.jsx("h5",{className:"font-medium text-yellow-800 mb-2",children:"ملاحظات المندوب"}),e.jsx("p",{className:"text-sm text-yellow-700",children:S.courierNotes})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(H,{variant:"primary",onClick:()=>j(!1),children:"إغلاق"})})]})]})})]})}function Kj(){const[t,s]=E.useState("month"),[r,i]=E.useState("overview"),[o,c]=E.useState("all"),u=Xr(),h=[{id:"overview",name:"نظرة عامة",icon:gt},{id:"delivery",name:"تقرير التسليم",icon:ne},{id:"performance",name:"تقرير الأداء",icon:ss},{id:"beneficiaries",name:"تقرير المستفيدين",icon:Te},{id:"geographical",name:"التوزيع الجغرافي",icon:At}],x=[{id:"all",name:"جميع المناطق",count:1502},{id:"north",name:"شمال غزة",count:387},{id:"gaza",name:"مدينة غزة",count:456},{id:"middle",name:"الوسط",count:234},{id:"khan-younis",name:"خان يونس",count:298},{id:"rafah",name:"رفح",count:127}],j=[{name:"خالد أحمد",delivered:247,successRate:98.5,rating:4.9},{name:"محمد سعيد",delivered:234,successRate:96.2,rating:4.8},{name:"أحمد علي",delivered:189,successRate:94.8,rating:4.7},{name:"يوسف حسام",delivered:156,successRate:93.1,rating:4.6},{name:"سامي محمد",delivered:134,successRate:91.5,rating:4.5}],w=[{type:"طرود غذائية",count:987,percentage:65,color:"bg-orange-500"},{type:"طرود طبية",count:304,percentage:20,color:"bg-red-500"},{type:"ملابس",count:152,percentage:10,color:"bg-purple-500"},{type:"بطانيات",count:76,percentage:5,color:"bg-blue-500"}],T=[{month:"يناير",delivered:1247,failed:45,pending:89},{month:"فبراير",delivered:1356,failed:32,pending:67},{month:"مارس",delivered:1489,failed:28,pending:78},{month:"أبريل",delivered:1567,failed:23,pending:56},{month:"مايو",delivered:1634,failed:19,pending:45}],S=()=>{const N={type:r,dateRange:t,region:o,generatedAt:new Date().toISOString(),stats:u,details:{totalTasks:at.length,completedTasks:at.filter(y=>y.status==="delivered").length,pendingTasks:at.filter(y=>y.status==="pending").length,failedTasks:at.filter(y=>y.status==="failed").length,topCouriers:j,packageDistribution:w,monthlyTrends:T}},P=JSON.stringify(N,null,2),g=new Blob([P],{type:"application/json"}),M=URL.createObjectURL(g),v=document.createElement("a");v.href=M,v.download=`تقرير_التوزيع_${r}_${new Date().toISOString().split("T")[0]}.json`,v.click(),URL.revokeObjectURL(M),alert("تم تصدير تقرير الخريطة بنجاح")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"إعدادات التقرير"}),e.jsxs("button",{onClick:S,className:"bg-blue-600 text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx(st,{className:"w-4 h-4 ml-2"}),"تصدير التقرير"]})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع التقرير"}),e.jsx("select",{value:r,onChange:N=>i(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:h.map(N=>e.jsx("option",{value:N.id,children:N.name},N.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الفترة الزمنية"}),e.jsxs("select",{value:t,onChange:N=>s(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"today",children:"اليوم"}),e.jsx("option",{value:"week",children:"هذا الأسبوع"}),e.jsx("option",{value:"month",children:"هذا الشهر"}),e.jsx("option",{value:"quarter",children:"هذا الربع"}),e.jsx("option",{value:"year",children:"هذا العام"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المنطقة"}),e.jsx("select",{value:o,onChange:N=>c(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:x.map(N=>e.jsx("option",{value:N.id,children:N.name},N.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تصفية إضافية"}),e.jsxs("button",{className:"w-full flex items-center justify-center px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Ln,{className:"w-4 h-4 ml-2"}),"فلاتر متقدمة"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"معدل التسليم"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[u.deliveryRate,"%"]}),e.jsxs("p",{className:"text-green-600 text-sm mt-2 flex items-center",children:[e.jsx(ss,{className:"w-4 h-4 ml-1"}),"+5% من الشهر الماضي"]})]}),e.jsx("div",{className:"bg-green-100 p-4 rounded-2xl",children:e.jsx(ne,{className:"w-8 h-8 text-green-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"متوسط وقت التسليم"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"2.3"}),e.jsx("p",{className:"text-blue-600 text-sm mt-2",children:"ساعة"})]}),e.jsx("div",{className:"bg-blue-100 p-4 rounded-2xl",children:e.jsx($e,{className:"w-8 h-8 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"رضا المستفيدين"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"4.7"}),e.jsxs("p",{className:"text-yellow-600 text-sm mt-2 flex items-center",children:[e.jsx(Es,{className:"w-4 h-4 ml-1"}),"من 5 نجوم"]})]}),e.jsx("div",{className:"bg-yellow-100 p-4 rounded-2xl",children:e.jsx(Tl,{className:"w-8 h-8 text-yellow-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"التكلفة لكل طرد"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"45"}),e.jsx("p",{className:"text-purple-600 text-sm mt-2",children:"شيكل"})]}),e.jsx("div",{className:"bg-purple-100 p-4 rounded-2xl",children:e.jsx(Ee,{className:"w-8 h-8 text-purple-600"})})]})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(Rp,{className:"w-6 h-6 ml-2 text-blue-600"}),"اتجاهات التسليم الشهرية"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"آخر 5 أشهر"})]}),e.jsx("div",{className:"space-y-4",children:T.map((N,P)=>{const g=N.delivered+N.failed+N.pending,M=(N.delivered/g*100).toFixed(1);return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-900",children:N.month}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:N.delivered}),e.jsx("span",{className:"text-sm text-gray-600 mr-1",children:"طرد"}),e.jsxs("div",{className:"text-xs text-green-600",children:[M,"% نجاح"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsxs("div",{className:"flex h-3 rounded-full overflow-hidden",children:[e.jsx("div",{className:"bg-green-500",style:{width:`${N.delivered/g*100}%`}}),e.jsx("div",{className:"bg-blue-500",style:{width:`${N.pending/g*100}%`}}),e.jsx("div",{className:"bg-red-500",style:{width:`${N.failed/g*100}%`}})]})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["تم التسليم: ",N.delivered]}),e.jsxs("span",{children:["معلق: ",N.pending]}),e.jsxs("span",{children:["فشل: ",N.failed]})]})]},N.month)})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(Dp,{className:"w-6 h-6 ml-2 text-purple-600"}),"توزيع أنواع الطرود"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["إجمالي: ",w.reduce((N,P)=>N+P.count,0)]})]}),e.jsx("div",{className:"space-y-4",children:w.map((N,P)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("div",{className:"w-4 h-4 rounded "+N.color}),e.jsx("span",{className:"font-medium text-gray-900",children:N.type})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:N.count}),e.jsxs("div",{className:"text-sm text-gray-600",children:[N.percentage,"%"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full "+N.color,style:{width:`${N.percentage}%`}})})]},N.type))})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(At,{className:"w-6 h-6 ml-2 text-green-600"}),"الأداء حسب المناطق"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"إجمالي الطرود الموزعة"})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.filter(N=>N.id!=="all").map(N=>{const P=75+Math.random()*20,g=2+Math.random()*2;return e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:N.name}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:N.count})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"معدل النجاح:"}),e.jsxs("span",{className:"font-medium "+(P>80?"text-green-600":P>60?"text-yellow-600":"text-red-600"),children:[P.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full "+(P>80?"bg-green-500":P>60?"bg-yellow-500":"bg-red-500"),style:{width:`${P}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"متوسط الوقت:"}),e.jsxs("span",{className:"font-medium text-gray-900",children:[g.toFixed(1)," ساعة"]})]})]})]},N.id)})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(Tl,{className:"w-6 h-6 ml-2 text-yellow-600"}),"أفضل المندوبين"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"هذا الشهر"})]}),e.jsx("div",{className:"space-y-4",children:j.map((N,P)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm ${P===0?"bg-yellow-500":P===1?"bg-gray-400":P===2?"bg-orange-600":"bg-blue-500"}`,children:P+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:N.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[N.delivered," طرد موزع"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse mb-1",children:[e.jsx(Es,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:N.rating})]}),e.jsxs("div",{className:"text-sm text-green-600 font-medium",children:[N.successRate,"%"]})]})]},N.name))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(Qe,{className:"w-6 h-6 ml-2 text-purple-600"}),"رؤى الأداء"]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(ne,{className:"w-4 h-4 ml-2 text-green-600"}),"نقاط القوة"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-sm text-green-700 bg-green-50 p-2 rounded-lg",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:"معدل تسليم عالي في منطقة خان يونس (75%)"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-sm text-green-700 bg-green-50 p-2 rounded-lg",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:"تحسن في أوقات التسليم بنسبة 15%"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-sm text-green-700 bg-green-50 p-2 rounded-lg",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:"رضا عالي من المستفيدين (4.7/5)"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(ge,{className:"w-4 h-4 ml-2 text-orange-600"}),"نقاط التحسين"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-sm text-orange-700 bg-orange-50 p-2 rounded-lg",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{children:"تحسين التوصيل في منطقة رفح (40%)"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-sm text-orange-700 bg-orange-50 p-2 rounded-lg",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{children:"تقليل حالات فشل التسليم"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-sm text-orange-700 bg-orange-50 p-2 rounded-lg",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{children:"تحديث قاعدة بيانات العناوين"})]})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(gt,{className:"w-6 h-6 ml-2 text-blue-600"}),"إحصائيات مفصلة"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-green-50 p-6 rounded-xl border border-green-200",children:[e.jsxs("h4",{className:"font-medium text-green-800 mb-4 flex items-center",children:[e.jsx(ne,{className:"w-5 h-5 ml-2"}),"الطرود المسلمة بنجاح"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"مواد غذائية:"}),e.jsx("span",{className:"font-medium text-green-900",children:"987 طرد"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"ملابس:"}),e.jsx("span",{className:"font-medium text-green-900",children:"152 طرد"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"أدوية:"}),e.jsx("span",{className:"font-medium text-green-900",children:"304 طرد"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"بطانيات:"}),e.jsx("span",{className:"font-medium text-green-900",children:"76 طرد"})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-6 rounded-xl border border-yellow-200",children:[e.jsxs("h4",{className:"font-medium text-yellow-800 mb-4 flex items-center",children:[e.jsx($e,{className:"w-5 h-5 ml-2"}),"الطرود المعلقة"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-yellow-700",children:"في الانتظار:"}),e.jsx("span",{className:"font-medium text-yellow-900",children:"89 طرد"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-yellow-700",children:"قيد التوصيل:"}),e.jsx("span",{className:"font-medium text-yellow-900",children:"45 طرد"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-yellow-700",children:"تم إعادة الجدولة:"}),e.jsx("span",{className:"font-medium text-yellow-900",children:"23 طرد"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-yellow-700",children:"قيد التحضير:"}),e.jsx("span",{className:"font-medium text-yellow-900",children:"67 طرد"})]})]})]}),e.jsxs("div",{className:"bg-red-50 p-6 rounded-xl border border-red-200",children:[e.jsxs("h4",{className:"font-medium text-red-800 mb-4 flex items-center",children:[e.jsx(ge,{className:"w-5 h-5 ml-2"}),"المشاكل والتحديات"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-700",children:"فشل التسليم:"}),e.jsx("span",{className:"font-medium text-red-900",children:"12 طرد"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-700",children:"عناوين خاطئة:"}),e.jsx("span",{className:"font-medium text-red-900",children:"8 طرد"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-700",children:"عدم توفر المستفيد:"}),e.jsx("span",{className:"font-medium text-red-900",children:"4 طرد"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-700",children:"مشاكل أمنية:"}),e.jsx("span",{className:"font-medium text-red-900",children:"2 طرد"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx($e,{className:"w-6 h-6 ml-2 text-blue-600"}),"تحليل الأوقات والكفاءة"]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 p-4 rounded-xl mb-3",children:e.jsx($e,{className:"w-8 h-8 text-blue-600 mx-auto"})}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"متوسط وقت التحضير"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"1.2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"ساعة"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-green-100 p-4 rounded-xl mb-3",children:e.jsx(St,{className:"w-8 h-8 text-green-600 mx-auto"})}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"متوسط وقت التوصيل"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:"2.3"}),e.jsx("p",{className:"text-sm text-gray-600",children:"ساعة"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-purple-100 p-4 rounded-xl mb-3",children:e.jsx(Qe,{className:"w-8 h-8 text-purple-600 mx-auto"})}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"أفضل وقت للتوصيل"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"10-14"}),e.jsx("p",{className:"text-sm text-gray-600",children:"صباحاً"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-orange-100 p-4 rounded-xl mb-3",children:e.jsx(Dr,{className:"w-8 h-8 text-orange-600 mx-auto"})}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"أفضل يوم للتوصيل"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:"الأحد"}),e.jsx("p",{className:"text-sm text-gray-600",children:"أعلى معدل نجاح"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 rounded-2xl p-6 border border-blue-200",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(ss,{className:"w-6 h-6 ml-2 text-blue-600"}),"توصيات لتحسين الأداء"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"توصيات فورية:"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"زيادة عدد المندوبين في منطقة رفح لتحسين معدل التسليم"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"تحديث قاعدة بيانات العناوين لتقليل حالات العناوين الخاطئة"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"تدريب المندوبين على التعامل مع الحالات الصعبة"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-green-800",children:"توصيات طويلة المدى:"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"تطوير تطبيق جوال للمندوبين لتحسين التتبع"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"إنشاء نظام تقييم المستفيدين للخدمة"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:"تطوير شراكات مع مؤسسات محلية لتحسين التغطية"})]})]})]})]})]})]})}function Qj(){const{logInfo:t,logError:s}=Bt(),[r,i]=E.useState("general"),[o,c]=E.useState(""),[u,h]=E.useState(!1),[x,j]=E.useState("add");E.useState(null);const[w,T]=E.useState({}),[S,N]=E.useState(!1),[P,g]=E.useState(null),[M,v]=E.useState([{id:"1",category:"general",key:"app_name",name:"اسم التطبيق",description:"الاسم الظاهر للتطبيق في جميع الواجهات",value:"منصة المساعدات الإنسانية",type:"text",lastModified:"2024-12-21",modifiedBy:"أحمد الإدمن"},{id:"2",category:"general",key:"app_version",name:"إصدار التطبيق",description:"رقم إصدار التطبيق الحالي",value:"1.0.0",type:"text",lastModified:"2024-12-21",modifiedBy:"النظام"},{id:"3",category:"general",key:"max_beneficiaries_per_page",name:"عدد المستفيدين في الصفحة",description:"الحد الأقصى لعدد المستفيدين المعروضين في صفحة واحدة",value:"50",type:"number",lastModified:"2024-12-20",modifiedBy:"أحمد الإدمن"},{id:"4",category:"general",key:"enable_rtl",name:"تفعيل الكتابة من اليمين لليسار",description:"تفعيل دعم اللغة العربية والكتابة من اليمين لليسار",value:"true",type:"boolean",lastModified:"2024-12-21",modifiedBy:"أحمد الإدمن"},{id:"5",category:"security",key:"session_timeout",name:"مهلة انتهاء الجلسة (دقيقة)",description:"المدة بالدقائق قبل انتهاء جلسة المستخدم تلقائياً",value:"60",type:"number",lastModified:"2024-12-20",modifiedBy:"أحمد الإدمن"},{id:"6",category:"security",key:"max_login_attempts",name:"الحد الأقصى لمحاولات تسجيل الدخول",description:"عدد المحاولات المسموحة قبل قفل الحساب",value:"5",type:"number",lastModified:"2024-12-19",modifiedBy:"أحمد الإدمن"},{id:"7",category:"security",key:"require_2fa",name:"إجبار التحقق بخطوتين",description:"إجبار جميع المستخدمين على استخدام التحقق بخطوتين",value:"false",type:"boolean",lastModified:"2024-12-18",modifiedBy:"أحمد الإدمن"},{id:"8",category:"security",key:"encryption_key",name:"مفتاح التشفير",description:"مفتاح تشفير البيانات الحساسة",value:"sk_live_51234567890abcdef",type:"password",isSecret:!0,lastModified:"2024-12-15",modifiedBy:"أحمد الإدمن"},{id:"9",category:"notifications",key:"sms_provider",name:"مزود خدمة الرسائل النصية",description:"مزود الخدمة المستخدم لإرسال الرسائل النصية",value:"twilio",type:"select",options:["twilio","nexmo","local"],lastModified:"2024-12-20",modifiedBy:"أحمد الإدمن"},{id:"10",category:"notifications",key:"email_notifications",name:"تفعيل الإشعارات بالبريد الإلكتروني",description:"إرسال إشعارات للمستخدمين عبر البريد الإلكتروني",value:"true",type:"boolean",lastModified:"2024-12-21",modifiedBy:"أحمد الإدمن"},{id:"11",category:"notifications",key:"sms_api_key",name:"مفتاح API للرسائل النصية",description:"مفتاح API الخاص بمزود خدمة الرسائل النصية",value:"sk_sms_1234567890",type:"password",isSecret:!0,lastModified:"2024-12-20",modifiedBy:"أحمد الإدمن"},{id:"12",category:"performance",key:"cache_duration",name:"مدة التخزين المؤقت (ثانية)",description:"مدة الاحتفاظ بالبيانات في التخزين المؤقت",value:"3600",type:"number",lastModified:"2024-12-19",modifiedBy:"أحمد الإدمن"},{id:"13",category:"performance",key:"max_concurrent_tasks",name:"الحد الأقصى للمهام المتزامنة",description:"عدد المهام التي يمكن تنفيذها في نفس الوقت",value:"10",type:"number",lastModified:"2024-12-18",modifiedBy:"أحمد الإدمن"},{id:"14",category:"performance",key:"enable_compression",name:"تفعيل ضغط البيانات",description:"ضغط البيانات المرسلة لتحسين الأداء",value:"true",type:"boolean",lastModified:"2024-12-17",modifiedBy:"أحمد الإدمن"},{id:"15",category:"backup",key:"auto_backup_enabled",name:"تفعيل النسخ الاحتياطي التلقائي",description:"إنشاء نسخ احتياطية تلقائية للبيانات",value:"true",type:"boolean",lastModified:"2024-12-21",modifiedBy:"أحمد الإدمن"},{id:"16",category:"backup",key:"backup_frequency",name:"تكرار النسخ الاحتياطي",description:"كم مرة يتم إنشاء نسخة احتياطية",value:"daily",type:"select",options:["hourly","daily","weekly","monthly"],lastModified:"2024-12-20",modifiedBy:"أحمد الإدمن"},{id:"17",category:"backup",key:"backup_retention_days",name:"مدة الاحتفاظ بالنسخ الاحتياطية (يوم)",description:"عدد الأيام للاحتفاظ بالنسخ الاحتياطية",value:"30",type:"number",lastModified:"2024-12-19",modifiedBy:"أحمد الإدمن"}]),[y,k]=E.useState({}),C=[{id:"general",name:"الإعدادات العامة",icon:gs,color:"blue"},{id:"security",name:"الأمان والخصوصية",icon:Ye,color:"red"},{id:"notifications",name:"الإشعارات",icon:ts,color:"green"},{id:"performance",name:"الأداء",icon:Qe,color:"purple"},{id:"backup",name:"النسخ الاحتياطي",icon:$t,color:"orange"}],R=M.filter(F=>{const q=r==="all"||F.category===r,se=F.name.toLowerCase().includes(o.toLowerCase())||F.description.toLowerCase().includes(o.toLowerCase())||F.key.toLowerCase().includes(o.toLowerCase());return q&&se}),O=(F,q)=>{k(se=>({...se,[F]:q})),N(!0)},p=async()=>{try{await new Promise(F=>setTimeout(F,1e3)),v(F=>F.map(q=>({...q,value:y[q.id]||q.value,lastModified:new Date().toISOString().split("T")[0],modifiedBy:"أحمد الإدمن"}))),k({}),N(!1),g({message:"تم حفظ الإعدادات بنجاح",type:"success"}),setTimeout(()=>g(null),3e3),t("تم حفظ إعدادات النظام","SystemSettingsPage")}catch(F){g({message:"حدث خطأ في حفظ الإعدادات",type:"error"}),setTimeout(()=>g(null),3e3),s(F,"SystemSettingsPage")}},I=()=>{confirm("هل أنت متأكد من إعادة تعيين جميع الإعدادات؟")&&(k({}),N(!1),g({message:"تم إعادة تعيين الإعدادات",type:"warning"}),setTimeout(()=>g(null),3e3))},W=()=>{const F={exportDate:new Date().toISOString(),settings:M.map(oe=>({category:oe.category,key:oe.key,name:oe.name,value:oe.isSecret?"***":oe.value,type:oe.type}))},q=JSON.stringify(F,null,2),se=new Blob([q],{type:"application/json"}),D=URL.createObjectURL(se),me=document.createElement("a");me.href=D,me.download=`إعدادات_النظام_${new Date().toISOString().split("T")[0]}.json`,me.click(),URL.revokeObjectURL(D),g({message:"تم تصدير الإعدادات بنجاح",type:"success"}),setTimeout(()=>g(null),3e3)},z=()=>{j("restore"),h(!0)},Q=()=>{j("backup"),h(!0)},de=F=>{T(q=>({...q,[F]:!q[F]}))},je=F=>y[F.id]!==void 0?y[F.id]:F.value,Y=F=>{const q=C.find(se=>se.id===F);return q?q.icon:gs},_=F=>{const q=C.find(D=>D.id===F);return q?{blue:"bg-blue-100 text-blue-600",red:"bg-red-100 text-red-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600"}[q.color]:"bg-gray-100 text-gray-600"},G=F=>{switch(F){case"success":return"bg-green-100 border-green-200 text-green-800";case"error":return"bg-red-100 border-red-200 text-red-800";case"warning":return"bg-orange-100 border-orange-200 text-orange-800"}},ie=F=>{switch(F){case"success":return e.jsx(ne,{className:"w-5 h-5 text-green-600"});case"error":return e.jsx(ge,{className:"w-5 h-5 text-red-600"});case"warning":return e.jsx(ge,{className:"w-5 h-5 text-orange-600"})}},$=F=>{var se;const q=je(F);switch(y[F.id],F.type){case"boolean":return e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"checkbox",checked:q==="true",onChange:D=>O(F.id,D.target.checked?"true":"false"),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:q==="true"?"مفعل":"معطل"})]});case"select":return e.jsx("select",{value:q,onChange:D=>O(F.id,D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:(se=F.options)==null?void 0:se.map(D=>e.jsx("option",{value:D,children:D},D))});case"password":return e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:w[F.id]?"text":"password",value:q,onChange:D=>O(F.id,D.target.value),className:"w-full px-3 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل القيمة..."}),e.jsx("button",{type:"button",onClick:()=>de(F.id),className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:w[F.id]?e.jsx(Bp,{className:"w-4 h-4"}):e.jsx(vt,{className:"w-4 h-4"})})]});case"number":return e.jsx("input",{type:"number",value:q,onChange:D=>O(F.id,D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل رقم..."});default:return e.jsx("input",{type:"text",value:q,onChange:D=>O(F.id,D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل النص..."})}};return e.jsxs("div",{className:"space-y-6",children:[P&&e.jsxs("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg flex items-center space-x-3 space-x-reverse ${G(P.type)}`,children:[ie(P.type),e.jsx("span",{className:"font-medium",children:P.message}),e.jsx("button",{onClick:()=>g(null),className:"text-gray-500 hover:text-gray-700",children:e.jsx(Ct,{className:"w-4 h-4"})})]}),e.jsx(V,{className:"bg-blue-50 border-blue-200",padding:"sm",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-blue-600",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:["البيانات الوهمية محملة - ",M.length," إعداد في ",C.length," فئات"]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[e.jsx(H,{variant:"success",icon:ir,iconPosition:"right",onClick:p,disabled:!S,children:"حفظ التغييرات"}),e.jsx(H,{variant:"secondary",icon:jt,iconPosition:"right",onClick:I,disabled:!S,children:"إعادة تعيين"})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[e.jsx(H,{variant:"secondary",icon:st,iconPosition:"right",onClick:W,children:"تصدير الإعدادات"}),e.jsx(H,{variant:"secondary",icon:ps,iconPosition:"right",onClick:z,children:"استيراد الإعدادات"}),e.jsx(H,{variant:"primary",icon:$t,iconPosition:"right",onClick:Q,children:"إنشاء نسخة احتياطية"})]})]}),S&&e.jsx(V,{className:"bg-orange-50 border-orange-200",padding:"sm",children:e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx(ge,{className:"w-5 h-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-orange-800",children:"يوجد تغييرات غير محفوظة"}),e.jsx("p",{className:"text-orange-700 text-sm mt-1",children:"تأكد من حفظ التغييرات قبل مغادرة الصفحة"})]})]})}),e.jsxs(V,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"فئات الإعدادات"}),e.jsx(be,{type:"text",icon:gs,iconPosition:"right",placeholder:"البحث في الإعدادات...",value:o,onChange:F=>c(F.target.value),className:"w-64"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[e.jsxs("button",{onClick:()=>i("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["جميع الفئات (",M.length,")"]}),C.map(F=>{const q=F.icon,se=M.filter(D=>D.category===F.id);return e.jsxs("button",{onClick:()=>i(F.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2 space-x-reverse ${r===F.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(q,{className:"w-4 h-4"}),e.jsxs("span",{children:[F.name," (",se.length,")"]})]},F.id)})]})]}),e.jsx("div",{className:"space-y-4",children:R.length>0?R.map(F=>{const q=Y(F.category),se=y[F.id]!==void 0;return e.jsx(V,{className:se?"border-blue-300 bg-blue-50":"",children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 items-center",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${_(F.category)}`,children:e.jsx(q,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:F.name}),se&&e.jsx(Ne,{variant:"warning",size:"sm",children:"معدل"}),F.isSecret&&e.jsx(Qn,{className:"w-4 h-4 text-red-500",title:"إعداد سري"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:F.description}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["آخر تعديل: ",new Date(F.lastModified).toLocaleDateString("ar-SA")]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["بواسطة: ",F.modifiedBy]})]})]})]})}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"القيمة الحالية"}),$(F)]}),e.jsx("div",{className:"md:col-span-1",children:e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-2",children:[e.jsx(yy,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-mono text-xs bg-gray-100 px-2 py-1 rounded",children:F.key})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("span",{className:"text-gray-500",children:"النوع:"}),e.jsx(Ne,{variant:"neutral",size:"sm",children:F.type})]})]})})]})},F.id)}):e.jsx(V,{className:"p-12",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(gs,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:o?"لا توجد إعدادات مطابقة للبحث":"لا توجد إعدادات في هذه الفئة"}),e.jsx("p",{className:"text-sm mt-2",children:o?"جرب تعديل مصطلح البحث":"اختر فئة أخرى لعرض الإعدادات"})]})})}),e.jsxs(V,{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"معلومات النظام"}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-2",children:[e.jsx(_y,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-800",children:"الخادم"})]}),e.jsx("p",{className:"text-sm text-blue-700",children:"Node.js v18.17.0"}),e.jsx("p",{className:"text-xs text-blue-600",children:"WebContainer"})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-2",children:[e.jsx($t,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium text-green-800",children:"قاعدة البيانات"})]}),e.jsx("p",{className:"text-sm text-green-700",children:"البيانات الوهمية"}),e.jsx("p",{className:"text-xs text-green-600",children:"للتطوير"})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-2",children:[e.jsx(wy,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"font-medium text-purple-800",children:"الواجهة"})]}),e.jsx("p",{className:"text-sm text-purple-700",children:"React 18.3.1"}),e.jsx("p",{className:"text-xs text-purple-600",children:"Vite + TypeScript"})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl border border-orange-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-2",children:[e.jsx(Qe,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:"font-medium text-orange-800",children:"الحالة"})]}),e.jsx("p",{className:"text-sm text-orange-700",children:"يعمل بشكل طبيعي"}),e.jsx("p",{className:"text-xs text-orange-600",children:"آخر تحديث: الآن"})]})]})]}),u&&e.jsx(ls,{isOpen:u,onClose:()=>h(!1),title:x==="backup"?"إنشاء نسخة احتياطية":x==="restore"?"استيراد الإعدادات":"إجراء",size:"md",children:e.jsxs("div",{className:"p-6",children:[x==="backup"&&e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"bg-blue-100 p-6 rounded-xl mb-6",children:[e.jsx($t,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-2",children:"إنشاء نسخة احتياطية"}),e.jsx("p",{className:"text-gray-600",children:"سيتم إنشاء نسخة احتياطية من جميع إعدادات النظام"})]}),e.jsxs("div",{className:"space-y-4 text-sm text-gray-600 mb-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"عدد الإعدادات:"}),e.jsx("span",{className:"font-medium",children:M.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"الفئات:"}),e.jsx("span",{className:"font-medium",children:C.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"تاريخ النسخة:"}),e.jsx("span",{className:"font-medium",children:new Date().toLocaleDateString("ar-SA")})]})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-center",children:[e.jsx(H,{variant:"secondary",onClick:()=>h(!1),children:"إلغاء"}),e.jsx(H,{variant:"primary",onClick:()=>{W(),h(!1)},children:"إنشاء النسخة الاحتياطية"})]})]}),x==="restore"&&e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"bg-orange-100 p-6 rounded-xl mb-6",children:[e.jsx(ps,{className:"w-12 h-12 text-orange-600 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-2",children:"استيراد الإعدادات"}),e.jsx("p",{className:"text-gray-600",children:"اختر ملف النسخة الاحتياطية لاستعادة الإعدادات"})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 mb-6 hover:border-blue-400 hover:bg-blue-50 transition-colors",children:[e.jsx(ps,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"اسحب ملف JSON هنا أو اضغط للاختيار"}),e.jsx("input",{type:"file",accept:".json",className:"hidden",id:"settings-upload",onChange:F=>{var se;const q=(se=F.target.files)==null?void 0:se[0];q&&(alert(`تم اختيار الملف: ${q.name}
سيتم تطوير وظيفة الاستيراد لاحقاً`),h(!1))}}),e.jsxs("label",{htmlFor:"settings-upload",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors cursor-pointer inline-flex items-center",children:[e.jsx(ps,{className:"w-4 h-4 ml-2"}),"اختيار ملف"]})]}),e.jsx("div",{className:"flex space-x-3 space-x-reverse justify-center",children:e.jsx(H,{variant:"secondary",onClick:()=>h(!1),children:"إلغاء"})})]})]})}),e.jsx(V,{className:"bg-red-50 border-red-200",children:e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[e.jsx(Ye,{className:"w-6 h-6 text-red-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-800 mb-3",children:"تحذيرات أمنية مهمة"}),e.jsxs("ul",{className:"text-sm text-red-700 space-y-2",children:[e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ge,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"تأكد من عدم مشاركة الإعدادات السرية مع أشخاص غير مخولين"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ge,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"قم بإنشاء نسخ احتياطية منتظمة من الإعدادات"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ge,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"راجع الإعدادات الأمنية بانتظام وحدثها حسب الحاجة"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ge,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"تأكد من قوة كلمات المرور ومفاتيح التشفير"})]})]})]})]})})]})}function Yj(){const{logInfo:t,logError:s}=Bt(),[r,i]=E.useState("backups"),[o,c]=E.useState(""),[u,h]=E.useState(!1),[x,j]=E.useState("create"),[w,T]=E.useState(null),[S,N]=E.useState(null),[P,g]=E.useState(!1),[M,v]=E.useState(0),[y,k]=E.useState([{id:"backup-1",name:"نسخة_احتياطية_كاملة_2024-12-21",type:"full",size:"45.2 MB",createdAt:"2024-12-21T10:30:00",createdBy:"أحمد الإدمن",status:"completed",encrypted:!0,description:"نسخة احتياطية كاملة تشمل جميع البيانات والإعدادات"},{id:"backup-2",name:"نسخة_احتياطية_تزايدية_2024-12-20",type:"incremental",size:"12.8 MB",createdAt:"2024-12-20T22:00:00",createdBy:"النظام التلقائي",status:"completed",encrypted:!0,description:"نسخة احتياطية تزايدية للتغييرات الأخيرة"},{id:"backup-3",name:"نسخة_إعدادات_النظام_2024-12-19",type:"settings",size:"2.1 MB",createdAt:"2024-12-19T15:45:00",createdBy:"أحمد الإدمن",status:"completed",encrypted:!1,description:"نسخة احتياطية من إعدادات النظام فقط"},{id:"backup-4",name:"نسخة_المستخدمين_2024-12-18",type:"users",size:"5.7 MB",createdAt:"2024-12-18T09:15:00",createdBy:"فاطمة المشرفة",status:"failed",encrypted:!0,description:"نسخة احتياطية من بيانات المستخدمين والأدوار"}]),[C,R]=E.useState([{id:"schedule-1",name:"نسخة احتياطية يومية",type:"incremental",frequency:"daily",time:"02:00",enabled:!0,lastRun:"2024-12-21T02:00:00",nextRun:"2024-12-22T02:00:00",retentionDays:7},{id:"schedule-2",name:"نسخة احتياطية أسبوعية كاملة",type:"full",frequency:"weekly",time:"01:00",enabled:!0,lastRun:"2024-12-15T01:00:00",nextRun:"2024-12-22T01:00:00",retentionDays:30},{id:"schedule-3",name:"نسخة احتياطية شهرية للأرشيف",type:"full",frequency:"monthly",time:"00:00",enabled:!1,nextRun:"2025-01-01T00:00:00",retentionDays:365}]),[O,p]=E.useState({name:"",type:"full",description:"",encrypted:!0,includeFiles:!0}),[I,W]=E.useState({name:"",type:"full",frequency:"daily",time:"02:00",retentionDays:30,enabled:!0}),z=[{id:"backups",name:"النسخ الاحتياطية",icon:$t},{id:"schedules",name:"الجدولة التلقائية",icon:Dr},{id:"restore",name:"استعادة البيانات",icon:jt},{id:"settings",name:"إعدادات النسخ",icon:gs}],Q=[{value:"full",label:"نسخة كاملة",description:"جميع البيانات والإعدادات"},{value:"incremental",label:"نسخة تزايدية",description:"التغييرات منذ آخر نسخة"},{value:"settings",label:"الإعدادات فقط",description:"إعدادات النظام والتكوين"},{value:"users",label:"المستخدمين فقط",description:"بيانات المستخدمين والأدوار"}],de=[{value:"daily",label:"يومياً"},{value:"weekly",label:"أسبوعياً"},{value:"monthly",label:"شهرياً"}],je=async()=>{if(!O.name.trim()){N({message:"اسم النسخة الاحتياطية مطلوب",type:"error"}),setTimeout(()=>N(null),3e3);return}g(!0),v(0);try{for(let ce=0;ce<=100;ce+=10)v(ce),await new Promise(U=>setTimeout(U,200));const B={id:`backup-${Date.now()}`,name:O.name,type:O.type,size:`${Math.floor(Math.random()*50)+10}.${Math.floor(Math.random()*9)} MB`,createdAt:new Date().toISOString(),createdBy:"أحمد الإدمن",status:"completed",encrypted:O.encrypted,description:O.description};k(ce=>[B,...ce]),N({message:"تم إنشاء النسخة الاحتياطية بنجاح",type:"success"}),setTimeout(()=>N(null),3e3),h(!1),p({name:"",type:"full",description:"",encrypted:!0,includeFiles:!0}),t(`تم إنشاء نسخة احتياطية: ${B.name}`,"BackupManagementPage")}catch(B){N({message:"حدث خطأ في إنشاء النسخة الاحتياطية",type:"error"}),setTimeout(()=>N(null),3e3),s(B,"BackupManagementPage")}finally{g(!1),v(0)}},Y=B=>{confirm(`هل أنت متأكد من حذف النسخة الاحتياطية "${B.name}"؟`)&&(k(ce=>ce.filter(U=>U.id!==B.id)),N({message:"تم حذف النسخة الاحتياطية بنجاح",type:"success"}),setTimeout(()=>N(null),3e3),t(`تم حذف نسخة احتياطية: ${B.name}`,"BackupManagementPage"))},_=B=>{const ce={metadata:{name:B.name,type:B.type,createdAt:B.createdAt,encrypted:B.encrypted},data:{beneficiaries:"بيانات المستفيدين...",organizations:"بيانات المؤسسات...",packages:"بيانات الطرود...",settings:"إعدادات النظام..."}},U=JSON.stringify(ce,null,2),he=new Blob([U],{type:"application/json"}),Le=URL.createObjectURL(he),b=document.createElement("a");b.href=Le,b.download=`${B.name}.json`,b.click(),URL.revokeObjectURL(Le),N({message:"تم تحميل النسخة الاحتياطية بنجاح",type:"success"}),setTimeout(()=>N(null),3e3)},G=B=>{confirm(`هل أنت متأكد من استعادة النسخة الاحتياطية "${B.name}"؟

تحذير: سيتم استبدال البيانات الحالية!`)&&(N({message:"تم بدء عملية الاستعادة - سيتم إشعارك عند الانتهاء",type:"warning"}),setTimeout(()=>{N({message:"تم استعادة البيانات بنجاح",type:"success"}),setTimeout(()=>N(null),3e3)},3e3),t(`تم استعادة نسخة احتياطية: ${B.name}`,"BackupManagementPage"))},ie=()=>{if(!I.name.trim()){N({message:"اسم الجدولة مطلوب",type:"error"}),setTimeout(()=>N(null),3e3);return}const B={id:`schedule-${Date.now()}`,name:I.name,type:I.type,frequency:I.frequency,time:I.time,enabled:I.enabled,nextRun:$(I.frequency,I.time),retentionDays:I.retentionDays};R(ce=>[B,...ce]),N({message:"تم إنشاء جدولة النسخ الاحتياطي بنجاح",type:"success"}),setTimeout(()=>N(null),3e3),h(!1),W({name:"",type:"full",frequency:"daily",time:"02:00",retentionDays:30,enabled:!0}),t(`تم إنشاء جدولة نسخ احتياطي: ${B.name}`,"BackupManagementPage")},$=(B,ce)=>{const U=new Date,[he,Le]=ce.split(":").map(Number),b=new Date;return b.setHours(he,Le,0,0),B==="daily"?b<=U&&b.setDate(b.getDate()+1):B==="weekly"?b.setDate(b.getDate()+(7-b.getDay())):B==="monthly"&&b.setMonth(b.getMonth()+1,1),b.toISOString()},F=B=>{R(U=>U.map(he=>he.id===B?{...he,enabled:!he.enabled}:he));const ce=C.find(U=>U.id===B);N({message:`تم ${ce!=null&&ce.enabled?"إيقاف":"تفعيل"} الجدولة بنجاح`,type:"success"}),setTimeout(()=>N(null),3e3)},q=B=>{switch(B){case"completed":return"مكتملة";case"in_progress":return"قيد التنفيذ";case"failed":return"فشلت";default:return"غير محدد"}},se=B=>{switch(B){case"full":return"كاملة";case"incremental":return"تزايدية";case"settings":return"إعدادات";case"users":return"مستخدمين";default:return"غير محدد"}},D=B=>{switch(B){case"success":return"bg-green-100 border-green-200 text-green-800";case"error":return"bg-red-100 border-red-200 text-red-800";case"warning":return"bg-orange-100 border-orange-200 text-orange-800"}},me=B=>{switch(B){case"success":return e.jsx(ne,{className:"w-5 h-5 text-green-600"});case"error":return e.jsx(ge,{className:"w-5 h-5 text-red-600"});case"warning":return e.jsx(ge,{className:"w-5 h-5 text-orange-600"})}},oe=y.filter(B=>B.name.toLowerCase().includes(o.toLowerCase())||B.description.toLowerCase().includes(o.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[S&&e.jsxs("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg flex items-center space-x-3 space-x-reverse ${D(S.type)}`,children:[me(S.type),e.jsx("span",{className:"font-medium",children:S.message}),e.jsx("button",{onClick:()=>N(null),className:"text-gray-500 hover:text-gray-700",children:e.jsx(Ct,{className:"w-4 h-4"})})]}),e.jsx(V,{className:"bg-blue-50 border-blue-200",padding:"sm",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-blue-600",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:["البيانات الوهمية محملة - ",y.length," نسخة احتياطية، ",C.length," جدولة"]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[e.jsx(H,{variant:"primary",icon:Lt,iconPosition:"right",onClick:()=>{j("create"),h(!0)},children:"إنشاء نسخة احتياطية"}),e.jsx(H,{variant:"secondary",icon:Dr,iconPosition:"right",onClick:()=>{j("schedule"),h(!0)},children:"إضافة جدولة"})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[e.jsx(H,{variant:"secondary",icon:ps,iconPosition:"right",children:"استيراد نسخة"}),e.jsx(H,{variant:"secondary",icon:gs,iconPosition:"right",children:"إعدادات متقدمة"})]})]}),e.jsx(V,{children:e.jsx("div",{className:"flex space-x-1 space-x-reverse",children:z.map(B=>{const ce=B.icon,U=r===B.id;return e.jsxs("button",{onClick:()=>i(B.id),className:`flex items-center space-x-2 space-x-reverse px-4 py-3 rounded-lg font-medium text-sm transition-colors ${U?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(ce,{className:"w-4 h-4"}),e.jsx("span",{children:B.name})]},B.id)})})}),P&&e.jsxs(V,{className:"bg-blue-50 border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[e.jsx("div",{className:"animate-spin",children:e.jsx(jt,{className:"w-5 h-5 text-blue-600"})}),e.jsx("span",{className:"font-medium text-blue-800",children:"جاري إنشاء النسخة الاحتياطية..."})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-3",children:e.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${M}%`}})}),e.jsxs("div",{className:"text-center mt-2 text-blue-700 text-sm",children:[M,"%"]})]}),r==="backups"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(V,{children:e.jsx(be,{type:"text",icon:Tt,iconPosition:"right",placeholder:"البحث في النسخ الاحتياطية...",value:o,onChange:B=>c(B.target.value)})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(V,{className:"bg-blue-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl mb-2",children:e.jsx($t,{className:"w-6 h-6 text-blue-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-blue-600",children:"إجمالي النسخ"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:y.length})]})}),e.jsx(V,{className:"bg-green-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-xl mb-2",children:e.jsx(ne,{className:"w-6 h-6 text-green-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-green-600",children:"مكتملة"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:y.filter(B=>B.status==="completed").length})]})}),e.jsx(V,{className:"bg-orange-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-xl mb-2",children:e.jsx(Ye,{className:"w-6 h-6 text-orange-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-orange-600",children:"مشفرة"}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:y.filter(B=>B.encrypted).length})]})}),e.jsx(V,{className:"bg-purple-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-xl mb-2",children:e.jsx(gh,{className:"w-6 h-6 text-purple-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-purple-600",children:"الحجم الإجمالي"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:"65.8 MB"})]})})]}),e.jsxs(V,{padding:"none",className:"overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["النسخ الاحتياطية (",oe.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"النسخة الاحتياطية"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"النوع"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الحجم"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"تاريخ الإنشاء"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الحالة"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الإجراءات"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:oe.length>0?oe.map(B=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg ml-4",children:e.jsx($t,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:B.name}),B.encrypted&&e.jsx(Qn,{className:"w-4 h-4 text-green-600",title:"مشفرة"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:B.description})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(Ne,{variant:B.type==="full"?"info":B.type==="incremental"?"success":B.type==="settings"?"warning":"neutral",size:"sm",children:se(B.type)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:B.size}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsx("div",{children:new Date(B.createdAt).toLocaleDateString("ar-SA")}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(B.createdAt).toLocaleTimeString("ar-SA")})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(Ne,{variant:B.status==="completed"?"success":B.status==="in_progress"?"warning":"error",size:"sm",children:q(B.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsx("button",{onClick:()=>_(B),className:"text-blue-600 hover:text-blue-900 p-2 rounded-lg hover:bg-blue-50 transition-colors",title:"تحميل",disabled:B.status!=="completed",children:e.jsx(st,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>G(B),className:"text-green-600 hover:text-green-900 p-2 rounded-lg hover:bg-green-50 transition-colors",title:"استعادة",disabled:B.status!=="completed",children:e.jsx(jt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{T(B),j("view"),h(!0)},className:"text-purple-600 hover:text-purple-900 p-2 rounded-lg hover:bg-purple-50 transition-colors",title:"عرض التفاصيل",children:e.jsx(vt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Y(B),className:"text-red-600 hover:text-red-900 p-2 rounded-lg hover:bg-red-50 transition-colors",title:"حذف",children:e.jsx(nr,{className:"w-4 h-4"})})]})})]},B.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx($t,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"لا توجد نسخ احتياطية"}),e.jsx("p",{className:"text-sm mt-2",children:"ابدأ بإنشاء نسخة احتياطية جديدة"})]})})})})]})})]})]}),r==="schedules"&&e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:C.map(B=>{var ce;return e.jsxs(V,{className:B.enabled?"border-green-300":"border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${B.enabled?"bg-green-100":"bg-gray-100"}`,children:e.jsx(Dr,{className:`w-4 h-4 ${B.enabled?"text-green-600":"text-gray-600"}`})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:B.name}),e.jsx(Ne,{variant:B.enabled?"success":"neutral",size:"sm",children:B.enabled?"مفعل":"معطل"})]})]}),e.jsx("button",{onClick:()=>F(B.id),className:`p-2 rounded-lg transition-colors ${B.enabled?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-50"}`,children:B.enabled?e.jsx(Qn,{className:"w-4 h-4"}):e.jsx(Fp,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"النوع:"}),e.jsx(Ne,{variant:"info",size:"sm",children:se(B.type)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"التكرار:"}),e.jsx("span",{className:"font-medium text-gray-900",children:(ce=de.find(U=>U.value===B.frequency))==null?void 0:ce.label})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"الوقت:"}),e.jsx("span",{className:"font-medium text-gray-900",children:B.time})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"التشغيل التالي:"}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(B.nextRun).toLocaleDateString("ar-SA")})]}),B.lastRun&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"آخر تشغيل:"}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(B.lastRun).toLocaleDateString("ar-SA")})]})]})]},B.id)})})}),r==="restore"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(V,{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"استعادة البيانات"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-blue-400 hover:bg-blue-50 transition-colors",children:[e.jsx(ps,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"استعادة من ملف نسخة احتياطية"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"اسحب ملف النسخة الاحتياطية هنا أو اضغط للاختيار"}),e.jsx("input",{type:"file",accept:".json,.zip,.sql",className:"hidden",id:"restore-upload",onChange:B=>{var U;const ce=(U=B.target.files)==null?void 0:U[0];ce&&(N({message:`تم اختيار الملف: ${ce.name}. سيتم تطوير وظيفة الاستعادة لاحقاً`,type:"warning"}),setTimeout(()=>N(null),5e3))}}),e.jsxs("label",{htmlFor:"restore-upload",className:"bg-blue-600 text-white px-6 py-3 rounded-xl font-medium hover:bg-blue-700 transition-colors cursor-pointer inline-flex items-center",children:[e.jsx(ps,{className:"w-4 h-4 ml-2"}),"اختيار ملف"]})]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mt-6",children:e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[e.jsx(ge,{className:"w-5 h-5 text-red-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"تحذير مهم"}),e.jsxs("ul",{className:"text-sm text-red-700 space-y-1",children:[e.jsx("li",{children:"• استعادة البيانات ستستبدل جميع البيانات الحالية"}),e.jsx("li",{children:"• تأكد من إنشاء نسخة احتياطية من البيانات الحالية أولاً"}),e.jsx("li",{children:"• قد تستغرق عملية الاستعادة عدة دقائق"}),e.jsx("li",{children:"• سيتم إعادة تشغيل النظام بعد الاستعادة"})]})]})]})})]}),e.jsxs(V,{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"النسخ الاحتياطية المتاحة للاستعادة"}),e.jsx("div",{className:"space-y-3",children:y.filter(B=>B.status==="completed").slice(0,5).map(B=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:e.jsx($t,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:B.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[B.size," • ",new Date(B.createdAt).toLocaleDateString("ar-SA")]})]})]}),e.jsx(H,{variant:"warning",size:"sm",onClick:()=>G(B),children:"استعادة"})]},B.id))})]})]}),r==="settings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(V,{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"إعدادات النسخ الاحتياطي"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"الإعدادات العامة"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"التشفير التلقائي"}),e.jsx("p",{className:"text-sm text-gray-600",children:"تشفير جميع النسخ الاحتياطية تلقائياً"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"ضغط الملفات"}),e.jsx("p",{className:"text-sm text-gray-600",children:"ضغط النسخ الاحتياطية لتوفير المساحة"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"التحقق من التكامل"}),e.jsx("p",{className:"text-sm text-gray-600",children:"التحقق من سلامة النسخ الاحتياطية"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"إعدادات التخزين"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"مدة الاحتفاظ الافتراضية (أيام)"}),e.jsx("input",{type:"number",defaultValue:30,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأقصى لحجم النسخة (MB)"}),e.jsx("input",{type:"number",defaultValue:500,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"مجلد التخزين"}),e.jsx("input",{type:"text",defaultValue:"/backups",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(H,{variant:"primary",icon:ir,iconPosition:"right",children:"حفظ الإعدادات"})})]}),e.jsxs(V,{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"استخدام التخزين"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-2",children:[e.jsx(gh,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-800",children:"المساحة المستخدمة"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:"65.8 MB"}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2 mt-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"13%"}})}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"13% من 500 MB"})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-2",children:[e.jsx(py,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium text-green-800",children:"النسخ المضغوطة"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:"3"}),e.jsx("p",{className:"text-xs text-green-700",children:"توفير 45% من المساحة"})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl border border-orange-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mb-2",children:[e.jsx(Ye,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{className:"font-medium text-orange-800",children:"النسخ المشفرة"})]}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:"3"}),e.jsx("p",{className:"text-xs text-orange-700",children:"من أصل 4 نسخ"})]})]})]})]}),r==="restore"&&e.jsx(V,{className:"p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(jt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"استعادة البيانات"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"هذا القسم قيد التطوير - سيتم إضافة واجهة الاستعادة المتقدمة"}),e.jsx(H,{variant:"primary",children:"تطوير واجهة الاستعادة"})]})}),u&&e.jsx(ls,{isOpen:u,onClose:()=>h(!1),title:x==="create"?"إنشاء نسخة احتياطية جديدة":x==="schedule"?"إضافة جدولة جديدة":x==="view"?"تفاصيل النسخة الاحتياطية":"استعادة البيانات",size:"md",children:e.jsxs("div",{className:"p-6",children:[x==="create"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(be,{label:"اسم النسخة الاحتياطية *",type:"text",value:O.name,onChange:B=>p({...O,name:B.target.value}),placeholder:"مثال: نسخة_احتياطية_كاملة_2024",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع النسخة الاحتياطية *"}),e.jsx("select",{value:O.type,onChange:B=>p({...O,type:B.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Q.map(B=>e.jsxs("option",{value:B.value,children:[B.label," - ",B.description]},B.value))})]}),e.jsx(be,{label:"الوصف",type:"textarea",value:O.description,onChange:B=>p({...O,description:B.target.value}),placeholder:"وصف مختصر للنسخة الاحتياطية...",rows:3}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"checkbox",checked:O.encrypted,onChange:B=>p({...O,encrypted:B.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{className:"text-sm text-gray-700",children:"تشفير النسخة الاحتياطية"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"checkbox",checked:O.includeFiles,onChange:B=>p({...O,includeFiles:B.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{className:"text-sm text-gray-700",children:"تضمين الملفات المرفقة"})]})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-end pt-4",children:[e.jsx(H,{variant:"secondary",onClick:()=>h(!1),children:"إلغاء"}),e.jsx(H,{variant:"primary",onClick:je,disabled:P,loading:P,children:"إنشاء النسخة الاحتياطية"})]})]}),x==="schedule"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(be,{label:"اسم الجدولة *",type:"text",value:I.name,onChange:B=>W({...I,name:B.target.value}),placeholder:"مثال: نسخة احتياطية يومية",required:!0}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع النسخة"}),e.jsxs("select",{value:I.type,onChange:B=>W({...I,type:B.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"full",children:"نسخة كاملة"}),e.jsx("option",{value:"incremental",children:"نسخة تزايدية"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"التكرار"}),e.jsx("select",{value:I.frequency,onChange:B=>W({...I,frequency:B.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:de.map(B=>e.jsx("option",{value:B.value,children:B.label},B.value))})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(be,{label:"وقت التنفيذ",type:"time",value:I.time,onChange:B=>W({...I,time:B.target.value})}),e.jsx(be,{label:"مدة الاحتفاظ (أيام)",type:"number",value:I.retentionDays,onChange:B=>W({...I,retentionDays:parseInt(B.target.value)||30})})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"checkbox",checked:I.enabled,onChange:B=>W({...I,enabled:B.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{className:"text-sm text-gray-700",children:"تفعيل الجدولة فور الإنشاء"})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-end pt-4",children:[e.jsx(H,{variant:"secondary",onClick:()=>h(!1),children:"إلغاء"}),e.jsx(H,{variant:"primary",onClick:ie,children:"إنشاء الجدولة"})]})]}),x==="view"&&w&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"تفاصيل النسخة الاحتياطية"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"الاسم:"}),e.jsx("span",{className:"font-medium text-gray-900",children:w.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"النوع:"}),e.jsx(Ne,{variant:"info",size:"sm",children:se(w.type)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"الحجم:"}),e.jsx("span",{className:"font-medium text-gray-900",children:w.size})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"مشفرة:"}),e.jsx("span",{className:`font-medium ${w.encrypted?"text-green-600":"text-red-600"}`,children:w.encrypted?"نعم":"لا"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"تاريخ الإنشاء:"}),e.jsx("span",{className:"font-medium text-gray-900",children:new Date(w.createdAt).toLocaleDateString("ar-SA")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"المنشئ:"}),e.jsx("span",{className:"font-medium text-gray-900",children:w.createdBy})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"الحالة:"}),e.jsx(Ne,{variant:w.status==="completed"?"success":w.status==="in_progress"?"warning":"error",size:"sm",children:q(w.status)})]})]})]}),w.description&&e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"الوصف:"}),e.jsx("p",{className:"text-gray-900 mt-1",children:w.description})]})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-end pt-4",children:[e.jsx(H,{variant:"secondary",onClick:()=>h(!1),children:"إغلاق"}),e.jsx(H,{variant:"success",onClick:()=>_(w),disabled:w.status!=="completed",children:"تحميل النسخة"})]})]})]})}),e.jsx(V,{className:"bg-gradient-to-r from-blue-50 to-green-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[e.jsx($t,{className:"w-6 h-6 text-blue-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-3",children:"إرشادات النسخ الاحتياطي"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("ul",{className:"text-sm text-blue-700 space-y-2",children:[e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"قم بإنشاء نسخ احتياطية منتظمة لحماية البيانات"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"استخدم التشفير لحماية البيانات الحساسة"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"اختبر عملية الاستعادة بانتظام"})]})]}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-2",children:[e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"احتفظ بنسخ في مواقع متعددة"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"راقب مساحة التخزين المتاحة"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"احذف النسخ القديمة غير المطلوبة"})]})]})]})]})]})})]})}function Xj(){const{alerts:t,unreadAlerts:s,criticalAlerts:r,markAsRead:i,removeAlert:o,clearAllAlerts:c,addAlert:u}=x0(),{logInfo:h,logError:x}=Bt(),[j,w]=E.useState(""),[T,S]=E.useState("all"),[N,P]=E.useState("all"),[g,M]=E.useState("all"),[v,y]=E.useState(!1),[k,C]=E.useState("add"),[R,O]=E.useState(null),[p,I]=E.useState([]),[W,z]=E.useState(null),[Q,de]=E.useState({type:"delayed",title:"",description:"",relatedId:"",relatedType:"package",priority:"medium"}),je=t.filter(b=>{const re=b.title.toLowerCase().includes(j.toLowerCase())||b.description.toLowerCase().includes(j.toLowerCase()),Z=T==="all"||b.type===T,pe=N==="all"||b.priority===N,Me=g==="all"||g==="read"&&b.isRead||g==="unread"&&!b.isRead;return re&&Z&&pe&&Me}),Y={total:t.length,unread:s.length,critical:r.length,high:t.filter(b=>b.priority==="high"&&!b.isRead).length,medium:t.filter(b=>b.priority==="medium"&&!b.isRead).length,low:t.filter(b=>b.priority==="low"&&!b.isRead).length},_=b=>{i(b),z({message:"تم وضع علامة كمقروء",type:"success"}),setTimeout(()=>z(null),3e3),h(`تم وضع علامة كمقروء للتنبيه: ${b}`,"AlertsManagementPage")},G=b=>{confirm("هل أنت متأكد من حذف هذا التنبيه؟")&&(o(b),z({message:"تم حذف التنبيه بنجاح",type:"success"}),setTimeout(()=>z(null),3e3),h(`تم حذف التنبيه: ${b}`,"AlertsManagementPage"))},ie=()=>{confirm("هل أنت متأكد من حذف جميع التنبيهات؟ هذا الإجراء لا يمكن التراجع عنه.")&&(c(),z({message:"تم حذف جميع التنبيهات",type:"warning"}),setTimeout(()=>z(null),3e3),h("تم حذف جميع التنبيهات","AlertsManagementPage"))},$=()=>{if(!Q.title.trim()||!Q.description.trim()){z({message:"يرجى إدخال العنوان والوصف",type:"error"}),setTimeout(()=>z(null),3e3);return}u({type:Q.type,title:Q.title,description:Q.description,relatedId:Q.relatedId||"system",relatedType:Q.relatedType,priority:Q.priority,isRead:!1}),z({message:"تم إضافة التنبيه بنجاح",type:"success"}),setTimeout(()=>z(null),3e3),de({type:"delayed",title:"",description:"",relatedId:"",relatedType:"package",priority:"medium"}),y(!1),h(`تم إضافة تنبيه جديد: ${Q.title}`,"AlertsManagementPage")},F=b=>{if(p.length===0){z({message:"يرجى اختيار تنبيهات أولاً",type:"error"}),setTimeout(()=>z(null),3e3);return}b==="mark-read"?(p.forEach(re=>i(re)),z({message:`تم وضع علامة كمقروء لـ ${p.length} تنبيه`,type:"success"})):b==="delete"&&confirm(`هل أنت متأكد من حذف ${p.length} تنبيه؟`)&&(p.forEach(re=>o(re)),z({message:`تم حذف ${p.length} تنبيه`,type:"success"})),setTimeout(()=>z(null),3e3),I([])},q=b=>{I(re=>re.includes(b)?re.filter(Z=>Z!==b):[...re,b])},se=()=>{p.length===je.length?I([]):I(je.map(b=>b.id))},D=b=>{switch(b){case"delayed":return e.jsx($e,{className:"w-4 h-4"});case"failed":return e.jsx(ge,{className:"w-4 h-4"});case"expired":return e.jsx($e,{className:"w-4 h-4"});case"urgent":return e.jsx(ts,{className:"w-4 h-4"});default:return e.jsx(ts,{className:"w-4 h-4"})}},me=b=>{switch(b){case"delayed":return"bg-orange-100 text-orange-800";case"failed":return"bg-red-100 text-red-800";case"expired":return"bg-yellow-100 text-yellow-800";case"urgent":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},oe=b=>{switch(b){case"critical":return"حرجة";case"high":return"عالية";case"medium":return"متوسطة";case"low":return"منخفضة";default:return"غير محدد"}},B=b=>{switch(b){case"delayed":return"متأخر";case"failed":return"فشل";case"expired":return"منتهي الصلاحية";case"urgent":return"عاجل";default:return"عام"}},ce=b=>{if(b.relatedType==="package"){const re=is.find(Z=>Z.id===b.relatedId);return re?`طرد: ${re.name}`:"طرد غير محدد"}else if(b.relatedType==="beneficiary"){const re=Se.find(Z=>Z.id===b.relatedId);return re?`مستفيد: ${re.name}`:"مستفيد غير محدد"}else if(b.relatedType==="task"){const re=at.find(Z=>Z.id===b.relatedId);return re?`مهمة: ${re.id}`:"مهمة غير محددة"}return"غير محدد"},U=b=>{switch(b){case"success":return"bg-green-100 border-green-200 text-green-800";case"error":return"bg-red-100 border-red-200 text-red-800";case"warning":return"bg-orange-100 border-orange-200 text-orange-800"}},he=b=>{switch(b){case"success":return e.jsx(ne,{className:"w-5 h-5 text-green-600"});case"error":return e.jsx(ge,{className:"w-5 h-5 text-red-600"});case"warning":return e.jsx($e,{className:"w-5 h-5 text-orange-600"})}},Le=()=>{const b={date:new Date().toISOString(),totalAlerts:t.length,filteredAlerts:je.length,statistics:Y,alerts:je.map(Pe=>({id:Pe.id,type:B(Pe.type),title:Pe.title,description:Pe.description,priority:oe(Pe.priority),isRead:Pe.isRead?"مقروء":"غير مقروء",relatedInfo:ce(Pe),createdAt:Pe.createdAt}))},re=JSON.stringify(b,null,2),Z=new Blob([re],{type:"application/json"}),pe=URL.createObjectURL(Z),Me=document.createElement("a");Me.href=pe,Me.download=`تقرير_التنبيهات_${new Date().toISOString().split("T")[0]}.json`,Me.click(),URL.revokeObjectURL(pe),z({message:"تم تصدير تقرير التنبيهات بنجاح",type:"success"}),setTimeout(()=>z(null),3e3)};return e.jsxs("div",{className:"space-y-6",children:[W&&e.jsxs("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg flex items-center space-x-3 space-x-reverse ${U(W.type)}`,children:[he(W.type),e.jsx("span",{className:"font-medium",children:W.message}),e.jsx("button",{onClick:()=>z(null),className:"text-gray-500 hover:text-gray-700",children:e.jsx(Ct,{className:"w-4 h-4"})})]}),e.jsx(V,{className:"bg-blue-50 border-blue-200",padding:"sm",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-blue-600",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:["البيانات الوهمية محملة - ",t.length," تنبيه (",s.length," غير مقروء)"]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[e.jsx(H,{variant:"success",icon:st,iconPosition:"right",onClick:Le,children:"تصدير التنبيهات"}),e.jsx(H,{variant:"primary",icon:Lt,iconPosition:"right",onClick:()=>{C("add"),y(!0)},children:"إضافة تنبيه جديد"}),e.jsx(H,{variant:"danger",icon:nr,iconPosition:"right",onClick:ie,disabled:t.length===0,children:"حذف جميع التنبيهات"})]}),p.length>0&&e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsxs(H,{variant:"secondary",size:"sm",onClick:()=>F("mark-read"),children:["وضع علامة كمقروء (",p.length,")"]}),e.jsxs(H,{variant:"danger",size:"sm",onClick:()=>F("delete"),children:["حذف المحدد (",p.length,")"]})]})]}),e.jsx(V,{children:e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsx(be,{type:"text",icon:Tt,iconPosition:"right",placeholder:"البحث في التنبيهات...",value:j,onChange:b=>w(b.target.value)}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع التنبيه"}),e.jsxs("select",{value:T,onChange:b=>S(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع الأنواع"}),e.jsx("option",{value:"delayed",children:"متأخر"}),e.jsx("option",{value:"failed",children:"فشل"}),e.jsx("option",{value:"expired",children:"منتهي الصلاحية"}),e.jsx("option",{value:"urgent",children:"عاجل"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الأولوية"}),e.jsxs("select",{value:N,onChange:b=>P(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع الأولويات"}),e.jsx("option",{value:"critical",children:"حرجة"}),e.jsx("option",{value:"high",children:"عالية"}),e.jsx("option",{value:"medium",children:"متوسطة"}),e.jsx("option",{value:"low",children:"منخفضة"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحالة"}),e.jsxs("select",{value:g,onChange:b=>M(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"جميع الحالات"}),e.jsx("option",{value:"unread",children:"غير مقروء"}),e.jsx("option",{value:"read",children:"مقروء"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsx(V,{className:"bg-blue-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl mb-2",children:e.jsx(ts,{className:"w-6 h-6 text-blue-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-blue-600",children:"إجمالي التنبيهات"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:Y.total})]})}),e.jsx(V,{className:"bg-orange-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-xl mb-2",children:e.jsx(ge,{className:"w-6 h-6 text-orange-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-orange-600",children:"غير مقروء"}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:Y.unread})]})}),e.jsx(V,{className:"bg-red-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-red-100 p-3 rounded-xl mb-2",children:e.jsx(Ye,{className:"w-6 h-6 text-red-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-red-600",children:"حرجة"}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:Y.critical})]})}),e.jsx(V,{className:"bg-yellow-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-yellow-100 p-3 rounded-xl mb-2",children:e.jsx(ss,{className:"w-6 h-6 text-yellow-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-yellow-600",children:"عالية الأولوية"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:Y.high})]})}),e.jsx(V,{className:"bg-purple-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-xl mb-2",children:e.jsx(Qe,{className:"w-6 h-6 text-purple-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-purple-600",children:"متوسطة الأولوية"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:Y.medium})]})}),e.jsx(V,{className:"bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-gray-100 p-3 rounded-xl mb-2",children:e.jsx($e,{className:"w-6 h-6 text-gray-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"منخفضة الأولوية"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Y.low})]})})]}),r.length>0&&e.jsxs(V,{className:"bg-red-50 border-red-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[e.jsx(Ye,{className:"w-6 h-6 text-red-600"}),e.jsx("h3",{className:"text-lg font-bold text-red-800",children:"تنبيهات حرجة تحتاج إجراء فوري"})]}),e.jsx("div",{className:"space-y-3",children:r.slice(0,3).map(b=>e.jsx(V,{className:"bg-white border-red-200",padding:"sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"bg-red-100 p-2 rounded-lg",children:D(b.type)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:b.title}),e.jsx("p",{className:"text-sm text-gray-600",children:b.description}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ce(b)})]})]}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsx(H,{variant:"danger",size:"sm",onClick:()=>_(b.id),children:"اتخاذ إجراء"}),e.jsx(H,{variant:"secondary",size:"sm",onClick:()=>{O(b),C("view"),y(!0)},children:"عرض"})]})]})},b.id))})]}),e.jsxs(V,{padding:"none",className:"overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("input",{type:"checkbox",checked:p.length===je.length&&je.length>0,onChange:se,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["قائمة التنبيهات (",je.length,")"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-blue-600",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"البيانات الوهمية"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"اختيار"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"التنبيه"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"النوع"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الأولوية"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"مرتبط بـ"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"التاريخ"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الحالة"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الإجراءات"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:je.length>0?je.map(b=>e.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${b.isRead?"":"bg-blue-50/30"}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:p.includes(b.id),onChange:()=>q(b.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[e.jsx("div",{className:`p-2 rounded-lg ${me(b.type)}`,children:D(b.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("p",{className:`text-sm font-medium ${b.isRead?"text-gray-600":"text-gray-900"}`,children:b.title}),!b.isRead&&e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:b.description})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(Ne,{variant:b.type==="failed"?"error":b.type==="delayed"?"warning":b.type==="urgent"?"error":"info",size:"sm",children:B(b.type)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(Ne,{variant:b.priority==="critical"?"error":b.priority==="high"?"warning":b.priority==="medium"?"info":"neutral",size:"sm",children:oe(b.priority)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ce(b)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(b.createdAt).toLocaleDateString("ar-SA")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(Ne,{variant:b.isRead?"success":"warning",size:"sm",children:b.isRead?"مقروء":"غير مقروء"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsx("button",{onClick:()=>{O(b),C("view"),y(!0)},className:"text-blue-600 hover:text-blue-900 p-2 rounded-lg hover:bg-blue-50 transition-colors",title:"عرض التفاصيل",children:e.jsx(vt,{className:"w-4 h-4"})}),!b.isRead&&e.jsx("button",{onClick:()=>_(b.id),className:"text-green-600 hover:text-green-900 p-2 rounded-lg hover:bg-green-50 transition-colors",title:"وضع علامة كمقروء",children:e.jsx(ne,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>G(b.id),className:"text-red-600 hover:text-red-900 p-2 rounded-lg hover:bg-red-50 transition-colors",title:"حذف",children:e.jsx(nr,{className:"w-4 h-4"})})]})})]},b.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(ts,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:j||T!=="all"||N!=="all"||g!=="all"?"لا توجد تنبيهات مطابقة للفلاتر":"لا توجد تنبيهات"}),e.jsx("p",{className:"text-sm mt-2",children:j||T!=="all"||N!=="all"||g!=="all"?"جرب تعديل الفلاتر أو مصطلح البحث":"لم يتم إنشاء أي تنبيهات بعد"})]})})})})]})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(V,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"اتجاهات التنبيهات"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-red-50 p-4 rounded-xl border border-red-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-red-700",children:"تنبيهات حرجة هذا الأسبوع"}),e.jsx("span",{className:"text-2xl font-bold text-red-900",children:Y.critical})]}),e.jsx("div",{className:"text-xs text-red-600 mt-1",children:"+2 من الأسبوع الماضي"})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl border border-orange-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-orange-700",children:"تنبيهات متأخرة"}),e.jsx("span",{className:"text-2xl font-bold text-orange-900",children:t.filter(b=>b.type==="delayed").length})]}),e.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"-1 من الأسبوع الماضي"})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"معدل الاستجابة"}),e.jsx("span",{className:"text-2xl font-bold text-blue-900",children:"87%"})]}),e.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"+5% من الشهر الماضي"})]})]})]}),e.jsxs(V,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"إعدادات التنبيهات التلقائية"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"تنبيهات الطرود المتأخرة"}),e.jsx("p",{className:"text-sm text-gray-600",children:"تلقائي عند تأخر الطرد أكثر من 24 ساعة"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-green-600",children:"مفعل"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"تنبيهات فشل التسليم"}),e.jsx("p",{className:"text-sm text-gray-600",children:"تلقائي عند فشل محاولة التسليم"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-green-600",children:"مفعل"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"تنبيهات انتهاء الصلاحية"}),e.jsx("p",{className:"text-sm text-gray-600",children:"تلقائي قبل 3 أيام من انتهاء الصلاحية"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-green-600",children:"مفعل"})]})]})]})]})]}),v&&e.jsx(ls,{isOpen:v,onClose:()=>y(!1),title:k==="add"?"إضافة تنبيه جديد":k==="view"?"تفاصيل التنبيه":"إجراء جماعي",size:"md",children:e.jsxs("div",{className:"p-6",children:[k==="add"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(be,{label:"عنوان التنبيه *",type:"text",value:Q.title,onChange:b=>de({...Q,title:b.target.value}),placeholder:"أدخل عنوان التنبيه...",required:!0}),e.jsx(be,{label:"وصف التنبيه *",type:"textarea",value:Q.description,onChange:b=>de({...Q,description:b.target.value}),placeholder:"أدخل وصف مفصل للتنبيه...",rows:3,required:!0}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع التنبيه"}),e.jsxs("select",{value:Q.type,onChange:b=>de({...Q,type:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"delayed",children:"متأخر"}),e.jsx("option",{value:"failed",children:"فشل"}),e.jsx("option",{value:"expired",children:"منتهي الصلاحية"}),e.jsx("option",{value:"urgent",children:"عاجل"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الأولوية"}),e.jsxs("select",{value:Q.priority,onChange:b=>de({...Q,priority:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:"منخفضة"}),e.jsx("option",{value:"medium",children:"متوسطة"}),e.jsx("option",{value:"high",children:"عالية"}),e.jsx("option",{value:"critical",children:"حرجة"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"مرتبط بـ"}),e.jsxs("select",{value:Q.relatedType,onChange:b=>de({...Q,relatedType:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"package",children:"طرد"}),e.jsx("option",{value:"beneficiary",children:"مستفيد"}),e.jsx("option",{value:"task",children:"مهمة"})]})]}),e.jsx(be,{label:"معرف العنصر المرتبط",type:"text",value:Q.relatedId,onChange:b=>de({...Q,relatedId:b.target.value}),placeholder:"اختياري - معرف الطرد أو المستفيد..."})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-end pt-4",children:[e.jsx(H,{variant:"secondary",onClick:()=>y(!1),children:"إلغاء"}),e.jsx(H,{variant:"primary",onClick:$,children:"إضافة التنبيه"})]})]}),k==="view"&&R&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[e.jsx("div",{className:`p-3 rounded-lg ${me(R.type)}`,children:D(R.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900",children:R.title}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mt-2",children:[e.jsx(Ne,{variant:R.type==="failed"?"error":R.type==="delayed"?"warning":R.type==="urgent"?"error":"info",size:"sm",children:B(R.type)}),e.jsx(Ne,{variant:R.priority==="critical"?"error":R.priority==="high"?"warning":R.priority==="medium"?"info":"neutral",size:"sm",children:oe(R.priority)}),e.jsx(Ne,{variant:R.isRead?"success":"warning",size:"sm",children:R.isRead?"مقروء":"غير مقروء"})]})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"الوصف:"}),e.jsx("p",{className:"text-gray-900 mt-1",children:R.description})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"مرتبط بـ:"}),e.jsx("p",{className:"text-gray-900",children:ce(R)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"تاريخ الإنشاء:"}),e.jsx("p",{className:"text-gray-900",children:new Date(R.createdAt).toLocaleString("ar-SA")})]})]})]})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-end pt-4",children:[e.jsx(H,{variant:"secondary",onClick:()=>y(!1),children:"إغلاق"}),!R.isRead&&e.jsx(H,{variant:"success",onClick:()=>{_(R.id),y(!1)},children:"وضع علامة كمقروء"}),e.jsx(H,{variant:"danger",onClick:()=>{G(R.id),y(!1)},children:"حذف التنبيه"})]})]})]})}),e.jsx(V,{className:"bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[e.jsx(ts,{className:"w-6 h-6 text-blue-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-3",children:"إرشادات إدارة التنبيهات"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-2",children:[e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"التنبيهات الحرجة تحتاج إجراء فوري ويجب عدم تجاهلها"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"يمكن تحديد عدة تنبيهات لتنفيذ إجراءات جماعية عليها"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"التنبيهات التلقائية يتم إنشاؤها بناءً على أحداث النظام"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"يمكن إضافة تنبيهات يدوية للمتابعة الخاصة"})]})]})]})]})})]})}function Jj(){var he,Le;const{logInfo:t,logError:s}=Bt(),[r,i]=E.useState("templates"),[o,c]=E.useState(""),[u,h]=E.useState(!1),[x,j]=E.useState("add-template"),[w,T]=E.useState(null),[S,N]=E.useState(null),[P,g]=E.useState([{id:"1",name:"تأكيد استلام الطرد",type:"sms",category:"confirmation",content:"مرحباً {name}، تم تسليم طردك بنجاح. رقم الإرسالية: {tracking_number}. شكراً لك.",variables:["name","tracking_number"],isActive:!0,usageCount:247,lastUsed:"2024-12-21",createdAt:"2024-01-15",createdBy:"أحمد الإدمن"},{id:"2",name:"تذكير بموعد التسليم",type:"sms",category:"reminder",content:"عزيزي {name}، سيتم تسليم طردك غداً في تمام الساعة {delivery_time}. يرجى التواجد في المنزل.",variables:["name","delivery_time"],isActive:!0,usageCount:156,lastUsed:"2024-12-20",createdAt:"2024-01-20",createdBy:"فاطمة المشرفة"},{id:"3",name:"إشعار فشل التسليم",type:"sms",category:"alert",content:"عذراً {name}، لم نتمكن من تسليم طردك بسبب {failure_reason}. سيتم إعادة المحاولة قريباً.",variables:["name","failure_reason"],isActive:!0,usageCount:23,lastUsed:"2024-12-19",createdAt:"2024-02-01",createdBy:"أحمد الإدمن"},{id:"4",name:"ترحيب بمستفيد جديد",type:"email",category:"welcome",subject:"مرحباً بك في منصة المساعدات الإنسانية",content:`مرحباً {name}،

نرحب بك في منصة المساعدات الإنسانية. تم تسجيلك بنجاح برقم الهوية {national_id}.

سيتم التواصل معك قريباً لتحديد احتياجاتك.

شكراً لك.`,variables:["name","national_id"],isActive:!0,usageCount:89,lastUsed:"2024-12-18",createdAt:"2024-01-10",createdBy:"سارة المنسقة"},{id:"5",name:"تنبيه طرد متأخر",type:"whatsapp",category:"alert",content:"⚠️ تنبيه: طرد {package_name} متأخر منذ {days_delayed} أيام. المستفيد: {beneficiary_name}. يرجى المتابعة فوراً.",variables:["package_name","days_delayed","beneficiary_name"],isActive:!0,usageCount:45,lastUsed:"2024-12-21",createdAt:"2024-02-15",createdBy:"أحمد الإدمن"}]),[M,v]=E.useState([{id:"1",category:"delivery",name:"إشعارات التسليم",description:"إشعارات عند تسليم الطرود بنجاح",smsEnabled:!0,emailEnabled:!1,pushEnabled:!0,whatsappEnabled:!0,priority:"high",recipients:["beneficiary","admin"]},{id:"2",category:"alerts",name:"تنبيهات الطوارئ",description:"تنبيهات للحالات الطارئة والمشاكل الحرجة",smsEnabled:!0,emailEnabled:!0,pushEnabled:!0,whatsappEnabled:!0,priority:"critical",recipients:["admin","supervisor"]},{id:"3",category:"reminders",name:"تذكيرات المواعيد",description:"تذكيرات بمواعيد التسليم والمتابعة",smsEnabled:!0,emailEnabled:!1,pushEnabled:!0,whatsappEnabled:!1,priority:"medium",recipients:["beneficiary"]}]),[y,k]=E.useState([{id:"1",templateId:"1",templateName:"تأكيد استلام الطرد",type:"sms",recipient:"0591234567",recipientName:"محمد أبو عامر",status:"delivered",sentAt:"2024-12-21T10:30:00",deliveredAt:"2024-12-21T10:31:00",cost:.05},{id:"2",templateId:"2",templateName:"تذكير بموعد التسليم",type:"sms",recipient:"0592345678",recipientName:"فاطمة الفرا",status:"sent",sentAt:"2024-12-21T09:15:00",cost:.05},{id:"3",templateId:"3",templateName:"إشعار فشل التسليم",type:"sms",recipient:"0593456789",recipientName:"خالد النجار",status:"failed",sentAt:"2024-12-20T16:45:00",failureReason:"رقم غير صحيح"}]),[C,R]=E.useState({name:"",type:"sms",category:"custom",subject:"",content:"",variables:[]}),O=[{id:"templates",name:"قوالب الرسائل",icon:$s},{id:"settings",name:"إعدادات الإشعارات",icon:gs},{id:"logs",name:"سجل الرسائل",icon:Qe},{id:"statistics",name:"الإحصائيات",icon:Es}],p=[{value:"delivery",label:"التسليم"},{value:"reminder",label:"التذكيرات"},{value:"confirmation",label:"التأكيد"},{value:"alert",label:"التنبيهات"},{value:"welcome",label:"الترحيب"},{value:"custom",label:"مخصص"}],I=[{value:"sms",label:"رسالة نصية",icon:qr},{value:"email",label:"بريد إلكتروني",icon:Il},{value:"push",label:"إشعار فوري",icon:ts},{value:"whatsapp",label:"واتساب",icon:$s}],W=P.filter(b=>b.name.toLowerCase().includes(o.toLowerCase())||b.content.toLowerCase().includes(o.toLowerCase())),z=y.filter(b=>b.templateName.toLowerCase().includes(o.toLowerCase())||b.recipientName.toLowerCase().includes(o.toLowerCase())||b.recipient.includes(o)),Q={totalTemplates:P.length,activeTemplates:P.filter(b=>b.isActive).length,totalSent:y.length,delivered:y.filter(b=>b.status==="delivered").length,failed:y.filter(b=>b.status==="failed").length,pending:y.filter(b=>b.status==="pending").length,totalCost:y.reduce((b,re)=>b+(re.cost||0),0)},de=()=>{j("add-template"),T(null),R({name:"",type:"sms",category:"custom",subject:"",content:"",variables:[]}),h(!0)},je=b=>{j("edit-template"),T(b),R({name:b.name,type:b.type,category:b.category,subject:b.subject||"",content:b.content,variables:b.variables}),h(!0)},Y=b=>{j("view-template"),T(b),h(!0)},_=b=>{j("test-template"),T(b),h(!0)},G=()=>{if(!C.name.trim()||!C.content.trim()){N({message:"يرجى إدخال اسم القالب والمحتوى",type:"error"}),setTimeout(()=>N(null),3e3);return}if(w)g(b=>b.map(re=>re.id===w.id?{...re,name:C.name,type:C.type,category:C.category,subject:C.subject,content:C.content,variables:F(C.content)}:re)),N({message:"تم تحديث القالب بنجاح",type:"success"});else{const b={id:`template-${Date.now()}`,name:C.name,type:C.type,category:C.category,subject:C.subject,content:C.content,variables:F(C.content),isActive:!0,usageCount:0,createdAt:new Date().toISOString(),createdBy:"أحمد الإدمن"};g(re=>[b,...re]),N({message:"تم إضافة القالب بنجاح",type:"success"})}setTimeout(()=>N(null),3e3),h(!1),T(null),t(`تم ${w?"تحديث":"إضافة"} قالب الرسالة: ${C.name}`,"MessagesSettingsPage")},ie=b=>{g(re=>re.map(Z=>Z.id===b.id?{...Z,isActive:!Z.isActive}:Z)),N({message:`تم ${b.isActive?"إلغاء تفعيل":"تفعيل"} القالب`,type:"success"}),setTimeout(()=>N(null),3e3)},$=()=>{if(!w)return;const b={id:`test-${Date.now()}`,templateId:w.id,templateName:w.name,type:w.type,recipient:"0591234567",recipientName:"مستخدم تجريبي",status:"sent",sentAt:new Date().toISOString(),cost:.05};k(re=>[b,...re]),N({message:"تم إرسال الرسالة التجريبية بنجاح",type:"success"}),setTimeout(()=>N(null),3e3),h(!1)},F=b=>{const re=b.match(/\{([^}]+)\}/g);return re?re.map(Z=>Z.slice(1,-1)):[]},q=b=>{const re=I.find(Z=>Z.value===b);return re?re.icon:$s},se=b=>{switch(b){case"sms":return"bg-blue-100 text-blue-800";case"email":return"bg-green-100 text-green-800";case"push":return"bg-purple-100 text-purple-800";case"whatsapp":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},D=b=>{switch(b){case"sent":return"تم الإرسال";case"delivered":return"تم التسليم";case"failed":return"فشل";case"pending":return"في الانتظار";default:return"غير محدد"}},me=b=>{const re=p.find(Z=>Z.value===b);return re?re.label:"غير محدد"},oe=b=>{switch(b){case"success":return"bg-green-100 border-green-200 text-green-800";case"error":return"bg-red-100 border-red-200 text-red-800";case"warning":return"bg-orange-100 border-orange-200 text-orange-800"}},B=b=>{switch(b){case"success":return e.jsx(ne,{className:"w-5 h-5 text-green-600"});case"error":return e.jsx(ge,{className:"w-5 h-5 text-red-600"});case"warning":return e.jsx($e,{className:"w-5 h-5 text-orange-600"})}},ce=()=>{const b={date:new Date().toISOString(),totalTemplates:P.length,activeTemplates:P.filter(Pe=>Pe.isActive).length,templates:P.map(Pe=>({name:Pe.name,type:Pe.type,category:me(Pe.category),content:Pe.content,variables:Pe.variables,usageCount:Pe.usageCount,isActive:Pe.isActive}))},re=JSON.stringify(b,null,2),Z=new Blob([re],{type:"application/json"}),pe=URL.createObjectURL(Z),Me=document.createElement("a");Me.href=pe,Me.download=`قوالب_الرسائل_${new Date().toISOString().split("T")[0]}.json`,Me.click(),URL.revokeObjectURL(pe),N({message:"تم تصدير قوالب الرسائل بنجاح",type:"success"}),setTimeout(()=>N(null),3e3)},U=()=>{const b={date:new Date().toISOString(),totalMessages:y.length,statistics:Q,logs:y.map(Pe=>({templateName:Pe.templateName,type:Pe.type,recipient:Pe.recipientName,status:D(Pe.status),sentAt:Pe.sentAt,deliveredAt:Pe.deliveredAt,cost:Pe.cost}))},re=JSON.stringify(b,null,2),Z=new Blob([re],{type:"application/json"}),pe=URL.createObjectURL(Z),Me=document.createElement("a");Me.href=pe,Me.download=`سجل_الرسائل_${new Date().toISOString().split("T")[0]}.json`,Me.click(),URL.revokeObjectURL(pe),N({message:"تم تصدير سجل الرسائل بنجاح",type:"success"}),setTimeout(()=>N(null),3e3)};return e.jsxs("div",{className:"space-y-6",children:[S&&e.jsxs("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg flex items-center space-x-3 space-x-reverse ${oe(S.type)}`,children:[B(S.type),e.jsx("span",{className:"font-medium",children:S.message}),e.jsx("button",{onClick:()=>N(null),className:"text-gray-500 hover:text-gray-700",children:e.jsx(Ct,{className:"w-4 h-4"})})]}),e.jsx(V,{className:"bg-blue-50 border-blue-200",padding:"sm",children:e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse text-blue-600",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:["البيانات الوهمية محملة - ",P.length," قالب، ",y.length," رسالة مرسلة"]})]})}),e.jsx(V,{children:e.jsx("div",{className:"flex space-x-1 space-x-reverse",children:O.map(b=>{const re=b.icon,Z=r===b.id;return e.jsxs("button",{onClick:()=>i(b.id),className:`flex items-center space-x-2 space-x-reverse px-4 py-3 rounded-lg font-medium text-sm transition-colors ${Z?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:b.name})]},b.id)})})}),r==="templates"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[e.jsx(H,{variant:"success",icon:st,iconPosition:"right",onClick:ce,children:"تصدير القوالب"}),e.jsx(H,{variant:"primary",icon:Lt,iconPosition:"right",onClick:de,children:"إضافة قالب جديد"})]})}),e.jsx(V,{children:e.jsx(be,{type:"text",icon:Tt,iconPosition:"right",placeholder:"البحث في قوالب الرسائل...",value:o,onChange:b=>c(b.target.value)})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(V,{className:"bg-blue-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-xl mb-2",children:e.jsx($s,{className:"w-6 h-6 text-blue-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-blue-600",children:"إجمالي القوالب"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:Q.totalTemplates})]})}),e.jsx(V,{className:"bg-green-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-xl mb-2",children:e.jsx(ne,{className:"w-6 h-6 text-green-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-green-600",children:"قوالب نشطة"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:Q.activeTemplates})]})}),e.jsx(V,{className:"bg-purple-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-xl mb-2",children:e.jsx(Yn,{className:"w-6 h-6 text-purple-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-purple-600",children:"رسائل مرسلة"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:Q.totalSent})]})}),e.jsx(V,{className:"bg-orange-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-orange-100 p-3 rounded-xl mb-2",children:e.jsx(Es,{className:"w-6 h-6 text-orange-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-orange-600",children:"معدل التسليم"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-900",children:[Q.totalSent>0?(Q.delivered/Q.totalSent*100).toFixed(1):0,"%"]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:W.map(b=>{const re=q(b.type);return e.jsxs(V,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:`p-2 rounded-lg ${se(b.type)}`,children:e.jsx(re,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:b.name}),e.jsx(Ne,{variant:b.category==="alert"?"error":b.category==="delivery"?"success":b.category==="reminder"?"warning":"info",size:"sm",children:me(b.category)})]})]}),e.jsx(Ne,{variant:b.isActive?"success":"neutral",size:"sm",children:b.isActive?"نشط":"معطل"})]}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-sm text-gray-600 line-clamp-3",children:b.content})}),e.jsxs("div",{className:"flex items-center justify-between mb-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["استُخدم ",b.usageCount," مرة"]}),e.jsxs("span",{children:[b.variables.length," متغير"]})]}),e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsx(H,{variant:"primary",size:"sm",onClick:()=>Y(b),children:e.jsx(vt,{className:"w-4 h-4"})}),e.jsx(H,{variant:"secondary",size:"sm",onClick:()=>je(b),children:e.jsx(Jt,{className:"w-4 h-4"})}),e.jsx(H,{variant:"warning",size:"sm",onClick:()=>_(b),children:e.jsx(Yn,{className:"w-4 h-4"})}),e.jsx(H,{variant:b.isActive?"neutral":"success",size:"sm",onClick:()=>ie(b),children:b.isActive?"إلغاء":"تفعيل"})]})]},b.id)})})]}),r==="settings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"إعدادات الإشعارات"}),e.jsx(H,{variant:"primary",icon:ir,iconPosition:"right",children:"حفظ الإعدادات"})]}),e.jsx("div",{className:"space-y-4",children:M.map(b=>e.jsxs(V,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:b.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:b.description})]}),e.jsx(Ne,{variant:b.priority==="critical"?"error":b.priority==="high"?"warning":b.priority==="medium"?"info":"neutral",size:"sm",children:b.priority==="critical"?"حرجة":b.priority==="high"?"عالية":b.priority==="medium"?"متوسطة":"منخفضة"})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"checkbox",checked:b.smsEnabled,onChange:re=>{v(Z=>Z.map(pe=>pe.id===b.id?{...pe,smsEnabled:re.target.checked}:pe))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx(qr,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"رسائل نصية"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"checkbox",checked:b.emailEnabled,onChange:re=>{v(Z=>Z.map(pe=>pe.id===b.id?{...pe,emailEnabled:re.target.checked}:pe))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx(Il,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"بريد إلكتروني"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"checkbox",checked:b.pushEnabled,onChange:re=>{v(Z=>Z.map(pe=>pe.id===b.id?{...pe,pushEnabled:re.target.checked}:pe))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx(ts,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"إشعار فوري"})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("input",{type:"checkbox",checked:b.whatsappEnabled,onChange:re=>{v(Z=>Z.map(pe=>pe.id===b.id?{...pe,whatsappEnabled:re.target.checked}:pe))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx($s,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"واتساب"})]})]})]},b.id))})]}),r==="logs"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[e.jsx(H,{variant:"success",icon:st,iconPosition:"right",onClick:U,children:"تصدير السجل"}),e.jsx(H,{variant:"secondary",icon:jt,iconPosition:"right",children:"تحديث البيانات"})]})}),e.jsx(V,{children:e.jsx(be,{type:"text",icon:Tt,iconPosition:"right",placeholder:"البحث في سجل الرسائل...",value:o,onChange:b=>c(b.target.value)})}),e.jsxs(V,{padding:"none",className:"overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["سجل الرسائل (",z.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"القالب"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"النوع"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المستلم"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الحالة"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"تاريخ الإرسال"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"التكلفة"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الإجراءات"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:z.length>0?z.map(b=>{var Z;const re=q(b.type);return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg ml-3 ${se(b.type)}`,children:e.jsx(re,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.templateName}),e.jsxs("div",{className:"text-sm text-gray-500",children:["#",b.id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(Ne,{variant:"info",size:"sm",children:((Z=I.find(pe=>pe.value===b.type))==null?void 0:Z.label)||b.type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.recipientName}),e.jsx("div",{className:"text-sm text-gray-500",children:b.recipient})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(Ne,{variant:b.status==="delivered"?"success":b.status==="failed"?"error":b.status==="sent"?"info":"warning",size:"sm",children:D(b.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(b.sentAt).toLocaleString("ar-SA")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:b.cost?`${b.cost.toFixed(2)} ₪`:"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx(H,{variant:"secondary",size:"sm",onClick:()=>{T(b),j("view-log"),h(!0)},children:e.jsx(vt,{className:"w-4 h-4"})})})]},b.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(Qe,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"لا توجد رسائل في السجل"}),e.jsx("p",{className:"text-sm mt-2",children:"لم يتم إرسال أي رسائل بعد"})]})})})})]})})]})]}),r==="statistics"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"إحصائيات الرسائل"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(V,{className:"bg-blue-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 p-4 rounded-xl mb-3",children:e.jsx(Yn,{className:"w-8 h-8 text-blue-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-blue-600",children:"إجمالي المرسل"}),e.jsx("p",{className:"text-3xl font-bold text-blue-900",children:Q.totalSent})]})}),e.jsx(V,{className:"bg-green-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-green-100 p-4 rounded-xl mb-3",children:e.jsx(ne,{className:"w-8 h-8 text-green-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-green-600",children:"تم التسليم"}),e.jsx("p",{className:"text-3xl font-bold text-green-900",children:Q.delivered})]})}),e.jsx(V,{className:"bg-red-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-red-100 p-4 rounded-xl mb-3",children:e.jsx(ge,{className:"w-8 h-8 text-red-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-red-600",children:"فشل الإرسال"}),e.jsx("p",{className:"text-3xl font-bold text-red-900",children:Q.failed})]})}),e.jsx(V,{className:"bg-purple-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-purple-100 p-4 rounded-xl mb-3",children:e.jsx(Es,{className:"w-8 h-8 text-purple-600 mx-auto"})}),e.jsx("p",{className:"text-sm text-purple-600",children:"التكلفة الإجمالية"}),e.jsxs("p",{className:"text-3xl font-bold text-purple-900",children:[Q.totalCost.toFixed(2)," ₪"]})]})})]}),e.jsxs(V,{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"الاستخدام حسب القالب"}),e.jsx("div",{className:"space-y-3",children:P.sort((b,re)=>re.usageCount-b.usageCount).slice(0,5).map(b=>{const re=Q.totalSent>0?b.usageCount/Q.totalSent*100:0;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:`p-2 rounded-lg ${se(b.type)}`,children:tn.createElement(q(b.type),{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:b.name}),e.jsx("p",{className:"text-sm text-gray-600",children:me(b.category)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-gray-900",children:b.usageCount}),e.jsxs("p",{className:"text-sm text-gray-600",children:[re.toFixed(1),"%"]})]})]},b.id)})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(V,{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"معدلات الأداء"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-green-50 p-4 rounded-xl border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-green-700",children:"معدل التسليم"}),e.jsxs("span",{className:"text-2xl font-bold text-green-900",children:[Q.totalSent>0?(Q.delivered/Q.totalSent*100).toFixed(1):0,"%"]})]})}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"متوسط وقت التسليم"}),e.jsx("span",{className:"text-2xl font-bold text-blue-900",children:"2.3 ثانية"})]})}),e.jsx("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-purple-700",children:"متوسط التكلفة"}),e.jsxs("span",{className:"text-2xl font-bold text-purple-900",children:[Q.totalSent>0?(Q.totalCost/Q.totalSent).toFixed(3):0," ₪"]})]})})]})]}),e.jsxs(V,{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"التوزيع حسب النوع"}),e.jsx("div",{className:"space-y-3",children:I.map(b=>{const re=y.filter(Me=>Me.type===b.value).length,Z=Q.totalSent>0?re/Q.totalSent*100:0,pe=b.icon;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(pe,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:b.label})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-bold text-gray-900",children:re}),e.jsxs("span",{className:"text-sm text-gray-600 mr-2",children:["(",Z.toFixed(1),"%)"]})]})]},b.value)})})]})]})]}),u&&e.jsx(ls,{isOpen:u,onClose:()=>h(!1),title:x==="add-template"?"إضافة قالب رسالة جديد":x==="edit-template"?"تعديل قالب الرسالة":x==="view-template"?"عرض تفاصيل القالب":x==="test-template"?"اختبار القالب":"تفاصيل الرسالة",size:"lg",children:e.jsxs("div",{className:"p-6",children:[(x==="add-template"||x==="edit-template")&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(be,{label:"اسم القالب *",type:"text",value:C.name,onChange:b=>R({...C,name:b.target.value}),placeholder:"أدخل اسم القالب...",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع الرسالة *"}),e.jsx("select",{value:C.type,onChange:b=>R({...C,type:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:I.map(b=>e.jsx("option",{value:b.value,children:b.label},b.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الفئة *"}),e.jsx("select",{value:C.category,onChange:b=>R({...C,category:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:p.map(b=>e.jsx("option",{value:b.value,children:b.label},b.value))})]}),C.type==="email"&&e.jsx(be,{label:"موضوع الرسالة",type:"text",value:C.subject,onChange:b=>R({...C,subject:b.target.value}),placeholder:"أدخل موضوع البريد الإلكتروني..."})]}),e.jsxs("div",{children:[e.jsx(be,{label:"محتوى الرسالة *",type:"textarea",value:C.content,onChange:b=>R({...C,content:b.target.value}),placeholder:"أدخل محتوى الرسالة... استخدم {variable_name} للمتغيرات",rows:6,required:!0}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[e.jsx("p",{className:"font-medium mb-1",children:"المتغيرات المتاحة:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:["name","national_id","phone","address","package_name","tracking_number","delivery_time","failure_reason"].map(b=>e.jsx("button",{onClick:()=>{const re=C.content+`{${b}}`;R({...C,content:re})},className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs hover:bg-blue-200 transition-colors",children:b},b))})]})]}),C.content&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"المتغيرات المكتشفة:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:F(C.content).map(b=>e.jsx(Ne,{variant:"info",size:"sm",children:b},b))})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-end pt-4",children:[e.jsx(H,{variant:"secondary",onClick:()=>h(!1),children:"إلغاء"}),e.jsx(H,{variant:"primary",onClick:G,children:x==="add-template"?"إضافة القالب":"حفظ التغييرات"})]})]}),x==="view-template"&&w&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-xl",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"اسم القالب:"}),e.jsx("p",{className:"text-gray-900 mt-1",children:w.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"النوع:"}),e.jsx(Ne,{variant:"info",size:"sm",className:"mt-1",children:(he=I.find(b=>b.value===w.type))==null?void 0:he.label})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"الفئة:"}),e.jsx(Ne,{variant:"neutral",size:"sm",className:"mt-1",children:me(w.category)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"عدد مرات الاستخدام:"}),e.jsx("p",{className:"text-gray-900 mt-1",children:w.usageCount})]})]})}),w.subject&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"الموضوع:"}),e.jsx("p",{className:"text-gray-900 mt-1 bg-gray-50 p-3 rounded-lg",children:w.subject})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"المحتوى:"}),e.jsx("p",{className:"text-gray-900 mt-1 bg-gray-50 p-3 rounded-lg whitespace-pre-wrap",children:w.content})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"المتغيرات:"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:w.variables.map(b=>e.jsx(Ne,{variant:"info",size:"sm",children:b},b))})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-end pt-4",children:[e.jsx(H,{variant:"secondary",onClick:()=>h(!1),children:"إغلاق"}),e.jsx(H,{variant:"warning",onClick:()=>_(w),children:"اختبار القالب"}),e.jsx(H,{variant:"primary",onClick:()=>je(w),children:"تعديل القالب"})]})]}),x==="test-template"&&w&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-xl border border-yellow-200",children:[e.jsxs("h4",{className:"font-medium text-yellow-800 mb-2",children:["اختبار القالب: ",w.name]}),e.jsx("p",{className:"text-yellow-700 text-sm",children:"سيتم إرسال رسالة تجريبية باستخدام هذا القالب"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الهاتف التجريبي"}),e.jsx("input",{type:"tel",defaultValue:"0591234567",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل رقم الهاتف..."})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"معاينة الرسالة:"}),e.jsx("p",{className:"text-gray-700 bg-white p-3 rounded border text-sm whitespace-pre-wrap",children:w.content.replace("{name}","محمد التجريبي").replace("{national_id}","900123456").replace("{phone}","0591234567").replace("{package_name}","طرد مواد غذائية").replace("{tracking_number}","TRK-2024-001").replace("{delivery_time}","10:00 صباحاً").replace("{failure_reason}","عدم توفر المستفيد").replace("{days_delayed}","3").replace("{beneficiary_name}","محمد التجريبي")})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-end pt-4",children:[e.jsx(H,{variant:"secondary",onClick:()=>h(!1),children:"إلغاء"}),e.jsx(H,{variant:"warning",onClick:$,children:"إرسال تجريبي"})]})]}),x==="view-log"&&w&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"تفاصيل الرسالة"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"القالب:"}),e.jsx("p",{className:"text-gray-900 mt-1",children:w.templateName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"النوع:"}),e.jsx(Ne,{variant:"info",size:"sm",className:"mt-1",children:(Le=I.find(b=>b.value===w.type))==null?void 0:Le.label})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"المستلم:"}),e.jsx("p",{className:"text-gray-900 mt-1",children:w.recipientName}),e.jsx("p",{className:"text-gray-600 text-xs",children:w.recipient})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"الحالة:"}),e.jsx(Ne,{variant:w.status==="delivered"?"success":w.status==="failed"?"error":w.status==="sent"?"info":"warning",size:"sm",className:"mt-1",children:D(w.status)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"تاريخ الإرسال:"}),e.jsx("p",{className:"text-gray-900 mt-1",children:new Date(w.sentAt).toLocaleString("ar-SA")})]}),w.deliveredAt&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"تاريخ التسليم:"}),e.jsx("p",{className:"text-gray-900 mt-1",children:new Date(w.deliveredAt).toLocaleString("ar-SA")})]}),w.cost&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"التكلفة:"}),e.jsxs("p",{className:"text-gray-900 mt-1",children:[w.cost.toFixed(2)," ₪"]})]}),w.failureReason&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"سبب الفشل:"}),e.jsx("p",{className:"text-red-600 mt-1",children:w.failureReason})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(H,{variant:"primary",onClick:()=>h(!1),children:"إغلاق"})})]}),x==="test-template"&&w&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-xl border border-yellow-200",children:[e.jsxs("h4",{className:"font-medium text-yellow-800 mb-2",children:["اختبار القالب: ",w.name]}),e.jsx("p",{className:"text-yellow-700 text-sm",children:"سيتم إرسال رسالة تجريبية باستخدام هذا القالب"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الهاتف التجريبي"}),e.jsx("input",{type:"tel",defaultValue:"0591234567",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"أدخل رقم الهاتف..."})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"معاينة الرسالة:"}),e.jsx("p",{className:"text-gray-700 bg-white p-3 rounded border text-sm whitespace-pre-wrap",children:w.content.replace("{name}","محمد التجريبي").replace("{national_id}","900123456").replace("{phone}","0591234567").replace("{package_name}","طرد مواد غذائية").replace("{tracking_number}","TRK-2024-001").replace("{delivery_time}","10:00 صباحاً").replace("{failure_reason}","عدم توفر المستفيد").replace("{days_delayed}","3").replace("{beneficiary_name}","محمد التجريبي")})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-end pt-4",children:[e.jsx(H,{variant:"secondary",onClick:()=>h(!1),children:"إلغاء"}),e.jsx(H,{variant:"warning",onClick:$,children:"إرسال تجريبي"})]})]})]})}),e.jsx(V,{className:"bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[e.jsx($s,{className:"w-6 h-6 text-blue-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-3",children:"إرشادات إدارة الرسائل"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-2",children:[e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("span",{children:["استخدم المتغيرات مثل ","{name}"," لتخصيص الرسائل تلقائياً"]})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"اختبر القوالب قبل تفعيلها لضمان صحة المحتوى"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"راقب إحصائيات التسليم لتحسين فعالية الرسائل"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"استخدم أولويات مختلفة للرسائل حسب أهميتها"})]})]})]})]})})]})}function eN({activeTab:t,setActiveTab:s}){const{loggedInUser:r,logout:i}=li(),{alerts:o,criticalAlerts:c,unreadAlerts:u}=x0(),{logInfo:h,logError:x}=Bt();E.useState(""),E.useState(!1),E.useState("add"),E.useState(null);const[j,w]=E.useState(["beneficiaries","packages","organizations-families","distribution","reports-alerts","settings","development"]),[T,S]=E.useState(null),[N,P]=E.useState([]),[g,M]=E.useState(Xr()),[v,y]=E.useState(!1),[k,C]=E.useState(null);E.useEffect(()=>{M(Xr()),h("تم تحميل البيانات الوهمية بنجاح","AdminDashboard")},[h]);const R=_=>{S(_),s("individual-send")},O=_=>{P(_),s("bulk-tasks")},p=[{id:"overview",name:"نظرة عامة",icon:gt},{id:"beneficiaries",name:"إدارة المستفيدين",icon:Te,children:[{id:"beneficiaries-list",name:"قائمة المستفيدين",icon:Te},{id:"status-management",name:"إدارة الحالات",icon:El},{id:"delayed",name:"المتأخرين",icon:$e},{id:"activity-log",name:"سجل النشاط",icon:Qe}]},{id:"packages",name:"إدارة الإرسالات",icon:Ee,children:[{id:"packages-list",name:"قوالب الطرود",icon:Ee},{id:"bulk-tasks",name:"المهام الجماعية",icon:Yn},{id:"tracking",name:"تتبع الإرسالات",icon:St},{id:"distribution-reports",name:"تقارير التوزيع",icon:gt}]},{id:"organizations-families",name:"إدارة الشركاء",icon:ot,children:[{id:"organizations",name:"إدارة المؤسسات",icon:ot},{id:"families",name:"إدارة العائلات",icon:yt}]},{id:"distribution",name:"إدارة التوزيع",icon:St,children:[{id:"couriers",name:"إدارة المندوبين",icon:St},{id:"tasks",name:"إدارة المهام",icon:$e}]},{id:"reports-alerts",name:"التقارير والتنبيهات",icon:gt,children:[{id:"reports",name:"التقارير الشاملة",icon:gt},{id:"alerts",name:"التنبيهات",icon:ts}]},{id:"settings",name:"الإعدادات",icon:gs,children:[{id:"permissions",name:"إدارة الصلاحيات",icon:Ye},{id:"messages",name:"إعدادات الرسائل",icon:$s},{id:"system",name:"إعدادات النظام",icon:gs},{id:"backup",name:"النسخ الاحتياطي",icon:$t},{id:"audit",name:"سجل المراجعة",icon:Qe}]},{id:"development",name:"أدوات التطوير",icon:gs,children:[{id:"test-supabase",name:"اختبار Supabase",icon:$t}]}],I=[{id:"permissions",name:"إدارة الصلاحيات",icon:Ye,description:"إدارة أدوار المستخدمين وصلاحياتهم"},{id:"messages",name:"إعدادات الرسائل",icon:$s,description:"إدارة قوالب الرسائل والتنبيهات"},{id:"system",name:"إعدادات النظام",icon:gs,description:"الإعدادات العامة للنظام"},{id:"backup",name:"النسخ الاحتياطي",icon:$t,description:"إدارة النسخ الاحتياطية للبيانات"},{id:"audit",name:"سجل المراجعة",icon:Qe,description:"سجل جميع العمليات في النظام"}];tn.useEffect(()=>{h("تم تحميل لوحة التحكم الرئيسية","AdminDashboard")},[]),tn.useEffect(()=>{const G=(ie=>{for(const $ of p)if($.children){for(const F of $.children)if(F.id===ie)return $.id}return null})(t);G&&!j.includes(G)&&w(ie=>[...ie,G])},[t]);const W=_=>{w(G=>G.includes(_)?G.filter(ie=>ie!==_):[...G,_])},z=_=>_.id===t?!0:_.children?_.children.some(G=>G.id===t):!1,Q=()=>{const _={date:new Date().toISOString(),stats:g,beneficiaries:Se.length,packages:is.length,alerts:u.length},G=JSON.stringify(_,null,2),ie=new Blob([G],{type:"application/json"}),$=URL.createObjectURL(ie),F=document.createElement("a");F.href=$,F.download=`تقرير_النظام_${new Date().toISOString().split("T")[0]}.json`,F.click(),URL.revokeObjectURL($),alert("تم تصدير تقرير النظام بنجاح")},de=_=>{for(const G of p){if(G.id===_)return{name:G.name,icon:G.icon,description:""};if(G.children){for(const ie of G.children)if(ie.id===_)return{name:ie.name,icon:ie.icon,description:je(ie.id)}}}return{name:"غير محدد",icon:Ut,description:""}},je=_=>({overview:"نظرة شاملة على النظام والأنشطة","beneficiaries-list":"إدارة جميع المستفيدين المسجلين في النظام","bulk-tasks":"إنشاء مهام توزيع جماعية للمستفيدين المحددين","status-management":"تصنيف وإدارة حالات الأهلية للمستفيدين",delayed:"المستفيدين الذين لم يستلموا طرودهم في الوقت المحدد","activity-log":"سجل جميع الأنشطة والعمليات في النظام","packages-list":"إنشاء وإدارة قوالب الطرود وعمليات التوزيع",tracking:"تتبع حالة الطرود والإرسالات","distribution-reports":"تقارير مفصلة عن عمليات التوزيع ومتابعة دفعات التوزيع",organizations:"إدارة المؤسسات الخيرية والإنسانية",families:"إدارة العائلات والمبادرين الفرديين",couriers:"إدارة المندوبين ومتابعة أدائهم",tasks:"إدارة مهام التوزيع والمتابعة",reports:"تقارير شاملة وإحصائيات مفصلة",alerts:"التنبيهات والإشعارات المهمة",permissions:"إدارة أدوار المستخدمين وصلاحياتهم",messages:"إدارة قوالب الرسائل والتنبيهات",system:"الإعدادات العامة للنظام",backup:"إدارة النسخ الاحتياطية للبيانات",audit:"سجل جميع العمليات في النظام"})[_]||"",Y=()=>{const _=de(t),G=_.icon;return t==="permissions"?e.jsx(cj,{}):t==="beneficiaries-list"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:_.description})]})]}),e.jsx(hj,{onNavigateToIndividualSend:R,onNavigateToTasks:O})]}):t==="bulk-tasks"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:_.description})]})]}),e.jsx(xj,{preselectedBeneficiaryIds:N,onNavigateBack:()=>{s("beneficiaries-list"),P([])}})]}):t==="status-management"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:_.description})]})]}),e.jsx(pj,{onNavigateToIndividualSend:R})]}):t==="delayed"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:_.description})]})]}),e.jsx(fj,{})]}):t==="activity-log"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:_.description})]})]}),e.jsx(gj,{})]}):t==="packages-list"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:_.description})]})]}),e.jsx(yj,{},`packages-${Date.now()}`)]}):t==="tracking"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:_.description})]})]}),e.jsx(Fj,{})]}):t==="distribution-reports"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:_.description})]})]}),e.jsx($j,{})]}):t==="organizations"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:_.description})]})]}),e.jsx(Hj,{highlightOrganizationId:(r==null?void 0:r.associatedType)==="organization"?r.associatedId:void 0})]}):t==="tasks"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:_.description})]})]}),e.jsx(Gj,{})]}):t==="families"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:_.description})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-gray-100 rounded-2xl p-12 mb-6",children:e.jsx("div",{className:"text-gray-400 text-center",children:e.jsx(yt,{className:"w-20 h-20 mx-auto mb-4"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"إدارة العائلات"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"هذا القسم قيد التطوير - سيتم إضافة التفاصيل الكاملة قريباً"}),e.jsx("button",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-8 py-4 rounded-xl font-medium hover:from-blue-700 hover:to-blue-800 transition-all duration-200 transform hover:scale-105 shadow-lg",children:"ابدأ التطوير"})]})})]}):t==="test-supabase"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:"اختبار الاتصال وجلب البيانات من Supabase"})]})]}),e.jsx(qj,{})]}):t==="overview"?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:_.description})]})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[e.jsxs("button",{onClick:Q,className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx(st,{className:"w-4 h-4 ml-2"}),"تصدير التقرير"]}),e.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-700 transition-colors",children:"تحديث البيانات"})]})]}),c.length>0&&e.jsxs(V,{className:"bg-red-50 border-red-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[e.jsx(ge,{className:"w-5 h-5 text-red-600"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800",children:"تنبيهات حرجة تحتاج إجراء فوري"})]}),e.jsx("div",{className:"space-y-3",children:c.slice(0,3).map(ie=>e.jsxs(V,{className:"bg-white border-red-200",padding:"sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:ie.title}),e.jsx("p",{className:"text-sm text-gray-600",children:ie.description})]}),e.jsx(H,{variant:"danger",size:"sm",children:"اتخاذ إجراء"})]},ie.id))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:v?e.jsx(V,{className:"col-span-4",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(jt,{className:"w-8 h-8 animate-spin text-blue-600 ml-3"}),e.jsx("span",{className:"text-gray-600",children:"جاري تحميل الإحصائيات من Supabase..."})]})}):k?e.jsx(V,{className:"bg-red-50 border-red-200 col-span-4",padding:"sm",children:e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx(ge,{className:"w-5 h-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-red-800 font-medium",children:"خطأ في تحميل الإحصائيات"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:k})]})]})}):g?e.jsxs(e.Fragment,{children:[e.jsx(vs,{title:"إجمالي المستفيدين",value:(g==null?void 0:g.totalBeneficiaries)||0,icon:Te,trend:{value:`${(g==null?void 0:g.verifiedBeneficiaries)||0} موثق`,direction:"up",label:""},color:"blue"}),e.jsx(vs,{title:"الطرود النشطة",value:(g==null?void 0:g.totalPackages)||0,icon:Ee,trend:{value:`${(g==null?void 0:g.deliveredPackages)||0} تم التسليم`,direction:"up",label:""},color:"green"}),e.jsx(vs,{title:"المهام النشطة",value:(g==null?void 0:g.activeTasks)||0,icon:St,trend:{value:`${(g==null?void 0:g.criticalAlerts)||0} حرجة`,direction:"down",label:""},color:"orange"}),e.jsx(vs,{title:"نسبة التسليم",value:`${(g==null?void 0:g.deliveryRate)||0}%`,icon:gt,trend:{value:"من إجمالي الطرود",direction:"up",label:""},color:"purple"})]}):e.jsx(V,{className:"bg-gray-50 col-span-4",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(gt,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"لا توجد إحصائيات متاحة"}),e.jsx("p",{className:"text-sm mt-1",children:"تأكد من الاتصال بـ Supabase"})]})})}),e.jsx(V,{className:"bg-blue-50 border-blue-200",padding:"sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx(ne,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-800 font-medium",children:"النظام يعمل بالبيانات الوهمية"}),e.jsx("p",{className:"text-blue-600 text-sm mt-1",children:"يتم عرض البيانات الوهمية حالياً"})]})]})}),e.jsx(H,{variant:"primary",size:"sm",onClick:()=>window.location.reload(),children:"تحديث البيانات"})]})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs(V,{hover:!0,onClick:()=>s("beneficiaries-list"),children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-50 rounded-lg flex items-center justify-center",children:e.jsx(Ms,{className:"w-4 h-4 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"إدارة المستفيدين"})]}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:"إضافة وإدارة المستفيدين الجدد"}),e.jsxs("div",{className:"flex items-center text-blue-600 text-sm font-medium",children:[e.jsx("span",{children:"إدارة المستفيدين"}),e.jsx(vr,{className:"w-4 h-4 mr-1"})]})]}),e.jsxs(V,{hover:!0,onClick:()=>s("packages-list"),children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-green-50 rounded-lg flex items-center justify-center",children:e.jsx(Ee,{className:"w-4 h-4 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"إدارة الطرود"})]}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:"إنشاء وتوزيع الطرود"}),e.jsxs("div",{className:"flex items-center text-green-600 text-sm font-medium",children:[e.jsx("span",{children:"إدارة الطرود"}),e.jsx(vr,{className:"w-4 h-4 mr-1"})]})]}),e.jsxs(V,{hover:!0,onClick:()=>s("reports"),children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-50 rounded-lg flex items-center justify-center",children:e.jsx(gt,{className:"w-4 h-4 text-purple-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"التقارير والإحصائيات"})]}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:"عرض التقارير المفصلة"}),e.jsxs("div",{className:"flex items-center text-purple-600 text-sm font-medium",children:[e.jsx("span",{children:"عرض التقارير"}),e.jsx(vr,{className:"w-4 h-4 mr-1"})]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(V,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"آخر الأنشطة"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse p-3 rounded-lg bg-green-50 border border-green-200",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(ne,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"تم تسليم 15 طرد في منطقة خان يونس"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"منذ 5 دقائق"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse p-3 rounded-lg bg-blue-50 border border-blue-200",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Ms,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"إضافة 8 مستفيدين جدد للنظام"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"منذ 15 دقيقة"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse p-3 rounded-lg bg-orange-50 border border-orange-200",children:[e.jsx("div",{className:"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(ge,{className:"w-4 h-4 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"تحديث عناوين 3 مستفيدين"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"منذ 30 دقيقة"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse p-3 rounded-lg bg-purple-50 border border-purple-200",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(ot,{className:"w-4 h-4 text-purple-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"تسجيل مؤسسة جديدة: جمعية الخير"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"منذ ساعة"})]})]})]}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>s("alerts"),className:"w-full mt-4",children:"عرض جميع الأنشطة"})]}),e.jsxs(V,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"خريطة النظام"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg h-64 flex items-center justify-center relative",children:[e.jsxs("div",{className:"text-center z-10",children:[e.jsx(At,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"قطاع غزة - نظرة شاملة"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[(g==null?void 0:g.totalBeneficiaries)||0," مستفيد في 5 محافظات"]})]}),e.jsx("div",{className:"absolute top-12 left-16 w-2 h-2 bg-green-500 rounded-full"}),e.jsx("div",{className:"absolute top-20 right-20 w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("div",{className:"absolute bottom-16 left-24 w-2 h-2 bg-orange-500 rounded-full"}),e.jsx("div",{className:"absolute bottom-24 right-16 w-2 h-2 bg-purple-500 rounded-full"})]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(V,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"المؤسسات النشطة"}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>s("organizations"),children:"عرض الكل"})]}),e.jsx("div",{className:"space-y-4",children:Ht.slice(0,3).map(ie=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:ie.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[ie.beneficiariesCount," مستفيد"]})]}),e.jsx(Ne,{variant:ie.status==="active"?"success":"warning",size:"sm",children:ie.status==="active"?"نشطة":"معلقة"})]},ie.id))})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"العائلات النشطة"}),e.jsx(H,{variant:"ghost",size:"sm",onClick:()=>s("families"),children:"عرض الكل"})]}),e.jsx("div",{className:"space-y-4",children:Sn.map(ie=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:ie.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[ie.membersCount," فرد"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-purple-600",children:[ie.completionRate,"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"نسبة الإنجاز"})]})]},ie.id))})]})]})]}):t==="reports"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:_.description})]})]}),e.jsx(Kj,{})]}):t==="alerts"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:_.description})]})]}),e.jsx(Xj,{})]}):t==="messages"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:_.description})]})]}),e.jsx(Jj,{})]}):t==="settings"?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:_.description})]})]})}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:I.map(ie=>{const $=ie.icon;return e.jsxs(V,{hover:!0,onClick:()=>s(ie.id),children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-50 rounded-lg flex items-center justify-center",children:e.jsx($,{className:"w-4 h-4 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:ie.name})]}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:ie.description}),e.jsxs("div",{className:"flex items-center text-blue-600 text-sm font-medium",children:[e.jsx("span",{children:"فتح الإعدادات"}),e.jsx(vr,{className:"w-4 h-4 mr-1"})]})]},ie.id)})})]}):t==="system"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:_.description})]})]}),e.jsx(Qj,{})]}):t==="backup"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center",children:e.jsx(G,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:_.description})]})]}),e.jsx(Yj,{})]}):e.jsx(V,{className:"p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse mb-8",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-50 rounded-lg flex items-center justify-center",children:e.jsx(G,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:_.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:_.description})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-12 mb-6",children:e.jsx("div",{className:"text-gray-400 text-center",children:e.jsx(G,{className:"w-12 h-12 mx-auto mb-4"})})}),e.jsx("p",{className:"text-gray-600 mb-6",children:"هذا القسم قيد التطوير - سيتم إضافة التفاصيل الكاملة قريباً"}),e.jsx(H,{variant:"primary",children:"ابدأ التطوير"})]})})};return e.jsxs("div",{className:"min-h-screen bg-gray-50/30 flex",dir:"rtl",children:[e.jsxs("div",{className:"w-64 bg-white border-l border-gray-200 flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-50 rounded-lg flex items-center justify-center",children:e.jsx(Ye,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"لوحة الإدارة"}),e.jsx("p",{className:"text-sm text-gray-500",children:r==null?void 0:r.name})]})]})}),e.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:p.map((_,G)=>{const ie=_.icon,$=z(_),F=j.includes(_.id);return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>{_.children?W(_.id):s(_.id)},className:`w-full flex items-center justify-between px-4 py-4 rounded-lg text-base font-semibold transition-all duration-200 ${G>0?"mt-4":""} ${$?"bg-blue-50 text-blue-700 border-l-2 border-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx(ie,{className:`w-4 h-4 ml-2 ${$?"text-blue-600":""}`}),e.jsx("span",{children:_.name})]}),_.children&&e.jsx("div",{className:`transition-transform duration-200 ${F?"rotate-90":""}`,children:e.jsx(vr,{className:"w-4 h-4"})})]}),_.children&&F&&e.jsx("div",{className:"mt-1 mr-4 space-y-1",children:_.children.map(q=>{const se=q.icon,D=t===q.id;return e.jsxs("button",{onClick:()=>s(q.id),className:`w-full flex items-center space-x-3 space-x-reverse px-4 py-2 rounded-lg text-sm transition-all duration-200 ${D?"bg-blue-50 text-blue-700 font-medium border-l-2 border-blue-500":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx(se,{className:`w-4 h-4 ${D?"text-blue-600":""}`}),e.jsx("span",{children:q.name})]},q.id)})})]},_.id)})}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Ye,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:r==null?void 0:r.name}),e.jsx("p",{className:"text-xs text-gray-500",children:"مدير النظام"})]})]}),e.jsx("button",{onClick:i,className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"تسجيل الخروج",children:e.jsx(Ny,{className:"w-4 h-4"})})]})})})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:e.jsx("main",{className:"flex-1 p-6",children:e.jsx(Hn,{children:Y()})})})]})}function tN({onNavigateBack:t}){const{loggedInUser:s,logout:r}=li(),[i,o]=E.useState("overview"),[c,u]=E.useState(""),[h,x]=E.useState(!1),[j,w]=E.useState("add"),[T,S]=E.useState(null),N=s.associatedId&&Ht.find(C=>C.id===s.associatedId)||Ht[0],P=N?ej(N.id):[];N&&is.filter(C=>C.organizationId===N.id);const g=N?at.filter(C=>{const R=is.find(O=>O.id===C.packageId);return(R==null?void 0:R.organizationId)===N.id}):[],M=[{id:"overview",name:"نظرة عامة",icon:gt},{id:"beneficiaries",name:"المستفيدين",icon:Te},{id:"packages",name:"الطرود",icon:Ee},{id:"tasks",name:"المهام",icon:St},{id:"reports",name:"التقارير",icon:Ut}],v=C=>{w("add"),S(null),x(!0)},y=C=>{w("edit"),S(C),x(!0)},k=C=>{w("view"),S(C),x(!0)};return P.filter(C=>C.name.toLowerCase().includes(c.toLowerCase())||C.nationalId.includes(c)),e.jsxs("div",{className:"min-h-screen bg-gray-50/30 flex",dir:"rtl",children:[e.jsxs("div",{className:"w-64 bg-white flex flex-col border-l border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(ot,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"لوحة المؤسسة"}),e.jsx("p",{className:"text-sm text-gray-500",children:N==null?void 0:N.name})]})]})}),e.jsx("nav",{className:"flex-1 p-4",children:e.jsx("ul",{className:"space-y-1",children:M.map(C=>{const R=C.icon,O=i===C.id;return e.jsx("li",{children:e.jsxs("button",{onClick:()=>o(C.id),className:`w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-lg text-sm font-medium transition-colors ${O?"bg-green-50 text-green-700 border-l-2 border-green-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx(R,{className:`w-4 h-4 ${O?"text-green-600":""}`}),e.jsx("span",{children:C.name})]})},C.id)})})}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("div",{className:"text-sm font-medium text-green-800 mb-2",children:"معلومات المؤسسة"}),N?e.jsxs("div",{className:"space-y-1 text-xs text-green-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"المستفيدين:"}),e.jsx("span",{className:"font-medium",children:N.beneficiariesCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"الطرود:"}),e.jsx("span",{className:"font-medium",children:N.packagesCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"نسبة الإنجاز:"}),e.jsxs("span",{className:"font-medium",children:[N.completionRate,"%"]})]})]}):e.jsx("div",{className:"text-xs text-green-700 text-center",children:e.jsx("p",{children:"لا توجد بيانات متاحة"})})]})})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"p-6",children:[i==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["نظرة عامة - ",N==null?void 0:N.name]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"إدارة المستفيدين والطرود"})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[e.jsx(H,{variant:"secondary",icon:st,iconPosition:"right",children:"تصدير"}),e.jsx(H,{variant:"success",icon:jt,iconPosition:"right",children:"تحديث"})]})]}),N&&e.jsx(V,{children:e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(ot,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:["مرحباً بمؤسسة ",N.name]}),e.jsx("p",{className:"text-gray-600",children:"نشكرك على جهودك في دعم المحتاجين في غزة"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(vs,{title:"المستفيدين",value:(N==null?void 0:N.beneficiariesCount)||0,icon:Te,trend:{value:"+12 هذا الشهر",direction:"up",label:""},color:"blue"}),e.jsx(vs,{title:"الطرود",value:(N==null?void 0:N.packagesCount)||0,icon:Ee,trend:{value:"+5 اليوم",direction:"up",label:""},color:"green"}),e.jsx(vs,{title:"نسبة الإنجاز",value:`${(N==null?void 0:N.completionRate)||0}%`,icon:gt,trend:{value:"ممتاز",direction:"up",label:""},color:"purple"}),e.jsx(vs,{title:"المهام النشطة",value:g.length,icon:St,trend:{value:"تحتاج متابعة",direction:"down",label:""},color:"orange"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs(V,{hover:!0,children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-50 rounded-lg flex items-center justify-center",children:e.jsx(Ms,{className:"w-4 h-4 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"إضافة مستفيد"})]}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:"أضف مستفيد جديد للمؤسسة"}),e.jsx(H,{variant:"primary",size:"sm",onClick:()=>v(),className:"w-full",children:"إضافة مستفيد"})]}),e.jsxs(V,{hover:!0,children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse mb-4",children:[e.jsx("div",{className:"w-6 h-6 bg-green-50 rounded-lg flex items-center justify-center",children:e.jsx(Ee,{className:"w-4 h-4 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"إنشاء طرد"})]}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:"إنشاء طرد جديد للتوزيع"}),e.jsx(H,{variant:"success",size:"sm",onClick:()=>v(),className:"w-full",children:"إنشاء طرد"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(V,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"آخر الأنشطة"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("div",{className:"w-5 h-5 bg-green-100 rounded-full flex items-center justify-center mt-0.5",children:e.jsx(ne,{className:"w-3 h-3 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"تم تسليم طرد مواد غذائية"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"منذ 5 دقائق"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"w-5 h-5 bg-blue-100 rounded-full flex items-center justify-center mt-0.5",children:e.jsx(Ms,{className:"w-3 h-3 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"إضافة مستفيد جديد"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"منذ 15 دقيقة"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse p-3 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx("div",{className:"w-5 h-5 bg-orange-100 rounded-full flex items-center justify-center mt-0.5",children:e.jsx(ge,{className:"w-3 h-3 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"تحديث عنوان مستفيد"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"منذ 30 دقيقة"})]})]})]}),e.jsx(H,{variant:"ghost",size:"sm",className:"w-full mt-4",children:"عرض جميع الأنشطة"})]}),e.jsxs(V,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"خريطة التوزيع"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg h-64 flex items-center justify-center relative",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(At,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"مناطق التوزيع"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[P.length," مستفيد"]})]}),e.jsx("div",{className:"absolute top-12 left-16 w-2 h-2 bg-green-500 rounded-full"}),e.jsx("div",{className:"absolute top-20 right-20 w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("div",{className:"absolute bottom-16 left-24 w-2 h-2 bg-orange-500 rounded-full"}),e.jsx("div",{className:"absolute bottom-24 right-16 w-2 h-2 bg-purple-500 rounded-full"})]})]})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"التنبيهات"}),e.jsx(Ne,{variant:"warning",children:"2 تنبيه"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx(ge,{className:"w-4 h-4 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"طرد متأخر"}),e.jsx("p",{className:"text-xs text-gray-600",children:"لم يتم استلامه"})]})]}),e.jsx(H,{variant:"warning",size:"sm",children:"متابعة"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx(Ee,{className:"w-4 h-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"طرد جاهز"}),e.jsx("p",{className:"text-xs text-gray-600",children:"جاهز للإرسال"})]})]}),e.jsx(H,{variant:"primary",size:"sm",children:"إرسال"})]})]})]})]}),i==="beneficiaries"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"مستفيدي المؤسسة"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["إدارة مستفيدي ",N==null?void 0:N.name]})]}),e.jsx(H,{variant:"primary",icon:Lt,iconPosition:"right",onClick:()=>v(),children:"إضافة مستفيد"})]}),e.jsx(V,{padding:"sm",children:e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx(be,{type:"text",icon:Tt,iconPosition:"right",placeholder:"البحث في المستفيدين...",value:c,onChange:C=>u(C.target.value),className:"flex-1"}),e.jsx(H,{variant:"secondary",icon:Ln,iconPosition:"right",size:"sm",children:"فلترة"})]})}),N?e.jsx(V,{padding:"none",className:"overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المستفيد"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"رقم الهوية"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الهاتف"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"آخر استلام"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:P.length>0?P.map(C=>{var R;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-50 rounded-lg flex items-center justify-center ml-3",children:e.jsx(Te,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.name}),e.jsx("div",{className:"text-xs text-gray-500",children:(R=C.detailedAddress)==null?void 0:R.city})]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:C.nationalId}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:C.phone}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:new Date(C.lastReceived).toLocaleDateString("en-CA")}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(Ne,{variant:C.status==="active"?"success":C.status==="pending"?"warning":"error",size:"sm",children:C.status==="active"?"نشط":C.status==="pending"?"معلق":"متوقف"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex space-x-1 space-x-reverse",children:[e.jsx("button",{onClick:()=>k(C),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"عرض",children:e.jsx(vt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>y(C),className:"p-1.5 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"تعديل",children:e.jsx(Jt,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1.5 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"اتصال",children:e.jsx(qr,{className:"w-4 h-4"})})]})})]},C.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(Te,{className:"w-8 h-8 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"font-medium",children:"لا توجد مستفيدين"}),e.jsx("p",{className:"text-sm mt-1",children:"لم يتم إضافة أي مستفيدين لهذه المؤسسة بعد"})]})})})})]})})}):e.jsx(V,{className:"bg-gray-50 p-12",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(ot,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"لا توجد مؤسسة محددة"}),e.jsx("p",{className:"text-sm mt-2",children:"يرجى تحديد مؤسسة لعرض المستفيدين"})]})})]}),["packages","tasks","reports"].includes(i)&&e.jsx(V,{className:"p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:[i==="packages"&&e.jsx(Ee,{className:"w-8 h-8 text-gray-400"}),i==="tasks"&&e.jsx(St,{className:"w-8 h-8 text-gray-400"}),i==="reports"&&e.jsx(Ut,{className:"w-8 h-8 text-gray-400"})]}),e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:["قسم ",i==="packages"?"الطرود":i==="tasks"?"المهام":i==="reports"?"التقارير":""]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"هذا القسم قيد التطوير"}),e.jsx(H,{variant:"success",children:"ابدأ التطوير"})]})})]})})]})}function sN({familyId:t,member:s,onSave:r,onCancel:i}){const{logError:o,logInfo:c}=Bt(),[u,h]=E.useState({name:"",fullName:"",nationalId:"",dateOfBirth:"",gender:"male",phone:"",relationToFamily:"",profession:"",maritalStatus:"single",economicLevel:"poor",membersCount:1,notes:""}),[x,j]=E.useState({}),[w,T]=E.useState(!1),[S,N]=E.useState(null),P=!!s,g=Sn.find(p=>p.id===t);E.useEffect(()=>{s&&h({name:s.name||"",fullName:s.fullName||"",nationalId:s.nationalId||"",dateOfBirth:s.dateOfBirth||"",gender:s.gender||"male",phone:s.phone||"",relationToFamily:s.relationToFamily||"",profession:s.profession||"",maritalStatus:s.maritalStatus||"single",economicLevel:s.economicLevel||"poor",membersCount:s.membersCount||1,notes:s.notes||""})},[s]);const M=[{value:"رب الأسرة",label:"رب الأسرة"},{value:"الزوجة",label:"الزوجة"},{value:"الابن",label:"الابن"},{value:"الابنة",label:"الابنة"},{value:"الأخ",label:"الأخ"},{value:"الأخت",label:"الأخت"},{value:"الوالد",label:"الوالد"},{value:"الوالدة",label:"الوالدة"},{value:"الجد",label:"الجد"},{value:"الجدة",label:"الجدة"},{value:"العم",label:"العم"},{value:"العمة",label:"العمة"},{value:"الخال",label:"الخال"},{value:"الخالة",label:"الخالة"},{value:"قريب آخر",label:"قريب آخر"}],v=[{value:"single",label:"أعزب"},{value:"married",label:"متزوج"},{value:"divorced",label:"مطلق"},{value:"widowed",label:"أرمل"}],y=[{value:"very_poor",label:"فقير جداً"},{value:"poor",label:"فقير"},{value:"moderate",label:"متوسط"},{value:"good",label:"ميسور"}],k=(p,I)=>{h(W=>({...W,[p]:I})),x[p]&&j(W=>({...W,[p]:""}))},C=()=>{const p={};return u.name.trim()||(p.name="الاسم مطلوب"),u.fullName.trim()||(p.fullName="الاسم الكامل مطلوب"),u.nationalId.trim()?/^\d{9}$/.test(u.nationalId)||(p.nationalId="رقم الهوية يجب أن يكون 9 أرقام"):p.nationalId="رقم الهوية مطلوب",u.dateOfBirth||(p.dateOfBirth="تاريخ الميلاد مطلوب"),u.phone.trim()?/^05\d{8}$/.test(u.phone)||(p.phone="رقم الهاتف يجب أن يبدأ بـ 05 ويتكون من 10 أرقام"):p.phone="رقم الهاتف مطلوب",u.relationToFamily.trim()||(p.relationToFamily="صلة القرابة مطلوبة"),u.profession.trim()||(p.profession="المهنة مطلوبة"),u.membersCount<1&&(p.membersCount="عدد أفراد الأسرة يجب أن يكون 1 على الأقل"),j(p),Object.keys(p).length===0},R=async p=>{if(p.preventDefault(),!C()){o(new Error("فشل في التحقق من صحة البيانات"),"FamilyMemberForm");return}T(!0),N(null);try{await new Promise(W=>setTimeout(W,1e3));const I={name:u.name.trim(),fullName:u.fullName.trim(),nationalId:u.nationalId.trim(),dateOfBirth:u.dateOfBirth,gender:u.gender,phone:u.phone.trim(),familyId:t,relationToFamily:u.relationToFamily,profession:u.profession.trim(),maritalStatus:u.maritalStatus,economicLevel:u.economicLevel,membersCount:u.membersCount,notes:u.notes.trim(),address:(g==null?void 0:g.location)||"غير محدد",detailedAddress:{governorate:(g==null?void 0:g.location.split(" - ")[0])||"غير محدد",city:(g==null?void 0:g.location.split(" - ")[1])||"غير محدد",district:(g==null?void 0:g.location.split(" - ")[2])||"غير محدد",street:"",additionalInfo:""},location:{lat:31.3469,lng:34.3029},identityStatus:"pending",status:"active",eligibilityStatus:"under_review",lastReceived:new Date().toISOString().split("T")[0],totalPackages:0,additionalDocuments:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"family_admin",updatedBy:"family_admin"};r(I),c(P&&s?`محاكاة تحديث بيانات فرد العائلة: ${u.name}`:`محاكاة إضافة فرد جديد للعائلة: ${u.name}`,"FamilyMemberForm")}catch(I){const W=I instanceof Error?I.message:"خطأ غير معروف";N(W),o(new Error(W),"FamilyMemberForm")}finally{T(!1)}},O=w;return e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("form",{onSubmit:R,className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-purple-100 p-4 rounded-xl w-fit mx-auto mb-4",children:e.jsx(Ms,{className:"w-6 h-6 text-purple-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:P?"تعديل بيانات فرد العائلة":"إضافة فرد جديد للعائلة"}),e.jsx("p",{className:"text-gray-600 mt-2",children:g?`إضافة فرد جديد لـ ${g.name}`:"إضافة فرد جديد للعائلة"})]}),S&&e.jsxs(V,{className:"bg-red-50 border-red-200",padding:"sm",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(ge,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-medium text-red-800",children:"خطأ في حفظ البيانات:"})]}),e.jsx("p",{className:"text-red-700 mt-2 text-sm",children:S})]}),g&&e.jsx(V,{className:"bg-purple-50 border-purple-200",children:e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx(yt,{className:"w-5 h-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-purple-800",children:"معلومات العائلة"}),e.jsxs("p",{className:"text-purple-700 text-sm",children:[g.name," - رب الأسرة: ",g.headOfFamily," - الموقع: ",g.location]})]})]})}),e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(Gr,{className:"w-4 h-4 ml-2 text-blue-600"}),"المعلومات الشخصية"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(be,{label:"الاسم الأول *",type:"text",value:u.name,onChange:p=>k("name",p.target.value),placeholder:"مثال: محمد",error:x.name,required:!0}),e.jsx(be,{label:"الاسم الكامل *",type:"text",value:u.fullName,onChange:p=>k("fullName",p.target.value),placeholder:"مثال: محمد أحمد عبدالله الغزاوي",error:x.fullName,required:!0}),e.jsx(be,{label:"رقم الهوية الوطنية *",type:"text",value:u.nationalId,onChange:p=>k("nationalId",p.target.value),placeholder:"مثال: 900123456",error:x.nationalId,required:!0}),e.jsx(be,{label:"تاريخ الميلاد *",type:"date",value:u.dateOfBirth,onChange:p=>k("dateOfBirth",p.target.value),error:x.dateOfBirth,required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الجنس *"}),e.jsxs("select",{value:u.gender,onChange:p=>k("gender",p.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"male",children:"ذكر"}),e.jsx("option",{value:"female",children:"أنثى"})]})]}),e.jsx(be,{label:"رقم الهاتف *",type:"tel",value:u.phone,onChange:p=>k("phone",p.target.value),placeholder:"مثال: 0591234567",error:x.phone,required:!0})]})]}),e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(yt,{className:"w-4 h-4 ml-2 text-purple-600"}),"العلاقة العائلية"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صلة القرابة *"}),e.jsxs("select",{value:u.relationToFamily,onChange:p=>k("relationToFamily",p.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"اختر صلة القرابة"}),M.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))]}),x.relationToFamily&&e.jsxs("p",{className:"text-red-600 text-sm mt-1 flex items-center",children:[e.jsx(ge,{className:"w-4 h-4 ml-1"}),x.relationToFamily]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"عدد الأفراد المعالين"}),e.jsx("input",{type:"number",value:u.membersCount,onChange:p=>k("membersCount",parseInt(p.target.value)||1),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",min:"1",max:"20"}),x.membersCount&&e.jsxs("p",{className:"text-red-600 text-sm mt-1 flex items-center",children:[e.jsx(ge,{className:"w-4 h-4 ml-1"}),x.membersCount]})]})]})]}),e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(fy,{className:"w-4 h-4 ml-2 text-green-600"}),"المعلومات الاجتماعية والاقتصادية"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(be,{label:"المهنة *",type:"text",value:u.profession,onChange:p=>k("profession",p.target.value),placeholder:"مثال: عامل بناء",error:x.profession,required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحالة الاجتماعية *"}),e.jsx("select",{value:u.maritalStatus,onChange:p=>k("maritalStatus",p.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:v.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المستوى الاقتصادي *"}),e.jsx("select",{value:u.economicLevel,onChange:p=>k("economicLevel",p.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:y.map(p=>e.jsx("option",{value:p.value,children:p.label},p.value))})]})]})]}),e.jsxs(V,{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center",children:[e.jsx(Ut,{className:"w-4 h-4 ml-2 text-yellow-600"}),"ملاحظات إضافية"]}),e.jsx(be,{type:"textarea",label:"ملاحظات خاصة",value:u.notes,onChange:p=>k("notes",p.target.value),rows:4,placeholder:"أي ملاحظات خاصة بفرد العائلة..."})]}),e.jsx(V,{className:"bg-gray-50",children:e.jsxs("div",{className:"flex space-x-4 space-x-reverse justify-end",children:[e.jsx(H,{variant:"secondary",icon:Ct,iconPosition:"right",onClick:i,disabled:O,children:"إلغاء"}),e.jsx(H,{variant:"primary",icon:O?void 0:ir,iconPosition:"right",type:"submit",disabled:O,loading:O,children:P?"حفظ التغييرات":"إضافة فرد العائلة"})]})}),e.jsx(V,{className:"bg-purple-50 border-purple-200",children:e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[e.jsx(yt,{className:"w-5 h-5 text-purple-600 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-purple-800 mb-3",children:"تعليمات إضافة فرد العائلة"}),e.jsxs("ul",{className:"text-sm text-purple-700 space-y-2",children:[e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("span",{children:["سيتم ربط الفرد الجديد بعائلة ",(g==null?void 0:g.name)||"المحددة"]})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"سيتم استخدام عنوان العائلة كعنوان افتراضي"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:'سيتم تعيين حالة "بانتظار التوثيق" للفرد الجديد'})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"يمكن تعديل العنوان لاحقاً من قائمة المستفيدين"})]}),e.jsxs("li",{className:"flex items-start space-x-2 space-x-reverse",children:[e.jsx(ge,{className:"w-4 h-4 text-orange-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"لا يمكن إضافة أشخاص متزوجين كأفراد في الأسرة"})]})]})]})]})})]})})}function nN({onNavigateBack:t}){const{loggedInUser:s,logout:r}=li(),[i,o]=E.useState("overview"),[c,u]=E.useState(""),[h,x]=E.useState(!1),[j,w]=E.useState("add"),[T,S]=E.useState(null),[N,P]=E.useState(""),g=Sn,M=s.associatedId&&g.find(z=>z.id===s.associatedId)||g[0],v=M?tj(M.id):[];M&&is.filter(z=>z.familyId===M.id),M&&at.filter(z=>{const Q=is.find(de=>de.id===z.packageId);return(Q==null?void 0:Q.familyId)===M.id});const y=[{id:"overview",name:"نظرة عامة",icon:gt},{id:"beneficiaries",name:"أفراد العائلة",icon:Te},{id:"packages",name:"الطرود",icon:Ee},{id:"tasks",name:"متابعة التوزيع",icon:$e},{id:"alerts",name:"التنبيهات",icon:ts}],k=z=>{w("add"),S(null),P(z),x(!0)},C=z=>{w("edit"),S(z),P("member"),x(!0)},R=z=>{w("view"),S(z),P("member"),x(!0)},O=z=>{if(j==="add"){const Q={id:`member-${Date.now()}`,name:z.name||"",fullName:z.fullName||"",nationalId:z.nationalId||"",dateOfBirth:z.dateOfBirth||"",gender:z.gender||"male",phone:z.phone||"",address:z.address||"",detailedAddress:z.detailedAddress||{governorate:"",city:"",district:"",street:"",additionalInfo:""},location:z.location||{lat:31.3469,lng:34.3029},familyId:M==null?void 0:M.id,relationToFamily:z.relationToFamily,profession:z.profession||"",maritalStatus:z.maritalStatus||"single",economicLevel:z.economicLevel||"poor",membersCount:z.membersCount||1,additionalDocuments:[],identityStatus:"pending",status:"active",eligibilityStatus:"under_review",lastReceived:new Date().toISOString().split("T")[0],totalPackages:0,notes:z.notes||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"family_admin",updatedBy:"family_admin"};Se.unshift(Q),alert(`تم إضافة ${z.name} بنجاح كفرد جديد في العائلة`)}else if(j==="edit"&&T){const Q=Se.findIndex(de=>de.id===T.id);Q!==-1&&(Se[Q]={...Se[Q],...z,updatedAt:new Date().toISOString(),updatedBy:"family_admin"},alert(`تم تحديث بيانات ${z.name} بنجاح`))}x(!1),S(null),P("")},p=()=>{x(!1),S(null),P("")},I=z=>{confirm(`هل تريد الاتصال بالرقم ${z}؟`)&&window.open(`tel:${z}`)},W=v.filter(z=>z.name.toLowerCase().includes(c.toLowerCase())||z.nationalId.includes(c));return e.jsxs("div",{className:"min-h-screen bg-gray-50/30 flex",dir:"rtl",children:[e.jsxs("div",{className:"w-64 bg-white border-l border-gray-200 flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-50 rounded-lg flex items-center justify-center",children:e.jsx(Te,{className:"w-4 h-4 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"لوحة العائلات"}),e.jsx("p",{className:"text-sm text-gray-500",children:(M==null?void 0:M.name)||"غير محدد"})]})]})}),e.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:y.map(z=>{const Q=z.icon,de=i===z.id;return e.jsxs("button",{onClick:()=>o(z.id),className:`w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-lg text-sm font-medium transition-colors ${de?"bg-purple-50 text-purple-700 border-l-2 border-purple-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx(Q,{className:`w-4 h-4 ${de?"text-purple-600":""}`}),e.jsx("span",{children:z.name})]},z.id)})}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("div",{className:"bg-purple-50 border border-purple-200 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-purple-800 mb-2",children:"معلومات العائلة"}),M?e.jsxs("div",{className:"space-y-1 text-xs text-purple-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"أفراد العائلة:"}),e.jsx("span",{className:"font-medium",children:M.membersCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"الطرود الموزعة:"}),e.jsx("span",{className:"font-medium",children:M.packagesDistributed})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"نسبة الإنجاز:"}),e.jsxs("span",{className:"font-medium",children:[M.completionRate,"%"]})]})]}):e.jsx("div",{className:"text-xs text-purple-700 text-center",children:e.jsx("p",{children:"لا توجد بيانات متاحة"})})]})})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"p-6",children:[i==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:(M==null?void 0:M.name)||"غير محدد"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"إدارة أفراد العائلة والمساعدات"})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse",children:[e.jsx(H,{variant:"secondary",children:"تحديث البيانات"}),e.jsx(H,{variant:"primary",icon:Ut,iconPosition:"right",children:"تقرير العائلة"})]})]}),M&&e.jsx(V,{className:"bg-purple-600 text-white border-purple-700",children:e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(yt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold mb-2",children:["مرحباً بعائلة ",M.name.split(" ")[2]||M.name]}),e.jsx("p",{className:"text-purple-100",children:"نشكرك على مساعدتك في دعم المحتاجين من أفراد عائلتك"}),e.jsxs("p",{className:"text-purple-200 text-sm mt-1",children:["رب الأسرة: ",M.headOfFamily]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(vs,{title:"أفراد العائلة",value:(M==null?void 0:M.membersCount)||0,icon:Te,trend:{value:"جميعهم مسجلون",direction:"up",label:""},color:"purple"}),e.jsx(vs,{title:"الطرود المقدمة",value:(M==null?void 0:M.packagesDistributed)||0,icon:Ee,trend:{value:"+5 هذا الشهر",direction:"up",label:""},color:"blue"}),e.jsx(vs,{title:"الطرود الموزعة",value:M?Math.floor(M.packagesDistributed*M.completionRate/100):0,icon:St,trend:{value:`نسبة التوزيع ${(M==null?void 0:M.completionRate)||0}%`,direction:"up",label:""},color:"green"}),e.jsx(vs,{title:"الطرود المعلقة",value:M?M.packagesDistributed-Math.floor(M.packagesDistributed*M.completionRate/100):0,icon:ts,trend:{value:"تحتاج متابعة",direction:"down",label:""},color:"orange"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs(V,{hover:!0,children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-50 rounded-lg flex items-center justify-center",children:e.jsx(Ms,{className:"w-4 h-4 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"إضافة فرد للعائلة"})]}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:"أضف فرد جديد من العائلة لقائمة المستفيدين"}),e.jsx(H,{variant:"primary",icon:Lt,iconPosition:"right",onClick:()=>k("member"),className:"w-full",children:"إضافة فرد جديد"})]}),e.jsxs(V,{hover:!0,children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-green-50 rounded-lg flex items-center justify-center",children:e.jsx(Ee,{className:"w-4 h-4 text-green-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"تحديد طرد للتوزيع"})]}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:"حدد الطرود المراد توزيعها على أفراد العائلة"}),e.jsx(H,{variant:"success",icon:Lt,iconPosition:"right",onClick:()=>k("package"),className:"w-full",children:"تحديد طرد"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs(V,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"آخر الأنشطة"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse p-3 rounded-lg bg-green-50 border border-green-200",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(ne,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"تم تسليم طرد مواد غذائية لخالد الغزاوي"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"منذ ساعتين"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse p-3 rounded-lg bg-blue-50 border border-blue-200",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Jt,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"تحديث بيانات أحمد الغزاوي"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"أمس"}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"تم تحديث العنوان"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4 space-x-reverse p-3 rounded-xl bg-purple-50 border border-purple-100",children:[e.jsx("div",{className:"bg-purple-100 p-2 rounded-full",children:e.jsx(Ee,{className:"w-4 h-4 text-purple-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"إضافة طرد ملابس شتوية للعائلة"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"منذ يومين"}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"جاهز للتوزيع"})]})]}),e.jsxs("div",{className:"flex items-start space-x-4 space-x-reverse p-3 rounded-xl bg-orange-50 border border-orange-100",children:[e.jsx("div",{className:"bg-orange-100 p-2 rounded-full",children:e.jsx(ge,{className:"w-4 h-4 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"تنبيه: طرد فاطمة الغزاوي متأخر"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"منذ 3 أيام"})]})]})]}),e.jsx(H,{variant:"ghost",size:"sm",className:"w-full mt-4",children:"عرض جميع الأنشطة"})]}),e.jsxs(V,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"خريطة أفراد العائلة"}),e.jsxs("div",{className:"bg-gray-50 rounded-lg h-64 flex items-center justify-center relative",children:[e.jsxs("div",{className:"text-center z-10",children:[e.jsx(At,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"مواقع أفراد العائلة"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[(M==null?void 0:M.membersCount)||0," فرد في مناطق مختلفة"]})]}),e.jsx("div",{className:"absolute top-16 left-16 w-2 h-2 bg-purple-500 rounded-full"}),e.jsx("div",{className:"absolute top-24 right-20 w-2 h-2 bg-green-500 rounded-full"}),e.jsx("div",{className:"absolute bottom-16 left-24 w-2 h-2 bg-orange-500 rounded-full"}),e.jsx("div",{className:"absolute bottom-24 right-16 w-2 h-2 bg-blue-500 rounded-full"})]})]})]}),e.jsxs(V,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"التنبيهات"}),e.jsx(Ne,{variant:"warning",children:"2 تنبيه"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx(ge,{className:"w-5 h-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"طرد متأخر"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"طرد فاطمة الغزاوي لم يتم استلامه"})]})]}),e.jsx(H,{variant:"warning",size:"sm",children:"متابعة"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx(Ee,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"طرد جاهز للتوزيع"}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"طرد محمد الغزاوي جاهز للإرسال"})]})]}),e.jsx(H,{variant:"primary",size:"sm",children:"إرسال"})]})]})]})]}),i==="beneficiaries"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"أفراد العائلة المستفيدين"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["إدارة مستفيدي ",(M==null?void 0:M.name)||"العائلة"]})]}),e.jsx("div",{className:"flex space-x-3 space-x-reverse",children:e.jsxs("button",{onClick:()=>k("member"),className:"bg-purple-600 text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-purple-700 transition-colors flex items-center shadow-lg",children:[e.jsx(Lt,{className:"w-4 h-4 ml-2"}),"إضافة فرد جديد"]})})]}),e.jsx("div",{className:"bg-white p-4 rounded-xl border border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[e.jsx("div",{className:"flex-1 relative",children:e.jsx(be,{type:"text",icon:Tt,iconPosition:"right",value:c,onChange:z=>u(z.target.value),className:"flex-1"})}),e.jsx(H,{variant:"secondary",icon:Ln,iconPosition:"right",size:"sm",children:"فلترة"})]})}),M?e.jsx(V,{padding:"none",className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الاسم"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"صلة القرابة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"رقم الهاتف"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"آخر استلام"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:W.length>0?W.map(z=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-50 rounded-lg flex items-center justify-center ml-3",children:z.isHeadOfFamily?e.jsx(Crown,{className:"w-4 h-4 text-blue-600"}):z.relationToFamily==="زوجة"?e.jsx(yt,{className:"w-4 h-4 text-pink-600"}):e.jsx(Te,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:z.name}),z.isHeadOfFamily&&e.jsx(Ne,{variant:"info",size:"sm",children:"رب الأسرة"}),z.medicalConditions.length>0&&e.jsxs(Ne,{variant:"warning",size:"sm",children:[z.medicalConditions.length," حالة مرضية"]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:z.address.split(" - ")[1]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.isHeadOfFamily?"رب الأسرة":z.relationToFamily||"فرد من العائلة"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:z.phone}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(z.lastReceived).toLocaleDateString("en-CA")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(Ne,{variant:z.status==="active"?"success":z.status==="pending"?"warning":"error",size:"sm",children:z.status==="active"?"تم التسليم":z.status==="pending"?"لم يتم الاستلام":"معلق"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e.jsx("button",{onClick:()=>R(z),className:"p-1.5 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"عرض السجل",children:e.jsx(vt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>C(z),className:"p-1.5 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"تعديل",children:e.jsx(Jt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>I(z.phone),className:"p-1.5 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"اتصال",children:e.jsx(qr,{className:"w-4 h-4"})})]})})]},z.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(Te,{className:"w-8 h-8 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"text-sm mt-2",children:"لم يتم إضافة أي أفراد لهذه العائلة بعد"})]})})})})]})}):e.jsx(V,{className:"bg-gray-50 p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Te,{className:"w-8 h-8 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"text-sm mt-2",children:"يرجى إضافة عائلة أولاً لعرض الأعضاء"})]})})]}),["packages","tasks","alerts"].includes(i)&&e.jsx(V,{className:"p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-4",children:[i==="packages"&&e.jsx(Ee,{className:"w-8 h-8 mx-auto mb-3"}),i==="tasks"&&e.jsx($e,{className:"w-8 h-8 mx-auto mb-3"}),i==="alerts"&&e.jsx(ts,{className:"w-8 h-8 mx-auto mb-3"})]}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["قسم ",i==="packages"?"الطرود":i==="tasks"?"متابعة التوزيع":i==="alerts"?"التنبيهات":""]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"هذا القسم قيد التطوير - سيتم إضافة التفاصيل الكاملة قريباً"}),e.jsx(H,{variant:"primary",children:"عرض التفاصيل"})]})})]})}),h&&e.jsxs(ls,{isOpen:h,onClose:()=>x(!1),title:j==="add"&&N==="member"?"إضافة فرد جديد للعائلة":j==="edit"&&N==="member"?"تعديل بيانات فرد العائلة":j==="view"&&N==="member"?"عرض تفاصيل فرد العائلة":j==="add"&&N==="package"?"تحديد طرد للتوزيع":"إجراء",size:"lg",children:[N==="member"&&(j==="add"||j==="edit")&&M&&e.jsx(sN,{familyId:M.id,member:j==="edit"?T:null,onSave:O,onCancel:p}),N==="member"&&j==="view"&&T&&e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-purple-50 p-6 rounded-xl border border-purple-200 mb-6",children:[e.jsx("h4",{className:"text-lg font-bold text-purple-800 mb-4",children:"تفاصيل فرد العائلة"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-700",children:"الاسم الكامل:"}),e.jsx("span",{className:"font-medium text-purple-900",children:T.fullName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-700",children:"رقم الهوية:"}),e.jsx("span",{className:"font-medium text-purple-900",children:T.nationalId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-700",children:"رقم الهاتف:"}),e.jsx("span",{className:"font-medium text-purple-900",children:T.phone})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-700",children:"صلة القرابة:"}),e.jsx("span",{className:"font-medium text-purple-900",children:T.relationToFamily||"فرد من العائلة"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-700",children:"المهنة:"}),e.jsx("span",{className:"font-medium text-purple-900",children:T.profession})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-700",children:"الحالة الاجتماعية:"}),e.jsx("span",{className:"font-medium text-purple-900",children:T.maritalStatus==="single"?"أعزب":T.maritalStatus==="married"?"متزوج":T.maritalStatus==="divorced"?"مطلق":"أرمل"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-700",children:"عدد الأفراد المعالين:"}),e.jsx("span",{className:"font-medium text-purple-900",children:T.membersCount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-purple-700",children:"آخر استلام:"}),e.jsx("span",{className:"font-medium text-purple-900",children:new Date(T.lastReceived).toLocaleDateString("en-CA")})]})]})]}),T.notes&&e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"text-purple-700 text-sm",children:"ملاحظات:"}),e.jsx("p",{className:"text-purple-900 mt-1 text-sm",children:T.notes})]})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-end",children:[e.jsx(H,{variant:"secondary",onClick:()=>x(!1),children:"إغلاق"}),e.jsx(H,{variant:"primary",onClick:()=>{w("edit")},children:"تعديل البيانات"})]})]}),N==="package"&&e.jsxs("div",{className:"p-6 text-center",children:[e.jsxs("div",{className:"bg-gray-100 rounded-xl p-8 mb-4",children:[e.jsx(Ee,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"نموذج تحديد طرد للتوزيع"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"سيتم تطوير هذا النموذج في المرحلة التالية"})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse justify-center",children:[e.jsx(H,{variant:"secondary",onClick:()=>x(!1),children:"إلغاء"}),e.jsx(H,{variant:"primary",children:"تحديد الطرد"})]})]})]})]})}function rN(){const[t,s]=E.useState("landing"),[r,i]=E.useState(!1),[o,c]=E.useState("overview"),u=x=>{s(x),c("overview")},h=()=>{s("landing"),c("overview")};return e.jsx(Py,{children:e.jsx(ij,{children:e.jsx(Hn,{componentName:"App",children:e.jsx(aN,{currentPage:t,activeTab:o,setActiveTab:c,handleNavigateTo:u,handleNavigateBack:h,showErrorConsole:r,setShowErrorConsole:i})})})})}function aN({currentPage:t,activeTab:s,setActiveTab:r,handleNavigateTo:i,handleNavigateBack:o,showErrorConsole:c,setShowErrorConsole:u}){const{loggedInUser:h,login:x,logout:j}=li(),w=S=>{x(S),S.roleId==="admin"||S.associatedType===null?i("admin"):S.associatedType==="organization"?i("organizations"):S.associatedType==="family"?i("families"):i("admin")},T=()=>{j(),i("landing"),r("overview")};return!h&&t!=="landing"?e.jsx(Hn,{componentName:"MockLogin",children:e.jsx(lj,{onLogin:w})}):e.jsxs("div",{className:"min-h-screen",children:[t==="landing"&&e.jsx(Hn,{componentName:"LandingPage",children:e.jsx(oj,{onNavigateTo:i})}),t==="admin"&&h&&e.jsx(Hn,{componentName:"AdminDashboard",children:e.jsx(eN,{activeTab:s,setActiveTab:r})}),t==="organizations"&&h&&e.jsx(Hn,{componentName:"OrganizationsDashboard",children:e.jsx(tN,{onNavigateBack:o})}),t==="families"&&h&&e.jsx(Hn,{componentName:"FamiliesDashboard",children:e.jsx(nN,{onNavigateBack:o})}),!1,h&&t!=="landing"&&e.jsx("button",{onClick:T,className:"fixed top-4 left-4 bg-gray-600 text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-gray-700 transition-colors z-40 flex items-center border border-gray-700",children:"تسجيل الخروج"})]})}Ap(document.getElementById("root")).render(e.jsx(E.StrictMode,{children:e.jsx(rN,{})}));
